(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function S_(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Ln={},Vc=[],Pi=()=>{},FN=()=>!1,Zm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),E_=t=>t.startsWith("onUpdate:"),nr=Object.assign,M_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},BN=Object.prototype.hasOwnProperty,sn=(t,e)=>BN.call(t,e),ht=Array.isArray,Uc=t=>kf(t)==="[object Map]",Su=t=>kf(t)==="[object Set]",TS=t=>kf(t)==="[object Date]",xt=t=>typeof t=="function",zn=t=>typeof t=="string",oa=t=>typeof t=="symbol",xn=t=>t!==null&&typeof t=="object",C_=t=>(xn(t)||xt(t))&&xt(t.then)&&xt(t.catch),HT=Object.prototype.toString,kf=t=>HT.call(t),VN=t=>kf(t).slice(8,-1),GT=t=>kf(t)==="[object Object]",A_=t=>zn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Id=S_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jm=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},UN=/-(\w)/g,ys=Jm(t=>t.replace(UN,(e,n)=>n?n.toUpperCase():"")),$N=/\B([A-Z])/g,Fl=Jm(t=>t.replace($N,"-$1").toLowerCase()),Df=Jm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gp=Jm(t=>t?`on${Df(t)}`:""),aa=(t,e)=>!Object.is(t,e),Wp=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},pm=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Yd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},WT=t=>{const e=zn(t)?Number(t):NaN;return isNaN(e)?t:e};let PS;const jT=()=>PS||(PS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Be(t){if(ht(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=zn(r)?WN(r):Be(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(zn(t)||xn(t))return t}const zN=/;(?![^(]*\))/g,HN=/:([^]+)/,GN=/\/\*[^]*?\*\//g;function WN(t){const e={};return t.replace(GN,"").split(zN).forEach(n=>{if(n){const r=n.split(HN);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qe(t){let e="";if(zn(t))e=t;else if(ht(t))for(let n=0;n<t.length;n++){const r=Qe(t[n]);r&&(e+=r+" ")}else if(xn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ue(t){if(!t)return null;let{class:e,style:n}=t;return e&&!zn(e)&&(t.class=Qe(e)),n&&(t.style=Be(n)),t}const jN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XN=S_(jN);function XT(t){return!!t||t===""}function KN(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=gl(t[r],e[r]);return n}function gl(t,e){if(t===e)return!0;let n=TS(t),r=TS(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=oa(t),r=oa(e),n||r)return t===e;if(n=ht(t),r=ht(e),n||r)return n&&r?KN(t,e):!1;if(n=xn(t),r=xn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!gl(t[o],e[o]))return!1}}return String(t)===String(e)}function T_(t,e){return t.findIndex(n=>gl(n,e))}const Ze=t=>zn(t)?t:t==null?"":ht(t)||xn(t)&&(t.toString===HT||!xt(t.toString))?JSON.stringify(t,KT,2):String(t),KT=(t,e)=>e&&e.__v_isRef?KT(t,e.value):Uc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Wg(r,s)+" =>"]=i,n),{})}:Su(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wg(n))}:oa(e)?Wg(e):xn(e)&&!ht(e)&&!GT(e)?String(e):e,Wg=(t,e="")=>{var n;return oa(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let di;class qT{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=di,!e&&di&&(this.index=(di.scopes||(di.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=di;try{return di=this,e()}finally{di=n}}}on(){di=this}off(){di=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function YT(t){return new qT(t)}function qN(t,e=di){e&&e.active&&e.effects.push(t)}function Nf(){return di}function Qm(t){di&&di.cleanups.push(t)}let cl;class P_{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,qN(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Bl();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(YN(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Vl()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Jo,n=cl;try{return Jo=!0,cl=this,this._runnings++,RS(this),this.fn()}finally{LS(this),this._runnings--,cl=n,Jo=e}}stop(){var e;this.active&&(RS(this),LS(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function YN(t){return t.value}function RS(t){t._trackId++,t._depsLength=0}function LS(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)ZT(t.deps[e],t);t.deps.length=t._depsLength}}function ZT(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Jo=!0,w0=0;const JT=[];function Bl(){JT.push(Jo),Jo=!1}function Vl(){const t=JT.pop();Jo=t===void 0?!0:t}function R_(){w0++}function L_(){for(w0--;!w0&&S0.length;)S0.shift()()}function QT(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&ZT(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const S0=[];function eP(t,e,n){R_();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&S0.push(r.scheduler)))}L_()}const tP=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},mm=new WeakMap,ul=Symbol(""),E0=Symbol("");function ri(t,e,n){if(Jo&&cl){let r=mm.get(t);r||mm.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=tP(()=>r.delete(n))),QT(cl,i)}}function Ys(t,e,n,r,i,s){const o=mm.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ht(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!oa(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ht(t)?A_(n)&&a.push(o.get("length")):(a.push(o.get(ul)),Uc(t)&&a.push(o.get(E0)));break;case"delete":ht(t)||(a.push(o.get(ul)),Uc(t)&&a.push(o.get(E0)));break;case"set":Uc(t)&&a.push(o.get(ul));break}R_();for(const l of a)l&&eP(l,4);L_()}function ZN(t,e){var n;return(n=mm.get(t))==null?void 0:n.get(e)}const JN=S_("__proto__,__v_isRef,__isVue"),nP=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(oa)),IS=QN();function QN(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Yt(this);for(let s=0,o=this.length;s<o;s++)ri(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Yt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Bl(),R_();const r=Yt(this)[e].apply(this,n);return L_(),Vl(),r}}),t}function eF(t){const e=Yt(this);return ri(e,"has",t),e.hasOwnProperty(t)}class rP{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?cP:lP:s?aP:oP).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ht(e);if(!i){if(o&&sn(IS,n))return Reflect.get(IS,n,r);if(n==="hasOwnProperty")return eF}const a=Reflect.get(e,n,r);return(oa(n)?nP.has(n):JN(n))||(i||ri(e,"get",n),s)?a:Xt(a)?o&&A_(n)?a:a.value:xn(a)?i?nv(a):Sr(a):a}}class iP extends rP{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=Zc(s);if(!vm(r)&&!Zc(r)&&(s=Yt(s),r=Yt(r)),!ht(e)&&Xt(s)&&!Xt(r))return l?!1:(s.value=r,!0)}const o=ht(e)&&A_(n)?Number(n)<e.length:sn(e,n),a=Reflect.set(e,n,r,i);return e===Yt(i)&&(o?aa(r,s)&&Ys(e,"set",n,r):Ys(e,"add",n,r)),a}deleteProperty(e,n){const r=sn(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ys(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!oa(n)||!nP.has(n))&&ri(e,"has",n),r}ownKeys(e){return ri(e,"iterate",ht(e)?"length":ul),Reflect.ownKeys(e)}}class sP extends rP{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const tF=new iP,nF=new sP,rF=new iP(!0),iF=new sP(!0),I_=t=>t,ev=t=>Reflect.getPrototypeOf(t);function wh(t,e,n=!1,r=!1){t=t.__v_raw;const i=Yt(t),s=Yt(e);n||(aa(e,s)&&ri(i,"get",e),ri(i,"get",s));const{has:o}=ev(i),a=r?I_:n?O_:Zd;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Sh(t,e=!1){const n=this.__v_raw,r=Yt(n),i=Yt(t);return e||(aa(t,i)&&ri(r,"has",t),ri(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Eh(t,e=!1){return t=t.__v_raw,!e&&ri(Yt(t),"iterate",ul),Reflect.get(t,"size",t)}function OS(t){t=Yt(t);const e=Yt(this);return ev(e).has.call(e,t)||(e.add(t),Ys(e,"add",t,t)),this}function kS(t,e){e=Yt(e);const n=Yt(this),{has:r,get:i}=ev(n);let s=r.call(n,t);s||(t=Yt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?aa(e,o)&&Ys(n,"set",t,e):Ys(n,"add",t,e),this}function DS(t){const e=Yt(this),{has:n,get:r}=ev(e);let i=n.call(e,t);i||(t=Yt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Ys(e,"delete",t,void 0),s}function NS(){const t=Yt(this),e=t.size!==0,n=t.clear();return e&&Ys(t,"clear",void 0,void 0),n}function Mh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Yt(o),l=e?I_:t?O_:Zd;return!t&&ri(a,"iterate",ul),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Ch(t,e,n){return function(...r){const i=this.__v_raw,s=Yt(i),o=Uc(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?I_:e?O_:Zd;return!e&&ri(s,"iterate",l?E0:ul),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function xo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function sF(){const t={get(s){return wh(this,s)},get size(){return Eh(this)},has:Sh,add:OS,set:kS,delete:DS,clear:NS,forEach:Mh(!1,!1)},e={get(s){return wh(this,s,!1,!0)},get size(){return Eh(this)},has:Sh,add:OS,set:kS,delete:DS,clear:NS,forEach:Mh(!1,!0)},n={get(s){return wh(this,s,!0)},get size(){return Eh(this,!0)},has(s){return Sh.call(this,s,!0)},add:xo("add"),set:xo("set"),delete:xo("delete"),clear:xo("clear"),forEach:Mh(!0,!1)},r={get(s){return wh(this,s,!0,!0)},get size(){return Eh(this,!0)},has(s){return Sh.call(this,s,!0)},add:xo("add"),set:xo("set"),delete:xo("delete"),clear:xo("clear"),forEach:Mh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Ch(s,!1,!1),n[s]=Ch(s,!0,!1),e[s]=Ch(s,!1,!0),r[s]=Ch(s,!0,!0)}),[t,n,e,r]}const[oF,aF,lF,cF]=sF();function tv(t,e){const n=e?t?cF:lF:t?aF:oF;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(sn(n,i)&&i in r?n:r,i,s)}const uF={get:tv(!1,!1)},dF={get:tv(!1,!0)},fF={get:tv(!0,!1)},hF={get:tv(!0,!0)},oP=new WeakMap,aP=new WeakMap,lP=new WeakMap,cP=new WeakMap;function pF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mF(t){return t.__v_skip||!Object.isExtensible(t)?0:pF(VN(t))}function Sr(t){return Zc(t)?t:rv(t,!1,tF,uF,oP)}function ga(t){return rv(t,!1,rF,dF,aP)}function nv(t){return rv(t,!0,nF,fF,lP)}function Xa(t){return rv(t,!0,iF,hF,cP)}function rv(t,e,n,r,i){if(!xn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=mF(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Qo(t){return Zc(t)?Qo(t.__v_raw):!!(t&&t.__v_isReactive)}function Zc(t){return!!(t&&t.__v_isReadonly)}function vm(t){return!!(t&&t.__v_isShallow)}function uP(t){return Qo(t)||Zc(t)}function Yt(t){const e=t&&t.__v_raw;return e?Yt(e):t}function iv(t){return Object.isExtensible(t)&&pm(t,"__v_skip",!0),t}const Zd=t=>xn(t)?Sr(t):t,O_=t=>xn(t)?nv(t):t;class dP{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new P_(()=>e(this._value),()=>Od(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Yt(this);return(!e._cacheable||e.effect.dirty)&&aa(e._value,e._value=e.effect.run())&&Od(e,4),k_(e),e.effect._dirtyLevel>=2&&Od(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function vF(t,e,n=!1){let r,i;const s=xt(t);return s?(r=t,i=Pi):(r=t.get,i=t.set),new dP(r,i,s||!i,n)}function k_(t){var e;Jo&&cl&&(t=Yt(t),QT(cl,(e=t.dep)!=null?e:t.dep=tP(()=>t.dep=void 0,t instanceof dP?t:void 0)))}function Od(t,e=4,n){t=Yt(t);const r=t.dep;r&&eP(r,e)}function Xt(t){return!!(t&&t.__v_isRef===!0)}function le(t){return fP(t,!1)}function st(t){return fP(t,!0)}function fP(t,e){return Xt(t)?t:new gF(t,e)}class gF{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Yt(e),this._value=n?e:Zd(e)}get value(){return k_(this),this._value}set value(e){const n=this.__v_isShallow||vm(e)||Zc(e);e=n?e:Yt(e),aa(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Zd(e),Od(this,4))}}function C(t){return Xt(t)?t.value:t}const yF={get:(t,e,n)=>C(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Xt(i)&&!Xt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function hP(t){return Qo(t)?t:new Proxy(t,yF)}class bF{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>k_(this),()=>Od(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function _F(t){return new bF(t)}function kr(t){const e=ht(t)?new Array(t.length):{};for(const n in t)e[n]=pP(t,n);return e}class xF{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ZN(Yt(this._object),this._key)}}class wF{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function or(t,e,n){return Xt(t)?t:xt(t)?new wF(t):xn(t)&&arguments.length>1?pP(t,e,n):le(t)}function pP(t,e,n){const r=t[e];return Xt(r)?r:new xF(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ea(t,e,n,r){try{return r?t(...r):t()}catch(i){Ff(i,e,n)}}function ki(t,e,n,r){if(xt(t)){const s=ea(t,e,n,r);return s&&C_(s)&&s.catch(o=>{Ff(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(ki(t[s],e,n,r));return i}function Ff(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ea(l,null,10,[t,o,a]);return}}SF(t,n,i,r)}function SF(t,e,n,r=!0){console.error(t)}let Jd=!1,M0=!1;const Lr=[];let fs=0;const $c=[];let zo=null,Qa=0;const mP=Promise.resolve();let D_=null;function cn(t){const e=D_||mP;return t?e.then(this?t.bind(this):t):e}function EF(t){let e=fs+1,n=Lr.length;for(;e<n;){const r=e+n>>>1,i=Lr[r],s=Qd(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function N_(t){(!Lr.length||!Lr.includes(t,Jd&&t.allowRecurse?fs+1:fs))&&(t.id==null?Lr.push(t):Lr.splice(EF(t.id),0,t),vP())}function vP(){!Jd&&!M0&&(M0=!0,D_=mP.then(yP))}function MF(t){const e=Lr.indexOf(t);e>fs&&Lr.splice(e,1)}function C0(t){ht(t)?$c.push(...t):(!zo||!zo.includes(t,t.allowRecurse?Qa+1:Qa))&&$c.push(t),vP()}function FS(t,e,n=Jd?fs+1:0){for(;n<Lr.length;n++){const r=Lr[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Lr.splice(n,1),n--,r()}}}function gP(t){if($c.length){const e=[...new Set($c)].sort((n,r)=>Qd(n)-Qd(r));if($c.length=0,zo){zo.push(...e);return}for(zo=e,Qa=0;Qa<zo.length;Qa++)zo[Qa]();zo=null,Qa=0}}const Qd=t=>t.id==null?1/0:t.id,CF=(t,e)=>{const n=Qd(t)-Qd(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function yP(t){M0=!1,Jd=!0,Lr.sort(CF);try{for(fs=0;fs<Lr.length;fs++){const e=Lr[fs];e&&e.active!==!1&&ea(e,null,14)}}finally{fs=0,Lr.length=0,gP(),Jd=!1,D_=null,(Lr.length||$c.length)&&yP()}}function AF(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ln;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=r[u]||Ln;f&&(i=n.map(h=>zn(h)?h.trim():h)),d&&(i=n.map(Yd))}let a,l=r[a=Gp(e)]||r[a=Gp(ys(e))];!l&&s&&(l=r[a=Gp(Fl(e))]),l&&ki(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ki(c,t,6,i)}}function bP(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!xt(t)){const l=c=>{const u=bP(c,e,!0);u&&(a=!0,nr(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(xn(t)&&r.set(t,null),null):(ht(s)?s.forEach(l=>o[l]=null):nr(o,s),xn(t)&&r.set(t,o),o)}function sv(t,e){return!t||!Zm(e)?!1:(e=e.slice(2).replace(/Once$/,""),sn(t,e[0].toLowerCase()+e.slice(1))||sn(t,Fl(e))||sn(t,e))}let er=null,ov=null;function gm(t){const e=er;return er=t,ov=t&&t.type.__scopeId||null,e}function TF(t){ov=t}function PF(){ov=null}function we(t,e=er,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&ZS(-1);const s=gm(e);let o;try{o=t(...i)}finally{gm(s),r._d&&ZS(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jg(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=t;let m,v;const b=gm(t);try{if(n.shapeFlag&4){const E=i||r,T=E;m=Wi(u.call(T,E,d,s,h,f,p)),v=l}else{const E=e;m=Wi(E.length>1?E(s,{attrs:l,slots:a,emit:c}):E(s,null)),v=e.props?l:LF(l)}}catch(E){Fd.length=0,Ff(E,t,1),m=ke(Ir)}let y=m;if(v&&g!==!1){const E=Object.keys(v),{shapeFlag:T}=y;E.length&&T&7&&(o&&E.some(E_)&&(v=IF(v,o)),y=la(y,v))}return n.dirs&&(y=la(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),m=y,gm(b),m}function RF(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(yl(i)){if(i.type!==Ir||i.children==="v-if"){if(n)return;n=i}}else return}return n}const LF=t=>{let e;for(const n in t)(n==="class"||n==="style"||Zm(n))&&((e||(e={}))[n]=t[n]);return e},IF=(t,e)=>{const n={};for(const r in t)(!E_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function OF(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?BS(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!sv(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?BS(r,o,c):!0:!!o;return!1}function BS(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!sv(n,s))return!0}return!1}function F_({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const B_="components";function Ur(t,e){return xP(B_,t,!0,e)||t}const _P=Symbol.for("v-ndc");function mr(t){return zn(t)?xP(B_,t,!1)||t:t||_P}function xP(t,e,n=!0,r=!1){const i=er||hr;if(i){const s=i.type;if(t===B_){const a=TB(s,!1);if(a&&(a===e||a===ys(e)||a===Df(ys(e))))return s}const o=VS(i[t]||s[t],e)||VS(i.appContext[t],e);return!o&&r?s:o}}function VS(t,e){return t&&(t[e]||t[ys(e)]||t[Df(ys(e))])}const kF=t=>t.__isSuspense;let A0=0;const DF={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)NF(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}FF(t,e,n,r,i,o,a,l,c)}},hydrate:BF,create:U_,normalize:VF},V_=DF;function ef(t,e){const n=t.props&&t.props[e];xt(n)&&n()}function NF(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=U_(t,i,r,e,d,n,s,o,a,l);c(null,f.pendingBranch=t.ssContent,d,null,r,f,s,o),f.deps>0?(ef(t,"onPending"),ef(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),zc(f,t.ssFallback)):f.resolve(!1,!0)}function FF(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:m,isHydrating:v}=d;if(g)d.pendingBranch=f,hs(f,g)?(l(g,f,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():m&&(v||(l(p,h,n,r,i,null,s,o,a),zc(d,h)))):(d.pendingId=A0++,v?(d.isHydrating=!1,d.activeBranch=g):c(g,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),m?(l(null,f,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():(l(p,h,n,r,i,null,s,o,a),zc(d,h))):p&&hs(f,p)?(l(p,f,n,r,i,d,s,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0&&d.resolve()));else if(p&&hs(f,p))l(p,f,n,r,i,d,s,o,a),zc(d,f);else if(ef(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=A0++,l(null,f,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:b,pendingId:y}=d;b>0?setTimeout(()=>{d.pendingId===y&&d.fallback(h)},b):b===0&&d.fallback(h)}}function U_(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:d,m:f,um:h,n:p,o:{parentNode:g,remove:m}}=c;let v;const b=$F(t);b&&e!=null&&e.pendingBranch&&(v=e.pendingId,e.deps++);const y=t.props?WT(t.props.timeout):void 0,E=s,T={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:A0++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(_=!1,w=!1){const{vnode:M,activeBranch:x,pendingBranch:S,pendingId:R,effects:I,parentComponent:z,container:P}=T;let B=!1;T.isHydrating?T.isHydrating=!1:_||(B=x&&S.transition&&S.transition.mode==="out-in",B&&(x.transition.afterLeave=()=>{R===T.pendingId&&(f(S,P,s===E?p(x):s,0),C0(I))}),x&&(g(x.el)!==T.hiddenContainer&&(s=p(x)),h(x,z,T,!0)),B||f(S,P,s,0)),zc(T,S),T.pendingBranch=null,T.isInFallback=!1;let U=T.parent,j=!1;for(;U;){if(U.pendingBranch){U.effects.push(...I),j=!0;break}U=U.parent}!j&&!B&&C0(I),T.effects=[],b&&e&&e.pendingBranch&&v===e.pendingId&&(e.deps--,e.deps===0&&!w&&e.resolve()),ef(M,"onResolve")},fallback(_){if(!T.pendingBranch)return;const{vnode:w,activeBranch:M,parentComponent:x,container:S,namespace:R}=T;ef(w,"onFallback");const I=p(M),z=()=>{T.isInFallback&&(d(null,_,S,I,x,null,R,a,l),zc(T,_))},P=_.transition&&_.transition.mode==="out-in";P&&(M.transition.afterLeave=z),T.isInFallback=!0,h(M,x,null,!0),P||z()},move(_,w,M){T.activeBranch&&f(T.activeBranch,_,w,M),T.container=_},next(){return T.activeBranch&&p(T.activeBranch)},registerDep(_,w){const M=!!T.pendingBranch;M&&T.deps++;const x=_.vnode.el;_.asyncDep.catch(S=>{Ff(S,_,0)}).then(S=>{if(_.isUnmounted||T.isUnmounted||T.pendingId!==_.suspenseId)return;_.asyncResolved=!0;const{vnode:R}=_;F0(_,S,!1),x&&(R.el=x);const I=!x&&_.subTree.el;w(_,R,g(x||_.subTree.el),x?null:p(_.subTree),T,o,l),I&&m(I),F_(_,R.el),M&&--T.deps===0&&T.resolve()})},unmount(_,w){T.isUnmounted=!0,T.activeBranch&&h(T.activeBranch,n,_,w),T.pendingBranch&&h(T.pendingBranch,n,_,w)}};return T}function BF(t,e,n,r,i,s,o,a,l){const c=e.suspense=U_(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function VF(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=US(r?n.default:n),t.ssFallback=r?US(n.fallback):ke(Ir)}function US(t){let e;if(xt(t)){const n=Jc&&t._c;n&&(t._d=!1,V()),t=t(),n&&(t._d=!0,e=Ri,VP())}return ht(t)&&(t=RF(t)),t=Wi(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function UF(t,e){e&&e.pendingBranch?ht(t)?e.effects.push(...t):e.effects.push(t):C0(t)}function zc(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,F_(r,i))}function $F(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const zF=Symbol.for("v-scx"),HF=()=>Zn(zF);function Yn(t,e){return $_(t,null,e)}const Ah={};function De(t,e,n){return $_(t,e,n)}function $_(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=Ln){if(e&&s){const _=e;e=(...w)=>{_(...w),T()}}const l=hr,c=_=>r===!0?_:tl(_,r===!1?1:void 0);let u,d=!1,f=!1;if(Xt(t)?(u=()=>t.value,d=vm(t)):Qo(t)?(u=()=>c(t),d=!0):ht(t)?(f=!0,d=t.some(_=>Qo(_)||vm(_)),u=()=>t.map(_=>{if(Xt(_))return _.value;if(Qo(_))return c(_);if(xt(_))return ea(_,l,2)})):xt(t)?e?u=()=>ea(t,l,2):u=()=>(h&&h(),ki(t,l,3,[p])):u=Pi,e&&r){const _=u;u=()=>tl(_())}let h,p=_=>{h=y.onStop=()=>{ea(_,l,4),h=y.onStop=void 0}},g;if(fv)if(p=Pi,e?n&&ki(e,l,3,[u(),f?[]:void 0,p]):u(),i==="sync"){const _=HF();g=_.__watcherHandles||(_.__watcherHandles=[])}else return Pi;let m=f?new Array(t.length).fill(Ah):Ah;const v=()=>{if(!(!y.active||!y.dirty))if(e){const _=y.run();(r||d||(f?_.some((w,M)=>aa(w,m[M])):aa(_,m)))&&(h&&h(),ki(e,l,3,[_,m===Ah?void 0:f&&m[0]===Ah?[]:m,p]),m=_)}else y.run()};v.allowRecurse=!!e;let b;i==="sync"?b=v:i==="post"?b=()=>Zr(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),b=()=>N_(v));const y=new P_(u,Pi,b),E=Nf(),T=()=>{y.stop(),E&&M_(E.effects,y)};return e?n?v():m=y.run():i==="post"?Zr(y.run.bind(y),l&&l.suspense):y.run(),g&&g.push(T),T}function GF(t,e,n){const r=this.proxy,i=zn(t)?t.includes(".")?wP(r,t):()=>r[t]:t.bind(r,r);let s;xt(e)?s=e:(s=e.handler,n=e);const o=bl(this),a=$_(i,s.bind(r),n);return o(),a}function wP(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function tl(t,e,n=0,r){if(!xn(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),Xt(t))tl(t.value,e,n,r);else if(ht(t))for(let i=0;i<t.length;i++)tl(t[i],e,n,r);else if(Su(t)||Uc(t))t.forEach(i=>{tl(i,e,n,r)});else if(GT(t))for(const i in t)tl(t[i],e,n,r);return t}function Fi(t,e){if(er===null)return t;const n=hv(er)||er.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Ln]=e[i];s&&(xt(s)&&(s={mounted:s,updated:s}),s.deep&&tl(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Pa(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Bl(),ki(l,n,8,[t.el,a,t,e]),Vl())}}const Ho=Symbol("_leaveCb"),Th=Symbol("_enterCb");function SP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return kt(()=>{t.isMounted=!0}),Sn(()=>{t.isUnmounting=!0}),t}const Si=[Function,Array],EP={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Si,onEnter:Si,onAfterEnter:Si,onEnterCancelled:Si,onBeforeLeave:Si,onLeave:Si,onAfterLeave:Si,onLeaveCancelled:Si,onBeforeAppear:Si,onAppear:Si,onAfterAppear:Si,onAppearCancelled:Si},WF={name:"BaseTransition",props:EP,setup(t,{slots:e}){const n=on(),r=SP();return()=>{const i=e.default&&z_(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const f of i)if(f.type!==Ir){s=f;break}}const o=Yt(t),{mode:a}=o;if(r.isLeaving)return Xg(s);const l=$S(s);if(!l)return Xg(s);const c=tf(l,o,r,n);nf(l,c);const u=n.subTree,d=u&&$S(u);if(d&&d.type!==Ir&&!hs(l,d)){const f=tf(d,o,r,n);if(nf(d,f),a==="out-in")return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Xg(s);a==="in-out"&&l.type!==Ir&&(f.delayLeave=(h,p,g)=>{const m=MP(r,d);m[String(d.key)]=d,h[Ho]=()=>{p(),h[Ho]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return s}}},jF=WF;function MP(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function tf(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:b}=e,y=String(t.key),E=MP(n,t),T=(M,x)=>{M&&ki(M,r,9,x)},_=(M,x)=>{const S=x[1];T(M,x),ht(M)?M.every(R=>R.length<=1)&&S():M.length<=1&&S()},w={mode:s,persisted:o,beforeEnter(M){let x=a;if(!n.isMounted)if(i)x=g||a;else return;M[Ho]&&M[Ho](!0);const S=E[y];S&&hs(t,S)&&S.el[Ho]&&S.el[Ho](),T(x,[M])},enter(M){let x=l,S=c,R=u;if(!n.isMounted)if(i)x=m||l,S=v||c,R=b||u;else return;let I=!1;const z=M[Th]=P=>{I||(I=!0,P?T(R,[M]):T(S,[M]),w.delayedLeave&&w.delayedLeave(),M[Th]=void 0)};x?_(x,[M,z]):z()},leave(M,x){const S=String(t.key);if(M[Th]&&M[Th](!0),n.isUnmounting)return x();T(d,[M]);let R=!1;const I=M[Ho]=z=>{R||(R=!0,x(),z?T(p,[M]):T(h,[M]),M[Ho]=void 0,E[S]===t&&delete E[S])};E[S]=t,f?_(f,[M,I]):I()},clone(M){return tf(M,e,n,r)}};return w}function Xg(t){if(av(t))return t=la(t),t.children=null,t}function $S(t){return av(t)?t.children?t.children[0]:void 0:t}function nf(t,e){t.shapeFlag&6&&t.component?nf(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function z_(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===qe?(o.patchFlag&128&&i++,r=r.concat(z_(o.children,e,a))):(e||o.type!==Ir)&&r.push(a!=null?la(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Me(t,e){return xt(t)?nr({name:t.name},e,{setup:t}):t}const kd=t=>!!t.type.__asyncLoader,av=t=>t.type.__isKeepAlive;function XF(t,e){CP(t,"a",e)}function KF(t,e){CP(t,"da",e)}function CP(t,e,n=hr){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(lv(e,r,n),n){let i=n.parent;for(;i&&i.parent;)av(i.parent.vnode)&&qF(r,e,n,i),i=i.parent}}function qF(t,e,n,r){const i=lv(e,t,r,!0);ya(()=>{M_(r[e],i)},n)}function lv(t,e,n=hr,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Bl();const a=bl(n),l=ki(e,n,t,o);return a(),Vl(),l});return r?i.unshift(s):i.push(s),s}}const co=t=>(e,n=hr)=>(!fv||t==="sp")&&lv(t,(...r)=>e(...r),n),H_=co("bm"),kt=co("m"),G_=co("bu"),cv=co("u"),Sn=co("bum"),ya=co("um"),YF=co("sp"),ZF=co("rtg"),JF=co("rtc");function QF(t,e=hr){lv("ec",t,e)}function vt(t,e,n,r){let i;const s=n&&n[r];if(ht(t)||zn(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(xn(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Er(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ht(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function se(t,e,n={},r,i){if(er.isCE||er.parent&&kd(er.parent)&&er.parent.isCE)return e!=="default"&&(n.name=e),ke("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),V();const o=s&&AP(s(n)),a=Te(qe,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function AP(t){return t.some(e=>yl(e)?!(e.type===Ir||e.type===qe&&!AP(e.children)):!0)?t:null}function mi(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Gp(r)]=t[r];return n}const T0=t=>t?zP(t)?hv(t)||t.proxy:T0(t.parent):null,Dd=nr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>T0(t.parent),$root:t=>T0(t.root),$emit:t=>t.emit,$options:t=>W_(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,N_(t.update)}),$nextTick:t=>t.n||(t.n=cn.bind(t.proxy)),$watch:t=>GF.bind(t)}),Kg=(t,e)=>t!==Ln&&!t.__isScriptSetup&&sn(t,e),eB={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Kg(r,e))return o[e]=1,r[e];if(i!==Ln&&sn(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&sn(c,e))return o[e]=3,s[e];if(n!==Ln&&sn(n,e))return o[e]=4,n[e];R0&&(o[e]=0)}}const u=Dd[e];let d,f;if(u)return e==="$attrs"&&ri(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ln&&sn(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,sn(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Kg(i,e)?(i[e]=n,!0):r!==Ln&&sn(r,e)?(r[e]=n,!0):sn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Ln&&sn(t,o)||Kg(e,o)||(a=s[0])&&sn(a,o)||sn(r,o)||sn(Dd,o)||sn(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:sn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Cr(){return TP().slots}function ba(){return TP().attrs}function TP(){const t=on();return t.setupContext||(t.setupContext=GP(t))}function P0(t){return ht(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function tB(t,e){const n=P0(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?ht(i)||xt(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function uv(t){const e=on();let n=t();return N0(),C_(n)&&(n=n.catch(r=>{throw bl(e),r})),[n,()=>bl(e)]}let R0=!0;function nB(t){const e=W_(t),n=t.proxy,r=t.ctx;R0=!1,e.beforeCreate&&zS(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:y,unmounted:E,render:T,renderTracked:_,renderTriggered:w,errorCaptured:M,serverPrefetch:x,expose:S,inheritAttrs:R,components:I,directives:z,filters:P}=e;if(c&&rB(c,r,null),o)for(const j in o){const Z=o[j];xt(Z)&&(r[j]=Z.bind(n))}if(i){const j=i.call(n,n);xn(j)&&(t.data=Sr(j))}if(R0=!0,s)for(const j in s){const Z=s[j],ne=xt(Z)?Z.bind(n,n):xt(Z.get)?Z.get.bind(n,n):Pi,K=!xt(Z)&&xt(Z.set)?Z.set.bind(n):Pi,fe=A({get:ne,set:K});Object.defineProperty(r,j,{enumerable:!0,configurable:!0,get:()=>fe.value,set:Se=>fe.value=Se})}if(a)for(const j in a)PP(a[j],r,n,j);if(l){const j=xt(l)?l.call(n):l;Reflect.ownKeys(j).forEach(Z=>{Mr(Z,j[Z])})}u&&zS(u,t,"c");function U(j,Z){ht(Z)?Z.forEach(ne=>j(ne.bind(n))):Z&&j(Z.bind(n))}if(U(H_,d),U(kt,f),U(G_,h),U(cv,p),U(XF,g),U(KF,m),U(QF,M),U(JF,_),U(ZF,w),U(Sn,b),U(ya,E),U(YF,x),ht(S))if(S.length){const j=t.exposed||(t.exposed={});S.forEach(Z=>{Object.defineProperty(j,Z,{get:()=>n[Z],set:ne=>n[Z]=ne})})}else t.exposed||(t.exposed={});T&&t.render===Pi&&(t.render=T),R!=null&&(t.inheritAttrs=R),I&&(t.components=I),z&&(t.directives=z)}function rB(t,e,n=Pi){ht(t)&&(t=L0(t));for(const r in t){const i=t[r];let s;xn(i)?"default"in i?s=Zn(i.from||r,i.default,!0):s=Zn(i.from||r):s=Zn(i),Xt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zS(t,e,n){ki(ht(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function PP(t,e,n,r){const i=r.includes(".")?wP(n,r):()=>n[r];if(zn(t)){const s=e[t];xt(s)&&De(i,s)}else if(xt(t))De(i,t.bind(n));else if(xn(t))if(ht(t))t.forEach(s=>PP(s,e,n,r));else{const s=xt(t.handler)?t.handler.bind(n):e[t.handler];xt(s)&&De(i,s,t)}}function W_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>ym(l,c,o,!0)),ym(l,e,o)),xn(e)&&s.set(e,l),l}function ym(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&ym(t,s,n,!0),i&&i.forEach(o=>ym(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=iB[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const iB={data:HS,props:GS,emits:GS,methods:Td,computed:Td,beforeCreate:Br,created:Br,beforeMount:Br,mounted:Br,beforeUpdate:Br,updated:Br,beforeDestroy:Br,beforeUnmount:Br,destroyed:Br,unmounted:Br,activated:Br,deactivated:Br,errorCaptured:Br,serverPrefetch:Br,components:Td,directives:Td,watch:oB,provide:HS,inject:sB};function HS(t,e){return e?t?function(){return nr(xt(t)?t.call(this,this):t,xt(e)?e.call(this,this):e)}:e:t}function sB(t,e){return Td(L0(t),L0(e))}function L0(t){if(ht(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Br(t,e){return t?[...new Set([].concat(t,e))]:e}function Td(t,e){return t?nr(Object.create(null),t,e):e}function GS(t,e){return t?ht(t)&&ht(e)?[...new Set([...t,...e])]:nr(Object.create(null),P0(t),P0(e??{})):e}function oB(t,e){if(!t)return e;if(!e)return t;const n=nr(Object.create(null),t);for(const r in e)n[r]=Br(t[r],e[r]);return n}function RP(){return{app:null,config:{isNativeTag:FN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aB=0;function lB(t,e){return function(r,i=null){xt(r)||(r=nr({},r)),i!=null&&!xn(i)&&(i=null);const s=RP(),o=new WeakSet;let a=!1;const l=s.app={_uid:aB++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:RB,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&xt(c.install)?(o.add(c),c.install(l,...u)):xt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!a){const f=ke(r,i);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,hv(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Hc;Hc=l;try{return c()}finally{Hc=u}}};return l}}let Hc=null;function Mr(t,e){if(hr){let n=hr.provides;const r=hr.parent&&hr.parent.provides;r===n&&(n=hr.provides=Object.create(r)),n[t]=e}}function Zn(t,e,n=!1){const r=hr||er;if(r||Hc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Hc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&xt(e)?e.call(r&&r.proxy):e}}function cB(){return!!(hr||er||Hc)}function uB(t,e,n,r=!1){const i={},s={};pm(s,dv,1),t.propsDefaults=Object.create(null),LP(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:ga(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function dB(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Yt(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(sv(t.emitsOptions,f))continue;const h=e[f];if(l)if(sn(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const p=ys(f);i[p]=I0(l,a,p,h,t,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{LP(t,e,i,s)&&(c=!0);let u;for(const d in a)(!e||!sn(e,d)&&((u=Fl(d))===d||!sn(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=I0(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!sn(e,d))&&(delete s[d],c=!0)}c&&Ys(t,"set","$attrs")}function LP(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Id(l))continue;const c=e[l];let u;i&&sn(i,u=ys(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:sv(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Yt(n),c=a||Ln;for(let u=0;u<s.length;u++){const d=s[u];n[d]=I0(i,l,d,c[d],t,!sn(c,d))}}return o}function I0(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=sn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&xt(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=bl(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Fl(n))&&(r=!0))}return r}function IP(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!xt(t)){const u=d=>{l=!0;const[f,h]=IP(d,e,!0);nr(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return xn(t)&&r.set(t,Vc),Vc;if(ht(s))for(let u=0;u<s.length;u++){const d=ys(s[u]);WS(d)&&(o[d]=Ln)}else if(s)for(const u in s){const d=ys(u);if(WS(d)){const f=s[u],h=o[d]=ht(f)||xt(f)?{type:f}:nr({},f);if(h){const p=KS(Boolean,h.type),g=KS(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||sn(h,"default"))&&a.push(d)}}}const c=[o,a];return xn(t)&&r.set(t,c),c}function WS(t){return t[0]!=="$"&&!Id(t)}function jS(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function XS(t,e){return jS(t)===jS(e)}function KS(t,e){return ht(e)?e.findIndex(n=>XS(n,t)):xt(e)&&XS(e,t)?0:-1}const OP=t=>t[0]==="_"||t==="$stable",j_=t=>ht(t)?t.map(Wi):[Wi(t)],fB=(t,e,n)=>{if(e._n)return e;const r=we((...i)=>j_(e(...i)),n);return r._c=!1,r},kP=(t,e,n)=>{const r=t._ctx;for(const i in t){if(OP(i))continue;const s=t[i];if(xt(s))e[i]=fB(i,s,r);else if(s!=null){const o=j_(s);e[i]=()=>o}}},DP=(t,e)=>{const n=j_(e);t.slots.default=()=>n},hB=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Yt(e),pm(e,"_",n)):kP(e,t.slots={})}else t.slots={},e&&DP(t,e);pm(t.slots,dv,1)},pB=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Ln;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(nr(i,e),!n&&a===1&&delete i._):(s=!e.$stable,kP(e,i)),o=e}else e&&(DP(t,e),o={default:1});if(s)for(const a in i)!OP(a)&&o[a]==null&&delete i[a]};function O0(t,e,n,r,i=!1){if(ht(t)){t.forEach((f,h)=>O0(f,e&&(ht(e)?e[h]:e),n,r,i));return}if(kd(r)&&!i)return;const s=r.shapeFlag&4?hv(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ln?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(zn(c)?(u[c]=null,sn(d,c)&&(d[c]=null)):Xt(c)&&(c.value=null)),xt(l))ea(l,a,12,[o,u]);else{const f=zn(l),h=Xt(l);if(f||h){const p=()=>{if(t.f){const g=f?sn(d,l)?d[l]:u[l]:l.value;i?ht(g)&&M_(g,s):ht(g)?g.includes(s)||g.push(s):f?(u[l]=[s],sn(d,l)&&(d[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,sn(d,l)&&(d[l]=o)):h&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Zr(p,n)):p()}}}const Zr=UF;function NP(t){return mB(t)}function mB(t,e){const n=jT();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Pi,insertStaticContent:p}=t,g=(O,k,H,Y=null,te=null,he=null,F=void 0,D=null,Q=!!k.dynamicChildren)=>{if(O===k)return;O&&!hs(O,k)&&(Y=J(O),Se(O,te,he,!0),O=null),k.patchFlag===-2&&(Q=!1,k.dynamicChildren=null);const{type:ie,ref:pe,shapeFlag:ye}=k;switch(ie){case Eu:m(O,k,H,Y);break;case Ir:v(O,k,H,Y);break;case Yg:O==null&&b(k,H,Y,F);break;case qe:I(O,k,H,Y,te,he,F,D,Q);break;default:ye&1?T(O,k,H,Y,te,he,F,D,Q):ye&6?z(O,k,H,Y,te,he,F,D,Q):(ye&64||ye&128)&&ie.process(O,k,H,Y,te,he,F,D,Q,N)}pe!=null&&te&&O0(pe,O&&O.ref,he,k||O,!k)},m=(O,k,H,Y)=>{if(O==null)r(k.el=a(k.children),H,Y);else{const te=k.el=O.el;k.children!==O.children&&c(te,k.children)}},v=(O,k,H,Y)=>{O==null?r(k.el=l(k.children||""),H,Y):k.el=O.el},b=(O,k,H,Y)=>{[O.el,O.anchor]=p(O.children,k,H,Y,O.el,O.anchor)},y=({el:O,anchor:k},H,Y)=>{let te;for(;O&&O!==k;)te=f(O),r(O,H,Y),O=te;r(k,H,Y)},E=({el:O,anchor:k})=>{let H;for(;O&&O!==k;)H=f(O),i(O),O=H;i(k)},T=(O,k,H,Y,te,he,F,D,Q)=>{k.type==="svg"?F="svg":k.type==="math"&&(F="mathml"),O==null?_(k,H,Y,te,he,F,D,Q):x(O,k,te,he,F,D,Q)},_=(O,k,H,Y,te,he,F,D)=>{let Q,ie;const{props:pe,shapeFlag:ye,transition:Oe,dirs:re}=O;if(Q=O.el=o(O.type,he,pe&&pe.is,pe),ye&8?u(Q,O.children):ye&16&&M(O.children,Q,null,Y,te,qg(O,he),F,D),re&&Pa(O,null,Y,"created"),w(Q,O,O.scopeId,F,Y),pe){for(const Ne in pe)Ne!=="value"&&!Id(Ne)&&s(Q,Ne,null,pe[Ne],he,O.children,Y,te,ue);"value"in pe&&s(Q,"value",null,pe.value,he),(ie=pe.onVnodeBeforeMount)&&cs(ie,Y,O)}re&&Pa(O,null,Y,"beforeMount");const xe=vB(te,Oe);xe&&Oe.beforeEnter(Q),r(Q,k,H),((ie=pe&&pe.onVnodeMounted)||xe||re)&&Zr(()=>{ie&&cs(ie,Y,O),xe&&Oe.enter(Q),re&&Pa(O,null,Y,"mounted")},te)},w=(O,k,H,Y,te)=>{if(H&&h(O,H),Y)for(let he=0;he<Y.length;he++)h(O,Y[he]);if(te){let he=te.subTree;if(k===he){const F=te.vnode;w(O,F,F.scopeId,F.slotScopeIds,te.parent)}}},M=(O,k,H,Y,te,he,F,D,Q=0)=>{for(let ie=Q;ie<O.length;ie++){const pe=O[ie]=D?Go(O[ie]):Wi(O[ie]);g(null,pe,k,H,Y,te,he,F,D)}},x=(O,k,H,Y,te,he,F)=>{const D=k.el=O.el;let{patchFlag:Q,dynamicChildren:ie,dirs:pe}=k;Q|=O.patchFlag&16;const ye=O.props||Ln,Oe=k.props||Ln;let re;if(H&&Ra(H,!1),(re=Oe.onVnodeBeforeUpdate)&&cs(re,H,k,O),pe&&Pa(k,O,H,"beforeUpdate"),H&&Ra(H,!0),ie?S(O.dynamicChildren,ie,D,H,Y,qg(k,te),he):F||Z(O,k,D,null,H,Y,qg(k,te),he,!1),Q>0){if(Q&16)R(D,k,ye,Oe,H,Y,te);else if(Q&2&&ye.class!==Oe.class&&s(D,"class",null,Oe.class,te),Q&4&&s(D,"style",ye.style,Oe.style,te),Q&8){const xe=k.dynamicProps;for(let Ne=0;Ne<xe.length;Ne++){const Ee=xe[Ne],be=ye[Ee],Ye=Oe[Ee];(Ye!==be||Ee==="value")&&s(D,Ee,be,Ye,te,O.children,H,Y,ue)}}Q&1&&O.children!==k.children&&u(D,k.children)}else!F&&ie==null&&R(D,k,ye,Oe,H,Y,te);((re=Oe.onVnodeUpdated)||pe)&&Zr(()=>{re&&cs(re,H,k,O),pe&&Pa(k,O,H,"updated")},Y)},S=(O,k,H,Y,te,he,F)=>{for(let D=0;D<k.length;D++){const Q=O[D],ie=k[D],pe=Q.el&&(Q.type===qe||!hs(Q,ie)||Q.shapeFlag&70)?d(Q.el):H;g(Q,ie,pe,null,Y,te,he,F,!0)}},R=(O,k,H,Y,te,he,F)=>{if(H!==Y){if(H!==Ln)for(const D in H)!Id(D)&&!(D in Y)&&s(O,D,H[D],null,F,k.children,te,he,ue);for(const D in Y){if(Id(D))continue;const Q=Y[D],ie=H[D];Q!==ie&&D!=="value"&&s(O,D,ie,Q,F,k.children,te,he,ue)}"value"in Y&&s(O,"value",H.value,Y.value,F)}},I=(O,k,H,Y,te,he,F,D,Q)=>{const ie=k.el=O?O.el:a(""),pe=k.anchor=O?O.anchor:a("");let{patchFlag:ye,dynamicChildren:Oe,slotScopeIds:re}=k;re&&(D=D?D.concat(re):re),O==null?(r(ie,H,Y),r(pe,H,Y),M(k.children||[],H,pe,te,he,F,D,Q)):ye>0&&ye&64&&Oe&&O.dynamicChildren?(S(O.dynamicChildren,Oe,H,te,he,F,D),(k.key!=null||te&&k===te.subTree)&&X_(O,k,!0)):Z(O,k,H,pe,te,he,F,D,Q)},z=(O,k,H,Y,te,he,F,D,Q)=>{k.slotScopeIds=D,O==null?k.shapeFlag&512?te.ctx.activate(k,H,Y,F,Q):P(k,H,Y,te,he,F,Q):B(O,k,Q)},P=(O,k,H,Y,te,he,F)=>{const D=O.component=EB(O,Y,te);if(av(O)&&(D.ctx.renderer=N),MB(D),D.asyncDep){if(te&&te.registerDep(D,U),!O.el){const Q=D.subTree=ke(Ir);v(null,Q,k,H)}}else U(D,O,k,H,te,he,F)},B=(O,k,H)=>{const Y=k.component=O.component;if(OF(O,k,H))if(Y.asyncDep&&!Y.asyncResolved){j(Y,k,H);return}else Y.next=k,MF(Y.update),Y.effect.dirty=!0,Y.update();else k.el=O.el,Y.vnode=k},U=(O,k,H,Y,te,he,F)=>{const D=()=>{if(O.isMounted){let{next:pe,bu:ye,u:Oe,parent:re,vnode:xe}=O;{const ut=FP(O);if(ut){pe&&(pe.el=xe.el,j(O,pe,F)),ut.asyncDep.then(()=>{O.isUnmounted||D()});return}}let Ne=pe,Ee;Ra(O,!1),pe?(pe.el=xe.el,j(O,pe,F)):pe=xe,ye&&Wp(ye),(Ee=pe.props&&pe.props.onVnodeBeforeUpdate)&&cs(Ee,re,pe,xe),Ra(O,!0);const be=jg(O),Ye=O.subTree;O.subTree=be,g(Ye,be,d(Ye.el),J(Ye),O,te,he),pe.el=be.el,Ne===null&&F_(O,be.el),Oe&&Zr(Oe,te),(Ee=pe.props&&pe.props.onVnodeUpdated)&&Zr(()=>cs(Ee,re,pe,xe),te)}else{let pe;const{el:ye,props:Oe}=k,{bm:re,m:xe,parent:Ne}=O,Ee=kd(k);if(Ra(O,!1),re&&Wp(re),!Ee&&(pe=Oe&&Oe.onVnodeBeforeMount)&&cs(pe,Ne,k),Ra(O,!0),ye&&$){const be=()=>{O.subTree=jg(O),$(ye,O.subTree,O,te,null)};Ee?k.type.__asyncLoader().then(()=>!O.isUnmounted&&be()):be()}else{const be=O.subTree=jg(O);g(null,be,H,Y,O,te,he),k.el=be.el}if(xe&&Zr(xe,te),!Ee&&(pe=Oe&&Oe.onVnodeMounted)){const be=k;Zr(()=>cs(pe,Ne,be),te)}(k.shapeFlag&256||Ne&&kd(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&O.a&&Zr(O.a,te),O.isMounted=!0,k=H=Y=null}},Q=O.effect=new P_(D,Pi,()=>N_(ie),O.scope),ie=O.update=()=>{Q.dirty&&Q.run()};ie.id=O.uid,Ra(O,!0),ie()},j=(O,k,H)=>{k.component=O;const Y=O.vnode.props;O.vnode=k,O.next=null,dB(O,k.props,Y,H),pB(O,k.children,H),Bl(),FS(O),Vl()},Z=(O,k,H,Y,te,he,F,D,Q=!1)=>{const ie=O&&O.children,pe=O?O.shapeFlag:0,ye=k.children,{patchFlag:Oe,shapeFlag:re}=k;if(Oe>0){if(Oe&128){K(ie,ye,H,Y,te,he,F,D,Q);return}else if(Oe&256){ne(ie,ye,H,Y,te,he,F,D,Q);return}}re&8?(pe&16&&ue(ie,te,he),ye!==ie&&u(H,ye)):pe&16?re&16?K(ie,ye,H,Y,te,he,F,D,Q):ue(ie,te,he,!0):(pe&8&&u(H,""),re&16&&M(ye,H,Y,te,he,F,D,Q))},ne=(O,k,H,Y,te,he,F,D,Q)=>{O=O||Vc,k=k||Vc;const ie=O.length,pe=k.length,ye=Math.min(ie,pe);let Oe;for(Oe=0;Oe<ye;Oe++){const re=k[Oe]=Q?Go(k[Oe]):Wi(k[Oe]);g(O[Oe],re,H,null,te,he,F,D,Q)}ie>pe?ue(O,te,he,!0,!1,ye):M(k,H,Y,te,he,F,D,Q,ye)},K=(O,k,H,Y,te,he,F,D,Q)=>{let ie=0;const pe=k.length;let ye=O.length-1,Oe=pe-1;for(;ie<=ye&&ie<=Oe;){const re=O[ie],xe=k[ie]=Q?Go(k[ie]):Wi(k[ie]);if(hs(re,xe))g(re,xe,H,null,te,he,F,D,Q);else break;ie++}for(;ie<=ye&&ie<=Oe;){const re=O[ye],xe=k[Oe]=Q?Go(k[Oe]):Wi(k[Oe]);if(hs(re,xe))g(re,xe,H,null,te,he,F,D,Q);else break;ye--,Oe--}if(ie>ye){if(ie<=Oe){const re=Oe+1,xe=re<pe?k[re].el:Y;for(;ie<=Oe;)g(null,k[ie]=Q?Go(k[ie]):Wi(k[ie]),H,xe,te,he,F,D,Q),ie++}}else if(ie>Oe)for(;ie<=ye;)Se(O[ie],te,he,!0),ie++;else{const re=ie,xe=ie,Ne=new Map;for(ie=xe;ie<=Oe;ie++){const oe=k[ie]=Q?Go(k[ie]):Wi(k[ie]);oe.key!=null&&Ne.set(oe.key,ie)}let Ee,be=0;const Ye=Oe-xe+1;let ut=!1,dt=0;const it=new Array(Ye);for(ie=0;ie<Ye;ie++)it[ie]=0;for(ie=re;ie<=ye;ie++){const oe=O[ie];if(be>=Ye){Se(oe,te,he,!0);continue}let Le;if(oe.key!=null)Le=Ne.get(oe.key);else for(Ee=xe;Ee<=Oe;Ee++)if(it[Ee-xe]===0&&hs(oe,k[Ee])){Le=Ee;break}Le===void 0?Se(oe,te,he,!0):(it[Le-xe]=ie+1,Le>=dt?dt=Le:ut=!0,g(oe,k[Le],H,null,te,he,F,D,Q),be++)}const et=ut?gB(it):Vc;for(Ee=et.length-1,ie=Ye-1;ie>=0;ie--){const oe=xe+ie,Le=k[oe],tt=oe+1<pe?k[oe+1].el:Y;it[ie]===0?g(null,Le,H,tt,te,he,F,D,Q):ut&&(Ee<0||ie!==et[Ee]?fe(Le,H,tt,2):Ee--)}}},fe=(O,k,H,Y,te=null)=>{const{el:he,type:F,transition:D,children:Q,shapeFlag:ie}=O;if(ie&6){fe(O.component.subTree,k,H,Y);return}if(ie&128){O.suspense.move(k,H,Y);return}if(ie&64){F.move(O,k,H,N);return}if(F===qe){r(he,k,H);for(let ye=0;ye<Q.length;ye++)fe(Q[ye],k,H,Y);r(O.anchor,k,H);return}if(F===Yg){y(O,k,H);return}if(Y!==2&&ie&1&&D)if(Y===0)D.beforeEnter(he),r(he,k,H),Zr(()=>D.enter(he),te);else{const{leave:ye,delayLeave:Oe,afterLeave:re}=D,xe=()=>r(he,k,H),Ne=()=>{ye(he,()=>{xe(),re&&re()})};Oe?Oe(he,xe,Ne):Ne()}else r(he,k,H)},Se=(O,k,H,Y=!1,te=!1)=>{const{type:he,props:F,ref:D,children:Q,dynamicChildren:ie,shapeFlag:pe,patchFlag:ye,dirs:Oe}=O;if(D!=null&&O0(D,null,H,O,!0),pe&256){k.ctx.deactivate(O);return}const re=pe&1&&Oe,xe=!kd(O);let Ne;if(xe&&(Ne=F&&F.onVnodeBeforeUnmount)&&cs(Ne,k,O),pe&6)ge(O.component,H,Y);else{if(pe&128){O.suspense.unmount(H,Y);return}re&&Pa(O,null,k,"beforeUnmount"),pe&64?O.type.remove(O,k,H,te,N,Y):ie&&(he!==qe||ye>0&&ye&64)?ue(ie,k,H,!1,!0):(he===qe&&ye&384||!te&&pe&16)&&ue(Q,k,H),Y&&de(O)}(xe&&(Ne=F&&F.onVnodeUnmounted)||re)&&Zr(()=>{Ne&&cs(Ne,k,O),re&&Pa(O,null,k,"unmounted")},H)},de=O=>{const{type:k,el:H,anchor:Y,transition:te}=O;if(k===qe){ae(H,Y);return}if(k===Yg){E(O);return}const he=()=>{i(H),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(O.shapeFlag&1&&te&&!te.persisted){const{leave:F,delayLeave:D}=te,Q=()=>F(H,he);D?D(O.el,he,Q):Q()}else he()},ae=(O,k)=>{let H;for(;O!==k;)H=f(O),i(O),O=H;i(k)},ge=(O,k,H)=>{const{bum:Y,scope:te,update:he,subTree:F,um:D}=O;Y&&Wp(Y),te.stop(),he&&(he.active=!1,Se(F,O,k,H)),D&&Zr(D,k),Zr(()=>{O.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},ue=(O,k,H,Y=!1,te=!1,he=0)=>{for(let F=he;F<O.length;F++)Se(O[F],k,H,Y,te)},J=O=>O.shapeFlag&6?J(O.component.subTree):O.shapeFlag&128?O.suspense.next():f(O.anchor||O.el);let X=!1;const L=(O,k,H)=>{O==null?k._vnode&&Se(k._vnode,null,null,!0):g(k._vnode||null,O,k,null,null,null,H),X||(X=!0,FS(),gP(),X=!1),k._vnode=O},N={p:g,um:Se,m:fe,r:de,mt:P,mc:M,pc:Z,pbc:S,n:J,o:t};let G,$;return e&&([G,$]=e(N)),{render:L,hydrate:G,createApp:lB(L,G)}}function qg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ra({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function vB(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function X_(t,e,n=!1){const r=t.children,i=e.children;if(ht(r)&&ht(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Go(i[s]),a.el=o.el),n||X_(o,a)),a.type===Eu&&(a.el=o.el)}}function gB(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function FP(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:FP(e)}const yB=t=>t.__isTeleport,Nd=t=>t&&(t.disabled||t.disabled===""),qS=t=>typeof SVGElement<"u"&&t instanceof SVGElement,YS=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,k0=(t,e)=>{const n=t&&t.to;return zn(n)?e?e(n):null:n},bB={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:m}}=c,v=Nd(e.props);let{shapeFlag:b,children:y,dynamicChildren:E}=e;if(t==null){const T=e.el=g(""),_=e.anchor=g("");h(T,n,r),h(_,n,r);const w=e.target=k0(e.props,p),M=e.targetAnchor=g("");w&&(h(M,w),o==="svg"||qS(w)?o="svg":(o==="mathml"||YS(w))&&(o="mathml"));const x=(S,R)=>{b&16&&u(y,S,R,i,s,o,a,l)};v?x(n,_):w&&x(w,M)}else{e.el=t.el;const T=e.anchor=t.anchor,_=e.target=t.target,w=e.targetAnchor=t.targetAnchor,M=Nd(t.props),x=M?n:_,S=M?T:w;if(o==="svg"||qS(_)?o="svg":(o==="mathml"||YS(_))&&(o="mathml"),E?(f(t.dynamicChildren,E,x,i,s,o,a),X_(t,e,!0)):l||d(t,e,x,S,i,s,o,a,!1),v)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ph(e,n,T,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=k0(e.props,p);R&&Ph(e,R,null,c,0)}else M&&Ph(e,_,w,c,1)}BP(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:f}=t;if(d&&s(u),o&&s(c),a&16){const h=o||!Nd(f);for(let p=0;p<l.length;p++){const g=l[p];i(g,e,n,h,!!g.dynamicChildren)}}},move:Ph,hydrate:_B};function Ph(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=s===2;if(d&&r(o,e,n),(!d||Nd(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],e,n,2);d&&r(a,e,n)}function _B(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=k0(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Nd(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=d;else{e.anchor=o(t);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,n,r,i,s)}BP(e)}return e.anchor&&o(e.anchor)}const rf=bB;function BP(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const qe=Symbol.for("v-fgt"),Eu=Symbol.for("v-txt"),Ir=Symbol.for("v-cmt"),Yg=Symbol.for("v-stc"),Fd=[];let Ri=null;function V(t=!1){Fd.push(Ri=t?null:[])}function VP(){Fd.pop(),Ri=Fd[Fd.length-1]||null}let Jc=1;function ZS(t){Jc+=t}function UP(t){return t.dynamicChildren=Jc>0?Ri||Vc:null,VP(),Jc>0&&Ri&&Ri.push(t),t}function ee(t,e,n,r,i,s){return UP(me(t,e,n,r,i,s,!0))}function Te(t,e,n,r,i){return UP(ke(t,e,n,r,i,!0))}function yl(t){return t?t.__v_isVNode===!0:!1}function hs(t,e){return t.type===e.type&&t.key===e.key}const dv="__vInternal",$P=({key:t})=>t??null,jp=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?zn(t)||Xt(t)||xt(t)?{i:er,r:t,k:e,f:!!n}:t:null);function me(t,e=null,n=null,r=0,i=null,s=t===qe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$P(e),ref:e&&jp(e),scopeId:ov,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:er};return a?(K_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=zn(n)?8:16),Jc>0&&!o&&Ri&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ri.push(l),l}const ke=xB;function xB(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===_P)&&(t=Ir),yl(t)){const a=la(t,e,!0);return n&&K_(a,n),Jc>0&&!s&&Ri&&(a.shapeFlag&6?Ri[Ri.indexOf(t)]=a:Ri.push(a)),a.patchFlag|=-2,a}if(PB(t)&&(t=t.__vccOpts),e){e=je(e);let{class:a,style:l}=e;a&&!zn(a)&&(e.class=Qe(a)),xn(l)&&(uP(l)&&!ht(l)&&(l=nr({},l)),e.style=Be(l))}const o=zn(t)?1:kF(t)?128:yB(t)?64:xn(t)?4:xt(t)?2:0;return me(t,e,n,r,i,o,s,!0)}function je(t){return t?uP(t)||dv in t?nr({},t):t:null}function la(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?Re(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&$P(a),ref:e&&e.ref?n&&i?ht(i)?i.concat(jp(e)):[i,jp(e)]:jp(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&la(t.ssContent),ssFallback:t.ssFallback&&la(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function gt(t=" ",e=0){return ke(Eu,null,t,e)}function ve(t="",e=!1){return e?(V(),Te(Ir,null,t)):ke(Ir,null,t)}function Wi(t){return t==null||typeof t=="boolean"?ke(Ir):ht(t)?ke(qe,null,t.slice()):typeof t=="object"?Go(t):ke(Eu,null,String(t))}function Go(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:la(t)}function K_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ht(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),K_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(dv in e)?e._ctx=er:i===3&&er&&(er.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:er},n=32):(e=String(e),r&64?(n=16,e=[gt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Re(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Qe([e.class,r.class]));else if(i==="style")e.style=Be([e.style,r.style]);else if(Zm(i)){const s=e[i],o=r[i];o&&s!==o&&!(ht(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function cs(t,e,n,r=null){ki(t,e,7,[n,r])}const wB=RP();let SB=0;function EB(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||wB,s={uid:SB++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new qT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:IP(r,i),emitsOptions:bP(r,i),emit:null,emitted:null,propsDefaults:Ln,inheritAttrs:r.inheritAttrs,ctx:Ln,data:Ln,props:Ln,attrs:Ln,slots:Ln,refs:Ln,setupState:Ln,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=AF.bind(null,s),t.ce&&t.ce(s),s}let hr=null;const on=()=>hr||er;let bm,D0;{const t=jT(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};bm=e("__VUE_INSTANCE_SETTERS__",n=>hr=n),D0=e("__VUE_SSR_SETTERS__",n=>fv=n)}const bl=t=>{const e=hr;return bm(t),t.scope.on(),()=>{t.scope.off(),bm(e)}},N0=()=>{hr&&hr.scope.off(),bm(null)};function zP(t){return t.vnode.shapeFlag&4}let fv=!1;function MB(t,e=!1){e&&D0(e);const{props:n,children:r}=t.vnode,i=zP(t);uB(t,n,i,e),hB(t,r);const s=i?CB(t,e):void 0;return e&&D0(!1),s}function CB(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=iv(new Proxy(t.ctx,eB));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?GP(t):null,s=bl(t);Bl();const o=ea(r,t,0,[t.props,i]);if(Vl(),s(),C_(o)){if(o.then(N0,N0),e)return o.then(a=>{F0(t,a,e)}).catch(a=>{Ff(a,t,0)});t.asyncDep=o}else F0(t,o,e)}else HP(t,e)}function F0(t,e,n){xt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xn(e)&&(t.setupState=hP(e)),HP(t,n)}let JS;function HP(t,e,n){const r=t.type;if(!t.render){if(!e&&JS&&!r.render){const i=r.template||W_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=nr(nr({isCustomElement:s,delimiters:a},o),l);r.render=JS(i,c)}}t.render=r.render||Pi}{const i=bl(t);Bl();try{nB(t)}finally{Vl(),i()}}}function AB(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ri(t,"get","$attrs"),e[n]}}))}function GP(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return AB(t)},slots:t.slots,emit:t.emit,expose:e}}function hv(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hP(iv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Dd)return Dd[n](t)},has(e,n){return n in e||n in Dd}}))}function TB(t,e=!0){return xt(t)?t.displayName||t.name:t.name||e&&t.__name}function PB(t){return xt(t)&&"__vccOpts"in t}const A=(t,e)=>vF(t,e,fv);function Nt(t,e,n){const r=arguments.length;return r===2?xn(e)&&!ht(e)?yl(e)?ke(t,null,[e]):ke(t,e):ke(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&yl(n)&&(n=[n]),ke(t,e,n))}const RB="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const LB="http://www.w3.org/2000/svg",IB="http://www.w3.org/1998/Math/MathML",Wo=typeof document<"u"?document:null,QS=Wo&&Wo.createElement("template"),OB={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Wo.createElementNS(LB,t):e==="mathml"?Wo.createElementNS(IB,t):Wo.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Wo.createTextNode(t),createComment:t=>Wo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Wo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{QS.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=QS.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wo="transition",Ju="animation",Qc=Symbol("_vtc"),Mu=(t,{slots:e})=>Nt(jF,jP(t),e);Mu.displayName="Transition";const WP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},kB=Mu.props=nr({},EP,WP),La=(t,e=[])=>{ht(t)?t.forEach(n=>n(...e)):t&&t(...e)},e1=t=>t?ht(t)?t.some(e=>e.length>1):t.length>1:!1;function jP(t){const e={};for(const I in t)I in WP||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=DB(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:E,onLeaveCancelled:T,onBeforeAppear:_=v,onAppear:w=b,onAppearCancelled:M=y}=e,x=(I,z,P)=>{Uo(I,z?u:a),Uo(I,z?c:o),P&&P()},S=(I,z)=>{I._isLeaving=!1,Uo(I,d),Uo(I,h),Uo(I,f),z&&z()},R=I=>(z,P)=>{const B=I?w:b,U=()=>x(z,I,P);La(B,[z,U]),t1(()=>{Uo(z,I?l:s),zs(z,I?u:a),e1(B)||n1(z,r,g,U)})};return nr(e,{onBeforeEnter(I){La(v,[I]),zs(I,s),zs(I,o)},onBeforeAppear(I){La(_,[I]),zs(I,l),zs(I,c)},onEnter:R(!1),onAppear:R(!0),onLeave(I,z){I._isLeaving=!0;const P=()=>S(I,z);zs(I,d),KP(),zs(I,f),t1(()=>{I._isLeaving&&(Uo(I,d),zs(I,h),e1(E)||n1(I,r,m,P))}),La(E,[I,P])},onEnterCancelled(I){x(I,!1),La(y,[I])},onAppearCancelled(I){x(I,!0),La(M,[I])},onLeaveCancelled(I){S(I),La(T,[I])}})}function DB(t){if(t==null)return null;if(xn(t))return[Zg(t.enter),Zg(t.leave)];{const e=Zg(t);return[e,e]}}function Zg(t){return WT(t)}function zs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Qc]||(t[Qc]=new Set)).add(e)}function Uo(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Qc];n&&(n.delete(e),n.size||(t[Qc]=void 0))}function t1(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let NB=0;function n1(t,e,n,r){const i=t._endId=++NB,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=XP(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),s()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function XP(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${wo}Delay`),s=r(`${wo}Duration`),o=r1(i,s),a=r(`${Ju}Delay`),l=r(`${Ju}Duration`),c=r1(a,l);let u=null,d=0,f=0;e===wo?o>0&&(u=wo,d=o,f=s.length):e===Ju?c>0&&(u=Ju,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?wo:Ju:null,f=u?u===wo?s.length:l.length:0);const h=u===wo&&/\b(transform|all)(,|$)/.test(r(`${wo}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function r1(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>i1(n)+i1(t[r])))}function i1(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function KP(){return document.body.offsetHeight}function FB(t,e,n){const r=t[Qc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _m=Symbol("_vod"),qP=Symbol("_vsh"),_l={beforeMount(t,{value:e},{transition:n}){t[_m]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qu(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qu(t,!0),r.enter(t)):r.leave(t,()=>{Qu(t,!1)}):Qu(t,e))},beforeUnmount(t,{value:e}){Qu(t,e)}};function Qu(t,e){t.style.display=e?t[_m]:"none",t[qP]=!e}const BB=Symbol(""),VB=/(^|;)\s*display\s*:/;function UB(t,e,n){const r=t.style,i=zn(n);let s=!1;if(n&&!i){if(e)if(zn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Xp(r,a,"")}else for(const o in e)n[o]==null&&Xp(r,o,"");for(const o in n)o==="display"&&(s=!0),Xp(r,o,n[o])}else if(i){if(e!==n){const o=r[BB];o&&(n+=";"+o),r.cssText=n,s=VB.test(n)}}else e&&t.removeAttribute("style");_m in t&&(t[_m]=s?r.display:"",t[qP]&&(r.display="none"))}const s1=/\s*!important$/;function Xp(t,e,n){if(ht(n))n.forEach(r=>Xp(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=$B(t,e);s1.test(n)?t.setProperty(Fl(r),n.replace(s1,""),"important"):t[r]=n}}const o1=["Webkit","Moz","ms"],Jg={};function $B(t,e){const n=Jg[e];if(n)return n;let r=ys(e);if(r!=="filter"&&r in t)return Jg[e]=r;r=Df(r);for(let i=0;i<o1.length;i++){const s=o1[i]+r;if(s in t)return Jg[e]=s}return e}const a1="http://www.w3.org/1999/xlink";function zB(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(a1,e.slice(6,e.length)):t.setAttributeNS(a1,e,n);else{const s=XN(e);n==null||s&&!XT(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function HB(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=XT(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Gs(t,e,n,r){t.addEventListener(e,n,r)}function GB(t,e,n,r){t.removeEventListener(e,n,r)}const l1=Symbol("_vei");function WB(t,e,n,r,i=null){const s=t[l1]||(t[l1]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=jB(e);if(r){const c=s[e]=qB(r,i);Gs(t,a,c,l)}else o&&(GB(t,a,o,l),s[e]=void 0)}}const c1=/(?:Once|Passive|Capture)$/;function jB(t){let e;if(c1.test(t)){e={};let r;for(;r=t.match(c1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fl(t.slice(2)),e]}let Qg=0;const XB=Promise.resolve(),KB=()=>Qg||(XB.then(()=>Qg=0),Qg=Date.now());function qB(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ki(YB(r,n.value),e,5,[r])};return n.value=t,n.attached=KB(),n}function YB(t,e){if(ht(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const u1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZB=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?FB(t,r,c):e==="style"?UB(t,n,r):Zm(e)?E_(e)||WB(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JB(t,e,r,c))?HB(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),zB(t,e,r,c))};function JB(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&u1(e)&&xt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return u1(e)&&zn(n)?!1:e in t}const YP=new WeakMap,ZP=new WeakMap,xm=Symbol("_moveCb"),d1=Symbol("_enterCb"),JP={name:"TransitionGroup",props:nr({},kB,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=on(),r=SP();let i,s;return cv(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!i3(i[0].el,n.vnode.el,o))return;i.forEach(t3),i.forEach(n3);const a=i.filter(r3);KP(),a.forEach(l=>{const c=l.el,u=c.style;zs(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[xm]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[xm]=null,Uo(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=Yt(t),a=jP(o);let l=o.tag||qe;i=s,s=e.default?z_(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&nf(u,tf(u,a,r,n))}if(i)for(let c=0;c<i.length;c++){const u=i[c];nf(u,tf(u,a,r,n)),YP.set(u,u.el.getBoundingClientRect())}return ke(l,null,s)}}},QB=t=>delete t.mode;JP.props;const e3=JP;function t3(t){const e=t.el;e[xm]&&e[xm](),e[d1]&&e[d1]()}function n3(t){ZP.set(t,t.el.getBoundingClientRect())}function r3(t){const e=YP.get(t),n=ZP.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function i3(t,e,n){const r=t.cloneNode(),i=t[Qc];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=XP(r);return s.removeChild(r),o}const ca=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ht(e)?n=>Wp(e,n):e};function s3(t){t.target.composing=!0}function f1(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Di=Symbol("_assign"),wm={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Di]=ca(i);const s=r||i.props&&i.props.type==="number";Gs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Yd(a)),t[Di](a)}),n&&Gs(t,"change",()=>{t.value=t.value.trim()}),e||(Gs(t,"compositionstart",s3),Gs(t,"compositionend",f1),Gs(t,"change",f1))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Di]=ca(s),t.composing)return;const o=i||t.type==="number"?Yd(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},o3={deep:!0,created(t,e,n){t[Di]=ca(n),Gs(t,"change",()=>{const r=t._modelValue,i=eu(t),s=t.checked,o=t[Di];if(ht(r)){const a=T_(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Su(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(QP(t,s))})},mounted:h1,beforeUpdate(t,e,n){t[Di]=ca(n),h1(t,e,n)}};function h1(t,{value:e,oldValue:n},r){t._modelValue=e,ht(e)?t.checked=T_(e,r.props.value)>-1:Su(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=gl(e,QP(t,!0)))}const a3={created(t,{value:e},n){t.checked=gl(e,n.props.value),t[Di]=ca(n),Gs(t,"change",()=>{t[Di](eu(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Di]=ca(r),e!==n&&(t.checked=gl(e,r.props.value))}},l3={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Su(e);Gs(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Yd(eu(o)):eu(o));t[Di](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,cn(()=>{t._assigning=!1})}),t[Di]=ca(r)},mounted(t,{value:e,modifiers:{number:n}}){p1(t,e,n)},beforeUpdate(t,e,n){t[Di]=ca(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||p1(t,e,n)}};function p1(t,e,n){const r=t.multiple,i=ht(e);if(!(r&&!i&&!Su(e))){for(let s=0,o=t.options.length;s<o;s++){const a=t.options[s],l=eu(a);if(r)if(i){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?Yd(l):l):a.selected=T_(e,l)>-1}else a.selected=e.has(l);else if(gl(eu(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function eu(t){return"_value"in t?t._value:t.value}function QP(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const q_={created(t,e,n){Rh(t,e,n,null,"created")},mounted(t,e,n){Rh(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Rh(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Rh(t,e,n,r,"updated")}};function c3(t,e){switch(t){case"SELECT":return l3;case"TEXTAREA":return wm;default:switch(e){case"checkbox":return o3;case"radio":return a3;default:return wm}}}function Rh(t,e,n,r,i){const o=c3(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}const u3=["ctrl","shift","alt","meta"],d3={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>u3.some(n=>t[`${n}Key`]&&!e.includes(n))},He=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=d3[e[o]];if(a&&a(i,e))return}return t(i,...s)})},f3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},We=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Fl(i.key);if(e.some(o=>o===s||f3[o]===s))return t(i)})},h3=nr({patchProp:ZB},OB);let m1;function eR(){return m1||(m1=NP(h3))}const tu=(...t)=>{eR().render(...t)},p3=(...t)=>{const e=eR().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=v3(r);if(!i)return;const s=e._component;!xt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,m3(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function m3(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function v3(t){return zn(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Cu="160",Ka={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tR=0,B0=1,nR=2,g3=3,y3=0,Y_=1,Z_=2,us=3,bs=0,Or=1,Qr=2,b3=2,Zs=0,dl=1,Sm=2,V0=3,U0=4,rR=5,qo=100,iR=101,sR=102,$0=103,z0=104,oR=200,aR=201,lR=202,cR=203,Em=204,Mm=205,uR=206,dR=207,fR=208,hR=209,pR=210,mR=211,vR=212,gR=213,yR=214,bR=0,_R=1,xR=2,sf=3,wR=4,SR=5,ER=6,MR=7,Bf=0,CR=1,AR=2,Js=0,TR=1,PR=2,RR=3,J_=4,LR=5,IR=6,H0="attached",OR="detached",pv=300,to=301,ua=302,of=303,af=304,Au=306,no=1e3,pr=1001,xl=1002,Vn=1003,nu=1004,_3=1004,fl=1005,x3=1005,Nn=1006,Vf=1007,w3=1007,Qi=1008,S3=1008,Zi=1009,kR=1010,DR=1011,mv=1012,Q_=1013,js=1014,Ki=1015,wl=1016,ex=1017,tx=1018,ta=1020,NR=1021,Hr=1023,FR=1024,BR=1025,na=1026,Sl=1027,VR=1028,nx=1029,UR=1030,rx=1031,ix=1033,Kp=33776,qp=33777,Yp=33778,Zp=33779,G0=35840,W0=35841,j0=35842,X0=35843,sx=36196,K0=37492,q0=37496,Y0=37808,Z0=37809,J0=37810,Q0=37811,eb=37812,tb=37813,nb=37814,rb=37815,ib=37816,sb=37817,ob=37818,ab=37819,lb=37820,cb=37821,Jp=36492,ub=36494,db=36495,$R=36283,fb=36284,hb=36285,pb=36286,zR=2200,HR=2201,GR=2202,El=2300,da=2301,Qp=2302,nl=2400,rl=2401,lf=2402,vv=2500,ox=2501,WR=0,ax=1,Cm=2,lx=3e3,ra=3001,jR=3200,XR=3201,_a=0,KR=1,hi="",In="srgb",lr="srgb-linear",gv="display-p3",Uf="display-p3-linear",cf="linear",Tn="srgb",uf="rec709",df="p3",E3=0,qa=7680,M3=7681,C3=7682,A3=7683,T3=34055,P3=34056,R3=5386,L3=512,I3=513,O3=514,k3=515,D3=516,N3=517,F3=518,mb=519,qR=512,YR=513,ZR=514,cx=515,JR=516,QR=517,eL=518,tL=519,ff=35044,B3=35048,V3=35040,U3=35045,$3=35049,z3=35041,H3=35046,G3=35050,W3=35042,j3="100",vb="300 es",Am=1035,qi=2e3,ru=2001;class Es{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Tr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let v1=1234567;const hl=Math.PI/180,iu=180/Math.PI;function gi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Tr[t&255]+Tr[t>>8&255]+Tr[t>>16&255]+Tr[t>>24&255]+"-"+Tr[e&255]+Tr[e>>8&255]+"-"+Tr[e>>16&15|64]+Tr[e>>24&255]+"-"+Tr[n&63|128]+Tr[n>>8&255]+"-"+Tr[n>>16&255]+Tr[n>>24&255]+Tr[r&255]+Tr[r>>8&255]+Tr[r>>16&255]+Tr[r>>24&255]).toLowerCase()}function Xn(t,e,n){return Math.max(e,Math.min(n,t))}function ux(t,e){return(t%e+e)%e}function X3(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function K3(t,e,n){return t!==e?(n-t)/(e-t):0}function Bd(t,e,n){return(1-n)*t+n*e}function q3(t,e,n,r){return Bd(t,e,1-Math.exp(-n*r))}function Y3(t,e=1){return e-Math.abs(ux(t,e*2)-e)}function Z3(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function J3(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Q3(t,e){return t+Math.floor(Math.random()*(e-t+1))}function eV(t,e){return t+Math.random()*(e-t)}function tV(t){return t*(.5-Math.random())}function nV(t){t!==void 0&&(v1=t);let e=v1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rV(t){return t*hl}function iV(t){return t*iu}function gb(t){return(t&t-1)===0&&t!==0}function sV(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Tm(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function oV(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),h=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*f,a*c);break;case"YZY":t.set(l*f,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*f,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*h,a*c);break;case"YXY":t.set(l*h,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ei(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Tt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Ml={DEG2RAD:hl,RAD2DEG:iu,generateUUID:gi,clamp:Xn,euclideanModulo:ux,mapLinear:X3,inverseLerp:K3,lerp:Bd,damp:q3,pingpong:Y3,smoothstep:Z3,smootherstep:J3,randInt:Q3,randFloat:eV,randFloatSpread:tV,seededRandom:nV,degToRad:rV,radToDeg:iV,isPowerOfTwo:gb,ceilPowerOfTwo:sV,floorPowerOfTwo:Tm,setQuaternionFromProperEuler:oV,normalize:Tt,denormalize:ei};class Ie{constructor(e=0,n=0){Ie.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,n,r,i,s,o,a,l,c){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],h=r[5],p=r[8],g=i[0],m=i[3],v=i[6],b=i[1],y=i[4],E=i[7],T=i[2],_=i[5],w=i[8];return s[0]=o*g+a*b+l*T,s[3]=o*m+a*y+l*_,s[6]=o*v+a*E+l*w,s[1]=c*g+u*b+d*T,s[4]=c*m+u*y+d*_,s[7]=c*v+u*E+d*w,s[2]=f*g+h*b+p*T,s[5]=f*m+h*y+p*_,s[8]=f*v+h*E+p*w,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,h=c*s-o*l,p=n*d+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=f*g,e[4]=(u*n-i*l)*g,e[5]=(i*s-a*n)*g,e[6]=h*g,e[7]=(r*l-c*n)*g,e[8]=(o*n-r*s)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(ey.makeScale(e,n)),this}rotate(e){return this.premultiply(ey.makeRotation(-e)),this}translate(e,n){return this.premultiply(ey.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ey=new Rt;function nL(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const aV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Dc(t,e){return new aV[t](e)}function hf(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function rL(){const t=hf("canvas");return t.style.display="block",t}const g1={};function Vd(t){t in g1||(g1[t]=!0,console.warn(t))}const y1=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),b1=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Lh={[lr]:{transfer:cf,primaries:uf,toReference:t=>t,fromReference:t=>t},[In]:{transfer:Tn,primaries:uf,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Uf]:{transfer:cf,primaries:df,toReference:t=>t.applyMatrix3(b1),fromReference:t=>t.applyMatrix3(y1)},[gv]:{transfer:Tn,primaries:df,toReference:t=>t.convertSRGBToLinear().applyMatrix3(b1),fromReference:t=>t.applyMatrix3(y1).convertLinearToSRGB()}},lV=new Set([lr,Uf]),ln={enabled:!0,_workingColorSpace:lr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!lV.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Lh[e].toReference,i=Lh[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Lh[t].primaries},getTransfer:function(t){return t===hi?cf:Lh[t].transfer}};function Gc(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ty(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let nc;class dx{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{nc===void 0&&(nc=hf("canvas")),nc.width=e.width,nc.height=e.height;const r=nc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=nc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=hf("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Gc(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Gc(n[r]/255)*255):n[r]=Gc(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let cV=0;class il{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:cV++}),this.uuid=gi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(ny(i[o].image)):s.push(ny(i[o]))}else s=ny(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function ny(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?dx.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uV=0;class kn extends Es{constructor(e=kn.DEFAULT_IMAGE,n=kn.DEFAULT_MAPPING,r=pr,i=pr,s=Nn,o=Qi,a=Hr,l=Zi,c=kn.DEFAULT_ANISOTROPY,u=hi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uV++}),this.uuid=gi(),this.name="",this.source=new il(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Vd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===ra?In:hi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case no:e.x=e.x-Math.floor(e.x);break;case pr:e.x=e.x<0?0:1;break;case xl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case no:e.y=e.y-Math.floor(e.y);break;case pr:e.y=e.y<0?0:1;break;case xl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Vd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===In?ra:lx}set encoding(e){Vd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ra?In:hi}}kn.DEFAULT_IMAGE=null;kn.DEFAULT_MAPPING=pv;kn.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,n=0,r=0,i=1){Wt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],g=l[2],m=l[6],v=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(c+h+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const y=(c+1)/2,E=(h+1)/2,T=(v+1)/2,_=(u+f)/4,w=(d+g)/4,M=(p+m)/4;return y>E&&y>T?y<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(y),i=_/r,s=w/r):E>T?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=_/i,s=M/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=w/s,i=M/s),this.set(r,i,s,n),this}let b=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(f-u)*(f-u));return Math.abs(b)<.001&&(b=1),this.x=(m-p)/b,this.y=(d-g)/b,this.z=(f-u)/b,this.w=Math.acos((c+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iL extends Es{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Wt(0,0,e,n),this.scissorTest=!1,this.viewport=new Wt(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Vd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===ra?In:hi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Nn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new kn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new il(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bi extends iL{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class yv extends kn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dV extends Bi{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new yv(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class fx extends kn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fV extends Bi{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new fx(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class hV extends Bi{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class tr{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],h=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=h,e[n+2]=p,e[n+3]=g;return}if(d!==g||l!==f||c!==h||u!==p){let m=1-a;const v=l*f+c*h+u*p+d*g,b=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const T=Math.sqrt(y),_=Math.atan2(T,v*b);m=Math.sin(m*_)/T,a=Math.sin(a*_)/T}const E=a*b;if(l=l*m+f*E,c=c*m+h*E,u=u*m+p*E,d=d*m+g*E,m===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=T,c*=T,u*=T,d*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[n]=a*p+u*d+l*h-c*f,e[n+1]=l*p+u*f+c*d-a*h,e[n+2]=c*p+u*h+a*f-l*d,e[n+3]=u*p-a*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),h=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(o-i)*h}else if(r>a&&r>d){const h=2*Math.sqrt(1+r-a-d);this._w=(u-l)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+c)/h}else if(a>d){const h=2*Math.sqrt(1+a-r-d);this._w=(s-c)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-r-a);this._w=(o-i)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-n;return this._w=h*o+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,n=0,r=0){W.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(_1.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(_1.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ry.copy(this).projectOnVector(e),this.sub(ry)}reflect(e){return this.sub(ry.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ry=new W,_1=new tr;class vr{constructor(e=new W(1/0,1/0,1/0),n=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint($i.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint($i.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=$i.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,$i):$i.fromBufferAttribute(s,o),$i.applyMatrix4(e.matrixWorld),this.expandByPoint($i);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ih.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Ih.copy(r.boundingBox)),Ih.applyMatrix4(e.matrixWorld),this.union(Ih)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$i),$i.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ed),Oh.subVectors(this.max,ed),rc.subVectors(e.a,ed),ic.subVectors(e.b,ed),sc.subVectors(e.c,ed),So.subVectors(ic,rc),Eo.subVectors(sc,ic),Ia.subVectors(rc,sc);let n=[0,-So.z,So.y,0,-Eo.z,Eo.y,0,-Ia.z,Ia.y,So.z,0,-So.x,Eo.z,0,-Eo.x,Ia.z,0,-Ia.x,-So.y,So.x,0,-Eo.y,Eo.x,0,-Ia.y,Ia.x,0];return!iy(n,rc,ic,sc,Oh)||(n=[1,0,0,0,1,0,0,0,1],!iy(n,rc,ic,sc,Oh))?!1:(kh.crossVectors(So,Eo),n=[kh.x,kh.y,kh.z],iy(n,rc,ic,sc,Oh))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$i).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize($i).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ls[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ls[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ls[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ls[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ls[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ls[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ls[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ls[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ls),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ls=[new W,new W,new W,new W,new W,new W,new W,new W],$i=new W,Ih=new vr,rc=new W,ic=new W,sc=new W,So=new W,Eo=new W,Ia=new W,ed=new W,Oh=new W,kh=new W,Oa=new W;function iy(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Oa.fromArray(t,s);const a=i.x*Math.abs(Oa.x)+i.y*Math.abs(Oa.y)+i.z*Math.abs(Oa.z),l=e.dot(Oa),c=n.dot(Oa),u=r.dot(Oa);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const pV=new vr,td=new W,sy=new W;class gr{constructor(e=new W,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):pV.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;td.subVectors(e,this.center);const n=td.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(td,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(td.copy(e.center).add(sy)),this.expandByPoint(td.copy(e.center).sub(sy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Is=new W,oy=new W,Dh=new W,Mo=new W,ay=new W,Nh=new W,ly=new W;class Ul{constructor(e=new W,n=new W(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Is)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Is.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Is.copy(this.origin).addScaledVector(this.direction,n),Is.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){oy.copy(e).add(n).multiplyScalar(.5),Dh.copy(n).sub(e).normalize(),Mo.copy(this.origin).sub(oy);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Dh),a=Mo.dot(this.direction),l=-Mo.dot(Dh),c=Mo.lengthSq(),u=Math.abs(1-o*o);let d,f,h,p;if(u>0)if(d=o*l-a,f=o*a-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const g=1/u;d*=g,f*=g,h=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(oy).addScaledVector(Dh,f),h}intersectSphere(e,n){Is.subVectors(e.center,this.origin);const r=Is.dot(this.direction),i=Is.dot(Is)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Is)!==null}intersectTriangle(e,n,r,i,s){ay.subVectors(n,e),Nh.subVectors(r,e),ly.crossVectors(ay,Nh);let o=this.direction.dot(ly),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Mo.subVectors(this.origin,e);const l=a*this.direction.dot(Nh.crossVectors(Mo,Nh));if(l<0)return null;const c=a*this.direction.dot(ay.cross(Mo));if(c<0||l+c>o)return null;const u=-a*Mo.dot(ly);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pt{constructor(e,n,r,i,s,o,a,l,c,u,d,f,h,p,g,m){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,g,m)}set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,g,m){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=f,v[3]=h,v[7]=p,v[11]=g,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/oc.setFromMatrixColumn(e,0).length(),s=1/oc.setFromMatrixColumn(e,1).length(),o=1/oc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,h=o*d,p=a*u,g=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=h+p*c,n[5]=f-g*c,n[9]=-a*l,n[2]=g-f*c,n[6]=p+h*c,n[10]=o*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,g=c*d;n[0]=f+g*a,n[4]=p*a-h,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=h*a-p,n[6]=g+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,g=c*d;n[0]=f-g*a,n[4]=-o*d,n[8]=p+h*a,n[1]=h+p*a,n[5]=o*u,n[9]=g-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*u,h=o*d,p=a*u,g=a*d;n[0]=l*u,n[4]=p*c-h,n[8]=f*c+g,n[1]=l*d,n[5]=g*c+f,n[9]=h*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,h=o*c,p=a*l,g=a*c;n[0]=l*u,n[4]=g-f*d,n[8]=p*d+h,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=h*d+p,n[10]=f-g*d}else if(e.order==="XZY"){const f=o*l,h=o*c,p=a*l,g=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+g,n[5]=o*u,n[9]=h*d-p,n[2]=p*d-h,n[6]=a*u,n[10]=g*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mV,e,vV)}lookAt(e,n,r){const i=this.elements;return li.subVectors(e,n),li.lengthSq()===0&&(li.z=1),li.normalize(),Co.crossVectors(r,li),Co.lengthSq()===0&&(Math.abs(r.z)===1?li.x+=1e-4:li.z+=1e-4,li.normalize(),Co.crossVectors(r,li)),Co.normalize(),Fh.crossVectors(li,Co),i[0]=Co.x,i[4]=Fh.x,i[8]=li.x,i[1]=Co.y,i[5]=Fh.y,i[9]=li.y,i[2]=Co.z,i[6]=Fh.z,i[10]=li.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],h=r[13],p=r[2],g=r[6],m=r[10],v=r[14],b=r[3],y=r[7],E=r[11],T=r[15],_=i[0],w=i[4],M=i[8],x=i[12],S=i[1],R=i[5],I=i[9],z=i[13],P=i[2],B=i[6],U=i[10],j=i[14],Z=i[3],ne=i[7],K=i[11],fe=i[15];return s[0]=o*_+a*S+l*P+c*Z,s[4]=o*w+a*R+l*B+c*ne,s[8]=o*M+a*I+l*U+c*K,s[12]=o*x+a*z+l*j+c*fe,s[1]=u*_+d*S+f*P+h*Z,s[5]=u*w+d*R+f*B+h*ne,s[9]=u*M+d*I+f*U+h*K,s[13]=u*x+d*z+f*j+h*fe,s[2]=p*_+g*S+m*P+v*Z,s[6]=p*w+g*R+m*B+v*ne,s[10]=p*M+g*I+m*U+v*K,s[14]=p*x+g*z+m*j+v*fe,s[3]=b*_+y*S+E*P+T*Z,s[7]=b*w+y*R+E*B+T*ne,s[11]=b*M+y*I+E*U+T*K,s[15]=b*x+y*z+E*j+T*fe,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],g=e[7],m=e[11],v=e[15];return p*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*h-r*l*h)+g*(+n*l*h-n*c*f+s*o*f-i*o*h+i*c*u-s*l*u)+m*(+n*c*d-n*a*h-s*o*d+r*o*h+s*a*u-r*c*u)+v*(-i*a*u-n*l*d+n*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],b=d*m*c-g*f*c+g*l*h-a*m*h-d*l*v+a*f*v,y=p*f*c-u*m*c-p*l*h+o*m*h+u*l*v-o*f*v,E=u*g*c-p*d*c+p*a*h-o*g*h-u*a*v+o*d*v,T=p*d*l-u*g*l-p*a*f+o*g*f+u*a*m-o*d*m,_=n*b+r*y+i*E+s*T;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=b*w,e[1]=(g*f*s-d*m*s-g*i*h+r*m*h+d*i*v-r*f*v)*w,e[2]=(a*m*s-g*l*s+g*i*c-r*m*c-a*i*v+r*l*v)*w,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*h-r*l*h)*w,e[4]=y*w,e[5]=(u*m*s-p*f*s+p*i*h-n*m*h-u*i*v+n*f*v)*w,e[6]=(p*l*s-o*m*s-p*i*c+n*m*c+o*i*v-n*l*v)*w,e[7]=(o*f*s-u*l*s+u*i*c-n*f*c-o*i*h+n*l*h)*w,e[8]=E*w,e[9]=(p*d*s-u*g*s-p*r*h+n*g*h+u*r*v-n*d*v)*w,e[10]=(o*g*s-p*a*s+p*r*c-n*g*c-o*r*v+n*a*v)*w,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*h-n*a*h)*w,e[12]=T*w,e[13]=(u*g*i-p*d*i+p*r*f-n*g*f-u*r*m+n*d*m)*w,e[14]=(p*a*i-o*g*i-p*r*l+n*g*l+o*r*m-n*a*m)*w,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*f+n*a*f)*w,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,f=s*c,h=s*u,p=s*d,g=o*u,m=o*d,v=a*d,b=l*c,y=l*u,E=l*d,T=r.x,_=r.y,w=r.z;return i[0]=(1-(g+v))*T,i[1]=(h+E)*T,i[2]=(p-y)*T,i[3]=0,i[4]=(h-E)*_,i[5]=(1-(f+v))*_,i[6]=(m+b)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(m-b)*w,i[10]=(1-(f+g))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=oc.set(i[0],i[1],i[2]).length();const o=oc.set(i[4],i[5],i[6]).length(),a=oc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],zi.copy(this);const c=1/s,u=1/o,d=1/a;return zi.elements[0]*=c,zi.elements[1]*=c,zi.elements[2]*=c,zi.elements[4]*=u,zi.elements[5]*=u,zi.elements[6]*=u,zi.elements[8]*=d,zi.elements[9]*=d,zi.elements[10]*=d,n.setFromRotationMatrix(zi),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=qi){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let h,p;if(a===qi)h=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===ru)h=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=qi){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),f=(n+e)*c,h=(r+i)*u;let p,g;if(a===qi)p=(o+s)*d,g=-2*d;else if(a===ru)p=s*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const oc=new W,zi=new pt,mV=new W(0,0,0),vV=new W(1,1,1),Co=new W,Fh=new W,li=new W,x1=new pt,w1=new tr;class $l{constructor(e=0,n=0,r=0,i=$l.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Xn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return x1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(x1,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return w1.setFromEuler(this),this.setFromQuaternion(w1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$l.DEFAULT_ORDER="XYZ";class bv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gV=0;const S1=new W,ac=new tr,Os=new pt,Bh=new W,nd=new W,yV=new W,bV=new tr,E1=new W(1,0,0),M1=new W(0,1,0),C1=new W(0,0,1),_V={type:"added"},xV={type:"removed"};class nn extends Es{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gV++}),this.uuid=gi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nn.DEFAULT_UP.clone();const e=new W,n=new $l,r=new tr,i=new W(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new pt},normalMatrix:{value:new Rt}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=nn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ac.setFromAxisAngle(e,n),this.quaternion.multiply(ac),this}rotateOnWorldAxis(e,n){return ac.setFromAxisAngle(e,n),this.quaternion.premultiply(ac),this}rotateX(e){return this.rotateOnAxis(E1,e)}rotateY(e){return this.rotateOnAxis(M1,e)}rotateZ(e){return this.rotateOnAxis(C1,e)}translateOnAxis(e,n){return S1.copy(e).applyQuaternion(this.quaternion),this.position.add(S1.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(E1,e)}translateY(e){return this.translateOnAxis(M1,e)}translateZ(e){return this.translateOnAxis(C1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Os.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Bh.copy(e):Bh.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),nd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Os.lookAt(nd,Bh,this.up):Os.lookAt(Bh,nd,this.up),this.quaternion.setFromRotationMatrix(Os),i&&(Os.extractRotation(i.matrixWorld),ac.setFromRotationMatrix(Os),this.quaternion.premultiply(ac.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_V)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xV)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Os.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Os.multiply(e.parent.matrixWorld)),e.applyMatrix4(Os),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,e,yV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,bV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),h=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}nn.DEFAULT_UP=new W(0,1,0);nn.DEFAULT_MATRIX_AUTO_UPDATE=!0;nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Hi=new W,ks=new W,cy=new W,Ds=new W,lc=new W,cc=new W,A1=new W,uy=new W,dy=new W,fy=new W;let Vh=!1;class $r{constructor(e=new W,n=new W,r=new W){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Hi.subVectors(e,n),i.cross(Hi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Hi.subVectors(i,n),ks.subVectors(r,n),cy.subVectors(e,n);const o=Hi.dot(Hi),a=Hi.dot(ks),l=Hi.dot(cy),c=ks.dot(ks),u=ks.dot(cy),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(c*l-a*u)*f,p=(o*u-a*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ds)===null?!1:Ds.x>=0&&Ds.y>=0&&Ds.x+Ds.y<=1}static getUV(e,n,r,i,s,o,a,l){return Vh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vh=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ds)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ds.x),l.addScaledVector(o,Ds.y),l.addScaledVector(a,Ds.z),l)}static isFrontFacing(e,n,r,i){return Hi.subVectors(r,n),ks.subVectors(e,n),Hi.cross(ks).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hi.subVectors(this.c,this.b),ks.subVectors(this.a,this.b),Hi.cross(ks).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return $r.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return Vh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vh=!0),$r.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return $r.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return $r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;lc.subVectors(i,r),cc.subVectors(s,r),uy.subVectors(e,r);const l=lc.dot(uy),c=cc.dot(uy);if(l<=0&&c<=0)return n.copy(r);dy.subVectors(e,i);const u=lc.dot(dy),d=cc.dot(dy);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(lc,o);fy.subVectors(e,s);const h=lc.dot(fy),p=cc.dot(fy);if(p>=0&&h<=p)return n.copy(s);const g=h*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(r).addScaledVector(cc,a);const m=u*p-h*d;if(m<=0&&d-u>=0&&h-p>=0)return A1.subVectors(s,i),a=(d-u)/(d-u+(h-p)),n.copy(i).addScaledVector(A1,a);const v=1/(m+g+f);return o=g*v,a=f*v,n.copy(r).addScaledVector(lc,o).addScaledVector(cc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const sL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ao={h:0,s:0,l:0},Uh={h:0,s:0,l:0};function hy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ke{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=In){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ln.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=ln.workingColorSpace){return this.r=e,this.g=n,this.b=r,ln.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=ln.workingColorSpace){if(e=ux(e,1),n=Xn(n,0,1),r=Xn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=hy(o,s,e+1/3),this.g=hy(o,s,e),this.b=hy(o,s,e-1/3)}return ln.toWorkingColorSpace(this,i),this}setStyle(e,n=In){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=In){const r=sL[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gc(e.r),this.g=Gc(e.g),this.b=Gc(e.b),this}copyLinearToSRGB(e){return this.r=ty(e.r),this.g=ty(e.g),this.b=ty(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=In){return ln.fromWorkingColorSpace(Pr.copy(this),e),Math.round(Xn(Pr.r*255,0,255))*65536+Math.round(Xn(Pr.g*255,0,255))*256+Math.round(Xn(Pr.b*255,0,255))}getHexString(e=In){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ln.workingColorSpace){ln.fromWorkingColorSpace(Pr.copy(this),n);const r=Pr.r,i=Pr.g,s=Pr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=ln.workingColorSpace){return ln.fromWorkingColorSpace(Pr.copy(this),n),e.r=Pr.r,e.g=Pr.g,e.b=Pr.b,e}getStyle(e=In){ln.fromWorkingColorSpace(Pr.copy(this),e);const n=Pr.r,r=Pr.g,i=Pr.b;return e!==In?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Ao),this.setHSL(Ao.h+e,Ao.s+n,Ao.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Ao),e.getHSL(Uh);const r=Bd(Ao.h,Uh.h,n),i=Bd(Ao.s,Uh.s,n),s=Bd(Ao.l,Uh.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pr=new Ke;Ke.NAMES=sL;let wV=0;class ar extends Es{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wV++}),this.uuid=gi(),this.name="",this.type="Material",this.blending=dl,this.side=bs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Em,this.blendDst=Mm,this.blendEquation=qo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ke(0,0,0),this.blendAlpha=0,this.depthFunc=sf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qa,this.stencilZFail=qa,this.stencilZPass=qa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==dl&&(r.blending=this.blending),this.side!==bs&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Em&&(r.blendSrc=this.blendSrc),this.blendDst!==Mm&&(r.blendDst=this.blendDst),this.blendEquation!==qo&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mb&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qa&&(r.stencilFail=this.stencilFail),this.stencilZFail!==qa&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==qa&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Gr extends ar{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ws=SV();function SV(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Yr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Xn(t,-65504,65504),Ws.floatView[0]=t;const e=Ws.uint32View[0],n=e>>23&511;return Ws.baseTable[n]+((e&8388607)>>Ws.shiftTable[n])}function Pd(t){const e=t>>10;return Ws.uint32View[0]=Ws.mantissaTable[Ws.offsetTable[e]+(t&1023)]+Ws.exponentTable[e],Ws.floatView[0]}const EV={toHalfFloat:Yr,fromHalfFloat:Pd},Jn=new W,$h=new Ie;class Ut{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=ff,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ki,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)$h.fromBufferAttribute(this,n),$h.applyMatrix3(e),this.setXY(n,$h.x,$h.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix3(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix4(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyNormalMatrix(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.transformDirection(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ei(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Tt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ei(n,this.array)),n}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ei(n,this.array)),n}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ei(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ei(n,this.array)),n}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ff&&(e.usage=this.usage),e}}class MV extends Ut{constructor(e,n,r){super(new Int8Array(e),n,r)}}class CV extends Ut{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class AV extends Ut{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class TV extends Ut{constructor(e,n,r){super(new Int16Array(e),n,r)}}class hx extends Ut{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class PV extends Ut{constructor(e,n,r){super(new Int32Array(e),n,r)}}class px extends Ut{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class RV extends Ut{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Pd(this.array[e*this.itemSize]);return this.normalized&&(n=ei(n,this.array)),n}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize]=Yr(n),this}getY(e){let n=Pd(this.array[e*this.itemSize+1]);return this.normalized&&(n=ei(n,this.array)),n}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+1]=Yr(n),this}getZ(e){let n=Pd(this.array[e*this.itemSize+2]);return this.normalized&&(n=ei(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+2]=Yr(n),this}getW(e){let n=Pd(this.array[e*this.itemSize+3]);return this.normalized&&(n=ei(n,this.array)),n}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+3]=Yr(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.array[e+0]=Yr(n),this.array[e+1]=Yr(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.array[e+0]=Yr(n),this.array[e+1]=Yr(r),this.array[e+2]=Yr(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.array[e+0]=Yr(n),this.array[e+1]=Yr(r),this.array[e+2]=Yr(i),this.array[e+3]=Yr(s),this}}class lt extends Ut{constructor(e,n,r){super(new Float32Array(e),n,r)}}class LV extends Ut{constructor(e,n,r){super(new Float64Array(e),n,r)}}let IV=0;const Ei=new pt,py=new nn,uc=new W,ci=new vr,rd=new vr,fr=new W;class Mt extends Es{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:IV++}),this.uuid=gi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nL(e)?px:hx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Rt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ei.makeRotationFromQuaternion(e),this.applyMatrix4(Ei),this}rotateX(e){return Ei.makeRotationX(e),this.applyMatrix4(Ei),this}rotateY(e){return Ei.makeRotationY(e),this.applyMatrix4(Ei),this}rotateZ(e){return Ei.makeRotationZ(e),this.applyMatrix4(Ei),this}translate(e,n,r){return Ei.makeTranslation(e,n,r),this.applyMatrix4(Ei),this}scale(e,n,r){return Ei.makeScale(e,n,r),this.applyMatrix4(Ei),this}lookAt(e){return py.lookAt(e),py.updateMatrix(),this.applyMatrix4(py.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uc).negate(),this.translate(uc.x,uc.y,uc.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new lt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];ci.setFromBufferAttribute(s),this.morphTargetsRelative?(fr.addVectors(this.boundingBox.min,ci.min),this.boundingBox.expandByPoint(fr),fr.addVectors(this.boundingBox.max,ci.max),this.boundingBox.expandByPoint(fr)):(this.boundingBox.expandByPoint(ci.min),this.boundingBox.expandByPoint(ci.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new W,1/0);return}if(e){const r=this.boundingSphere.center;if(ci.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];rd.setFromBufferAttribute(a),this.morphTargetsRelative?(fr.addVectors(ci.min,rd.min),ci.expandByPoint(fr),fr.addVectors(ci.max,rd.max),ci.expandByPoint(fr)):(ci.expandByPoint(rd.min),ci.expandByPoint(rd.max))}ci.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)fr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(fr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)fr.fromBufferAttribute(a,c),l&&(uc.fromBufferAttribute(e,c),fr.add(uc)),i=Math.max(i,r.distanceToSquared(fr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let S=0;S<a;S++)c[S]=new W,u[S]=new W;const d=new W,f=new W,h=new W,p=new Ie,g=new Ie,m=new Ie,v=new W,b=new W;function y(S,R,I){d.fromArray(i,S*3),f.fromArray(i,R*3),h.fromArray(i,I*3),p.fromArray(o,S*2),g.fromArray(o,R*2),m.fromArray(o,I*2),f.sub(d),h.sub(d),g.sub(p),m.sub(p);const z=1/(g.x*m.y-m.x*g.y);isFinite(z)&&(v.copy(f).multiplyScalar(m.y).addScaledVector(h,-g.y).multiplyScalar(z),b.copy(h).multiplyScalar(g.x).addScaledVector(f,-m.x).multiplyScalar(z),c[S].add(v),c[R].add(v),c[I].add(v),u[S].add(b),u[R].add(b),u[I].add(b))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let S=0,R=E.length;S<R;++S){const I=E[S],z=I.start,P=I.count;for(let B=z,U=z+P;B<U;B+=3)y(r[B+0],r[B+1],r[B+2])}const T=new W,_=new W,w=new W,M=new W;function x(S){w.fromArray(s,S*3),M.copy(w);const R=c[S];T.copy(R),T.sub(w.multiplyScalar(w.dot(R))).normalize(),_.crossVectors(M,R);const z=_.dot(u[S])<0?-1:1;l[S*4]=T.x,l[S*4+1]=T.y,l[S*4+2]=T.z,l[S*4+3]=z}for(let S=0,R=E.length;S<R;++S){const I=E[S],z=I.start,P=I.count;for(let B=z,U=z+P;B<U;B+=3)x(r[B+0]),x(r[B+1]),x(r[B+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ut(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new W,s=new W,o=new W,a=new W,l=new W,c=new W,u=new W,d=new W;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),g=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,h=n.count;f<h;f+=3)i.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)fr.fromBufferAttribute(e,n),fr.normalize(),e.setXYZ(n,fr.x,fr.y,fr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let g=0,m=l.length;g<m;g++){a.isInterleavedBufferAttribute?h=l[g]*a.data.stride+a.offset:h=l[g]*u;for(let v=0;v<u;v++)f[p++]=c[h++]}return new Ut(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Mt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,r);l.push(h)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const T1=new pt,ka=new Ul,zh=new gr,P1=new W,dc=new W,fc=new W,hc=new W,my=new W,Hh=new W,Gh=new Ie,Wh=new Ie,jh=new Ie,R1=new W,L1=new W,I1=new W,Xh=new W,Kh=new W;class En extends nn{constructor(e=new Mt,n=new Gr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Hh.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(my.fromBufferAttribute(d,e),o?Hh.addScaledVector(my,u):Hh.addScaledVector(my.sub(n),u))}n.add(Hh)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),zh.copy(r.boundingSphere),zh.applyMatrix4(s),ka.copy(e.ray).recast(e.near),!(zh.containsPoint(ka.origin)===!1&&(ka.intersectSphere(zh,P1)===null||ka.origin.distanceToSquared(P1)>(e.far-e.near)**2))&&(T1.copy(s).invert(),ka.copy(e.ray).applyMatrix4(T1),!(r.boundingBox!==null&&ka.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ka)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,g=f.length;p<g;p++){const m=f[p],v=o[m.materialIndex],b=Math.max(m.start,h.start),y=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));for(let E=b,T=y;E<T;E+=3){const _=a.getX(E),w=a.getX(E+1),M=a.getX(E+2);i=qh(this,v,e,r,c,u,d,_,w,M),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);for(let m=p,v=g;m<v;m+=3){const b=a.getX(m),y=a.getX(m+1),E=a.getX(m+2);i=qh(this,o,e,r,c,u,d,b,y,E),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,g=f.length;p<g;p++){const m=f[p],v=o[m.materialIndex],b=Math.max(m.start,h.start),y=Math.min(l.count,Math.min(m.start+m.count,h.start+h.count));for(let E=b,T=y;E<T;E+=3){const _=E,w=E+1,M=E+2;i=qh(this,v,e,r,c,u,d,_,w,M),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),g=Math.min(l.count,h.start+h.count);for(let m=p,v=g;m<v;m+=3){const b=m,y=m+1,E=m+2;i=qh(this,o,e,r,c,u,d,b,y,E),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function OV(t,e,n,r,i,s,o,a){let l;if(e.side===Or?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===bs,a),l===null)return null;Kh.copy(a),Kh.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Kh);return c<n.near||c>n.far?null:{distance:c,point:Kh.clone(),object:t}}function qh(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,dc),t.getVertexPosition(l,fc),t.getVertexPosition(c,hc);const u=OV(t,e,n,r,dc,fc,hc,Xh);if(u){i&&(Gh.fromBufferAttribute(i,a),Wh.fromBufferAttribute(i,l),jh.fromBufferAttribute(i,c),u.uv=$r.getInterpolation(Xh,dc,fc,hc,Gh,Wh,jh,new Ie)),s&&(Gh.fromBufferAttribute(s,a),Wh.fromBufferAttribute(s,l),jh.fromBufferAttribute(s,c),u.uv1=$r.getInterpolation(Xh,dc,fc,hc,Gh,Wh,jh,new Ie),u.uv2=u.uv1),o&&(R1.fromBufferAttribute(o,a),L1.fromBufferAttribute(o,l),I1.fromBufferAttribute(o,c),u.normal=$r.getInterpolation(Xh,dc,fc,hc,R1,L1,I1,new W),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new W,materialIndex:0};$r.getNormal(dc,fc,hc,d.normal),u.face=d}return u}class xa extends Mt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new lt(c,3)),this.setAttribute("normal",new lt(u,3)),this.setAttribute("uv",new lt(d,2));function p(g,m,v,b,y,E,T,_,w,M,x){const S=E/w,R=T/M,I=E/2,z=T/2,P=_/2,B=w+1,U=M+1;let j=0,Z=0;const ne=new W;for(let K=0;K<U;K++){const fe=K*R-z;for(let Se=0;Se<B;Se++){const de=Se*S-I;ne[g]=de*b,ne[m]=fe*y,ne[v]=P,c.push(ne.x,ne.y,ne.z),ne[g]=0,ne[m]=0,ne[v]=_>0?1:-1,u.push(ne.x,ne.y,ne.z),d.push(Se/w),d.push(1-K/M),j+=1}}for(let K=0;K<M;K++)for(let fe=0;fe<w;fe++){const Se=f+fe+B*K,de=f+fe+B*(K+1),ae=f+(fe+1)+B*(K+1),ge=f+(fe+1)+B*K;l.push(Se,de,ge),l.push(de,ae,ge),Z+=6}a.addGroup(h,Z,x),h+=Z,f+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function su(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Vr(t){const e={};for(let n=0;n<t.length;n++){const r=su(t[n]);for(const i in r)e[i]=r[i]}return e}function kV(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function oL(t){return t.getRenderTarget()===null?t.outputColorSpace:ln.workingColorSpace}const $f={clone:su,merge:Vr};var DV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,NV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ii extends ar{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=DV,this.fragmentShader=NV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=su(e.uniforms),this.uniformsGroups=kV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zf extends nn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt,this.coordinateSystem=qi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class yn extends zf{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=iu*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return iu*2*Math.atan(Math.tan(hl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(hl*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const pc=-90,mc=1;class aL extends nn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yn(pc,mc,e,n);i.layers=this.layers,this.add(i);const s=new yn(pc,mc,e,n);s.layers=this.layers,this.add(s);const o=new yn(pc,mc,e,n);o.layers=this.layers,this.add(o);const a=new yn(pc,mc,e,n);a.layers=this.layers,this.add(a);const l=new yn(pc,mc,e,n);l.layers=this.layers,this.add(l);const c=new yn(pc,mc,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===qi)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ru)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Hf extends kn{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:to,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lL extends Bi{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Vd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ra?In:hi),this.texture=new Hf(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Nn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new xa(5,5,5),s=new ii({name:"CubemapFromEquirect",uniforms:su(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Or,blending:Zs});s.uniforms.tEquirect.value=n;const o=new En(i,s),a=n.minFilter;return n.minFilter===Qi&&(n.minFilter=Nn),new aL(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const vy=new W,FV=new W,BV=new Rt;class ds{constructor(e=new W(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=vy.subVectors(r,n).cross(FV.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(vy),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||BV.getNormalMatrix(e),i=this.coplanarPoint(vy).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Da=new gr,Yh=new W;class Gf{constructor(e=new ds,n=new ds,r=new ds,i=new ds,s=new ds,o=new ds){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=qi){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],h=i[8],p=i[9],g=i[10],m=i[11],v=i[12],b=i[13],y=i[14],E=i[15];if(r[0].setComponents(l-s,f-c,m-h,E-v).normalize(),r[1].setComponents(l+s,f+c,m+h,E+v).normalize(),r[2].setComponents(l+o,f+u,m+p,E+b).normalize(),r[3].setComponents(l-o,f-u,m-p,E-b).normalize(),r[4].setComponents(l-a,f-d,m-g,E-y).normalize(),n===qi)r[5].setComponents(l+a,f+d,m+g,E+y).normalize();else if(n===ru)r[5].setComponents(a,d,g,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Da.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Da.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Da)}intersectsSprite(e){return Da.center.set(0,0,0),Da.radius=.7071067811865476,Da.applyMatrix4(e.matrixWorld),this.intersectsSphere(Da)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Yh.x=i.normal.x>0?e.max.x:e.min.x,Yh.y=i.normal.y>0?e.max.y:e.min.y,Yh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Yh)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function cL(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function VV(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,f=c.usage,h=d.byteLength,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,d,f),c.onUploadCallback();let g;if(d instanceof Float32Array)g=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)g=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=t.SHORT;else if(d instanceof Uint32Array)g=t.UNSIGNED_INT;else if(d instanceof Int32Array)g=t.INT;else if(d instanceof Int8Array)g=t.BYTE;else if(d instanceof Uint8Array)g=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)g=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:h}}function s(c,u,d){const f=u.array,h=u._updateRange,p=u.updateRanges;if(t.bindBuffer(d,c),h.count===-1&&p.length===0&&t.bufferSubData(d,0,f),p.length!==0){for(let g=0,m=p.length;g<m;g++){const v=p[g];n?t.bufferSubData(d,v.start*f.BYTES_PER_ELEMENT,f,v.start,v.count):t.bufferSubData(d,v.start*f.BYTES_PER_ELEMENT,f.subarray(v.start,v.start+v.count))}u.clearUpdateRanges()}h.count!==-1&&(n?t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,u),d.version=c.version}}return{get:o,remove:a,update:l}}class zl extends Mt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,h=[],p=[],g=[],m=[];for(let v=0;v<u;v++){const b=v*f-o;for(let y=0;y<c;y++){const E=y*d-s;p.push(E,-b,0),g.push(0,0,1),m.push(y/a),m.push(1-v/l)}}for(let v=0;v<l;v++)for(let b=0;b<a;b++){const y=b+c*v,E=b+c*(v+1),T=b+1+c*(v+1),_=b+1+c*v;h.push(y,E,_),h.push(E,T,_)}this.setIndex(h),this.setAttribute("position",new lt(p,3)),this.setAttribute("normal",new lt(g,3)),this.setAttribute("uv",new lt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.width,e.height,e.widthSegments,e.heightSegments)}}var UV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,$V=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,HV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GV=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,WV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,XV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,KV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,YV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,JV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,QV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,nU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,iU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sU=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,aU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,lU=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dU=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vU="gl_FragColor = linearToOutputTexel( gl_FragColor );",gU=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,yU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_U=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,SU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,EU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,MU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,TU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,PU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,RU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,LU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,IU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,OU=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,kU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,DU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,VU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UU=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$U=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,XU=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,KU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,YU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QU=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,e$=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,t$=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,n$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,r$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,i$=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,l$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,c$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,u$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,f$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,h$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,p$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,m$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,v$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,g$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,y$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,b$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,x$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,w$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,S$=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,E$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,M$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,C$=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,A$=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,T$=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,P$=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,R$=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,L$=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,I$=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,O$=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,k$=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,D$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,F$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,B$=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const V$=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,U$=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,z$=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G$=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,j$=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,X$=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,K$=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,q$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Y$=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z$=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,J$=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ez=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,az=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,At={alphahash_fragment:UV,alphahash_pars_fragment:$V,alphamap_fragment:zV,alphamap_pars_fragment:HV,alphatest_fragment:GV,alphatest_pars_fragment:WV,aomap_fragment:jV,aomap_pars_fragment:XV,batching_pars_vertex:KV,batching_vertex:qV,begin_vertex:YV,beginnormal_vertex:ZV,bsdfs:JV,iridescence_fragment:QV,bumpmap_pars_fragment:eU,clipping_planes_fragment:tU,clipping_planes_pars_fragment:nU,clipping_planes_pars_vertex:rU,clipping_planes_vertex:iU,color_fragment:sU,color_pars_fragment:oU,color_pars_vertex:aU,color_vertex:lU,common:cU,cube_uv_reflection_fragment:uU,defaultnormal_vertex:dU,displacementmap_pars_vertex:fU,displacementmap_vertex:hU,emissivemap_fragment:pU,emissivemap_pars_fragment:mU,colorspace_fragment:vU,colorspace_pars_fragment:gU,envmap_fragment:yU,envmap_common_pars_fragment:bU,envmap_pars_fragment:_U,envmap_pars_vertex:xU,envmap_physical_pars_fragment:OU,envmap_vertex:wU,fog_vertex:SU,fog_pars_vertex:EU,fog_fragment:MU,fog_pars_fragment:CU,gradientmap_pars_fragment:AU,lightmap_fragment:TU,lightmap_pars_fragment:PU,lights_lambert_fragment:RU,lights_lambert_pars_fragment:LU,lights_pars_begin:IU,lights_toon_fragment:kU,lights_toon_pars_fragment:DU,lights_phong_fragment:NU,lights_phong_pars_fragment:FU,lights_physical_fragment:BU,lights_physical_pars_fragment:VU,lights_fragment_begin:UU,lights_fragment_maps:$U,lights_fragment_end:zU,logdepthbuf_fragment:HU,logdepthbuf_pars_fragment:GU,logdepthbuf_pars_vertex:WU,logdepthbuf_vertex:jU,map_fragment:XU,map_pars_fragment:KU,map_particle_fragment:qU,map_particle_pars_fragment:YU,metalnessmap_fragment:ZU,metalnessmap_pars_fragment:JU,morphcolor_vertex:QU,morphnormal_vertex:e$,morphtarget_pars_vertex:t$,morphtarget_vertex:n$,normal_fragment_begin:r$,normal_fragment_maps:i$,normal_pars_fragment:s$,normal_pars_vertex:o$,normal_vertex:a$,normalmap_pars_fragment:l$,clearcoat_normal_fragment_begin:c$,clearcoat_normal_fragment_maps:u$,clearcoat_pars_fragment:d$,iridescence_pars_fragment:f$,opaque_fragment:h$,packing:p$,premultiplied_alpha_fragment:m$,project_vertex:v$,dithering_fragment:g$,dithering_pars_fragment:y$,roughnessmap_fragment:b$,roughnessmap_pars_fragment:_$,shadowmap_pars_fragment:x$,shadowmap_pars_vertex:w$,shadowmap_vertex:S$,shadowmask_pars_fragment:E$,skinbase_vertex:M$,skinning_pars_vertex:C$,skinning_vertex:A$,skinnormal_vertex:T$,specularmap_fragment:P$,specularmap_pars_fragment:R$,tonemapping_fragment:L$,tonemapping_pars_fragment:I$,transmission_fragment:O$,transmission_pars_fragment:k$,uv_pars_fragment:D$,uv_pars_vertex:N$,uv_vertex:F$,worldpos_vertex:B$,background_vert:V$,background_frag:U$,backgroundCube_vert:$$,backgroundCube_frag:z$,cube_vert:H$,cube_frag:G$,depth_vert:W$,depth_frag:j$,distanceRGBA_vert:X$,distanceRGBA_frag:K$,equirect_vert:q$,equirect_frag:Y$,linedashed_vert:Z$,linedashed_frag:J$,meshbasic_vert:Q$,meshbasic_frag:ez,meshlambert_vert:tz,meshlambert_frag:nz,meshmatcap_vert:rz,meshmatcap_frag:iz,meshnormal_vert:sz,meshnormal_frag:oz,meshphong_vert:az,meshphong_frag:lz,meshphysical_vert:cz,meshphysical_frag:uz,meshtoon_vert:dz,meshtoon_frag:fz,points_vert:hz,points_frag:pz,shadow_vert:mz,shadow_frag:vz,sprite_vert:gz,sprite_frag:yz},Xe={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},Ti={basic:{uniforms:Vr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:Vr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new Ke(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:Vr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:Vr([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:Vr([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new Ke(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:Vr([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:Vr([Xe.points,Xe.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:Vr([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:Vr([Xe.common,Xe.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:Vr([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:Vr([Xe.sprite,Xe.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:Vr([Xe.common,Xe.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:Vr([Xe.lights,Xe.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};Ti.physical={uniforms:Vr([Ti.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};const Zh={r:0,b:0,g:0};function bz(t,e,n,r,i,s,o){const a=new Ke(0);let l=s===!0?0:1,c,u,d=null,f=0,h=null;function p(m,v){let b=!1,y=v.isScene===!0?v.background:null;y&&y.isTexture&&(y=(v.backgroundBlurriness>0?n:e).get(y)),y===null?g(a,l):y&&y.isColor&&(g(y,1),b=!0);const E=t.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||b)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Au)?(u===void 0&&(u=new En(new xa(1,1,1),new ii({name:"BackgroundCubeMaterial",uniforms:su(Ti.backgroundCube.uniforms),vertexShader:Ti.backgroundCube.vertexShader,fragmentShader:Ti.backgroundCube.fragmentShader,side:Or,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,_,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=ln.getTransfer(y.colorSpace)!==Tn,(d!==y||f!==y.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,d=y,f=y.version,h=t.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new En(new zl(2,2),new ii({name:"BackgroundMaterial",uniforms:su(Ti.background.uniforms),vertexShader:Ti.background.vertexShader,fragmentShader:Ti.background.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=ln.getTransfer(y.colorSpace)!==Tn,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||f!==y.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,d=y,f=y.version,h=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}function g(m,v){m.getRGB(Zh,oL(t)),r.buffers.color.setClear(Zh.r,Zh.g,Zh.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(m,v=1){a.set(m),l=v,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,g(a,l)},render:p}}function _z(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let c=l,u=!1;function d(P,B,U,j,Z){let ne=!1;if(o){const K=g(j,U,B);c!==K&&(c=K,h(c.object)),ne=v(P,j,U,Z),ne&&b(P,j,U,Z)}else{const K=B.wireframe===!0;(c.geometry!==j.id||c.program!==U.id||c.wireframe!==K)&&(c.geometry=j.id,c.program=U.id,c.wireframe=K,ne=!0)}Z!==null&&n.update(Z,t.ELEMENT_ARRAY_BUFFER),(ne||u)&&(u=!1,M(P,B,U,j),Z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Z).buffer))}function f(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function h(P){return r.isWebGL2?t.bindVertexArray(P):s.bindVertexArrayOES(P)}function p(P){return r.isWebGL2?t.deleteVertexArray(P):s.deleteVertexArrayOES(P)}function g(P,B,U){const j=U.wireframe===!0;let Z=a[P.id];Z===void 0&&(Z={},a[P.id]=Z);let ne=Z[B.id];ne===void 0&&(ne={},Z[B.id]=ne);let K=ne[j];return K===void 0&&(K=m(f()),ne[j]=K),K}function m(P){const B=[],U=[],j=[];for(let Z=0;Z<i;Z++)B[Z]=0,U[Z]=0,j[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:U,attributeDivisors:j,object:P,attributes:{},index:null}}function v(P,B,U,j){const Z=c.attributes,ne=B.attributes;let K=0;const fe=U.getAttributes();for(const Se in fe)if(fe[Se].location>=0){const ae=Z[Se];let ge=ne[Se];if(ge===void 0&&(Se==="instanceMatrix"&&P.instanceMatrix&&(ge=P.instanceMatrix),Se==="instanceColor"&&P.instanceColor&&(ge=P.instanceColor)),ae===void 0||ae.attribute!==ge||ge&&ae.data!==ge.data)return!0;K++}return c.attributesNum!==K||c.index!==j}function b(P,B,U,j){const Z={},ne=B.attributes;let K=0;const fe=U.getAttributes();for(const Se in fe)if(fe[Se].location>=0){let ae=ne[Se];ae===void 0&&(Se==="instanceMatrix"&&P.instanceMatrix&&(ae=P.instanceMatrix),Se==="instanceColor"&&P.instanceColor&&(ae=P.instanceColor));const ge={};ge.attribute=ae,ae&&ae.data&&(ge.data=ae.data),Z[Se]=ge,K++}c.attributes=Z,c.attributesNum=K,c.index=j}function y(){const P=c.newAttributes;for(let B=0,U=P.length;B<U;B++)P[B]=0}function E(P){T(P,0)}function T(P,B){const U=c.newAttributes,j=c.enabledAttributes,Z=c.attributeDivisors;U[P]=1,j[P]===0&&(t.enableVertexAttribArray(P),j[P]=1),Z[P]!==B&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](P,B),Z[P]=B)}function _(){const P=c.newAttributes,B=c.enabledAttributes;for(let U=0,j=B.length;U<j;U++)B[U]!==P[U]&&(t.disableVertexAttribArray(U),B[U]=0)}function w(P,B,U,j,Z,ne,K){K===!0?t.vertexAttribIPointer(P,B,U,Z,ne):t.vertexAttribPointer(P,B,U,j,Z,ne)}function M(P,B,U,j){if(r.isWebGL2===!1&&(P.isInstancedMesh||j.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const Z=j.attributes,ne=U.getAttributes(),K=B.defaultAttributeValues;for(const fe in ne){const Se=ne[fe];if(Se.location>=0){let de=Z[fe];if(de===void 0&&(fe==="instanceMatrix"&&P.instanceMatrix&&(de=P.instanceMatrix),fe==="instanceColor"&&P.instanceColor&&(de=P.instanceColor)),de!==void 0){const ae=de.normalized,ge=de.itemSize,ue=n.get(de);if(ue===void 0)continue;const J=ue.buffer,X=ue.type,L=ue.bytesPerElement,N=r.isWebGL2===!0&&(X===t.INT||X===t.UNSIGNED_INT||de.gpuType===Q_);if(de.isInterleavedBufferAttribute){const G=de.data,$=G.stride,O=de.offset;if(G.isInstancedInterleavedBuffer){for(let k=0;k<Se.locationSize;k++)T(Se.location+k,G.meshPerAttribute);P.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let k=0;k<Se.locationSize;k++)E(Se.location+k);t.bindBuffer(t.ARRAY_BUFFER,J);for(let k=0;k<Se.locationSize;k++)w(Se.location+k,ge/Se.locationSize,X,ae,$*L,(O+ge/Se.locationSize*k)*L,N)}else{if(de.isInstancedBufferAttribute){for(let G=0;G<Se.locationSize;G++)T(Se.location+G,de.meshPerAttribute);P.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let G=0;G<Se.locationSize;G++)E(Se.location+G);t.bindBuffer(t.ARRAY_BUFFER,J);for(let G=0;G<Se.locationSize;G++)w(Se.location+G,ge/Se.locationSize,X,ae,ge*L,ge/Se.locationSize*G*L,N)}}else if(K!==void 0){const ae=K[fe];if(ae!==void 0)switch(ae.length){case 2:t.vertexAttrib2fv(Se.location,ae);break;case 3:t.vertexAttrib3fv(Se.location,ae);break;case 4:t.vertexAttrib4fv(Se.location,ae);break;default:t.vertexAttrib1fv(Se.location,ae)}}}}_()}function x(){I();for(const P in a){const B=a[P];for(const U in B){const j=B[U];for(const Z in j)p(j[Z].object),delete j[Z];delete B[U]}delete a[P]}}function S(P){if(a[P.id]===void 0)return;const B=a[P.id];for(const U in B){const j=B[U];for(const Z in j)p(j[Z].object),delete j[Z];delete B[U]}delete a[P.id]}function R(P){for(const B in a){const U=a[B];if(U[P.id]===void 0)continue;const j=U[P.id];for(const Z in j)p(j[Z].object),delete j[Z];delete U[P.id]}}function I(){z(),u=!0,c!==l&&(c=l,h(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:I,resetDefaultState:z,dispose:x,releaseStatesOfGeometry:S,releaseStatesOfProgram:R,initAttributes:y,enableAttribute:E,disableUnusedAttributes:_}}function xz(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){t.drawArrays(s,u,d),n.update(d,s,1)}function l(u,d,f){if(f===0)return;let h,p;if(i)h=t,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](s,u,d,f),n.update(d,s,f)}function c(u,d,f){if(f===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<f;p++)this.render(u[p],d[p]);else{h.multiDrawArraysWEBGL(s,u,0,d,0,f);let p=0;for(let g=0;g<f;g++)p+=d[g];n.update(p,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function wz(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(w){if(w==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),b=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,E=o||e.has("OES_texture_float"),T=y&&E,_=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:y,floatFragmentTextures:E,floatVertexTextures:T,maxSamples:_}}function Sz(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new ds,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,v=t.get(d);if(!i||p===null||p.length===0||s&&!m)s?u(null):c();else{const b=s?0:r,y=b*4;let E=v.clippingState||null;l.value=E,E=u(p,f,y,h);for(let T=0;T!==y;++T)E[T]=n[T];v.clippingState=E,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,h,p){const g=d!==null?d.length:0;let m=null;if(g!==0){if(m=l.value,p!==!0||m===null){const v=h+g*4,b=f.matrixWorldInverse;a.getNormalMatrix(b),(m===null||m.length<v)&&(m=new Float32Array(v));for(let y=0,E=h;y!==g;++y,E+=4)o.copy(d[y]).applyMatrix4(b,a),o.normal.toArray(m,E),m[E+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}}function Ez(t){let e=new WeakMap;function n(o,a){return a===of?o.mapping=to:a===af&&(o.mapping=ua),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===of||a===af)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new lL(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Li extends zf{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Nc=4,O1=[.125,.215,.35,.446,.526,.582],el=20,gy=new Li,k1=new Ke;let yy=null,by=0,_y=0;const Ya=(1+Math.sqrt(5))/2,vc=1/Ya,D1=[new W(1,1,1),new W(-1,1,1),new W(1,1,-1),new W(-1,1,-1),new W(0,Ya,vc),new W(0,Ya,-vc),new W(vc,0,Ya),new W(-vc,0,Ya),new W(Ya,vc,0),new W(-Ya,vc,0)];class yb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){yy=this._renderer.getRenderTarget(),by=this._renderer.getActiveCubeFace(),_y=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=B1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=F1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yy,by,_y),e.scissorTest=!1,Jh(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===to||e.mapping===ua?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yy=this._renderer.getRenderTarget(),by=this._renderer.getActiveCubeFace(),_y=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Nn,minFilter:Nn,generateMipmaps:!1,type:wl,format:Hr,colorSpace:lr,depthBuffer:!1},i=N1(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=N1(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mz(s)),this._blurMaterial=Cz(s,e,n)}return i}_compileMaterial(e){const n=new En(this._lodPlanes[0],e);this._renderer.compile(n,gy)}_sceneToCubeUV(e,n,r,i){const a=new yn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(k1),u.toneMapping=Js,u.autoClear=!1;const h=new Gr({name:"PMREM.Background",side:Or,depthWrite:!1,depthTest:!1}),p=new En(new xa,h);let g=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,g=!0):(h.color.copy(k1),g=!0);for(let v=0;v<6;v++){const b=v%3;b===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):b===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const y=this._cubeSize;Jh(i,b*y,v>2?y:0,y,y),u.setRenderTarget(i),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===to||e.mapping===ua;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=B1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=F1());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new En(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Jh(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,gy)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=D1[(i-1)%D1.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new En(this._lodPlanes[i],c),f=c.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*el-1),g=s/p,m=isFinite(s)?1+Math.floor(u*g):el;m>el&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${el}`);const v=[];let b=0;for(let w=0;w<el;++w){const M=w/g,x=Math.exp(-M*M/2);v.push(x),w===0?b+=x:w<m&&(b+=2*x)}for(let w=0;w<v.length;w++)v[w]=v[w]/b;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=v,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-r;const E=this._sizeLods[i],T=3*E*(i>y-Nc?i-y+Nc:0),_=4*(this._cubeSize-E);Jh(n,T,_,3*E,2*E),l.setRenderTarget(n),l.render(d,gy)}}function Mz(t){const e=[],n=[],r=[];let i=t;const s=t-Nc+1+O1.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Nc?l=O1[o-t+Nc-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,g=3,m=2,v=1,b=new Float32Array(g*p*h),y=new Float32Array(m*p*h),E=new Float32Array(v*p*h);for(let _=0;_<h;_++){const w=_%3*2/3-1,M=_>2?0:-1,x=[w,M,0,w+2/3,M,0,w+2/3,M+1,0,w,M,0,w+2/3,M+1,0,w,M+1,0];b.set(x,g*p*_),y.set(f,m*p*_);const S=[_,_,_,_,_,_];E.set(S,v*p*_)}const T=new Mt;T.setAttribute("position",new Ut(b,g)),T.setAttribute("uv",new Ut(y,m)),T.setAttribute("faceIndex",new Ut(E,v)),e.push(T),i>Nc&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function N1(t,e,n){const r=new Bi(t,e,n);return r.texture.mapping=Au,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Jh(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Cz(t,e,n){const r=new Float32Array(el),i=new W(0,1,0);return new ii({name:"SphericalGaussianBlur",defines:{n:el,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function F1(){return new ii({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function B1(){return new ii({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function mx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Az(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===of||l===af,u=l===to||l===ua;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new yb(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){n===null&&(n=new yb(t));const f=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Tz(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Pz(t,e,n,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);for(const p in f.morphAttributes){const g=f.morphAttributes[p];for(let m=0,v=g.length;m<v;m++)e.remove(g[m])}f.removeEventListener("dispose",o),delete i[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER);const h=d.morphAttributes;for(const p in h){const g=h[p];for(let m=0,v=g.length;m<v;m++)e.update(g[m],t.ARRAY_BUFFER)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let g=0;if(h!==null){const b=h.array;g=h.version;for(let y=0,E=b.length;y<E;y+=3){const T=b[y+0],_=b[y+1],w=b[y+2];f.push(T,_,_,w,w,T)}}else if(p!==void 0){const b=p.array;g=p.version;for(let y=0,E=b.length/3-1;y<E;y+=3){const T=y+0,_=y+1,w=y+2;f.push(T,_,_,w,w,T)}}else return;const m=new(nL(f)?px:hx)(f,1);m.version=g;const v=s.get(d);v&&e.remove(v),s.set(d,m)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Rz(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){t.drawElements(s,p,a,h*l),n.update(p,s,1)}function d(h,p,g){if(g===0)return;let m,v;if(i)m=t,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,p,a,h*l,g),n.update(p,s,g)}function f(h,p,g){if(g===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<g;v++)this.render(h[v]/l,p[v]);else{m.multiDrawElementsWEBGL(s,p,0,a,h,0,g);let v=0;for(let b=0;b<g;b++)v+=p[b];n.update(v,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=f}function Lz(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Iz(t,e){return t[0]-e[0]}function Oz(t,e){return Math.abs(e[1])-Math.abs(t[1])}function kz(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Wt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const h=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=h!==void 0?h.length:0;let g=s.get(u);if(g===void 0||g.count!==p){let P=function(){I.dispose(),s.delete(u),u.removeEventListener("dispose",P)};g!==void 0&&g.texture.dispose();const b=u.morphAttributes.position!==void 0,y=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,T=u.morphAttributes.position||[],_=u.morphAttributes.normal||[],w=u.morphAttributes.color||[];let M=0;b===!0&&(M=1),y===!0&&(M=2),E===!0&&(M=3);let x=u.attributes.position.count*M,S=1;x>e.maxTextureSize&&(S=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const R=new Float32Array(x*S*4*p),I=new yv(R,x,S,p);I.type=Ki,I.needsUpdate=!0;const z=M*4;for(let B=0;B<p;B++){const U=T[B],j=_[B],Z=w[B],ne=x*S*4*B;for(let K=0;K<U.count;K++){const fe=K*z;b===!0&&(o.fromBufferAttribute(U,K),R[ne+fe+0]=o.x,R[ne+fe+1]=o.y,R[ne+fe+2]=o.z,R[ne+fe+3]=0),y===!0&&(o.fromBufferAttribute(j,K),R[ne+fe+4]=o.x,R[ne+fe+5]=o.y,R[ne+fe+6]=o.z,R[ne+fe+7]=0),E===!0&&(o.fromBufferAttribute(Z,K),R[ne+fe+8]=o.x,R[ne+fe+9]=o.y,R[ne+fe+10]=o.z,R[ne+fe+11]=Z.itemSize===4?o.w:1)}}g={count:p,texture:I,size:new Ie(x,S)},s.set(u,g),u.addEventListener("dispose",P)}let m=0;for(let b=0;b<f.length;b++)m+=f[b];const v=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(t,"morphTargetBaseInfluence",v),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const h=f===void 0?0:f.length;let p=r[u.id];if(p===void 0||p.length!==h){p=[];for(let y=0;y<h;y++)p[y]=[y,0];r[u.id]=p}for(let y=0;y<h;y++){const E=p[y];E[0]=y,E[1]=f[y]}p.sort(Oz);for(let y=0;y<8;y++)y<h&&p[y][1]?(a[y][0]=p[y][0],a[y][1]=p[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(Iz);const g=u.morphAttributes.position,m=u.morphAttributes.normal;let v=0;for(let y=0;y<8;y++){const E=a[y],T=E[0],_=E[1];T!==Number.MAX_SAFE_INTEGER&&_?(g&&u.getAttribute("morphTarget"+y)!==g[T]&&u.setAttribute("morphTarget"+y,g[T]),m&&u.getAttribute("morphNormal"+y)!==m[T]&&u.setAttribute("morphNormal"+y,m[T]),i[y]=_,v+=_):(g&&u.hasAttribute("morphTarget"+y)===!0&&u.deleteAttribute("morphTarget"+y),m&&u.hasAttribute("morphNormal"+y)===!0&&u.deleteAttribute("morphNormal"+y),i[y]=0)}const b=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(t,"morphTargetBaseInfluence",b),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Dz(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class vx extends kn{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:na,u!==na&&u!==Sl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===na&&(r=js),r===void 0&&u===Sl&&(r=ta),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Vn,this.minFilter=l!==void 0?l:Vn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const uL=new kn,dL=new vx(1,1);dL.compareFunction=cx;const fL=new yv,hL=new fx,pL=new Hf,V1=[],U1=[],$1=new Float32Array(16),z1=new Float32Array(9),H1=new Float32Array(4);function Tu(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=V1[i];if(s===void 0&&(s=new Float32Array(i),V1[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function cr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ur(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _v(t,e){let n=U1[e];n===void 0&&(n=new Int32Array(e),U1[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Nz(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Fz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(cr(n,e))return;t.uniform2fv(this.addr,e),ur(n,e)}}function Bz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(cr(n,e))return;t.uniform3fv(this.addr,e),ur(n,e)}}function Vz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(cr(n,e))return;t.uniform4fv(this.addr,e),ur(n,e)}}function Uz(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(cr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ur(n,e)}else{if(cr(n,r))return;H1.set(r),t.uniformMatrix2fv(this.addr,!1,H1),ur(n,r)}}function $z(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(cr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ur(n,e)}else{if(cr(n,r))return;z1.set(r),t.uniformMatrix3fv(this.addr,!1,z1),ur(n,r)}}function zz(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(cr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ur(n,e)}else{if(cr(n,r))return;$1.set(r),t.uniformMatrix4fv(this.addr,!1,$1),ur(n,r)}}function Hz(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Gz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(cr(n,e))return;t.uniform2iv(this.addr,e),ur(n,e)}}function Wz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(cr(n,e))return;t.uniform3iv(this.addr,e),ur(n,e)}}function jz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(cr(n,e))return;t.uniform4iv(this.addr,e),ur(n,e)}}function Xz(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Kz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(cr(n,e))return;t.uniform2uiv(this.addr,e),ur(n,e)}}function qz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(cr(n,e))return;t.uniform3uiv(this.addr,e),ur(n,e)}}function Yz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(cr(n,e))return;t.uniform4uiv(this.addr,e),ur(n,e)}}function Zz(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?dL:uL;n.setTexture2D(e||s,i)}function Jz(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||hL,i)}function Qz(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||pL,i)}function eH(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||fL,i)}function tH(t){switch(t){case 5126:return Nz;case 35664:return Fz;case 35665:return Bz;case 35666:return Vz;case 35674:return Uz;case 35675:return $z;case 35676:return zz;case 5124:case 35670:return Hz;case 35667:case 35671:return Gz;case 35668:case 35672:return Wz;case 35669:case 35673:return jz;case 5125:return Xz;case 36294:return Kz;case 36295:return qz;case 36296:return Yz;case 35678:case 36198:case 36298:case 36306:case 35682:return Zz;case 35679:case 36299:case 36307:return Jz;case 35680:case 36300:case 36308:case 36293:return Qz;case 36289:case 36303:case 36311:case 36292:return eH}}function nH(t,e){t.uniform1fv(this.addr,e)}function rH(t,e){const n=Tu(e,this.size,2);t.uniform2fv(this.addr,n)}function iH(t,e){const n=Tu(e,this.size,3);t.uniform3fv(this.addr,n)}function sH(t,e){const n=Tu(e,this.size,4);t.uniform4fv(this.addr,n)}function oH(t,e){const n=Tu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function aH(t,e){const n=Tu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lH(t,e){const n=Tu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function cH(t,e){t.uniform1iv(this.addr,e)}function uH(t,e){t.uniform2iv(this.addr,e)}function dH(t,e){t.uniform3iv(this.addr,e)}function fH(t,e){t.uniform4iv(this.addr,e)}function hH(t,e){t.uniform1uiv(this.addr,e)}function pH(t,e){t.uniform2uiv(this.addr,e)}function mH(t,e){t.uniform3uiv(this.addr,e)}function vH(t,e){t.uniform4uiv(this.addr,e)}function gH(t,e,n){const r=this.cache,i=e.length,s=_v(n,i);cr(r,s)||(t.uniform1iv(this.addr,s),ur(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||uL,s[o])}function yH(t,e,n){const r=this.cache,i=e.length,s=_v(n,i);cr(r,s)||(t.uniform1iv(this.addr,s),ur(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||hL,s[o])}function bH(t,e,n){const r=this.cache,i=e.length,s=_v(n,i);cr(r,s)||(t.uniform1iv(this.addr,s),ur(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||pL,s[o])}function _H(t,e,n){const r=this.cache,i=e.length,s=_v(n,i);cr(r,s)||(t.uniform1iv(this.addr,s),ur(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||fL,s[o])}function xH(t){switch(t){case 5126:return nH;case 35664:return rH;case 35665:return iH;case 35666:return sH;case 35674:return oH;case 35675:return aH;case 35676:return lH;case 5124:case 35670:return cH;case 35667:case 35671:return uH;case 35668:case 35672:return dH;case 35669:case 35673:return fH;case 5125:return hH;case 36294:return pH;case 36295:return mH;case 36296:return vH;case 35678:case 36198:case 36298:case 36306:case 35682:return gH;case 35679:case 36299:case 36307:return yH;case 35680:case 36300:case 36308:case 36293:return bH;case 36289:case 36303:case 36311:case 36292:return _H}}class wH{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=tH(n.type)}}class SH{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=xH(n.type)}}class EH{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const xy=/(\w+)(\])?(\[|\.)?/g;function G1(t,e){t.seq.push(e),t.map[e.id]=e}function MH(t,e,n){const r=t.name,i=r.length;for(xy.lastIndex=0;;){const s=xy.exec(r),o=xy.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){G1(n,c===void 0?new wH(a,t,e):new SH(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new EH(a),G1(n,d)),n=d}}}class em{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);MH(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function W1(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const CH=37297;let AH=0;function TH(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function PH(t){const e=ln.getPrimaries(ln.workingColorSpace),n=ln.getPrimaries(t);let r;switch(e===n?r="":e===df&&n===uf?r="LinearDisplayP3ToLinearSRGB":e===uf&&n===df&&(r="LinearSRGBToLinearDisplayP3"),t){case lr:case Uf:return[r,"LinearTransferOETF"];case In:case gv:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function j1(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+TH(t.getShaderSource(e),o)}else return i}function RH(t,e){const n=PH(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function LH(t,e){let n;switch(e){case TR:n="Linear";break;case PR:n="Reinhard";break;case RR:n="OptimizedCineon";break;case J_:n="ACESFilmic";break;case IR:n="AgX";break;case LR:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function IH(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fc).join(`
`)}function OH(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Fc).join(`
`)}function kH(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function DH(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Fc(t){return t!==""}function X1(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function K1(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const NH=/^[ \t]*#include +<([\w\d./]+)>/gm;function bb(t){return t.replace(NH,BH)}const FH=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function BH(t,e){let n=At[e];if(n===void 0){const r=FH.get(e);if(r!==void 0)n=At[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return bb(n)}const VH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function q1(t){return t.replace(VH,UH)}function UH(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Y1(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $H(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Y_?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Z_?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===us&&(e="SHADOWMAP_TYPE_VSM"),e}function zH(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case to:case ua:e="ENVMAP_TYPE_CUBE";break;case Au:e="ENVMAP_TYPE_CUBE_UV";break}return e}function HH(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ua:e="ENVMAP_MODE_REFRACTION";break}return e}function GH(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Bf:e="ENVMAP_BLENDING_MULTIPLY";break;case CR:e="ENVMAP_BLENDING_MIX";break;case AR:e="ENVMAP_BLENDING_ADD";break}return e}function WH(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function jH(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=$H(n),c=zH(n),u=HH(n),d=GH(n),f=WH(n),h=n.isWebGL2?"":IH(n),p=OH(n),g=kH(s),m=i.createProgram();let v,b,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Fc).join(`
`),v.length>0&&(v+=`
`),b=[h,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Fc).join(`
`),b.length>0&&(b+=`
`)):(v=[Y1(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Fc).join(`
`),b=[h,Y1(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Js?"#define TONE_MAPPING":"",n.toneMapping!==Js?At.tonemapping_pars_fragment:"",n.toneMapping!==Js?LH("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",At.colorspace_pars_fragment,RH("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Fc).join(`
`)),o=bb(o),o=X1(o,n),o=K1(o,n),a=bb(a),a=X1(a,n),a=K1(a,n),o=q1(o),a=q1(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,b=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===vb?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const E=y+v+o,T=y+b+a,_=W1(i,i.VERTEX_SHADER,E),w=W1(i,i.FRAGMENT_SHADER,T);i.attachShader(m,_),i.attachShader(m,w),n.index0AttributeName!==void 0?i.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function M(I){if(t.debug.checkShaderErrors){const z=i.getProgramInfoLog(m).trim(),P=i.getShaderInfoLog(_).trim(),B=i.getShaderInfoLog(w).trim();let U=!0,j=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(U=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,m,_,w);else{const Z=j1(i,_,"vertex"),ne=j1(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Program Info Log: `+z+`
`+Z+`
`+ne)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(P===""||B==="")&&(j=!1);j&&(I.diagnostics={runnable:U,programLog:z,vertexShader:{log:P,prefix:v},fragmentShader:{log:B,prefix:b}})}i.deleteShader(_),i.deleteShader(w),x=new em(i,m),S=DH(i,m)}let x;this.getUniforms=function(){return x===void 0&&M(this),x};let S;this.getAttributes=function(){return S===void 0&&M(this),S};let R=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(m,CH)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=AH++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let XH=0;class KH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new qH(e),n.set(e,r)),r}}class qH{constructor(e){this.id=XH++,this.code=e,this.usedTimes=0}}function YH(t,e,n,r,i,s,o){const a=new bv,l=new KH,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(x){return x===0?"uv":`uv${x}`}function m(x,S,R,I,z){const P=I.fog,B=z.geometry,U=x.isMeshStandardMaterial?I.environment:null,j=(x.isMeshStandardMaterial?n:e).get(x.envMap||U),Z=j&&j.mapping===Au?j.image.height:null,ne=p[x.type];x.precision!==null&&(h=i.getMaxPrecision(x.precision),h!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",h,"instead."));const K=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,fe=K!==void 0?K.length:0;let Se=0;B.morphAttributes.position!==void 0&&(Se=1),B.morphAttributes.normal!==void 0&&(Se=2),B.morphAttributes.color!==void 0&&(Se=3);let de,ae,ge,ue;if(ne){const Dn=Ti[ne];de=Dn.vertexShader,ae=Dn.fragmentShader}else de=x.vertexShader,ae=x.fragmentShader,l.update(x),ge=l.getVertexShaderID(x),ue=l.getFragmentShaderID(x);const J=t.getRenderTarget(),X=z.isInstancedMesh===!0,L=z.isBatchedMesh===!0,N=!!x.map,G=!!x.matcap,$=!!j,O=!!x.aoMap,k=!!x.lightMap,H=!!x.bumpMap,Y=!!x.normalMap,te=!!x.displacementMap,he=!!x.emissiveMap,F=!!x.metalnessMap,D=!!x.roughnessMap,Q=x.anisotropy>0,ie=x.clearcoat>0,pe=x.iridescence>0,ye=x.sheen>0,Oe=x.transmission>0,re=Q&&!!x.anisotropyMap,xe=ie&&!!x.clearcoatMap,Ne=ie&&!!x.clearcoatNormalMap,Ee=ie&&!!x.clearcoatRoughnessMap,be=pe&&!!x.iridescenceMap,Ye=pe&&!!x.iridescenceThicknessMap,ut=ye&&!!x.sheenColorMap,dt=ye&&!!x.sheenRoughnessMap,it=!!x.specularMap,et=!!x.specularColorMap,oe=!!x.specularIntensityMap,Le=Oe&&!!x.transmissionMap,tt=Oe&&!!x.thicknessMap,Ge=!!x.gradientMap,$e=!!x.alphaMap,ce=x.alphaTest>0,Je=!!x.alphaHash,nt=!!x.extensions,ft=!!B.attributes.uv1,at=!!B.attributes.uv2,Zt=!!B.attributes.uv3;let Jt=Js;return x.toneMapped&&(J===null||J.isXRRenderTarget===!0)&&(Jt=t.toneMapping),{isWebGL2:u,shaderID:ne,shaderType:x.type,shaderName:x.name,vertexShader:de,fragmentShader:ae,defines:x.defines,customVertexShaderID:ge,customFragmentShaderID:ue,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:h,batching:L,instancing:X,instancingColor:X&&z.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:J===null?t.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:lr,map:N,matcap:G,envMap:$,envMapMode:$&&j.mapping,envMapCubeUVHeight:Z,aoMap:O,lightMap:k,bumpMap:H,normalMap:Y,displacementMap:f&&te,emissiveMap:he,normalMapObjectSpace:Y&&x.normalMapType===KR,normalMapTangentSpace:Y&&x.normalMapType===_a,metalnessMap:F,roughnessMap:D,anisotropy:Q,anisotropyMap:re,clearcoat:ie,clearcoatMap:xe,clearcoatNormalMap:Ne,clearcoatRoughnessMap:Ee,iridescence:pe,iridescenceMap:be,iridescenceThicknessMap:Ye,sheen:ye,sheenColorMap:ut,sheenRoughnessMap:dt,specularMap:it,specularColorMap:et,specularIntensityMap:oe,transmission:Oe,transmissionMap:Le,thicknessMap:tt,gradientMap:Ge,opaque:x.transparent===!1&&x.blending===dl,alphaMap:$e,alphaTest:ce,alphaHash:Je,combine:x.combine,mapUv:N&&g(x.map.channel),aoMapUv:O&&g(x.aoMap.channel),lightMapUv:k&&g(x.lightMap.channel),bumpMapUv:H&&g(x.bumpMap.channel),normalMapUv:Y&&g(x.normalMap.channel),displacementMapUv:te&&g(x.displacementMap.channel),emissiveMapUv:he&&g(x.emissiveMap.channel),metalnessMapUv:F&&g(x.metalnessMap.channel),roughnessMapUv:D&&g(x.roughnessMap.channel),anisotropyMapUv:re&&g(x.anisotropyMap.channel),clearcoatMapUv:xe&&g(x.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&g(x.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&g(x.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&g(x.iridescenceMap.channel),iridescenceThicknessMapUv:Ye&&g(x.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&g(x.sheenColorMap.channel),sheenRoughnessMapUv:dt&&g(x.sheenRoughnessMap.channel),specularMapUv:it&&g(x.specularMap.channel),specularColorMapUv:et&&g(x.specularColorMap.channel),specularIntensityMapUv:oe&&g(x.specularIntensityMap.channel),transmissionMapUv:Le&&g(x.transmissionMap.channel),thicknessMapUv:tt&&g(x.thicknessMap.channel),alphaMapUv:$e&&g(x.alphaMap.channel),vertexTangents:!!B.attributes.tangent&&(Y||Q),vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUv1s:ft,vertexUv2s:at,vertexUv3s:Zt,pointsUvs:z.isPoints===!0&&!!B.attributes.uv&&(N||$e),fog:!!P,useFog:x.fog===!0,fogExp2:P&&P.isFogExp2,flatShading:x.flatShading===!0,sizeAttenuation:x.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:z.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:Se,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numLightProbes:S.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:Jt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:N&&x.map.isVideoTexture===!0&&ln.getTransfer(x.map.colorSpace)===Tn,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===Qr,flipSided:x.side===Or,useDepthPacking:x.depthPacking>=0,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:nt&&x.extensions.derivatives===!0,extensionFragDepth:nt&&x.extensions.fragDepth===!0,extensionDrawBuffers:nt&&x.extensions.drawBuffers===!0,extensionShaderTextureLOD:nt&&x.extensions.shaderTextureLOD===!0,extensionClipCullDistance:nt&&x.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:x.customProgramCacheKey()}}function v(x){const S=[];if(x.shaderID?S.push(x.shaderID):(S.push(x.customVertexShaderID),S.push(x.customFragmentShaderID)),x.defines!==void 0)for(const R in x.defines)S.push(R),S.push(x.defines[R]);return x.isRawShaderMaterial===!1&&(b(S,x),y(S,x),S.push(t.outputColorSpace)),S.push(x.customProgramCacheKey),S.join()}function b(x,S){x.push(S.precision),x.push(S.outputColorSpace),x.push(S.envMapMode),x.push(S.envMapCubeUVHeight),x.push(S.mapUv),x.push(S.alphaMapUv),x.push(S.lightMapUv),x.push(S.aoMapUv),x.push(S.bumpMapUv),x.push(S.normalMapUv),x.push(S.displacementMapUv),x.push(S.emissiveMapUv),x.push(S.metalnessMapUv),x.push(S.roughnessMapUv),x.push(S.anisotropyMapUv),x.push(S.clearcoatMapUv),x.push(S.clearcoatNormalMapUv),x.push(S.clearcoatRoughnessMapUv),x.push(S.iridescenceMapUv),x.push(S.iridescenceThicknessMapUv),x.push(S.sheenColorMapUv),x.push(S.sheenRoughnessMapUv),x.push(S.specularMapUv),x.push(S.specularColorMapUv),x.push(S.specularIntensityMapUv),x.push(S.transmissionMapUv),x.push(S.thicknessMapUv),x.push(S.combine),x.push(S.fogExp2),x.push(S.sizeAttenuation),x.push(S.morphTargetsCount),x.push(S.morphAttributeCount),x.push(S.numDirLights),x.push(S.numPointLights),x.push(S.numSpotLights),x.push(S.numSpotLightMaps),x.push(S.numHemiLights),x.push(S.numRectAreaLights),x.push(S.numDirLightShadows),x.push(S.numPointLightShadows),x.push(S.numSpotLightShadows),x.push(S.numSpotLightShadowsWithMaps),x.push(S.numLightProbes),x.push(S.shadowMapType),x.push(S.toneMapping),x.push(S.numClippingPlanes),x.push(S.numClipIntersection),x.push(S.depthPacking)}function y(x,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.matcap&&a.enable(4),S.envMap&&a.enable(5),S.normalMapObjectSpace&&a.enable(6),S.normalMapTangentSpace&&a.enable(7),S.clearcoat&&a.enable(8),S.iridescence&&a.enable(9),S.alphaTest&&a.enable(10),S.vertexColors&&a.enable(11),S.vertexAlphas&&a.enable(12),S.vertexUv1s&&a.enable(13),S.vertexUv2s&&a.enable(14),S.vertexUv3s&&a.enable(15),S.vertexTangents&&a.enable(16),S.anisotropy&&a.enable(17),S.alphaHash&&a.enable(18),S.batching&&a.enable(19),x.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.useLegacyLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.transmission&&a.enable(15),S.sheen&&a.enable(16),S.opaque&&a.enable(17),S.pointsUvs&&a.enable(18),S.decodeVideoTexture&&a.enable(19),x.push(a.mask)}function E(x){const S=p[x.type];let R;if(S){const I=Ti[S];R=$f.clone(I.uniforms)}else R=x.uniforms;return R}function T(x,S){let R;for(let I=0,z=c.length;I<z;I++){const P=c[I];if(P.cacheKey===S){R=P,++R.usedTimes;break}}return R===void 0&&(R=new jH(t,S,x,s),c.push(R)),R}function _(x){if(--x.usedTimes===0){const S=c.indexOf(x);c[S]=c[c.length-1],c.pop(),x.destroy()}}function w(x){l.remove(x)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:E,acquireProgram:T,releaseProgram:_,releaseShaderCache:w,programs:c,dispose:M}}function ZH(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function JH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Z1(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function J1(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,f,h,p,g,m){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},t[e]=v):(v.id=d.id,v.object=d,v.geometry=f,v.material=h,v.groupOrder=p,v.renderOrder=d.renderOrder,v.z=g,v.group=m),e++,v}function a(d,f,h,p,g,m){const v=o(d,f,h,p,g,m);h.transmission>0?r.push(v):h.transparent===!0?i.push(v):n.push(v)}function l(d,f,h,p,g,m){const v=o(d,f,h,p,g,m);h.transmission>0?r.unshift(v):h.transparent===!0?i.unshift(v):n.unshift(v)}function c(d,f){n.length>1&&n.sort(d||JH),r.length>1&&r.sort(f||Z1),i.length>1&&i.sort(f||Z1)}function u(){for(let d=e,f=t.length;d<f;d++){const h=t[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function QH(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new J1,t.set(r,[o])):i>=s.length?(o=new J1,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function e4(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new W,color:new Ke};break;case"SpotLight":n={position:new W,direction:new W,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new W,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":n={direction:new W,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":n={color:new Ke,position:new W,halfWidth:new W,halfHeight:new W};break}return t[e.id]=n,n}}}function t4(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let n4=0;function r4(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function i4(t,e){const n=new e4,r=t4(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new W);const s=new W,o=new pt,a=new pt;function l(u,d){let f=0,h=0,p=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let g=0,m=0,v=0,b=0,y=0,E=0,T=0,_=0,w=0,M=0,x=0;u.sort(r4);const S=d===!0?Math.PI:1;for(let I=0,z=u.length;I<z;I++){const P=u[I],B=P.color,U=P.intensity,j=P.distance,Z=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)f+=B.r*U*S,h+=B.g*U*S,p+=B.b*U*S;else if(P.isLightProbe){for(let ne=0;ne<9;ne++)i.probe[ne].addScaledVector(P.sh.coefficients[ne],U);x++}else if(P.isDirectionalLight){const ne=n.get(P);if(ne.color.copy(P.color).multiplyScalar(P.intensity*S),P.castShadow){const K=P.shadow,fe=r.get(P);fe.shadowBias=K.bias,fe.shadowNormalBias=K.normalBias,fe.shadowRadius=K.radius,fe.shadowMapSize=K.mapSize,i.directionalShadow[g]=fe,i.directionalShadowMap[g]=Z,i.directionalShadowMatrix[g]=P.shadow.matrix,E++}i.directional[g]=ne,g++}else if(P.isSpotLight){const ne=n.get(P);ne.position.setFromMatrixPosition(P.matrixWorld),ne.color.copy(B).multiplyScalar(U*S),ne.distance=j,ne.coneCos=Math.cos(P.angle),ne.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),ne.decay=P.decay,i.spot[v]=ne;const K=P.shadow;if(P.map&&(i.spotLightMap[w]=P.map,w++,K.updateMatrices(P),P.castShadow&&M++),i.spotLightMatrix[v]=K.matrix,P.castShadow){const fe=r.get(P);fe.shadowBias=K.bias,fe.shadowNormalBias=K.normalBias,fe.shadowRadius=K.radius,fe.shadowMapSize=K.mapSize,i.spotShadow[v]=fe,i.spotShadowMap[v]=Z,_++}v++}else if(P.isRectAreaLight){const ne=n.get(P);ne.color.copy(B).multiplyScalar(U),ne.halfWidth.set(P.width*.5,0,0),ne.halfHeight.set(0,P.height*.5,0),i.rectArea[b]=ne,b++}else if(P.isPointLight){const ne=n.get(P);if(ne.color.copy(P.color).multiplyScalar(P.intensity*S),ne.distance=P.distance,ne.decay=P.decay,P.castShadow){const K=P.shadow,fe=r.get(P);fe.shadowBias=K.bias,fe.shadowNormalBias=K.normalBias,fe.shadowRadius=K.radius,fe.shadowMapSize=K.mapSize,fe.shadowCameraNear=K.camera.near,fe.shadowCameraFar=K.camera.far,i.pointShadow[m]=fe,i.pointShadowMap[m]=Z,i.pointShadowMatrix[m]=P.shadow.matrix,T++}i.point[m]=ne,m++}else if(P.isHemisphereLight){const ne=n.get(P);ne.skyColor.copy(P.color).multiplyScalar(U*S),ne.groundColor.copy(P.groundColor).multiplyScalar(U*S),i.hemi[y]=ne,y++}}b>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_FLOAT_1,i.rectAreaLTC2=Xe.LTC_FLOAT_2):(i.rectAreaLTC1=Xe.LTC_HALF_1,i.rectAreaLTC2=Xe.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_FLOAT_1,i.rectAreaLTC2=Xe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_HALF_1,i.rectAreaLTC2=Xe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const R=i.hash;(R.directionalLength!==g||R.pointLength!==m||R.spotLength!==v||R.rectAreaLength!==b||R.hemiLength!==y||R.numDirectionalShadows!==E||R.numPointShadows!==T||R.numSpotShadows!==_||R.numSpotMaps!==w||R.numLightProbes!==x)&&(i.directional.length=g,i.spot.length=v,i.rectArea.length=b,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=_,i.spotShadowMap.length=_,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=_+w-M,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=x,R.directionalLength=g,R.pointLength=m,R.spotLength=v,R.rectAreaLength=b,R.hemiLength=y,R.numDirectionalShadows=E,R.numPointShadows=T,R.numSpotShadows=_,R.numSpotMaps=w,R.numLightProbes=x,i.version=n4++)}function c(u,d){let f=0,h=0,p=0,g=0,m=0;const v=d.matrixWorldInverse;for(let b=0,y=u.length;b<y;b++){const E=u[b];if(E.isDirectionalLight){const T=i.directional[f];T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),f++}else if(E.isSpotLight){const T=i.spot[p];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(v),T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),p++}else if(E.isRectAreaLight){const T=i.rectArea[g];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(v),a.identity(),o.copy(E.matrixWorld),o.premultiply(v),a.extractRotation(o),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),g++}else if(E.isPointLight){const T=i.point[h];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(v),h++}else if(E.isHemisphereLight){const T=i.hemi[m];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(v),m++}}}return{setup:l,setupView:c,state:i}}function Q1(t,e){const n=new i4(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){n.setup(r,d)}function c(d){n.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function s4(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new Q1(t,e),n.set(s,[l])):o>=a.length?(l=new Q1(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class gx extends ar{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yx extends ar{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const o4=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,a4=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function l4(t,e,n){let r=new Gf;const i=new Ie,s=new Ie,o=new Wt,a=new gx({depthPacking:XR}),l=new yx,c={},u=n.maxTextureSize,d={[bs]:Or,[Or]:bs,[Qr]:Qr},f=new ii({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:o4,fragmentShader:a4}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Mt;p.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new En(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Y_;let v=this.type;this.render=function(_,w,M){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||_.length===0)return;const x=t.getRenderTarget(),S=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),I=t.state;I.setBlending(Zs),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const z=v!==us&&this.type===us,P=v===us&&this.type!==us;for(let B=0,U=_.length;B<U;B++){const j=_[B],Z=j.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;i.copy(Z.mapSize);const ne=Z.getFrameExtents();if(i.multiply(ne),s.copy(Z.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/ne.x),i.x=s.x*ne.x,Z.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/ne.y),i.y=s.y*ne.y,Z.mapSize.y=s.y)),Z.map===null||z===!0||P===!0){const fe=this.type!==us?{minFilter:Vn,magFilter:Vn}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Bi(i.x,i.y,fe),Z.map.texture.name=j.name+".shadowMap",Z.camera.updateProjectionMatrix()}t.setRenderTarget(Z.map),t.clear();const K=Z.getViewportCount();for(let fe=0;fe<K;fe++){const Se=Z.getViewport(fe);o.set(s.x*Se.x,s.y*Se.y,s.x*Se.z,s.y*Se.w),I.viewport(o),Z.updateMatrices(j,fe),r=Z.getFrustum(),E(w,M,Z.camera,j,this.type)}Z.isPointLightShadow!==!0&&this.type===us&&b(Z,M),Z.needsUpdate=!1}v=this.type,m.needsUpdate=!1,t.setRenderTarget(x,S,R)};function b(_,w){const M=e.update(g);f.defines.VSM_SAMPLES!==_.blurSamples&&(f.defines.VSM_SAMPLES=_.blurSamples,h.defines.VSM_SAMPLES=_.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new Bi(i.x,i.y)),f.uniforms.shadow_pass.value=_.map.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(w,null,M,f,g,null),h.uniforms.shadow_pass.value=_.mapPass.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(w,null,M,h,g,null)}function y(_,w,M,x){let S=null;const R=M.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(R!==void 0)S=R;else if(S=M.isPointLight===!0?l:a,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const I=S.uuid,z=w.uuid;let P=c[I];P===void 0&&(P={},c[I]=P);let B=P[z];B===void 0&&(B=S.clone(),P[z]=B,w.addEventListener("dispose",T)),S=B}if(S.visible=w.visible,S.wireframe=w.wireframe,x===us?S.side=w.shadowSide!==null?w.shadowSide:w.side:S.side=w.shadowSide!==null?w.shadowSide:d[w.side],S.alphaMap=w.alphaMap,S.alphaTest=w.alphaTest,S.map=w.map,S.clipShadows=w.clipShadows,S.clippingPlanes=w.clippingPlanes,S.clipIntersection=w.clipIntersection,S.displacementMap=w.displacementMap,S.displacementScale=w.displacementScale,S.displacementBias=w.displacementBias,S.wireframeLinewidth=w.wireframeLinewidth,S.linewidth=w.linewidth,M.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const I=t.properties.get(S);I.light=M}return S}function E(_,w,M,x,S){if(_.visible===!1)return;if(_.layers.test(w.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&S===us)&&(!_.frustumCulled||r.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,_.matrixWorld);const z=e.update(_),P=_.material;if(Array.isArray(P)){const B=z.groups;for(let U=0,j=B.length;U<j;U++){const Z=B[U],ne=P[Z.materialIndex];if(ne&&ne.visible){const K=y(_,ne,x,S);_.onBeforeShadow(t,_,w,M,z,K,Z),t.renderBufferDirect(M,null,z,K,_,Z),_.onAfterShadow(t,_,w,M,z,K,Z)}}}else if(P.visible){const B=y(_,P,x,S);_.onBeforeShadow(t,_,w,M,z,B,null),t.renderBufferDirect(M,null,z,B,_,null),_.onAfterShadow(t,_,w,M,z,B,null)}}const I=_.children;for(let z=0,P=I.length;z<P;z++)E(I[z],w,M,x,S)}function T(_){_.target.removeEventListener("dispose",T);for(const M in c){const x=c[M],S=_.target.uuid;S in x&&(x[S].dispose(),delete x[S])}}}function c4(t,e,n){const r=n.isWebGL2;function i(){let ce=!1;const Je=new Wt;let nt=null;const ft=new Wt(0,0,0,0);return{setMask:function(at){nt!==at&&!ce&&(t.colorMask(at,at,at,at),nt=at)},setLocked:function(at){ce=at},setClear:function(at,Zt,Jt,Cn,Dn){Dn===!0&&(at*=Cn,Zt*=Cn,Jt*=Cn),Je.set(at,Zt,Jt,Cn),ft.equals(Je)===!1&&(t.clearColor(at,Zt,Jt,Cn),ft.copy(Je))},reset:function(){ce=!1,nt=null,ft.set(-1,0,0,0)}}}function s(){let ce=!1,Je=null,nt=null,ft=null;return{setTest:function(at){at?L(t.DEPTH_TEST):N(t.DEPTH_TEST)},setMask:function(at){Je!==at&&!ce&&(t.depthMask(at),Je=at)},setFunc:function(at){if(nt!==at){switch(at){case bR:t.depthFunc(t.NEVER);break;case _R:t.depthFunc(t.ALWAYS);break;case xR:t.depthFunc(t.LESS);break;case sf:t.depthFunc(t.LEQUAL);break;case wR:t.depthFunc(t.EQUAL);break;case SR:t.depthFunc(t.GEQUAL);break;case ER:t.depthFunc(t.GREATER);break;case MR:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}nt=at}},setLocked:function(at){ce=at},setClear:function(at){ft!==at&&(t.clearDepth(at),ft=at)},reset:function(){ce=!1,Je=null,nt=null,ft=null}}}function o(){let ce=!1,Je=null,nt=null,ft=null,at=null,Zt=null,Jt=null,Cn=null,Dn=null;return{setTest:function(fn){ce||(fn?L(t.STENCIL_TEST):N(t.STENCIL_TEST))},setMask:function(fn){Je!==fn&&!ce&&(t.stencilMask(fn),Je=fn)},setFunc:function(fn,xr,Ve){(nt!==fn||ft!==xr||at!==Ve)&&(t.stencilFunc(fn,xr,Ve),nt=fn,ft=xr,at=Ve)},setOp:function(fn,xr,Ve){(Zt!==fn||Jt!==xr||Cn!==Ve)&&(t.stencilOp(fn,xr,Ve),Zt=fn,Jt=xr,Cn=Ve)},setLocked:function(fn){ce=fn},setClear:function(fn){Dn!==fn&&(t.clearStencil(fn),Dn=fn)},reset:function(){ce=!1,Je=null,nt=null,ft=null,at=null,Zt=null,Jt=null,Cn=null,Dn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,g=[],m=null,v=!1,b=null,y=null,E=null,T=null,_=null,w=null,M=null,x=new Ke(0,0,0),S=0,R=!1,I=null,z=null,P=null,B=null,U=null;const j=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,ne=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(K)[1]),Z=ne>=1):K.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),Z=ne>=2);let fe=null,Se={};const de=t.getParameter(t.SCISSOR_BOX),ae=t.getParameter(t.VIEWPORT),ge=new Wt().fromArray(de),ue=new Wt().fromArray(ae);function J(ce,Je,nt,ft){const at=new Uint8Array(4),Zt=t.createTexture();t.bindTexture(ce,Zt),t.texParameteri(ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Jt=0;Jt<nt;Jt++)r&&(ce===t.TEXTURE_3D||ce===t.TEXTURE_2D_ARRAY)?t.texImage3D(Je,0,t.RGBA,1,1,ft,0,t.RGBA,t.UNSIGNED_BYTE,at):t.texImage2D(Je+Jt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,at);return Zt}const X={};X[t.TEXTURE_2D]=J(t.TEXTURE_2D,t.TEXTURE_2D,1),X[t.TEXTURE_CUBE_MAP]=J(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(X[t.TEXTURE_2D_ARRAY]=J(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),X[t.TEXTURE_3D]=J(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),L(t.DEPTH_TEST),l.setFunc(sf),he(!1),F(B0),L(t.CULL_FACE),Y(Zs);function L(ce){f[ce]!==!0&&(t.enable(ce),f[ce]=!0)}function N(ce){f[ce]!==!1&&(t.disable(ce),f[ce]=!1)}function G(ce,Je){return h[ce]!==Je?(t.bindFramebuffer(ce,Je),h[ce]=Je,r&&(ce===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=Je),ce===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=Je)),!0):!1}function $(ce,Je){let nt=g,ft=!1;if(ce)if(nt=p.get(Je),nt===void 0&&(nt=[],p.set(Je,nt)),ce.isWebGLMultipleRenderTargets){const at=ce.texture;if(nt.length!==at.length||nt[0]!==t.COLOR_ATTACHMENT0){for(let Zt=0,Jt=at.length;Zt<Jt;Zt++)nt[Zt]=t.COLOR_ATTACHMENT0+Zt;nt.length=at.length,ft=!0}}else nt[0]!==t.COLOR_ATTACHMENT0&&(nt[0]=t.COLOR_ATTACHMENT0,ft=!0);else nt[0]!==t.BACK&&(nt[0]=t.BACK,ft=!0);ft&&(n.isWebGL2?t.drawBuffers(nt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(nt))}function O(ce){return m!==ce?(t.useProgram(ce),m=ce,!0):!1}const k={[qo]:t.FUNC_ADD,[iR]:t.FUNC_SUBTRACT,[sR]:t.FUNC_REVERSE_SUBTRACT};if(r)k[$0]=t.MIN,k[z0]=t.MAX;else{const ce=e.get("EXT_blend_minmax");ce!==null&&(k[$0]=ce.MIN_EXT,k[z0]=ce.MAX_EXT)}const H={[oR]:t.ZERO,[aR]:t.ONE,[lR]:t.SRC_COLOR,[Em]:t.SRC_ALPHA,[pR]:t.SRC_ALPHA_SATURATE,[fR]:t.DST_COLOR,[uR]:t.DST_ALPHA,[cR]:t.ONE_MINUS_SRC_COLOR,[Mm]:t.ONE_MINUS_SRC_ALPHA,[hR]:t.ONE_MINUS_DST_COLOR,[dR]:t.ONE_MINUS_DST_ALPHA,[mR]:t.CONSTANT_COLOR,[vR]:t.ONE_MINUS_CONSTANT_COLOR,[gR]:t.CONSTANT_ALPHA,[yR]:t.ONE_MINUS_CONSTANT_ALPHA};function Y(ce,Je,nt,ft,at,Zt,Jt,Cn,Dn,fn){if(ce===Zs){v===!0&&(N(t.BLEND),v=!1);return}if(v===!1&&(L(t.BLEND),v=!0),ce!==rR){if(ce!==b||fn!==R){if((y!==qo||_!==qo)&&(t.blendEquation(t.FUNC_ADD),y=qo,_=qo),fn)switch(ce){case dl:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Sm:t.blendFunc(t.ONE,t.ONE);break;case V0:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case U0:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case dl:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Sm:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case V0:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case U0:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}E=null,T=null,w=null,M=null,x.set(0,0,0),S=0,b=ce,R=fn}return}at=at||Je,Zt=Zt||nt,Jt=Jt||ft,(Je!==y||at!==_)&&(t.blendEquationSeparate(k[Je],k[at]),y=Je,_=at),(nt!==E||ft!==T||Zt!==w||Jt!==M)&&(t.blendFuncSeparate(H[nt],H[ft],H[Zt],H[Jt]),E=nt,T=ft,w=Zt,M=Jt),(Cn.equals(x)===!1||Dn!==S)&&(t.blendColor(Cn.r,Cn.g,Cn.b,Dn),x.copy(Cn),S=Dn),b=ce,R=!1}function te(ce,Je){ce.side===Qr?N(t.CULL_FACE):L(t.CULL_FACE);let nt=ce.side===Or;Je&&(nt=!nt),he(nt),ce.blending===dl&&ce.transparent===!1?Y(Zs):Y(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),l.setFunc(ce.depthFunc),l.setTest(ce.depthTest),l.setMask(ce.depthWrite),a.setMask(ce.colorWrite);const ft=ce.stencilWrite;c.setTest(ft),ft&&(c.setMask(ce.stencilWriteMask),c.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),c.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),Q(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?L(t.SAMPLE_ALPHA_TO_COVERAGE):N(t.SAMPLE_ALPHA_TO_COVERAGE)}function he(ce){I!==ce&&(ce?t.frontFace(t.CW):t.frontFace(t.CCW),I=ce)}function F(ce){ce!==tR?(L(t.CULL_FACE),ce!==z&&(ce===B0?t.cullFace(t.BACK):ce===nR?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):N(t.CULL_FACE),z=ce}function D(ce){ce!==P&&(Z&&t.lineWidth(ce),P=ce)}function Q(ce,Je,nt){ce?(L(t.POLYGON_OFFSET_FILL),(B!==Je||U!==nt)&&(t.polygonOffset(Je,nt),B=Je,U=nt)):N(t.POLYGON_OFFSET_FILL)}function ie(ce){ce?L(t.SCISSOR_TEST):N(t.SCISSOR_TEST)}function pe(ce){ce===void 0&&(ce=t.TEXTURE0+j-1),fe!==ce&&(t.activeTexture(ce),fe=ce)}function ye(ce,Je,nt){nt===void 0&&(fe===null?nt=t.TEXTURE0+j-1:nt=fe);let ft=Se[nt];ft===void 0&&(ft={type:void 0,texture:void 0},Se[nt]=ft),(ft.type!==ce||ft.texture!==Je)&&(fe!==nt&&(t.activeTexture(nt),fe=nt),t.bindTexture(ce,Je||X[ce]),ft.type=ce,ft.texture=Je)}function Oe(){const ce=Se[fe];ce!==void 0&&ce.type!==void 0&&(t.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function re(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function xe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ne(){try{t.texSubImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ee(){try{t.texSubImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function be(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ye(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ut(){try{t.texStorage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function dt(){try{t.texStorage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function it(){try{t.texImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function et(){try{t.texImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function oe(ce){ge.equals(ce)===!1&&(t.scissor(ce.x,ce.y,ce.z,ce.w),ge.copy(ce))}function Le(ce){ue.equals(ce)===!1&&(t.viewport(ce.x,ce.y,ce.z,ce.w),ue.copy(ce))}function tt(ce,Je){let nt=d.get(Je);nt===void 0&&(nt=new WeakMap,d.set(Je,nt));let ft=nt.get(ce);ft===void 0&&(ft=t.getUniformBlockIndex(Je,ce.name),nt.set(ce,ft))}function Ge(ce,Je){const ft=d.get(Je).get(ce);u.get(Je)!==ft&&(t.uniformBlockBinding(Je,ft,ce.__bindingPointIndex),u.set(Je,ft))}function $e(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},fe=null,Se={},h={},p=new WeakMap,g=[],m=null,v=!1,b=null,y=null,E=null,T=null,_=null,w=null,M=null,x=new Ke(0,0,0),S=0,R=!1,I=null,z=null,P=null,B=null,U=null,ge.set(0,0,t.canvas.width,t.canvas.height),ue.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:L,disable:N,bindFramebuffer:G,drawBuffers:$,useProgram:O,setBlending:Y,setMaterial:te,setFlipSided:he,setCullFace:F,setLineWidth:D,setPolygonOffset:Q,setScissorTest:ie,activeTexture:pe,bindTexture:ye,unbindTexture:Oe,compressedTexImage2D:re,compressedTexImage3D:xe,texImage2D:it,texImage3D:et,updateUBOMapping:tt,uniformBlockBinding:Ge,texStorage2D:ut,texStorage3D:dt,texSubImage2D:Ne,texSubImage3D:Ee,compressedTexSubImage2D:be,compressedTexSubImage3D:Ye,scissor:oe,viewport:Le,reset:$e}}function u4(t,e,n,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(F,D){return h?new OffscreenCanvas(F,D):hf("canvas")}function g(F,D,Q,ie){let pe=1;if((F.width>ie||F.height>ie)&&(pe=ie/Math.max(F.width,F.height)),pe<1||D===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const ye=D?Tm:Math.floor,Oe=ye(pe*F.width),re=ye(pe*F.height);d===void 0&&(d=p(Oe,re));const xe=Q?p(Oe,re):d;return xe.width=Oe,xe.height=re,xe.getContext("2d").drawImage(F,0,0,Oe,re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Oe+"x"+re+")."),xe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function m(F){return gb(F.width)&&gb(F.height)}function v(F){return a?!1:F.wrapS!==pr||F.wrapT!==pr||F.minFilter!==Vn&&F.minFilter!==Nn}function b(F,D){return F.generateMipmaps&&D&&F.minFilter!==Vn&&F.minFilter!==Nn}function y(F){t.generateMipmap(F)}function E(F,D,Q,ie,pe=!1){if(a===!1)return D;if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let ye=D;if(D===t.RED&&(Q===t.FLOAT&&(ye=t.R32F),Q===t.HALF_FLOAT&&(ye=t.R16F),Q===t.UNSIGNED_BYTE&&(ye=t.R8)),D===t.RED_INTEGER&&(Q===t.UNSIGNED_BYTE&&(ye=t.R8UI),Q===t.UNSIGNED_SHORT&&(ye=t.R16UI),Q===t.UNSIGNED_INT&&(ye=t.R32UI),Q===t.BYTE&&(ye=t.R8I),Q===t.SHORT&&(ye=t.R16I),Q===t.INT&&(ye=t.R32I)),D===t.RG&&(Q===t.FLOAT&&(ye=t.RG32F),Q===t.HALF_FLOAT&&(ye=t.RG16F),Q===t.UNSIGNED_BYTE&&(ye=t.RG8)),D===t.RGBA){const Oe=pe?cf:ln.getTransfer(ie);Q===t.FLOAT&&(ye=t.RGBA32F),Q===t.HALF_FLOAT&&(ye=t.RGBA16F),Q===t.UNSIGNED_BYTE&&(ye=Oe===Tn?t.SRGB8_ALPHA8:t.RGBA8),Q===t.UNSIGNED_SHORT_4_4_4_4&&(ye=t.RGBA4),Q===t.UNSIGNED_SHORT_5_5_5_1&&(ye=t.RGB5_A1)}return(ye===t.R16F||ye===t.R32F||ye===t.RG16F||ye===t.RG32F||ye===t.RGBA16F||ye===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function T(F,D,Q){return b(F,Q)===!0||F.isFramebufferTexture&&F.minFilter!==Vn&&F.minFilter!==Nn?Math.log2(Math.max(D.width,D.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?D.mipmaps.length:1}function _(F){return F===Vn||F===nu||F===fl?t.NEAREST:t.LINEAR}function w(F){const D=F.target;D.removeEventListener("dispose",w),x(D),D.isVideoTexture&&u.delete(D)}function M(F){const D=F.target;D.removeEventListener("dispose",M),R(D)}function x(F){const D=r.get(F);if(D.__webglInit===void 0)return;const Q=F.source,ie=f.get(Q);if(ie){const pe=ie[D.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&S(F),Object.keys(ie).length===0&&f.delete(Q)}r.remove(F)}function S(F){const D=r.get(F);t.deleteTexture(D.__webglTexture);const Q=F.source,ie=f.get(Q);delete ie[D.__cacheKey],o.memory.textures--}function R(F){const D=F.texture,Q=r.get(F),ie=r.get(D);if(ie.__webglTexture!==void 0&&(t.deleteTexture(ie.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(Q.__webglFramebuffer[pe]))for(let ye=0;ye<Q.__webglFramebuffer[pe].length;ye++)t.deleteFramebuffer(Q.__webglFramebuffer[pe][ye]);else t.deleteFramebuffer(Q.__webglFramebuffer[pe]);Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer[pe])}else{if(Array.isArray(Q.__webglFramebuffer))for(let pe=0;pe<Q.__webglFramebuffer.length;pe++)t.deleteFramebuffer(Q.__webglFramebuffer[pe]);else t.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let pe=0;pe<Q.__webglColorRenderbuffer.length;pe++)Q.__webglColorRenderbuffer[pe]&&t.deleteRenderbuffer(Q.__webglColorRenderbuffer[pe]);Q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let pe=0,ye=D.length;pe<ye;pe++){const Oe=r.get(D[pe]);Oe.__webglTexture&&(t.deleteTexture(Oe.__webglTexture),o.memory.textures--),r.remove(D[pe])}r.remove(D),r.remove(F)}let I=0;function z(){I=0}function P(){const F=I;return F>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+i.maxTextures),I+=1,F}function B(F){const D=[];return D.push(F.wrapS),D.push(F.wrapT),D.push(F.wrapR||0),D.push(F.magFilter),D.push(F.minFilter),D.push(F.anisotropy),D.push(F.internalFormat),D.push(F.format),D.push(F.type),D.push(F.generateMipmaps),D.push(F.premultiplyAlpha),D.push(F.flipY),D.push(F.unpackAlignment),D.push(F.colorSpace),D.join()}function U(F,D){const Q=r.get(F);if(F.isVideoTexture&&te(F),F.isRenderTargetTexture===!1&&F.version>0&&Q.__version!==F.version){const ie=F.image;if(ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(Q,F,D);return}}n.bindTexture(t.TEXTURE_2D,Q.__webglTexture,t.TEXTURE0+D)}function j(F,D){const Q=r.get(F);if(F.version>0&&Q.__version!==F.version){ge(Q,F,D);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Q.__webglTexture,t.TEXTURE0+D)}function Z(F,D){const Q=r.get(F);if(F.version>0&&Q.__version!==F.version){ge(Q,F,D);return}n.bindTexture(t.TEXTURE_3D,Q.__webglTexture,t.TEXTURE0+D)}function ne(F,D){const Q=r.get(F);if(F.version>0&&Q.__version!==F.version){ue(Q,F,D);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+D)}const K={[no]:t.REPEAT,[pr]:t.CLAMP_TO_EDGE,[xl]:t.MIRRORED_REPEAT},fe={[Vn]:t.NEAREST,[nu]:t.NEAREST_MIPMAP_NEAREST,[fl]:t.NEAREST_MIPMAP_LINEAR,[Nn]:t.LINEAR,[Vf]:t.LINEAR_MIPMAP_NEAREST,[Qi]:t.LINEAR_MIPMAP_LINEAR},Se={[qR]:t.NEVER,[tL]:t.ALWAYS,[YR]:t.LESS,[cx]:t.LEQUAL,[ZR]:t.EQUAL,[eL]:t.GEQUAL,[JR]:t.GREATER,[QR]:t.NOTEQUAL};function de(F,D,Q){if(Q?(t.texParameteri(F,t.TEXTURE_WRAP_S,K[D.wrapS]),t.texParameteri(F,t.TEXTURE_WRAP_T,K[D.wrapT]),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,K[D.wrapR]),t.texParameteri(F,t.TEXTURE_MAG_FILTER,fe[D.magFilter]),t.texParameteri(F,t.TEXTURE_MIN_FILTER,fe[D.minFilter])):(t.texParameteri(F,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(F,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(D.wrapS!==pr||D.wrapT!==pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(F,t.TEXTURE_MAG_FILTER,_(D.magFilter)),t.texParameteri(F,t.TEXTURE_MIN_FILTER,_(D.minFilter)),D.minFilter!==Vn&&D.minFilter!==Nn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),D.compareFunction&&(t.texParameteri(F,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(F,t.TEXTURE_COMPARE_FUNC,Se[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ie=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===Vn||D.minFilter!==fl&&D.minFilter!==Qi||D.type===Ki&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===wl&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||r.get(D).__currentAnisotropy)&&(t.texParameterf(F,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy)}}function ae(F,D){let Q=!1;F.__webglInit===void 0&&(F.__webglInit=!0,D.addEventListener("dispose",w));const ie=D.source;let pe=f.get(ie);pe===void 0&&(pe={},f.set(ie,pe));const ye=B(D);if(ye!==F.__cacheKey){pe[ye]===void 0&&(pe[ye]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),pe[ye].usedTimes++;const Oe=pe[F.__cacheKey];Oe!==void 0&&(pe[F.__cacheKey].usedTimes--,Oe.usedTimes===0&&S(D)),F.__cacheKey=ye,F.__webglTexture=pe[ye].texture}return Q}function ge(F,D,Q){let ie=t.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(ie=t.TEXTURE_2D_ARRAY),D.isData3DTexture&&(ie=t.TEXTURE_3D);const pe=ae(F,D),ye=D.source;n.bindTexture(ie,F.__webglTexture,t.TEXTURE0+Q);const Oe=r.get(ye);if(ye.version!==Oe.__version||pe===!0){n.activeTexture(t.TEXTURE0+Q);const re=ln.getPrimaries(ln.workingColorSpace),xe=D.colorSpace===hi?null:ln.getPrimaries(D.colorSpace),Ne=D.colorSpace===hi||re===xe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Ee=v(D)&&m(D.image)===!1;let be=g(D.image,Ee,!1,i.maxTextureSize);be=he(D,be);const Ye=m(be)||a,ut=s.convert(D.format,D.colorSpace);let dt=s.convert(D.type),it=E(D.internalFormat,ut,dt,D.colorSpace,D.isVideoTexture);de(ie,D,Ye);let et;const oe=D.mipmaps,Le=a&&D.isVideoTexture!==!0&&it!==sx,tt=Oe.__version===void 0||pe===!0,Ge=T(D,be,Ye);if(D.isDepthTexture)it=t.DEPTH_COMPONENT,a?D.type===Ki?it=t.DEPTH_COMPONENT32F:D.type===js?it=t.DEPTH_COMPONENT24:D.type===ta?it=t.DEPTH24_STENCIL8:it=t.DEPTH_COMPONENT16:D.type===Ki&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===na&&it===t.DEPTH_COMPONENT&&D.type!==mv&&D.type!==js&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=js,dt=s.convert(D.type)),D.format===Sl&&it===t.DEPTH_COMPONENT&&(it=t.DEPTH_STENCIL,D.type!==ta&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=ta,dt=s.convert(D.type))),tt&&(Le?n.texStorage2D(t.TEXTURE_2D,1,it,be.width,be.height):n.texImage2D(t.TEXTURE_2D,0,it,be.width,be.height,0,ut,dt,null));else if(D.isDataTexture)if(oe.length>0&&Ye){Le&&tt&&n.texStorage2D(t.TEXTURE_2D,Ge,it,oe[0].width,oe[0].height);for(let $e=0,ce=oe.length;$e<ce;$e++)et=oe[$e],Le?n.texSubImage2D(t.TEXTURE_2D,$e,0,0,et.width,et.height,ut,dt,et.data):n.texImage2D(t.TEXTURE_2D,$e,it,et.width,et.height,0,ut,dt,et.data);D.generateMipmaps=!1}else Le?(tt&&n.texStorage2D(t.TEXTURE_2D,Ge,it,be.width,be.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,be.width,be.height,ut,dt,be.data)):n.texImage2D(t.TEXTURE_2D,0,it,be.width,be.height,0,ut,dt,be.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Le&&tt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ge,it,oe[0].width,oe[0].height,be.depth);for(let $e=0,ce=oe.length;$e<ce;$e++)et=oe[$e],D.format!==Hr?ut!==null?Le?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,$e,0,0,0,et.width,et.height,be.depth,ut,et.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,$e,it,et.width,et.height,be.depth,0,et.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?n.texSubImage3D(t.TEXTURE_2D_ARRAY,$e,0,0,0,et.width,et.height,be.depth,ut,dt,et.data):n.texImage3D(t.TEXTURE_2D_ARRAY,$e,it,et.width,et.height,be.depth,0,ut,dt,et.data)}else{Le&&tt&&n.texStorage2D(t.TEXTURE_2D,Ge,it,oe[0].width,oe[0].height);for(let $e=0,ce=oe.length;$e<ce;$e++)et=oe[$e],D.format!==Hr?ut!==null?Le?n.compressedTexSubImage2D(t.TEXTURE_2D,$e,0,0,et.width,et.height,ut,et.data):n.compressedTexImage2D(t.TEXTURE_2D,$e,it,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?n.texSubImage2D(t.TEXTURE_2D,$e,0,0,et.width,et.height,ut,dt,et.data):n.texImage2D(t.TEXTURE_2D,$e,it,et.width,et.height,0,ut,dt,et.data)}else if(D.isDataArrayTexture)Le?(tt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ge,it,be.width,be.height,be.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,ut,dt,be.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,it,be.width,be.height,be.depth,0,ut,dt,be.data);else if(D.isData3DTexture)Le?(tt&&n.texStorage3D(t.TEXTURE_3D,Ge,it,be.width,be.height,be.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,ut,dt,be.data)):n.texImage3D(t.TEXTURE_3D,0,it,be.width,be.height,be.depth,0,ut,dt,be.data);else if(D.isFramebufferTexture){if(tt)if(Le)n.texStorage2D(t.TEXTURE_2D,Ge,it,be.width,be.height);else{let $e=be.width,ce=be.height;for(let Je=0;Je<Ge;Je++)n.texImage2D(t.TEXTURE_2D,Je,it,$e,ce,0,ut,dt,null),$e>>=1,ce>>=1}}else if(oe.length>0&&Ye){Le&&tt&&n.texStorage2D(t.TEXTURE_2D,Ge,it,oe[0].width,oe[0].height);for(let $e=0,ce=oe.length;$e<ce;$e++)et=oe[$e],Le?n.texSubImage2D(t.TEXTURE_2D,$e,0,0,ut,dt,et):n.texImage2D(t.TEXTURE_2D,$e,it,ut,dt,et);D.generateMipmaps=!1}else Le?(tt&&n.texStorage2D(t.TEXTURE_2D,Ge,it,be.width,be.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ut,dt,be)):n.texImage2D(t.TEXTURE_2D,0,it,ut,dt,be);b(D,Ye)&&y(ie),Oe.__version=ye.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function ue(F,D,Q){if(D.image.length!==6)return;const ie=ae(F,D),pe=D.source;n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+Q);const ye=r.get(pe);if(pe.version!==ye.__version||ie===!0){n.activeTexture(t.TEXTURE0+Q);const Oe=ln.getPrimaries(ln.workingColorSpace),re=D.colorSpace===hi?null:ln.getPrimaries(D.colorSpace),xe=D.colorSpace===hi||Oe===re?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,xe);const Ne=D.isCompressedTexture||D.image[0].isCompressedTexture,Ee=D.image[0]&&D.image[0].isDataTexture,be=[];for(let $e=0;$e<6;$e++)!Ne&&!Ee?be[$e]=g(D.image[$e],!1,!0,i.maxCubemapSize):be[$e]=Ee?D.image[$e].image:D.image[$e],be[$e]=he(D,be[$e]);const Ye=be[0],ut=m(Ye)||a,dt=s.convert(D.format,D.colorSpace),it=s.convert(D.type),et=E(D.internalFormat,dt,it,D.colorSpace),oe=a&&D.isVideoTexture!==!0,Le=ye.__version===void 0||ie===!0;let tt=T(D,Ye,ut);de(t.TEXTURE_CUBE_MAP,D,ut);let Ge;if(Ne){oe&&Le&&n.texStorage2D(t.TEXTURE_CUBE_MAP,tt,et,Ye.width,Ye.height);for(let $e=0;$e<6;$e++){Ge=be[$e].mipmaps;for(let ce=0;ce<Ge.length;ce++){const Je=Ge[ce];D.format!==Hr?dt!==null?oe?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce,0,0,Je.width,Je.height,dt,Je.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce,et,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce,0,0,Je.width,Je.height,dt,it,Je.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce,et,Je.width,Je.height,0,dt,it,Je.data)}}}else{Ge=D.mipmaps,oe&&Le&&(Ge.length>0&&tt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,tt,et,be[0].width,be[0].height));for(let $e=0;$e<6;$e++)if(Ee){oe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,be[$e].width,be[$e].height,dt,it,be[$e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,et,be[$e].width,be[$e].height,0,dt,it,be[$e].data);for(let ce=0;ce<Ge.length;ce++){const nt=Ge[ce].image[$e].image;oe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce+1,0,0,nt.width,nt.height,dt,it,nt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce+1,et,nt.width,nt.height,0,dt,it,nt.data)}}else{oe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,dt,it,be[$e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,et,dt,it,be[$e]);for(let ce=0;ce<Ge.length;ce++){const Je=Ge[ce];oe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce+1,0,0,dt,it,Je.image[$e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ce+1,et,dt,it,Je.image[$e])}}}b(D,ut)&&y(t.TEXTURE_CUBE_MAP),ye.__version=pe.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function J(F,D,Q,ie,pe,ye){const Oe=s.convert(Q.format,Q.colorSpace),re=s.convert(Q.type),xe=E(Q.internalFormat,Oe,re,Q.colorSpace);if(!r.get(D).__hasExternalTextures){const Ee=Math.max(1,D.width>>ye),be=Math.max(1,D.height>>ye);pe===t.TEXTURE_3D||pe===t.TEXTURE_2D_ARRAY?n.texImage3D(pe,ye,xe,Ee,be,D.depth,0,Oe,re,null):n.texImage2D(pe,ye,xe,Ee,be,0,Oe,re,null)}n.bindFramebuffer(t.FRAMEBUFFER,F),Y(D)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ie,pe,r.get(Q).__webglTexture,0,H(D)):(pe===t.TEXTURE_2D||pe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ie,pe,r.get(Q).__webglTexture,ye),n.bindFramebuffer(t.FRAMEBUFFER,null)}function X(F,D,Q){if(t.bindRenderbuffer(t.RENDERBUFFER,F),D.depthBuffer&&!D.stencilBuffer){let ie=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(Q||Y(D)){const pe=D.depthTexture;pe&&pe.isDepthTexture&&(pe.type===Ki?ie=t.DEPTH_COMPONENT32F:pe.type===js&&(ie=t.DEPTH_COMPONENT24));const ye=H(D);Y(D)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ye,ie,D.width,D.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,ye,ie,D.width,D.height)}else t.renderbufferStorage(t.RENDERBUFFER,ie,D.width,D.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,F)}else if(D.depthBuffer&&D.stencilBuffer){const ie=H(D);Q&&Y(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ie,t.DEPTH24_STENCIL8,D.width,D.height):Y(D)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ie,t.DEPTH24_STENCIL8,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,D.width,D.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,F)}else{const ie=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let pe=0;pe<ie.length;pe++){const ye=ie[pe],Oe=s.convert(ye.format,ye.colorSpace),re=s.convert(ye.type),xe=E(ye.internalFormat,Oe,re,ye.colorSpace),Ne=H(D);Q&&Y(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ne,xe,D.width,D.height):Y(D)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ne,xe,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,xe,D.width,D.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function L(F,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,F),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),U(D.depthTexture,0);const ie=r.get(D.depthTexture).__webglTexture,pe=H(D);if(D.depthTexture.format===na)Y(D)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ie,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ie,0);else if(D.depthTexture.format===Sl)Y(D)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ie,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ie,0);else throw new Error("Unknown depthTexture format")}function N(F){const D=r.get(F),Q=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!D.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");L(D.__webglFramebuffer,F)}else if(Q){D.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer[ie]),D.__webglDepthbuffer[ie]=t.createRenderbuffer(),X(D.__webglDepthbuffer[ie],F,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=t.createRenderbuffer(),X(D.__webglDepthbuffer,F,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function G(F,D,Q){const ie=r.get(F);D!==void 0&&J(ie.__webglFramebuffer,F,F.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Q!==void 0&&N(F)}function $(F){const D=F.texture,Q=r.get(F),ie=r.get(D);F.addEventListener("dispose",M),F.isWebGLMultipleRenderTargets!==!0&&(ie.__webglTexture===void 0&&(ie.__webglTexture=t.createTexture()),ie.__version=D.version,o.memory.textures++);const pe=F.isWebGLCubeRenderTarget===!0,ye=F.isWebGLMultipleRenderTargets===!0,Oe=m(F)||a;if(pe){Q.__webglFramebuffer=[];for(let re=0;re<6;re++)if(a&&D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer[re]=[];for(let xe=0;xe<D.mipmaps.length;xe++)Q.__webglFramebuffer[re][xe]=t.createFramebuffer()}else Q.__webglFramebuffer[re]=t.createFramebuffer()}else{if(a&&D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer=[];for(let re=0;re<D.mipmaps.length;re++)Q.__webglFramebuffer[re]=t.createFramebuffer()}else Q.__webglFramebuffer=t.createFramebuffer();if(ye)if(i.drawBuffers){const re=F.texture;for(let xe=0,Ne=re.length;xe<Ne;xe++){const Ee=r.get(re[xe]);Ee.__webglTexture===void 0&&(Ee.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&Y(F)===!1){const re=ye?D:[D];Q.__webglMultisampledFramebuffer=t.createFramebuffer(),Q.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let xe=0;xe<re.length;xe++){const Ne=re[xe];Q.__webglColorRenderbuffer[xe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Q.__webglColorRenderbuffer[xe]);const Ee=s.convert(Ne.format,Ne.colorSpace),be=s.convert(Ne.type),Ye=E(Ne.internalFormat,Ee,be,Ne.colorSpace,F.isXRRenderTarget===!0),ut=H(F);t.renderbufferStorageMultisample(t.RENDERBUFFER,ut,Ye,F.width,F.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+xe,t.RENDERBUFFER,Q.__webglColorRenderbuffer[xe])}t.bindRenderbuffer(t.RENDERBUFFER,null),F.depthBuffer&&(Q.__webglDepthRenderbuffer=t.createRenderbuffer(),X(Q.__webglDepthRenderbuffer,F,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(pe){n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture),de(t.TEXTURE_CUBE_MAP,D,Oe);for(let re=0;re<6;re++)if(a&&D.mipmaps&&D.mipmaps.length>0)for(let xe=0;xe<D.mipmaps.length;xe++)J(Q.__webglFramebuffer[re][xe],F,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+re,xe);else J(Q.__webglFramebuffer[re],F,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+re,0);b(D,Oe)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ye){const re=F.texture;for(let xe=0,Ne=re.length;xe<Ne;xe++){const Ee=re[xe],be=r.get(Ee);n.bindTexture(t.TEXTURE_2D,be.__webglTexture),de(t.TEXTURE_2D,Ee,Oe),J(Q.__webglFramebuffer,F,Ee,t.COLOR_ATTACHMENT0+xe,t.TEXTURE_2D,0),b(Ee,Oe)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let re=t.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?re=F.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(re,ie.__webglTexture),de(re,D,Oe),a&&D.mipmaps&&D.mipmaps.length>0)for(let xe=0;xe<D.mipmaps.length;xe++)J(Q.__webglFramebuffer[xe],F,D,t.COLOR_ATTACHMENT0,re,xe);else J(Q.__webglFramebuffer,F,D,t.COLOR_ATTACHMENT0,re,0);b(D,Oe)&&y(re),n.unbindTexture()}F.depthBuffer&&N(F)}function O(F){const D=m(F)||a,Q=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ie=0,pe=Q.length;ie<pe;ie++){const ye=Q[ie];if(b(ye,D)){const Oe=F.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,re=r.get(ye).__webglTexture;n.bindTexture(Oe,re),y(Oe),n.unbindTexture()}}}function k(F){if(a&&F.samples>0&&Y(F)===!1){const D=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],Q=F.width,ie=F.height;let pe=t.COLOR_BUFFER_BIT;const ye=[],Oe=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,re=r.get(F),xe=F.isWebGLMultipleRenderTargets===!0;if(xe)for(let Ne=0;Ne<D.length;Ne++)n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,re.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,re.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,re.__webglFramebuffer);for(let Ne=0;Ne<D.length;Ne++){ye.push(t.COLOR_ATTACHMENT0+Ne),F.depthBuffer&&ye.push(Oe);const Ee=re.__ignoreDepthValues!==void 0?re.__ignoreDepthValues:!1;if(Ee===!1&&(F.depthBuffer&&(pe|=t.DEPTH_BUFFER_BIT),F.stencilBuffer&&(pe|=t.STENCIL_BUFFER_BIT)),xe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,re.__webglColorRenderbuffer[Ne]),Ee===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Oe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Oe])),xe){const be=r.get(D[Ne]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,be,0)}t.blitFramebuffer(0,0,Q,ie,0,0,Q,ie,pe,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ye)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),xe)for(let Ne=0;Ne<D.length;Ne++){n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,re.__webglColorRenderbuffer[Ne]);const Ee=r.get(D[Ne]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,re.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,Ee,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,re.__webglMultisampledFramebuffer)}}function H(F){return Math.min(i.maxSamples,F.samples)}function Y(F){const D=r.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function te(F){const D=o.render.frame;u.get(F)!==D&&(u.set(F,D),F.update())}function he(F,D){const Q=F.colorSpace,ie=F.format,pe=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===Am||Q!==lr&&Q!==hi&&(ln.getTransfer(Q)===Tn?a===!1?e.has("EXT_sRGB")===!0&&ie===Hr?(F.format=Am,F.minFilter=Nn,F.generateMipmaps=!1):D=dx.sRGBToLinear(D):(ie!==Hr||pe!==Zi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),D}this.allocateTextureUnit=P,this.resetTextureUnits=z,this.setTexture2D=U,this.setTexture2DArray=j,this.setTexture3D=Z,this.setTextureCube=ne,this.rebindTextures=G,this.setupRenderTarget=$,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=k,this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=J,this.useMultisampledRTT=Y}function mL(t,e,n){const r=n.isWebGL2;function i(s,o=hi){let a;const l=ln.getTransfer(o);if(s===Zi)return t.UNSIGNED_BYTE;if(s===ex)return t.UNSIGNED_SHORT_4_4_4_4;if(s===tx)return t.UNSIGNED_SHORT_5_5_5_1;if(s===kR)return t.BYTE;if(s===DR)return t.SHORT;if(s===mv)return t.UNSIGNED_SHORT;if(s===Q_)return t.INT;if(s===js)return t.UNSIGNED_INT;if(s===Ki)return t.FLOAT;if(s===wl)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===NR)return t.ALPHA;if(s===Hr)return t.RGBA;if(s===FR)return t.LUMINANCE;if(s===BR)return t.LUMINANCE_ALPHA;if(s===na)return t.DEPTH_COMPONENT;if(s===Sl)return t.DEPTH_STENCIL;if(s===Am)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===VR)return t.RED;if(s===nx)return t.RED_INTEGER;if(s===UR)return t.RG;if(s===rx)return t.RG_INTEGER;if(s===ix)return t.RGBA_INTEGER;if(s===Kp||s===qp||s===Yp||s===Zp)if(l===Tn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Kp)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===qp)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Yp)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Zp)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Kp)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===qp)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Yp)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Zp)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===G0||s===W0||s===j0||s===X0)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===G0)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===W0)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===j0)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===X0)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sx)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===K0||s===q0)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===K0)return l===Tn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===q0)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Y0||s===Z0||s===J0||s===Q0||s===eb||s===tb||s===nb||s===rb||s===ib||s===sb||s===ob||s===ab||s===lb||s===cb)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Y0)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Z0)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===J0)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Q0)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===tb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===nb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===rb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===ib)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===sb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ob)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===ab)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===lb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===cb)return l===Tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Jp||s===ub||s===db)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Jp)return l===Tn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===ub)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===db)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===$R||s===fb||s===hb||s===pb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Jp)return a.COMPRESSED_RED_RGTC1_EXT;if(s===fb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===hb)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===pb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ta?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class vL extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Xs extends nn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const d4={type:"move"};class wy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const m=n.getJointPose(g,r),v=this._getHandJoint(c,g);m!==null&&(v.matrix.fromArray(m.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=m.radius),v.visible=m!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(d4)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Xs;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class f4 extends Es{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const g=n.getContextAttributes();let m=null,v=null;const b=[],y=[],E=new Ie;let T=null;const _=new yn;_.layers.enable(1),_.viewport=new Wt;const w=new yn;w.layers.enable(2),w.viewport=new Wt;const M=[_,w],x=new vL;x.layers.enable(1),x.layers.enable(2);let S=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let ae=b[de];return ae===void 0&&(ae=new wy,b[de]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(de){let ae=b[de];return ae===void 0&&(ae=new wy,b[de]=ae),ae.getGripSpace()},this.getHand=function(de){let ae=b[de];return ae===void 0&&(ae=new wy,b[de]=ae),ae.getHandSpace()};function I(de){const ae=y.indexOf(de.inputSource);if(ae===-1)return;const ge=b[ae];ge!==void 0&&(ge.update(de.inputSource,de.frame,c||o),ge.dispatchEvent({type:de.type,data:de.inputSource}))}function z(){i.removeEventListener("select",I),i.removeEventListener("selectstart",I),i.removeEventListener("selectend",I),i.removeEventListener("squeeze",I),i.removeEventListener("squeezestart",I),i.removeEventListener("squeezeend",I),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",P);for(let de=0;de<b.length;de++){const ae=y[de];ae!==null&&(y[de]=null,b[de].disconnect(ae))}S=null,R=null,e.setRenderTarget(m),h=null,f=null,d=null,i=null,v=null,Se.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){s=de,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(de){if(i=de,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",I),i.addEventListener("selectstart",I),i.addEventListener("selectend",I),i.addEventListener("squeeze",I),i.addEventListener("squeezestart",I),i.addEventListener("squeezeend",I),i.addEventListener("end",z),i.addEventListener("inputsourceschange",P),g.xrCompatible!==!0&&await n.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(E),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,n,ae),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),v=new Bi(h.framebufferWidth,h.framebufferHeight,{format:Hr,type:Zi,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let ae=null,ge=null,ue=null;g.depth&&(ue=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ae=g.stencil?Sl:na,ge=g.stencil?ta:js);const J={colorFormat:n.RGBA8,depthFormat:ue,scaleFactor:s};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(J),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),v=new Bi(f.textureWidth,f.textureHeight,{format:Hr,type:Zi,depthTexture:new vx(f.textureWidth,f.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0});const X=e.properties.get(v);X.__ignoreDepthValues=f.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Se.setContext(i),Se.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function P(de){for(let ae=0;ae<de.removed.length;ae++){const ge=de.removed[ae],ue=y.indexOf(ge);ue>=0&&(y[ue]=null,b[ue].disconnect(ge))}for(let ae=0;ae<de.added.length;ae++){const ge=de.added[ae];let ue=y.indexOf(ge);if(ue===-1){for(let X=0;X<b.length;X++)if(X>=y.length){y.push(ge),ue=X;break}else if(y[X]===null){y[X]=ge,ue=X;break}if(ue===-1)break}const J=b[ue];J&&J.connect(ge)}}const B=new W,U=new W;function j(de,ae,ge){B.setFromMatrixPosition(ae.matrixWorld),U.setFromMatrixPosition(ge.matrixWorld);const ue=B.distanceTo(U),J=ae.projectionMatrix.elements,X=ge.projectionMatrix.elements,L=J[14]/(J[10]-1),N=J[14]/(J[10]+1),G=(J[9]+1)/J[5],$=(J[9]-1)/J[5],O=(J[8]-1)/J[0],k=(X[8]+1)/X[0],H=L*O,Y=L*k,te=ue/(-O+k),he=te*-O;ae.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(he),de.translateZ(te),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert();const F=L+te,D=N+te,Q=H-he,ie=Y+(ue-he),pe=G*N/D*F,ye=$*N/D*F;de.projectionMatrix.makePerspective(Q,ie,pe,ye,F,D),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}function Z(de,ae){ae===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(ae.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(i===null)return;x.near=w.near=_.near=de.near,x.far=w.far=_.far=de.far,(S!==x.near||R!==x.far)&&(i.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,R=x.far);const ae=de.parent,ge=x.cameras;Z(x,ae);for(let ue=0;ue<ge.length;ue++)Z(ge[ue],ae);ge.length===2?j(x,_,w):x.projectionMatrix.copy(_.projectionMatrix),ne(de,x,ae)};function ne(de,ae,ge){ge===null?de.matrix.copy(ae.matrixWorld):(de.matrix.copy(ge.matrixWorld),de.matrix.invert(),de.matrix.multiply(ae.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(ae.projectionMatrix),de.projectionMatrixInverse.copy(ae.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=iu*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(de){l=de,f!==null&&(f.fixedFoveation=de),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=de)};let K=null;function fe(de,ae){if(u=ae.getViewerPose(c||o),p=ae,u!==null){const ge=u.views;h!==null&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let ue=!1;ge.length!==x.cameras.length&&(x.cameras.length=0,ue=!0);for(let J=0;J<ge.length;J++){const X=ge[J];let L=null;if(h!==null)L=h.getViewport(X);else{const G=d.getViewSubImage(f,X);L=G.viewport,J===0&&(e.setRenderTargetTextures(v,G.colorTexture,f.ignoreDepthValues?void 0:G.depthStencilTexture),e.setRenderTarget(v))}let N=M[J];N===void 0&&(N=new yn,N.layers.enable(J),N.viewport=new Wt,M[J]=N),N.matrix.fromArray(X.transform.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale),N.projectionMatrix.fromArray(X.projectionMatrix),N.projectionMatrixInverse.copy(N.projectionMatrix).invert(),N.viewport.set(L.x,L.y,L.width,L.height),J===0&&(x.matrix.copy(N.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),ue===!0&&x.cameras.push(N)}}for(let ge=0;ge<b.length;ge++){const ue=y[ge],J=b[ge];ue!==null&&J!==void 0&&J.update(ue,ae,c||o)}K&&K(de,ae),ae.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ae}),p=null}const Se=new cL;Se.setAnimationLoop(fe),this.setAnimationLoop=function(de){K=de},this.dispose=function(){}}}function h4(t,e){function n(m,v){m.matrixAutoUpdate===!0&&m.updateMatrix(),v.value.copy(m.matrix)}function r(m,v){v.color.getRGB(m.fogColor.value,oL(t)),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function i(m,v,b,y,E){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(m,v):v.isMeshToonMaterial?(s(m,v),d(m,v)):v.isMeshPhongMaterial?(s(m,v),u(m,v)):v.isMeshStandardMaterial?(s(m,v),f(m,v),v.isMeshPhysicalMaterial&&h(m,v,E)):v.isMeshMatcapMaterial?(s(m,v),p(m,v)):v.isMeshDepthMaterial?s(m,v):v.isMeshDistanceMaterial?(s(m,v),g(m,v)):v.isMeshNormalMaterial?s(m,v):v.isLineBasicMaterial?(o(m,v),v.isLineDashedMaterial&&a(m,v)):v.isPointsMaterial?l(m,v,b,y):v.isSpriteMaterial?c(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map,n(v.map,m.mapTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.bumpMap&&(m.bumpMap.value=v.bumpMap,n(v.bumpMap,m.bumpMapTransform),m.bumpScale.value=v.bumpScale,v.side===Or&&(m.bumpScale.value*=-1)),v.normalMap&&(m.normalMap.value=v.normalMap,n(v.normalMap,m.normalMapTransform),m.normalScale.value.copy(v.normalScale),v.side===Or&&m.normalScale.value.negate()),v.displacementMap&&(m.displacementMap.value=v.displacementMap,n(v.displacementMap,m.displacementMapTransform),m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,m.emissiveMapTransform)),v.specularMap&&(m.specularMap.value=v.specularMap,n(v.specularMap,m.specularMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const b=e.get(v).envMap;if(b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const y=t._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*y,n(v.lightMap,m.lightMapTransform)}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,m.aoMapTransform))}function o(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,v.map&&(m.map.value=v.map,n(v.map,m.mapTransform))}function a(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function l(m,v,b,y){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*b,m.scale.value=y*.5,v.map&&(m.map.value=v.map,n(v.map,m.uvTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest)}function c(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map,n(v.map,m.mapTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest)}function u(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function d(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function f(m,v){m.metalness.value=v.metalness,v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,m.metalnessMapTransform)),m.roughness.value=v.roughness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,m.roughnessMapTransform)),e.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function h(m,v,b){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,m.sheenColorMapTransform)),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,m.sheenRoughnessMapTransform))),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,m.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(m.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Or&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,m.iridescenceMapTransform)),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,m.transmissionMapTransform)),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(m.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(m.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,m.specularColorMapTransform)),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,m.specularIntensityMapTransform))}function p(m,v){v.matcap&&(m.matcap.value=v.matcap)}function g(m,v){const b=e.get(v).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function p4(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,y){const E=y.program;r.uniformBlockBinding(b,E)}function c(b,y){let E=i[b.id];E===void 0&&(p(b),E=u(b),i[b.id]=E,b.addEventListener("dispose",m));const T=y.program;r.updateUBOMapping(b,T);const _=e.render.frame;s[b.id]!==_&&(f(b),s[b.id]=_)}function u(b){const y=d();b.__bindingPointIndex=y;const E=t.createBuffer(),T=b.__size,_=b.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,T,_),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,E),E}function d(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(b){const y=i[b.id],E=b.uniforms,T=b.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let _=0,w=E.length;_<w;_++){const M=Array.isArray(E[_])?E[_]:[E[_]];for(let x=0,S=M.length;x<S;x++){const R=M[x];if(h(R,_,x,T)===!0){const I=R.__offset,z=Array.isArray(R.value)?R.value:[R.value];let P=0;for(let B=0;B<z.length;B++){const U=z[B],j=g(U);typeof U=="number"||typeof U=="boolean"?(R.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,I+P,R.__data)):U.isMatrix3?(R.__data[0]=U.elements[0],R.__data[1]=U.elements[1],R.__data[2]=U.elements[2],R.__data[3]=0,R.__data[4]=U.elements[3],R.__data[5]=U.elements[4],R.__data[6]=U.elements[5],R.__data[7]=0,R.__data[8]=U.elements[6],R.__data[9]=U.elements[7],R.__data[10]=U.elements[8],R.__data[11]=0):(U.toArray(R.__data,P),P+=j.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,I,R.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(b,y,E,T){const _=b.value,w=y+"_"+E;if(T[w]===void 0)return typeof _=="number"||typeof _=="boolean"?T[w]=_:T[w]=_.clone(),!0;{const M=T[w];if(typeof _=="number"||typeof _=="boolean"){if(M!==_)return T[w]=_,!0}else if(M.equals(_)===!1)return M.copy(_),!0}return!1}function p(b){const y=b.uniforms;let E=0;const T=16;for(let w=0,M=y.length;w<M;w++){const x=Array.isArray(y[w])?y[w]:[y[w]];for(let S=0,R=x.length;S<R;S++){const I=x[S],z=Array.isArray(I.value)?I.value:[I.value];for(let P=0,B=z.length;P<B;P++){const U=z[P],j=g(U),Z=E%T;Z!==0&&T-Z<j.boundary&&(E+=T-Z),I.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=E,E+=j.storage}}}const _=E%T;return _>0&&(E+=T-_),b.__size=E,b.__cache={},this}function g(b){const y={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(y.boundary=4,y.storage=4):b.isVector2?(y.boundary=8,y.storage=8):b.isVector3||b.isColor?(y.boundary=16,y.storage=12):b.isVector4?(y.boundary=16,y.storage=16):b.isMatrix3?(y.boundary=48,y.storage=48):b.isMatrix4?(y.boundary=64,y.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),y}function m(b){const y=b.target;y.removeEventListener("dispose",m);const E=o.indexOf(y.__bindingPointIndex);o.splice(E,1),t.deleteBuffer(i[y.id]),delete i[y.id],delete s[y.id]}function v(){for(const b in i)t.deleteBuffer(i[b]);o=[],i={},s={}}return{bind:l,update:c,dispose:v}}class Wc{constructor(e={}){const{canvas:n=rL(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=o;const h=new Uint32Array(4),p=new Int32Array(4);let g=null,m=null;const v=[],b=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=In,this._useLegacyLights=!1,this.toneMapping=Js,this.toneMappingExposure=1;const y=this;let E=!1,T=0,_=0,w=null,M=-1,x=null;const S=new Wt,R=new Wt;let I=null;const z=new Ke(0);let P=0,B=n.width,U=n.height,j=1,Z=null,ne=null;const K=new Wt(0,0,B,U),fe=new Wt(0,0,B,U);let Se=!1;const de=new Gf;let ae=!1,ge=!1,ue=null;const J=new pt,X=new Ie,L=new W,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return w===null?j:1}let $=r;function O(q,_e){for(let Ae=0;Ae<q.length;Ae++){const Pe=q[Ae],Ce=n.getContext(Pe,_e);if(Ce!==null)return Ce}return null}try{const q={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Cu}`),n.addEventListener("webglcontextlost",$e,!1),n.addEventListener("webglcontextrestored",ce,!1),n.addEventListener("webglcontextcreationerror",Je,!1),$===null){const _e=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&_e.shift(),$=O(_e,q),$===null)throw O(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&$ instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let k,H,Y,te,he,F,D,Q,ie,pe,ye,Oe,re,xe,Ne,Ee,be,Ye,ut,dt,it,et,oe,Le;function tt(){k=new Tz($),H=new wz($,k,e),k.init(H),et=new mL($,k,H),Y=new c4($,k,H),te=new Lz($),he=new ZH,F=new u4($,k,Y,he,H,et,te),D=new Ez(y),Q=new Az(y),ie=new VV($,H),oe=new _z($,k,ie,H),pe=new Pz($,ie,te,oe),ye=new Dz($,pe,ie,te),ut=new kz($,H,F),Ee=new Sz(he),Oe=new YH(y,D,Q,k,H,oe,Ee),re=new h4(y,he),xe=new QH,Ne=new s4(k,H),Ye=new bz(y,D,Q,Y,ye,f,l),be=new l4(y,ye,H),Le=new p4($,te,H,Y),dt=new xz($,k,te,H),it=new Rz($,k,te,H),te.programs=Oe.programs,y.capabilities=H,y.extensions=k,y.properties=he,y.renderLists=xe,y.shadowMap=be,y.state=Y,y.info=te}tt();const Ge=new f4(y,$);this.xr=Ge,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const q=k.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=k.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(q){q!==void 0&&(j=q,this.setSize(B,U,!1))},this.getSize=function(q){return q.set(B,U)},this.setSize=function(q,_e,Ae=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=q,U=_e,n.width=Math.floor(q*j),n.height=Math.floor(_e*j),Ae===!0&&(n.style.width=q+"px",n.style.height=_e+"px"),this.setViewport(0,0,q,_e)},this.getDrawingBufferSize=function(q){return q.set(B*j,U*j).floor()},this.setDrawingBufferSize=function(q,_e,Ae){B=q,U=_e,j=Ae,n.width=Math.floor(q*Ae),n.height=Math.floor(_e*Ae),this.setViewport(0,0,q,_e)},this.getCurrentViewport=function(q){return q.copy(S)},this.getViewport=function(q){return q.copy(K)},this.setViewport=function(q,_e,Ae,Pe){q.isVector4?K.set(q.x,q.y,q.z,q.w):K.set(q,_e,Ae,Pe),Y.viewport(S.copy(K).multiplyScalar(j).floor())},this.getScissor=function(q){return q.copy(fe)},this.setScissor=function(q,_e,Ae,Pe){q.isVector4?fe.set(q.x,q.y,q.z,q.w):fe.set(q,_e,Ae,Pe),Y.scissor(R.copy(fe).multiplyScalar(j).floor())},this.getScissorTest=function(){return Se},this.setScissorTest=function(q){Y.setScissorTest(Se=q)},this.setOpaqueSort=function(q){Z=q},this.setTransparentSort=function(q){ne=q},this.getClearColor=function(q){return q.copy(Ye.getClearColor())},this.setClearColor=function(){Ye.setClearColor.apply(Ye,arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha.apply(Ye,arguments)},this.clear=function(q=!0,_e=!0,Ae=!0){let Pe=0;if(q){let Ce=!1;if(w!==null){const ot=w.texture.format;Ce=ot===ix||ot===rx||ot===nx}if(Ce){const ot=w.texture.type,mt=ot===Zi||ot===js||ot===mv||ot===ta||ot===ex||ot===tx,yt=Ye.getClearColor(),wt=Ye.getClearAlpha(),Dt=yt.r,Et=yt.g,Ct=yt.b;mt?(h[0]=Dt,h[1]=Et,h[2]=Ct,h[3]=wt,$.clearBufferuiv($.COLOR,0,h)):(p[0]=Dt,p[1]=Et,p[2]=Ct,p[3]=wt,$.clearBufferiv($.COLOR,0,p))}else Pe|=$.COLOR_BUFFER_BIT}_e&&(Pe|=$.DEPTH_BUFFER_BIT),Ae&&(Pe|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",$e,!1),n.removeEventListener("webglcontextrestored",ce,!1),n.removeEventListener("webglcontextcreationerror",Je,!1),xe.dispose(),Ne.dispose(),he.dispose(),D.dispose(),Q.dispose(),ye.dispose(),oe.dispose(),Le.dispose(),Oe.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Dn),Ge.removeEventListener("sessionend",fn),ue&&(ue.dispose(),ue=null),xr.stop()};function $e(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const q=te.autoReset,_e=be.enabled,Ae=be.autoUpdate,Pe=be.needsUpdate,Ce=be.type;tt(),te.autoReset=q,be.enabled=_e,be.autoUpdate=Ae,be.needsUpdate=Pe,be.type=Ce}function Je(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function nt(q){const _e=q.target;_e.removeEventListener("dispose",nt),ft(_e)}function ft(q){at(q),he.remove(q)}function at(q){const _e=he.get(q).programs;_e!==void 0&&(_e.forEach(function(Ae){Oe.releaseProgram(Ae)}),q.isShaderMaterial&&Oe.releaseShaderCache(q))}this.renderBufferDirect=function(q,_e,Ae,Pe,Ce,ot){_e===null&&(_e=N);const mt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,yt=ON(q,_e,Ae,Pe,Ce);Y.setMaterial(Pe,mt);let wt=Ae.index,Dt=1;if(Pe.wireframe===!0){if(wt=pe.getWireframeAttribute(Ae),wt===void 0)return;Dt=2}const Et=Ae.drawRange,Ct=Ae.attributes.position;let Kn=Et.start*Dt,ai=(Et.start+Et.count)*Dt;ot!==null&&(Kn=Math.max(Kn,ot.start*Dt),ai=Math.min(ai,(ot.start+ot.count)*Dt)),wt!==null?(Kn=Math.max(Kn,0),ai=Math.min(ai,wt.count)):Ct!=null&&(Kn=Math.max(Kn,0),ai=Math.min(ai,Ct.count));const dr=ai-Kn;if(dr<0||dr===1/0)return;oe.setup(Ce,Pe,yt,Ae,wt);let Rs,Bn=dt;if(wt!==null&&(Rs=ie.get(wt),Bn=it,Bn.setIndex(Rs)),Ce.isMesh)Pe.wireframe===!0?(Y.setLineWidth(Pe.wireframeLinewidth*G()),Bn.setMode($.LINES)):Bn.setMode($.TRIANGLES);else if(Ce.isLine){let Ft=Pe.linewidth;Ft===void 0&&(Ft=1),Y.setLineWidth(Ft*G()),Ce.isLineSegments?Bn.setMode($.LINES):Ce.isLineLoop?Bn.setMode($.LINE_LOOP):Bn.setMode($.LINE_STRIP)}else Ce.isPoints?Bn.setMode($.POINTS):Ce.isSprite&&Bn.setMode($.TRIANGLES);if(Ce.isBatchedMesh)Bn.renderMultiDraw(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount);else if(Ce.isInstancedMesh)Bn.renderInstances(Kn,dr,Ce.count);else if(Ae.isInstancedBufferGeometry){const Ft=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,$g=Math.min(Ae.instanceCount,Ft);Bn.renderInstances(Kn,dr,$g)}else Bn.render(Kn,dr)};function Zt(q,_e,Ae){q.transparent===!0&&q.side===Qr&&q.forceSinglePass===!1?(q.side=Or,q.needsUpdate=!0,tc(q,_e,Ae),q.side=bs,q.needsUpdate=!0,tc(q,_e,Ae),q.side=Qr):tc(q,_e,Ae)}this.compile=function(q,_e,Ae=null){Ae===null&&(Ae=q),m=Ne.get(Ae),m.init(),b.push(m),Ae.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(_e.layers)&&(m.pushLight(Ce),Ce.castShadow&&m.pushShadow(Ce))}),q!==Ae&&q.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(_e.layers)&&(m.pushLight(Ce),Ce.castShadow&&m.pushShadow(Ce))}),m.setupLights(y._useLegacyLights);const Pe=new Set;return q.traverse(function(Ce){const ot=Ce.material;if(ot)if(Array.isArray(ot))for(let mt=0;mt<ot.length;mt++){const yt=ot[mt];Zt(yt,Ae,Ce),Pe.add(yt)}else Zt(ot,Ae,Ce),Pe.add(ot)}),b.pop(),m=null,Pe},this.compileAsync=function(q,_e,Ae=null){const Pe=this.compile(q,_e,Ae);return new Promise(Ce=>{function ot(){if(Pe.forEach(function(mt){he.get(mt).currentProgram.isReady()&&Pe.delete(mt)}),Pe.size===0){Ce(q);return}setTimeout(ot,10)}k.get("KHR_parallel_shader_compile")!==null?ot():setTimeout(ot,10)})};let Jt=null;function Cn(q){Jt&&Jt(q)}function Dn(){xr.stop()}function fn(){xr.start()}const xr=new cL;xr.setAnimationLoop(Cn),typeof self<"u"&&xr.setContext(self),this.setAnimationLoop=function(q){Jt=q,Ge.setAnimationLoop(q),q===null?xr.stop():xr.start()},Ge.addEventListener("sessionstart",Dn),Ge.addEventListener("sessionend",fn),this.render=function(q,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(_e),_e=Ge.getCamera()),q.isScene===!0&&q.onBeforeRender(y,q,_e,w),m=Ne.get(q,b.length),m.init(),b.push(m),J.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),de.setFromProjectionMatrix(J),ge=this.localClippingEnabled,ae=Ee.init(this.clippingPlanes,ge),g=xe.get(q,v.length),g.init(),v.push(g),Ve(q,_e,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(Z,ne),this.info.render.frame++,ae===!0&&Ee.beginShadows();const Ae=m.state.shadowsArray;if(be.render(Ae,q,_e),ae===!0&&Ee.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ye.render(g,q),m.setupLights(y._useLegacyLights),_e.isArrayCamera){const Pe=_e.cameras;for(let Ce=0,ot=Pe.length;Ce<ot;Ce++){const mt=Pe[Ce];Qt(g,q,mt,mt.viewport)}}else Qt(g,q,_e);w!==null&&(F.updateMultisampleRenderTarget(w),F.updateRenderTargetMipmap(w)),q.isScene===!0&&q.onAfterRender(y,q,_e),oe.resetDefaultState(),M=-1,x=null,b.pop(),b.length>0?m=b[b.length-1]:m=null,v.pop(),v.length>0?g=v[v.length-1]:g=null};function Ve(q,_e,Ae,Pe){if(q.visible===!1)return;if(q.layers.test(_e.layers)){if(q.isGroup)Ae=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(_e);else if(q.isLight)m.pushLight(q),q.castShadow&&m.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||de.intersectsSprite(q)){Pe&&L.setFromMatrixPosition(q.matrixWorld).applyMatrix4(J);const mt=ye.update(q),yt=q.material;yt.visible&&g.push(q,mt,yt,Ae,L.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||de.intersectsObject(q))){const mt=ye.update(q),yt=q.material;if(Pe&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),L.copy(q.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),L.copy(mt.boundingSphere.center)),L.applyMatrix4(q.matrixWorld).applyMatrix4(J)),Array.isArray(yt)){const wt=mt.groups;for(let Dt=0,Et=wt.length;Dt<Et;Dt++){const Ct=wt[Dt],Kn=yt[Ct.materialIndex];Kn&&Kn.visible&&g.push(q,mt,Kn,Ae,L.z,Ct)}}else yt.visible&&g.push(q,mt,yt,Ae,L.z,null)}}const ot=q.children;for(let mt=0,yt=ot.length;mt<yt;mt++)Ve(ot[mt],_e,Ae,Pe)}function Qt(q,_e,Ae,Pe){const Ce=q.opaque,ot=q.transmissive,mt=q.transparent;m.setupLightsView(Ae),ae===!0&&Ee.setGlobalState(y.clippingPlanes,Ae),ot.length>0&&$t(Ce,ot,_e,Ae),Pe&&Y.viewport(S.copy(Pe)),Ce.length>0&&mn(Ce,_e,Ae),ot.length>0&&mn(ot,_e,Ae),mt.length>0&&mn(mt,_e,Ae),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function $t(q,_e,Ae,Pe){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;const ot=H.isWebGL2;ue===null&&(ue=new Bi(1,1,{generateMipmaps:!0,type:k.has("EXT_color_buffer_half_float")?wl:Zi,minFilter:Qi,samples:ot?4:0})),y.getDrawingBufferSize(X),ot?ue.setSize(X.x,X.y):ue.setSize(Tm(X.x),Tm(X.y));const mt=y.getRenderTarget();y.setRenderTarget(ue),y.getClearColor(z),P=y.getClearAlpha(),P<1&&y.setClearColor(16777215,.5),y.clear();const yt=y.toneMapping;y.toneMapping=Js,mn(q,Ae,Pe),F.updateMultisampleRenderTarget(ue),F.updateRenderTargetMipmap(ue);let wt=!1;for(let Dt=0,Et=_e.length;Dt<Et;Dt++){const Ct=_e[Dt],Kn=Ct.object,ai=Ct.geometry,dr=Ct.material,Rs=Ct.group;if(dr.side===Qr&&Kn.layers.test(Pe.layers)){const Bn=dr.side;dr.side=Or,dr.needsUpdate=!0,Ui(Kn,Ae,Pe,ai,dr,Rs),dr.side=Bn,dr.needsUpdate=!0,wt=!0}}wt===!0&&(F.updateMultisampleRenderTarget(ue),F.updateRenderTargetMipmap(ue)),y.setRenderTarget(mt),y.setClearColor(z,P),y.toneMapping=yt}function mn(q,_e,Ae){const Pe=_e.isScene===!0?_e.overrideMaterial:null;for(let Ce=0,ot=q.length;Ce<ot;Ce++){const mt=q[Ce],yt=mt.object,wt=mt.geometry,Dt=Pe===null?mt.material:Pe,Et=mt.group;yt.layers.test(Ae.layers)&&Ui(yt,_e,Ae,wt,Dt,Et)}}function Ui(q,_e,Ae,Pe,Ce,ot){q.onBeforeRender(y,_e,Ae,Pe,Ce,ot),q.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),Ce.onBeforeRender(y,_e,Ae,Pe,q,ot),Ce.transparent===!0&&Ce.side===Qr&&Ce.forceSinglePass===!1?(Ce.side=Or,Ce.needsUpdate=!0,y.renderBufferDirect(Ae,_e,Pe,Ce,q,ot),Ce.side=bs,Ce.needsUpdate=!0,y.renderBufferDirect(Ae,_e,Pe,Ce,q,ot),Ce.side=Qr):y.renderBufferDirect(Ae,_e,Pe,Ce,q,ot),q.onAfterRender(y,_e,Ae,Pe,Ce,ot)}function tc(q,_e,Ae){_e.isScene!==!0&&(_e=N);const Pe=he.get(q),Ce=m.state.lights,ot=m.state.shadowsArray,mt=Ce.state.version,yt=Oe.getParameters(q,Ce.state,ot,_e,Ae),wt=Oe.getProgramCacheKey(yt);let Dt=Pe.programs;Pe.environment=q.isMeshStandardMaterial?_e.environment:null,Pe.fog=_e.fog,Pe.envMap=(q.isMeshStandardMaterial?Q:D).get(q.envMap||Pe.environment),Dt===void 0&&(q.addEventListener("dispose",nt),Dt=new Map,Pe.programs=Dt);let Et=Dt.get(wt);if(Et!==void 0){if(Pe.currentProgram===Et&&Pe.lightsStateVersion===mt)return MS(q,yt),Et}else yt.uniforms=Oe.getUniforms(q),q.onBuild(Ae,yt,y),q.onBeforeCompile(yt,y),Et=Oe.acquireProgram(yt,wt),Dt.set(wt,Et),Pe.uniforms=yt.uniforms;const Ct=Pe.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Ct.clippingPlanes=Ee.uniform),MS(q,yt),Pe.needsLights=DN(q),Pe.lightsStateVersion=mt,Pe.needsLights&&(Ct.ambientLightColor.value=Ce.state.ambient,Ct.lightProbe.value=Ce.state.probe,Ct.directionalLights.value=Ce.state.directional,Ct.directionalLightShadows.value=Ce.state.directionalShadow,Ct.spotLights.value=Ce.state.spot,Ct.spotLightShadows.value=Ce.state.spotShadow,Ct.rectAreaLights.value=Ce.state.rectArea,Ct.ltc_1.value=Ce.state.rectAreaLTC1,Ct.ltc_2.value=Ce.state.rectAreaLTC2,Ct.pointLights.value=Ce.state.point,Ct.pointLightShadows.value=Ce.state.pointShadow,Ct.hemisphereLights.value=Ce.state.hemi,Ct.directionalShadowMap.value=Ce.state.directionalShadowMap,Ct.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,Ct.spotShadowMap.value=Ce.state.spotShadowMap,Ct.spotLightMatrix.value=Ce.state.spotLightMatrix,Ct.spotLightMap.value=Ce.state.spotLightMap,Ct.pointShadowMap.value=Ce.state.pointShadowMap,Ct.pointShadowMatrix.value=Ce.state.pointShadowMatrix),Pe.currentProgram=Et,Pe.uniformsList=null,Et}function ES(q){if(q.uniformsList===null){const _e=q.currentProgram.getUniforms();q.uniformsList=em.seqWithValue(_e.seq,q.uniforms)}return q.uniformsList}function MS(q,_e){const Ae=he.get(q);Ae.outputColorSpace=_e.outputColorSpace,Ae.batching=_e.batching,Ae.instancing=_e.instancing,Ae.instancingColor=_e.instancingColor,Ae.skinning=_e.skinning,Ae.morphTargets=_e.morphTargets,Ae.morphNormals=_e.morphNormals,Ae.morphColors=_e.morphColors,Ae.morphTargetsCount=_e.morphTargetsCount,Ae.numClippingPlanes=_e.numClippingPlanes,Ae.numIntersection=_e.numClipIntersection,Ae.vertexAlphas=_e.vertexAlphas,Ae.vertexTangents=_e.vertexTangents,Ae.toneMapping=_e.toneMapping}function ON(q,_e,Ae,Pe,Ce){_e.isScene!==!0&&(_e=N),F.resetTextureUnits();const ot=_e.fog,mt=Pe.isMeshStandardMaterial?_e.environment:null,yt=w===null?y.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:lr,wt=(Pe.isMeshStandardMaterial?Q:D).get(Pe.envMap||mt),Dt=Pe.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Et=!!Ae.attributes.tangent&&(!!Pe.normalMap||Pe.anisotropy>0),Ct=!!Ae.morphAttributes.position,Kn=!!Ae.morphAttributes.normal,ai=!!Ae.morphAttributes.color;let dr=Js;Pe.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(dr=y.toneMapping);const Rs=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Bn=Rs!==void 0?Rs.length:0,Ft=he.get(Pe),$g=m.state.lights;if(ae===!0&&(ge===!0||q!==x)){const wi=q===x&&Pe.id===M;Ee.setState(Pe,q,wi)}let Gn=!1;Pe.version===Ft.__version?(Ft.needsLights&&Ft.lightsStateVersion!==$g.state.version||Ft.outputColorSpace!==yt||Ce.isBatchedMesh&&Ft.batching===!1||!Ce.isBatchedMesh&&Ft.batching===!0||Ce.isInstancedMesh&&Ft.instancing===!1||!Ce.isInstancedMesh&&Ft.instancing===!0||Ce.isSkinnedMesh&&Ft.skinning===!1||!Ce.isSkinnedMesh&&Ft.skinning===!0||Ce.isInstancedMesh&&Ft.instancingColor===!0&&Ce.instanceColor===null||Ce.isInstancedMesh&&Ft.instancingColor===!1&&Ce.instanceColor!==null||Ft.envMap!==wt||Pe.fog===!0&&Ft.fog!==ot||Ft.numClippingPlanes!==void 0&&(Ft.numClippingPlanes!==Ee.numPlanes||Ft.numIntersection!==Ee.numIntersection)||Ft.vertexAlphas!==Dt||Ft.vertexTangents!==Et||Ft.morphTargets!==Ct||Ft.morphNormals!==Kn||Ft.morphColors!==ai||Ft.toneMapping!==dr||H.isWebGL2===!0&&Ft.morphTargetsCount!==Bn)&&(Gn=!0):(Gn=!0,Ft.__version=Pe.version);let Aa=Ft.currentProgram;Gn===!0&&(Aa=tc(Pe,_e,Ce));let CS=!1,Zu=!1,zg=!1;const Ar=Aa.getUniforms(),Ta=Ft.uniforms;if(Y.useProgram(Aa.program)&&(CS=!0,Zu=!0,zg=!0),Pe.id!==M&&(M=Pe.id,Zu=!0),CS||x!==q){Ar.setValue($,"projectionMatrix",q.projectionMatrix),Ar.setValue($,"viewMatrix",q.matrixWorldInverse);const wi=Ar.map.cameraPosition;wi!==void 0&&wi.setValue($,L.setFromMatrixPosition(q.matrixWorld)),H.logarithmicDepthBuffer&&Ar.setValue($,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&Ar.setValue($,"isOrthographic",q.isOrthographicCamera===!0),x!==q&&(x=q,Zu=!0,zg=!0)}if(Ce.isSkinnedMesh){Ar.setOptional($,Ce,"bindMatrix"),Ar.setOptional($,Ce,"bindMatrixInverse");const wi=Ce.skeleton;wi&&(H.floatVertexTextures?(wi.boneTexture===null&&wi.computeBoneTexture(),Ar.setValue($,"boneTexture",wi.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Ce.isBatchedMesh&&(Ar.setOptional($,Ce,"batchingTexture"),Ar.setValue($,"batchingTexture",Ce._matricesTexture,F));const Hg=Ae.morphAttributes;if((Hg.position!==void 0||Hg.normal!==void 0||Hg.color!==void 0&&H.isWebGL2===!0)&&ut.update(Ce,Ae,Aa),(Zu||Ft.receiveShadow!==Ce.receiveShadow)&&(Ft.receiveShadow=Ce.receiveShadow,Ar.setValue($,"receiveShadow",Ce.receiveShadow)),Pe.isMeshGouraudMaterial&&Pe.envMap!==null&&(Ta.envMap.value=wt,Ta.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),Zu&&(Ar.setValue($,"toneMappingExposure",y.toneMappingExposure),Ft.needsLights&&kN(Ta,zg),ot&&Pe.fog===!0&&re.refreshFogUniforms(Ta,ot),re.refreshMaterialUniforms(Ta,Pe,j,U,ue),em.upload($,ES(Ft),Ta,F)),Pe.isShaderMaterial&&Pe.uniformsNeedUpdate===!0&&(em.upload($,ES(Ft),Ta,F),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&Ar.setValue($,"center",Ce.center),Ar.setValue($,"modelViewMatrix",Ce.modelViewMatrix),Ar.setValue($,"normalMatrix",Ce.normalMatrix),Ar.setValue($,"modelMatrix",Ce.matrixWorld),Pe.isShaderMaterial||Pe.isRawShaderMaterial){const wi=Pe.uniformsGroups;for(let Gg=0,NN=wi.length;Gg<NN;Gg++)if(H.isWebGL2){const AS=wi[Gg];Le.update(AS,Aa),Le.bind(AS,Aa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Aa}function kN(q,_e){q.ambientLightColor.needsUpdate=_e,q.lightProbe.needsUpdate=_e,q.directionalLights.needsUpdate=_e,q.directionalLightShadows.needsUpdate=_e,q.pointLights.needsUpdate=_e,q.pointLightShadows.needsUpdate=_e,q.spotLights.needsUpdate=_e,q.spotLightShadows.needsUpdate=_e,q.rectAreaLights.needsUpdate=_e,q.hemisphereLights.needsUpdate=_e}function DN(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(q,_e,Ae){he.get(q.texture).__webglTexture=_e,he.get(q.depthTexture).__webglTexture=Ae;const Pe=he.get(q);Pe.__hasExternalTextures=!0,Pe.__hasExternalTextures&&(Pe.__autoAllocateDepthBuffer=Ae===void 0,Pe.__autoAllocateDepthBuffer||k.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(q,_e){const Ae=he.get(q);Ae.__webglFramebuffer=_e,Ae.__useDefaultFramebuffer=_e===void 0},this.setRenderTarget=function(q,_e=0,Ae=0){w=q,T=_e,_=Ae;let Pe=!0,Ce=null,ot=!1,mt=!1;if(q){const wt=he.get(q);wt.__useDefaultFramebuffer!==void 0?(Y.bindFramebuffer($.FRAMEBUFFER,null),Pe=!1):wt.__webglFramebuffer===void 0?F.setupRenderTarget(q):wt.__hasExternalTextures&&F.rebindTextures(q,he.get(q.texture).__webglTexture,he.get(q.depthTexture).__webglTexture);const Dt=q.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(mt=!0);const Et=he.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Et[_e])?Ce=Et[_e][Ae]:Ce=Et[_e],ot=!0):H.isWebGL2&&q.samples>0&&F.useMultisampledRTT(q)===!1?Ce=he.get(q).__webglMultisampledFramebuffer:Array.isArray(Et)?Ce=Et[Ae]:Ce=Et,S.copy(q.viewport),R.copy(q.scissor),I=q.scissorTest}else S.copy(K).multiplyScalar(j).floor(),R.copy(fe).multiplyScalar(j).floor(),I=Se;if(Y.bindFramebuffer($.FRAMEBUFFER,Ce)&&H.drawBuffers&&Pe&&Y.drawBuffers(q,Ce),Y.viewport(S),Y.scissor(R),Y.setScissorTest(I),ot){const wt=he.get(q.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+_e,wt.__webglTexture,Ae)}else if(mt){const wt=he.get(q.texture),Dt=_e||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,wt.__webglTexture,Ae||0,Dt)}M=-1},this.readRenderTargetPixels=function(q,_e,Ae,Pe,Ce,ot,mt){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=he.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&mt!==void 0&&(yt=yt[mt]),yt){Y.bindFramebuffer($.FRAMEBUFFER,yt);try{const wt=q.texture,Dt=wt.format,Et=wt.type;if(Dt!==Hr&&et.convert(Dt)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ct=Et===wl&&(k.has("EXT_color_buffer_half_float")||H.isWebGL2&&k.has("EXT_color_buffer_float"));if(Et!==Zi&&et.convert(Et)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Et===Ki&&(H.isWebGL2||k.has("OES_texture_float")||k.has("WEBGL_color_buffer_float")))&&!Ct){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=q.width-Pe&&Ae>=0&&Ae<=q.height-Ce&&$.readPixels(_e,Ae,Pe,Ce,et.convert(Dt),et.convert(Et),ot)}finally{const wt=w!==null?he.get(w).__webglFramebuffer:null;Y.bindFramebuffer($.FRAMEBUFFER,wt)}}},this.copyFramebufferToTexture=function(q,_e,Ae=0){const Pe=Math.pow(2,-Ae),Ce=Math.floor(_e.image.width*Pe),ot=Math.floor(_e.image.height*Pe);F.setTexture2D(_e,0),$.copyTexSubImage2D($.TEXTURE_2D,Ae,0,0,q.x,q.y,Ce,ot),Y.unbindTexture()},this.copyTextureToTexture=function(q,_e,Ae,Pe=0){const Ce=_e.image.width,ot=_e.image.height,mt=et.convert(Ae.format),yt=et.convert(Ae.type);F.setTexture2D(Ae,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Ae.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Ae.unpackAlignment),_e.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Pe,q.x,q.y,Ce,ot,mt,yt,_e.image.data):_e.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Pe,q.x,q.y,_e.mipmaps[0].width,_e.mipmaps[0].height,mt,_e.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,Pe,q.x,q.y,mt,yt,_e.image),Pe===0&&Ae.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(q,_e,Ae,Pe,Ce=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ot=q.max.x-q.min.x+1,mt=q.max.y-q.min.y+1,yt=q.max.z-q.min.z+1,wt=et.convert(Pe.format),Dt=et.convert(Pe.type);let Et;if(Pe.isData3DTexture)F.setTexture3D(Pe,0),Et=$.TEXTURE_3D;else if(Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)F.setTexture2DArray(Pe,0),Et=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Pe.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Pe.unpackAlignment);const Ct=$.getParameter($.UNPACK_ROW_LENGTH),Kn=$.getParameter($.UNPACK_IMAGE_HEIGHT),ai=$.getParameter($.UNPACK_SKIP_PIXELS),dr=$.getParameter($.UNPACK_SKIP_ROWS),Rs=$.getParameter($.UNPACK_SKIP_IMAGES),Bn=Ae.isCompressedTexture?Ae.mipmaps[Ce]:Ae.image;$.pixelStorei($.UNPACK_ROW_LENGTH,Bn.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Bn.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,q.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,q.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,q.min.z),Ae.isDataTexture||Ae.isData3DTexture?$.texSubImage3D(Et,Ce,_e.x,_e.y,_e.z,ot,mt,yt,wt,Dt,Bn.data):Ae.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(Et,Ce,_e.x,_e.y,_e.z,ot,mt,yt,wt,Bn.data)):$.texSubImage3D(Et,Ce,_e.x,_e.y,_e.z,ot,mt,yt,wt,Dt,Bn),$.pixelStorei($.UNPACK_ROW_LENGTH,Ct),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Kn),$.pixelStorei($.UNPACK_SKIP_PIXELS,ai),$.pixelStorei($.UNPACK_SKIP_ROWS,dr),$.pixelStorei($.UNPACK_SKIP_IMAGES,Rs),Ce===0&&Pe.generateMipmaps&&$.generateMipmap(Et),Y.unbindTexture()},this.initTexture=function(q){q.isCubeTexture?F.setTextureCube(q,0):q.isData3DTexture?F.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?F.setTexture2DArray(q,0):F.setTexture2D(q,0),Y.unbindTexture()},this.resetState=function(){T=0,_=0,w=null,Y.reset(),oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===gv?"display-p3":"srgb",n.unpackColorSpace=ln.workingColorSpace===Uf?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===In?ra:lx}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ra?In:lr}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class gL extends Wc{}gL.prototype.isWebGL1Renderer=!0;class xv{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ke(e),this.density=n}clone(){return new xv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wv{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ke(e),this.near=n,this.far=r}clone(){return new wv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ou extends nn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Pu{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=ff,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=gi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fr=new W;class _s{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Fr.fromBufferAttribute(this,n),Fr.applyMatrix4(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Fr.fromBufferAttribute(this,n),Fr.applyNormalMatrix(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Fr.fromBufferAttribute(this,n),Fr.transformDirection(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ei(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ei(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ei(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ei(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Ut(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _s(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class bx extends ar{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gc;const id=new W,yc=new W,bc=new W,_c=new Ie,sd=new Ie,yL=new pt,Qh=new W,od=new W,ep=new W,eE=new Ie,Sy=new Ie,tE=new Ie;class bL extends nn{constructor(e=new bx){if(super(),this.isSprite=!0,this.type="Sprite",gc===void 0){gc=new Mt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Pu(n,5);gc.setIndex([0,1,2,0,2,3]),gc.setAttribute("position",new _s(r,3,0,!1)),gc.setAttribute("uv",new _s(r,2,3,!1))}this.geometry=gc,this.material=e,this.center=new Ie(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yc.setFromMatrixScale(this.matrixWorld),yL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&yc.multiplyScalar(-bc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;tp(Qh.set(-.5,-.5,0),bc,o,yc,i,s),tp(od.set(.5,-.5,0),bc,o,yc,i,s),tp(ep.set(.5,.5,0),bc,o,yc,i,s),eE.set(0,0),Sy.set(1,0),tE.set(1,1);let a=e.ray.intersectTriangle(Qh,od,ep,!1,id);if(a===null&&(tp(od.set(-.5,.5,0),bc,o,yc,i,s),Sy.set(0,1),a=e.ray.intersectTriangle(Qh,ep,od,!1,id),a===null))return;const l=e.ray.origin.distanceTo(id);l<e.near||l>e.far||n.push({distance:l,point:id.clone(),uv:$r.getInterpolation(id,Qh,od,ep,eE,Sy,tE,new Ie),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function tp(t,e,n,r,i,s){_c.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(sd.x=s*_c.x-i*_c.y,sd.y=i*_c.x+s*_c.y):sd.copy(_c),t.copy(e),t.x+=sd.x,t.y+=sd.y,t.applyMatrix4(yL)}const np=new W,nE=new W;class _L extends nn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){np.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(np);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){np.setFromMatrixPosition(e.matrixWorld),nE.setFromMatrixPosition(this.matrixWorld);const r=np.distanceTo(nE)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const rE=new W,iE=new Wt,sE=new Wt,m4=new W,oE=new pt,rp=new W,Ey=new gr,aE=new pt,My=new Ul;class _x extends En{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=H0,this.bindMatrix=new pt,this.bindMatrixInverse=new pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,rp),this.boundingBox.expandByPoint(rp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new gr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,rp),this.boundingSphere.expandByPoint(rp)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ey.copy(this.boundingSphere),Ey.applyMatrix4(i),e.ray.intersectsSphere(Ey)!==!1&&(aE.copy(i).invert(),My.copy(e.ray).applyMatrix4(aE),!(this.boundingBox!==null&&My.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,My)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===H0?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===OR?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;iE.fromBufferAttribute(i.attributes.skinIndex,e),sE.fromBufferAttribute(i.attributes.skinWeight,e),rE.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=sE.getComponent(s);if(o!==0){const a=iE.getComponent(s);oE.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(m4.copy(rE).applyMatrix4(oE),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class Sv extends nn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class pl extends kn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Vn,u=Vn,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lE=new pt,v4=new pt;class Wf{constructor(e=[],n=[]){this.uuid=gi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new pt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:v4;lE.multiplyMatrices(a,n[s]),lE.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Wf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new pl(n,e,e,Hr,Ki);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Sv),this.bones.push(o),this.boneInverses.push(new pt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Cl extends Ut{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xc=new pt,cE=new pt,ip=[],uE=new vr,g4=new pt,ad=new En,ld=new gr;class xx extends En{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Cl(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,g4)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new vr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,xc),uE.copy(e.boundingBox).applyMatrix4(xc),this.boundingBox.union(uE)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new gr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,xc),ld.copy(e.boundingSphere).applyMatrix4(xc),this.boundingSphere.union(ld)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(ad.geometry=this.geometry,ad.material=this.material,ad.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ld.copy(this.boundingSphere),ld.applyMatrix4(r),e.ray.intersectsSphere(ld)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,xc),cE.multiplyMatrices(r,xc),ad.matrixWorld=cE,ad.raycast(e,ip);for(let o=0,a=ip.length;o<a;o++){const l=ip[o];l.instanceId=s,l.object=this,n.push(l)}ip.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Cl(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function y4(t,e){return t.z-e.z}function b4(t,e){return e.z-t.z}class _4{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const wc="batchId",To=new pt,dE=new pt,x4=new pt,fE=new pt,Cy=new Gf,sp=new vr,Na=new gr,cd=new W,Ay=new _4,Rr=new En,op=[];function w4(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class xL extends En{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Mt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new pl(n,e,e,Hr,Ki);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,f=new c.constructor(r*u),h=new l.constructor(f,u,d);h.setUsage(l.usage),n.setAttribute(a,h)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Ut(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(wc,new Ut(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(wc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${wc}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===wc)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vr);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,To),this.getBoundingBoxAt(i,sp).applyMatrix4(To),n.union(sp))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gr);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,To),this.getBoundingSphereAt(i,Na).applyMatrix4(To),n.union(Na))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,f=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;d.push(!0),f.push(!0);const g=this._geometryCount;this._geometryCount++,x4.toArray(p,g*16),h.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new vr,sphereInitialized:!1,sphere:new gr});const m=this.geometry.getAttribute(wc);for(let v=0;v<i.vertexCount;v++)m.setX(i.vertexStart+v,g);return m.needsUpdate=!0,this.setGeometryAt(g,e),g}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const h in r.attributes){if(h===wc)continue;const p=n.getAttribute(h),g=r.getAttribute(h);w4(p,g,l);const m=p.itemSize;for(let v=p.count,b=c;v<b;v++){const y=l+v;for(let E=0;E<m;E++)g.setComponent(y,E,0)}g.needsUpdate=!0}if(i){const h=a.indexStart;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,g=a.indexCount;p<g;p++)s.setX(h+p,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],f=n.getAttribute("position");return d.count=i?o.count:f.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let f=u;a&&(f=a.getX(f)),s.expandByPoint(cd.fromBufferAttribute(l,f))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,sp),sp.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,f=c.start+c.count;d<f;d++){let h=d;a&&(h=a.getX(h)),cd.fromBufferAttribute(l,h),u=Math.max(u,s.center.distanceToSquared(cd))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Rr.material=this.material,Rr.geometry.index=l.index,Rr.geometry.attributes=l.attributes,Rr.geometry.boundingBox===null&&(Rr.geometry.boundingBox=new vr),Rr.geometry.boundingSphere===null&&(Rr.geometry.boundingSphere=new gr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];Rr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Rr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Rr.geometry.boundingBox),this.getBoundingSphereAt(c,Rr.geometry.boundingSphere),Rr.raycast(e,op);for(let d=0,f=op.length;d<f;d++){const h=op[d];h.object=this,h.batchId=c,n.push(h)}op.length=0}Rr.material=null,Rr.geometry.index=null,Rr.geometry.attributes={},Rr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,f=this.perObjectFrustumCulled;f&&(fE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),Cy.setFromProjectionMatrix(fE,e.isWebGPURenderer?ru:qi));let h=0;if(this.sortObjects){dE.copy(this.matrixWorld).invert(),cd.setFromMatrixPosition(r.matrixWorld).applyMatrix4(dE);for(let m=0,v=l.length;m<v;m++)if(l[m]){this.getMatrixAt(m,To),this.getBoundingSphereAt(m,Na).applyMatrix4(To);let b=!1;if(f&&(b=!Cy.intersectsSphere(Na)),!b){const y=cd.distanceTo(Na.center);Ay.push(d[m],y)}}const p=Ay.list,g=this.customSort;g===null?p.sort(s.transparent?b4:y4):g.call(this,p,r);for(let m=0,v=p.length;m<v;m++){const b=p[m];c[h]=b.start*a,u[h]=b.count,h++}Ay.reset()}else for(let p=0,g=l.length;p<g;p++)if(l[p]){let m=!1;if(f&&(this.getMatrixAt(p,To),this.getBoundingSphereAt(p,Na).applyMatrix4(To),m=!Cy.intersectsSphere(Na)),!m){const v=d[p];c[h]=v.start*a,u[h]=v.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Dr extends ar{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const hE=new W,pE=new W,mE=new pt,Ty=new Ul,ap=new gr;class ro extends nn{constructor(e=new Mt,n=new Dr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)hE.fromBufferAttribute(n,i-1),pE.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=hE.distanceTo(pE);e.setAttribute("lineDistance",new lt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ap.copy(r.boundingSphere),ap.applyMatrix4(i),ap.radius+=s,e.ray.intersectsSphere(ap)===!1)return;mE.copy(i).invert(),Ty.copy(e.ray).applyMatrix4(mE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new W,u=new W,d=new W,f=new W,h=this.isLineSegments?2:1,p=r.index,m=r.attributes.position;if(p!==null){const v=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count);for(let y=v,E=b-1;y<E;y+=h){const T=p.getX(y),_=p.getX(y+1);if(c.fromBufferAttribute(m,T),u.fromBufferAttribute(m,_),Ty.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(f);M<e.near||M>e.far||n.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let y=v,E=b-1;y<E;y+=h){if(c.fromBufferAttribute(m,y),u.fromBufferAttribute(m,y+1),Ty.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(f);_<e.near||_>e.far||n.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const vE=new W,gE=new W;class rs extends ro{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)vE.fromBufferAttribute(n,i),gE.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+vE.distanceTo(gE);e.setAttribute("lineDistance",new lt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wx extends ro{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Ev extends ar{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yE=new pt,_b=new Ul,lp=new gr,cp=new W;class Sx extends nn{constructor(e=new Mt,n=new Ev){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),lp.copy(r.boundingSphere),lp.applyMatrix4(i),lp.radius+=s,e.ray.intersectsSphere(lp)===!1)return;yE.copy(i).invert(),_b.copy(e.ray).applyMatrix4(yE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);for(let p=f,g=h;p<g;p++){const m=c.getX(p);cp.fromBufferAttribute(d,m),bE(cp,m,l,i,e,n,this)}}else{const f=Math.max(0,o.start),h=Math.min(d.count,o.start+o.count);for(let p=f,g=h;p<g;p++)cp.fromBufferAttribute(d,p),bE(cp,p,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function bE(t,e,n,r,i,s,o){const a=_b.distanceSqToPoint(t);if(a<n){const l=new W;_b.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class S4 extends kn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Nn,this.magFilter=s!==void 0?s:Nn,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class xb extends kn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Vn,this.minFilter=Vn,this.generateMipmaps=!1,this.needsUpdate=!0}}class ml extends kn{constructor(e,n,r,i,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class E4 extends ml{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=pr}}class M4 extends ml{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,to),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class C4 extends kn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class is{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,h=(o-u)/f;return(i+h)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Ie:new W);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new W,i=[],s=[],o=[],a=new W,l=new pt;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new W)}s[0]=new W,o[0]=new W;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Xn(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,p))}o[h].crossVectors(i[h],s[h])}if(n===!0){let h=Math.acos(Xn(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Mv extends is{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new Ie,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*u-h*d+this.aX,c=f*d+h*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class wL extends Mv{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Ex(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,h=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,h*=u,i(o,a,f,h)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const up=new W,Py=new Ex,Ry=new Ex,Ly=new Ex;class SL extends is{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new W){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(up.subVectors(i[0],i[1]).add(i[0]),c=up);const d=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(up.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=up),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),h),g=Math.pow(d.distanceToSquared(f),h),m=Math.pow(f.distanceToSquared(u),h);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),Py.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,p,g,m),Ry.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,p,g,m),Ly.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,p,g,m)}else this.curveType==="catmullrom"&&(Py.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),Ry.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),Ly.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(Py.calc(l),Ry.calc(l),Ly.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new W().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _E(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function A4(t,e){const n=1-t;return n*n*e}function T4(t,e){return 2*(1-t)*t*e}function P4(t,e){return t*t*e}function Ud(t,e,n,r){return A4(t,e)+T4(t,n)+P4(t,r)}function R4(t,e){const n=1-t;return n*n*n*e}function L4(t,e){const n=1-t;return 3*n*n*t*e}function I4(t,e){return 3*(1-t)*t*t*e}function O4(t,e){return t*t*t*e}function $d(t,e,n,r,i){return R4(t,e)+L4(t,n)+I4(t,r)+O4(t,i)}class Mx extends is{constructor(e=new Ie,n=new Ie,r=new Ie,i=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ie){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set($d(e,i.x,s.x,o.x,a.x),$d(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EL extends is{constructor(e=new W,n=new W,r=new W,i=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new W){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set($d(e,i.x,s.x,o.x,a.x),$d(e,i.y,s.y,o.y,a.y),$d(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Cx extends is{constructor(e=new Ie,n=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ie){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ie){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ML extends is{constructor(e=new W,n=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new W){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new W){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ax extends is{constructor(e=new Ie,n=new Ie,r=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ie){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Ud(e,i.x,s.x,o.x),Ud(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tx extends is{constructor(e=new W,n=new W,r=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new W){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Ud(e,i.x,s.x,o.x),Ud(e,i.y,s.y,o.y),Ud(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Px extends is{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ie){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(_E(a,l.x,c.x,u.x,d.x),_E(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ie().fromArray(i))}return this}}var Pm=Object.freeze({__proto__:null,ArcCurve:wL,CatmullRomCurve3:SL,CubicBezierCurve:Mx,CubicBezierCurve3:EL,EllipseCurve:Mv,LineCurve:Cx,LineCurve3:ML,QuadraticBezierCurve:Ax,QuadraticBezierCurve3:Tx,SplineCurve:Px});class CL extends is{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Pm[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new Pm[i.type]().fromJSON(i))}return this}}class pf extends CL{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new Cx(this.currentPoint.clone(),new Ie(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new Ax(this.currentPoint.clone(),new Ie(e,n),new Ie(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new Mx(this.currentPoint.clone(),new Ie(e,n),new Ie(r,i),new Ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Px(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new Mv(e,n,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jf extends Mt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Xn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,d=new W,f=new Ie,h=new W,p=new W,g=new W;let m=0,v=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:m=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,h.x=v*1,h.y=-m,h.z=v*0,g.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:m=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,h.x=v*1,h.y=-m,h.z=v*0,p.copy(h),h.x+=g.x,h.y+=g.y,h.z+=g.z,h.normalize(),l.push(h.x,h.y,h.z),g.copy(p)}for(let b=0;b<=n;b++){const y=r+b*u*i,E=Math.sin(y),T=Math.cos(y);for(let _=0;_<=e.length-1;_++){d.x=e[_].x*E,d.y=e[_].y,d.z=e[_].x*T,o.push(d.x,d.y,d.z),f.x=b/n,f.y=_/(e.length-1),a.push(f.x,f.y);const w=l[3*_+0]*E,M=l[3*_+1],x=l[3*_+0]*T;c.push(w,M,x)}}for(let b=0;b<n;b++)for(let y=0;y<e.length-1;y++){const E=y+b*e.length,T=E,_=E+e.length,w=E+e.length+1,M=E+1;s.push(T,_,M),s.push(w,M,_)}this.setIndex(s),this.setAttribute("position",new lt(o,3)),this.setAttribute("uv",new lt(a,2)),this.setAttribute("normal",new lt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jf(e.points,e.segments,e.phiStart,e.phiLength)}}class Cv extends jf{constructor(e=1,n=1,r=4,i=8){const s=new pf;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new Cv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Av extends Mt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new W,u=new Ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const h=r+d/n*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new lt(o,3)),this.setAttribute("normal",new lt(a,3)),this.setAttribute("uv",new lt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Av(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ru extends Mt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const g=[],m=r/2;let v=0;b(),o===!1&&(e>0&&y(!0),n>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new lt(d,3)),this.setAttribute("normal",new lt(f,3)),this.setAttribute("uv",new lt(h,2));function b(){const E=new W,T=new W;let _=0;const w=(n-e)/r;for(let M=0;M<=s;M++){const x=[],S=M/s,R=S*(n-e)+e;for(let I=0;I<=i;I++){const z=I/i,P=z*l+a,B=Math.sin(P),U=Math.cos(P);T.x=R*B,T.y=-S*r+m,T.z=R*U,d.push(T.x,T.y,T.z),E.set(B,w,U).normalize(),f.push(E.x,E.y,E.z),h.push(z,1-S),x.push(p++)}g.push(x)}for(let M=0;M<i;M++)for(let x=0;x<s;x++){const S=g[x][M],R=g[x+1][M],I=g[x+1][M+1],z=g[x][M+1];u.push(S,R,z),u.push(R,I,z),_+=6}c.addGroup(v,_,0),v+=_}function y(E){const T=p,_=new Ie,w=new W;let M=0;const x=E===!0?e:n,S=E===!0?1:-1;for(let I=1;I<=i;I++)d.push(0,m*S,0),f.push(0,S,0),h.push(.5,.5),p++;const R=p;for(let I=0;I<=i;I++){const P=I/i*l+a,B=Math.cos(P),U=Math.sin(P);w.x=x*U,w.y=m*S,w.z=x*B,d.push(w.x,w.y,w.z),f.push(0,S,0),_.x=B*.5+.5,_.y=U*.5*S+.5,h.push(_.x,_.y),p++}for(let I=0;I<i;I++){const z=T+I,P=R+I;E===!0?u.push(P,P+1,z):u.push(P+1,P,z),M+=3}c.addGroup(v,M,E===!0?1:2),v+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tv extends Ru{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Tv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wa extends Mt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new lt(s,3)),this.setAttribute("normal",new lt(s.slice(),3)),this.setAttribute("uv",new lt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const y=new W,E=new W,T=new W;for(let _=0;_<n.length;_+=3)h(n[_+0],y),h(n[_+1],E),h(n[_+2],T),l(y,E,T,b)}function l(b,y,E,T){const _=T+1,w=[];for(let M=0;M<=_;M++){w[M]=[];const x=b.clone().lerp(E,M/_),S=y.clone().lerp(E,M/_),R=_-M;for(let I=0;I<=R;I++)I===0&&M===_?w[M][I]=x:w[M][I]=x.clone().lerp(S,I/R)}for(let M=0;M<_;M++)for(let x=0;x<2*(_-M)-1;x++){const S=Math.floor(x/2);x%2===0?(f(w[M][S+1]),f(w[M+1][S]),f(w[M][S])):(f(w[M][S+1]),f(w[M+1][S+1]),f(w[M+1][S]))}}function c(b){const y=new W;for(let E=0;E<s.length;E+=3)y.x=s[E+0],y.y=s[E+1],y.z=s[E+2],y.normalize().multiplyScalar(b),s[E+0]=y.x,s[E+1]=y.y,s[E+2]=y.z}function u(){const b=new W;for(let y=0;y<s.length;y+=3){b.x=s[y+0],b.y=s[y+1],b.z=s[y+2];const E=m(b)/2/Math.PI+.5,T=v(b)/Math.PI+.5;o.push(E,1-T)}p(),d()}function d(){for(let b=0;b<o.length;b+=6){const y=o[b+0],E=o[b+2],T=o[b+4],_=Math.max(y,E,T),w=Math.min(y,E,T);_>.9&&w<.1&&(y<.2&&(o[b+0]+=1),E<.2&&(o[b+2]+=1),T<.2&&(o[b+4]+=1))}}function f(b){s.push(b.x,b.y,b.z)}function h(b,y){const E=b*3;y.x=e[E+0],y.y=e[E+1],y.z=e[E+2]}function p(){const b=new W,y=new W,E=new W,T=new W,_=new Ie,w=new Ie,M=new Ie;for(let x=0,S=0;x<s.length;x+=9,S+=6){b.set(s[x+0],s[x+1],s[x+2]),y.set(s[x+3],s[x+4],s[x+5]),E.set(s[x+6],s[x+7],s[x+8]),_.set(o[S+0],o[S+1]),w.set(o[S+2],o[S+3]),M.set(o[S+4],o[S+5]),T.copy(b).add(y).add(E).divideScalar(3);const R=m(T);g(_,S+0,b,R),g(w,S+2,y,R),g(M,S+4,E,R)}}function g(b,y,E,T){T<0&&b.x===1&&(o[y]=b.x-1),E.x===0&&E.z===0&&(o[y]=T/2/Math.PI+.5)}function m(b){return Math.atan2(b.z,-b.x)}function v(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wa(e.vertices,e.indices,e.radius,e.details)}}class Pv extends wa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Pv(e.radius,e.detail)}}const dp=new W,fp=new W,Iy=new W,hp=new $r;class AL extends Mt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(hl*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:g,b:m,c:v}=hp;if(g.fromBufferAttribute(a,c[0]),m.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),hp.getNormal(Iy),d[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,d[1]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,d[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let b=0;b<3;b++){const y=(b+1)%3,E=d[b],T=d[y],_=hp[u[b]],w=hp[u[y]],M=`${E}_${T}`,x=`${T}_${E}`;x in f&&f[x]?(Iy.dot(f[x].normal)<=s&&(h.push(_.x,_.y,_.z),h.push(w.x,w.y,w.z)),f[x]=null):M in f||(f[M]={index0:c[b],index1:c[y],normal:Iy.clone()})}}for(const p in f)if(f[p]){const{index0:g,index1:m}=f[p];dp.fromBufferAttribute(a,g),fp.fromBufferAttribute(a,m),h.push(dp.x,dp.y,dp.z),h.push(fp.x,fp.y,fp.z)}this.setAttribute("position",new lt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class vl extends pf{constructor(e){super(e),this.uuid=gi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new pf().fromJSON(i))}return this}}const k4={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=TL(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,f,h;if(r&&(s=V4(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<i;p+=n)d=t[p],f=t[p+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return mf(s,o,n,a,l,h,0),o}};function TL(t,e,n,r,i){let s,o;if(i===Y4(t,e,n,r)>0)for(s=e;s<n;s+=r)o=xE(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=xE(s,t[s],t[s+1],o);return o&&Rv(o,o.next)&&(gf(o),o=o.next),o}function Al(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Rv(n,n.next)||Un(n.prev,n,n.next)===0)){if(gf(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function mf(t,e,n,r,i,s,o){if(!t)return;!o&&s&&G4(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?N4(t,r,i,s):D4(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),gf(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=F4(Al(t),e,n),mf(t,e,n,r,i,s,2)):o===2&&B4(t,e,n,r,i,s):mf(Al(t),e,n,r,i,s,1);break}}}function D4(t){const e=t.prev,n=t,r=t.next;if(Un(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=d&&p.y<=h&&Bc(i,a,s,l,o,c,p.x,p.y)&&Un(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function N4(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Un(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,f=o.y,h=a<l?a<c?a:c:l<c?l:c,p=u<d?u<f?u:f:d<f?d:f,g=a>l?a>c?a:c:l>c?l:c,m=u>d?u>f?u:f:d>f?d:f,v=wb(h,p,e,n,r),b=wb(g,m,e,n,r);let y=t.prevZ,E=t.nextZ;for(;y&&y.z>=v&&E&&E.z<=b;){if(y.x>=h&&y.x<=g&&y.y>=p&&y.y<=m&&y!==i&&y!==o&&Bc(a,u,l,d,c,f,y.x,y.y)&&Un(y.prev,y,y.next)>=0||(y=y.prevZ,E.x>=h&&E.x<=g&&E.y>=p&&E.y<=m&&E!==i&&E!==o&&Bc(a,u,l,d,c,f,E.x,E.y)&&Un(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;y&&y.z>=v;){if(y.x>=h&&y.x<=g&&y.y>=p&&y.y<=m&&y!==i&&y!==o&&Bc(a,u,l,d,c,f,y.x,y.y)&&Un(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;E&&E.z<=b;){if(E.x>=h&&E.x<=g&&E.y>=p&&E.y<=m&&E!==i&&E!==o&&Bc(a,u,l,d,c,f,E.x,E.y)&&Un(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function F4(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!Rv(i,s)&&PL(i,r,r.next,s)&&vf(i,s)&&vf(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),gf(r),gf(r.next),r=t=s),r=r.next}while(r!==t);return Al(r)}function B4(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&X4(o,a)){let l=RL(o,a);o=Al(o,o.next),l=Al(l,l.next),mf(o,e,n,r,i,s,0),mf(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function V4(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=TL(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(j4(c));for(i.sort(U4),s=0;s<i.length;s++)n=$4(i[s],n);return n}function U4(t,e){return t.x-e.x}function $4(t,e){const n=z4(t,e);if(!n)return e;const r=RL(n,t);return Al(r,r.next),Al(n,n.next)}function z4(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>r&&(r=f,i=n.x<n.next.x?n:n.next,f===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&Bc(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),vf(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&H4(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function H4(t,e){return Un(t.prev,t,e.prev)<0&&Un(e.next,t,t.next)<0}function G4(t,e,n,r){let i=t;do i.z===0&&(i.z=wb(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,W4(i)}function W4(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function wb(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function j4(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Bc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function X4(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!K4(t,e)&&(vf(t,e)&&vf(e,t)&&q4(t,e)&&(Un(t.prev,t,e.prev)||Un(t,e.prev,e))||Rv(t,e)&&Un(t.prev,t,t.next)>0&&Un(e.prev,e,e.next)>0)}function Un(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Rv(t,e){return t.x===e.x&&t.y===e.y}function PL(t,e,n,r){const i=mp(Un(t,e,n)),s=mp(Un(t,e,r)),o=mp(Un(n,r,t)),a=mp(Un(n,r,e));return!!(i!==s&&o!==a||i===0&&pp(t,n,e)||s===0&&pp(t,r,e)||o===0&&pp(n,t,r)||a===0&&pp(n,e,r))}function pp(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mp(t){return t>0?1:t<0?-1:0}function K4(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&PL(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function vf(t,e){return Un(t.prev,t,t.next)<0?Un(t,e,t.next)>=0&&Un(t,t.prev,e)>=0:Un(t,e,t.prev)<0||Un(t,t.next,e)<0}function q4(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function RL(t,e){const n=new Sb(t.i,t.x,t.y),r=new Sb(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function xE(t,e,n,r){const i=new Sb(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gf(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Sb(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y4(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class vs{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return vs.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];wE(e),SE(r,e);let o=e.length;n.forEach(wE);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,SE(r,n[l]);const a=k4.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function wE(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function SE(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Lv extends Mt{constructor(e=new vl([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new lt(i,3)),this.setAttribute("uv",new lt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:h-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,b=n.UVGenerator!==void 0?n.UVGenerator:Z4;let y,E=!1,T,_,w,M;v&&(y=v.getSpacedPoints(u),E=!0,f=!1,T=v.computeFrenetFrames(u,!1),_=new W,w=new W,M=new W),f||(m=0,h=0,p=0,g=0);const x=a.extractPoints(c);let S=x.shape;const R=x.holes;if(!vs.isClockWise(S)){S=S.reverse();for(let $=0,O=R.length;$<O;$++){const k=R[$];vs.isClockWise(k)&&(R[$]=k.reverse())}}const z=vs.triangulateShape(S,R),P=S;for(let $=0,O=R.length;$<O;$++){const k=R[$];S=S.concat(k)}function B($,O,k){return O||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector(O,k)}const U=S.length,j=z.length;function Z($,O,k){let H,Y,te;const he=$.x-O.x,F=$.y-O.y,D=k.x-$.x,Q=k.y-$.y,ie=he*he+F*F,pe=he*Q-F*D;if(Math.abs(pe)>Number.EPSILON){const ye=Math.sqrt(ie),Oe=Math.sqrt(D*D+Q*Q),re=O.x-F/ye,xe=O.y+he/ye,Ne=k.x-Q/Oe,Ee=k.y+D/Oe,be=((Ne-re)*Q-(Ee-xe)*D)/(he*Q-F*D);H=re+he*be-$.x,Y=xe+F*be-$.y;const Ye=H*H+Y*Y;if(Ye<=2)return new Ie(H,Y);te=Math.sqrt(Ye/2)}else{let ye=!1;he>Number.EPSILON?D>Number.EPSILON&&(ye=!0):he<-Number.EPSILON?D<-Number.EPSILON&&(ye=!0):Math.sign(F)===Math.sign(Q)&&(ye=!0),ye?(H=-F,Y=he,te=Math.sqrt(ie)):(H=he,Y=F,te=Math.sqrt(ie/2))}return new Ie(H/te,Y/te)}const ne=[];for(let $=0,O=P.length,k=O-1,H=$+1;$<O;$++,k++,H++)k===O&&(k=0),H===O&&(H=0),ne[$]=Z(P[$],P[k],P[H]);const K=[];let fe,Se=ne.concat();for(let $=0,O=R.length;$<O;$++){const k=R[$];fe=[];for(let H=0,Y=k.length,te=Y-1,he=H+1;H<Y;H++,te++,he++)te===Y&&(te=0),he===Y&&(he=0),fe[H]=Z(k[H],k[te],k[he]);K.push(fe),Se=Se.concat(fe)}for(let $=0;$<m;$++){const O=$/m,k=h*Math.cos(O*Math.PI/2),H=p*Math.sin(O*Math.PI/2)+g;for(let Y=0,te=P.length;Y<te;Y++){const he=B(P[Y],ne[Y],H);J(he.x,he.y,-k)}for(let Y=0,te=R.length;Y<te;Y++){const he=R[Y];fe=K[Y];for(let F=0,D=he.length;F<D;F++){const Q=B(he[F],fe[F],H);J(Q.x,Q.y,-k)}}}const de=p+g;for(let $=0;$<U;$++){const O=f?B(S[$],Se[$],de):S[$];E?(w.copy(T.normals[0]).multiplyScalar(O.x),_.copy(T.binormals[0]).multiplyScalar(O.y),M.copy(y[0]).add(w).add(_),J(M.x,M.y,M.z)):J(O.x,O.y,0)}for(let $=1;$<=u;$++)for(let O=0;O<U;O++){const k=f?B(S[O],Se[O],de):S[O];E?(w.copy(T.normals[$]).multiplyScalar(k.x),_.copy(T.binormals[$]).multiplyScalar(k.y),M.copy(y[$]).add(w).add(_),J(M.x,M.y,M.z)):J(k.x,k.y,d/u*$)}for(let $=m-1;$>=0;$--){const O=$/m,k=h*Math.cos(O*Math.PI/2),H=p*Math.sin(O*Math.PI/2)+g;for(let Y=0,te=P.length;Y<te;Y++){const he=B(P[Y],ne[Y],H);J(he.x,he.y,d+k)}for(let Y=0,te=R.length;Y<te;Y++){const he=R[Y];fe=K[Y];for(let F=0,D=he.length;F<D;F++){const Q=B(he[F],fe[F],H);E?J(Q.x,Q.y+y[u-1].y,y[u-1].x+k):J(Q.x,Q.y,d+k)}}}ae(),ge();function ae(){const $=i.length/3;if(f){let O=0,k=U*O;for(let H=0;H<j;H++){const Y=z[H];X(Y[2]+k,Y[1]+k,Y[0]+k)}O=u+m*2,k=U*O;for(let H=0;H<j;H++){const Y=z[H];X(Y[0]+k,Y[1]+k,Y[2]+k)}}else{for(let O=0;O<j;O++){const k=z[O];X(k[2],k[1],k[0])}for(let O=0;O<j;O++){const k=z[O];X(k[0]+U*u,k[1]+U*u,k[2]+U*u)}}r.addGroup($,i.length/3-$,0)}function ge(){const $=i.length/3;let O=0;ue(P,O),O+=P.length;for(let k=0,H=R.length;k<H;k++){const Y=R[k];ue(Y,O),O+=Y.length}r.addGroup($,i.length/3-$,1)}function ue($,O){let k=$.length;for(;--k>=0;){const H=k;let Y=k-1;Y<0&&(Y=$.length-1);for(let te=0,he=u+m*2;te<he;te++){const F=U*te,D=U*(te+1),Q=O+H+F,ie=O+Y+F,pe=O+Y+D,ye=O+H+D;L(Q,ie,pe,ye)}}}function J($,O,k){l.push($),l.push(O),l.push(k)}function X($,O,k){N($),N(O),N(k);const H=i.length/3,Y=b.generateTopUV(r,i,H-3,H-2,H-1);G(Y[0]),G(Y[1]),G(Y[2])}function L($,O,k,H){N($),N(O),N(H),N(O),N(k),N(H);const Y=i.length/3,te=b.generateSideWallUV(r,i,Y-6,Y-3,Y-2,Y-1);G(te[0]),G(te[1]),G(te[3]),G(te[1]),G(te[2]),G(te[3])}function N($){i.push(l[$*3+0]),i.push(l[$*3+1]),i.push(l[$*3+2])}function G($){s.push($.x),s.push($.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return J4(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Pm[i.type]().fromJSON(i)),new Lv(r,e.options)}}const Z4={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],h=e[i*3+1],p=e[i*3+2],g=e[s*3],m=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ie(o,1-l),new Ie(c,1-d),new Ie(f,1-p),new Ie(g,1-v)]:[new Ie(a,1-l),new Ie(u,1-d),new Ie(h,1-p),new Ie(m,1-v)]}};function J4(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Iv extends wa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Iv(e.radius,e.detail)}}class Xf extends wa{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Xf(e.radius,e.detail)}}class Ov extends Mt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const f=(n-e)/i,h=new W,p=new Ie;for(let g=0;g<=i;g++){for(let m=0;m<=r;m++){const v=s+m/r*o;h.x=d*Math.cos(v),h.y=d*Math.sin(v),l.push(h.x,h.y,h.z),c.push(0,0,1),p.x=(h.x/n+1)/2,p.y=(h.y/n+1)/2,u.push(p.x,p.y)}d+=f}for(let g=0;g<i;g++){const m=g*(r+1);for(let v=0;v<r;v++){const b=v+m,y=b,E=b+r+1,T=b+r+2,_=b+1;a.push(y,E,_),a.push(E,T,_)}}this.setIndex(a),this.setAttribute("position",new lt(l,3)),this.setAttribute("normal",new lt(c,3)),this.setAttribute("uv",new lt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ov(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class kv extends Mt{constructor(e=new vl([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new lt(i,3)),this.setAttribute("normal",new lt(s,3)),this.setAttribute("uv",new lt(o,2));function c(u){const d=i.length/3,f=u.extractPoints(n);let h=f.shape;const p=f.holes;vs.isClockWise(h)===!1&&(h=h.reverse());for(let m=0,v=p.length;m<v;m++){const b=p[m];vs.isClockWise(b)===!0&&(p[m]=b.reverse())}const g=vs.triangulateShape(h,p);for(let m=0,v=p.length;m<v;m++){const b=p[m];h=h.concat(b)}for(let m=0,v=h.length;m<v;m++){const b=h[m];i.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let m=0,v=g.length;m<v;m++){const b=g[m],y=b[0]+d,E=b[1]+d,T=b[2]+d;r.push(y,E,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Q4(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new kv(r,e.curveSegments)}}function Q4(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Kf extends Mt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new W,f=new W,h=[],p=[],g=[],m=[];for(let v=0;v<=r;v++){const b=[],y=v/r;let E=0;v===0&&o===0?E=.5/n:v===r&&l===Math.PI&&(E=-.5/n);for(let T=0;T<=n;T++){const _=T/n;d.x=-e*Math.cos(i+_*s)*Math.sin(o+y*a),d.y=e*Math.cos(o+y*a),d.z=e*Math.sin(i+_*s)*Math.sin(o+y*a),p.push(d.x,d.y,d.z),f.copy(d).normalize(),g.push(f.x,f.y,f.z),m.push(_+E,1-y),b.push(c++)}u.push(b)}for(let v=0;v<r;v++)for(let b=0;b<n;b++){const y=u[v][b+1],E=u[v][b],T=u[v+1][b],_=u[v+1][b+1];(v!==0||o>0)&&h.push(y,E,_),(v!==r-1||l<Math.PI)&&h.push(E,T,_)}this.setIndex(h),this.setAttribute("position",new lt(p,3)),this.setAttribute("normal",new lt(g,3)),this.setAttribute("uv",new lt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Dv extends wa{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Dv(e.radius,e.detail)}}class Nv extends Mt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new W,d=new W,f=new W;for(let h=0;h<=r;h++)for(let p=0;p<=i;p++){const g=p/i*s,m=h/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(g),d.y=(e+n*Math.cos(m))*Math.sin(g),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/i),c.push(h/r)}for(let h=1;h<=r;h++)for(let p=1;p<=i;p++){const g=(i+1)*h+p-1,m=(i+1)*(h-1)+p-1,v=(i+1)*(h-1)+p,b=(i+1)*h+p;o.push(g,m,b),o.push(m,v,b)}this.setIndex(o),this.setAttribute("position",new lt(a,3)),this.setAttribute("normal",new lt(l,3)),this.setAttribute("uv",new lt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Fv extends Mt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new W,f=new W,h=new W,p=new W,g=new W,m=new W,v=new W;for(let y=0;y<=r;++y){const E=y/r*s*Math.PI*2;b(E,s,o,e,h),b(E+.01,s,o,e,p),m.subVectors(p,h),v.addVectors(p,h),g.crossVectors(m,v),v.crossVectors(g,m),g.normalize(),v.normalize();for(let T=0;T<=i;++T){const _=T/i*Math.PI*2,w=-n*Math.cos(_),M=n*Math.sin(_);d.x=h.x+(w*v.x+M*g.x),d.y=h.y+(w*v.y+M*g.y),d.z=h.z+(w*v.z+M*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(y/r),u.push(T/i)}}for(let y=1;y<=r;y++)for(let E=1;E<=i;E++){const T=(i+1)*(y-1)+(E-1),_=(i+1)*y+(E-1),w=(i+1)*y+E,M=(i+1)*(y-1)+E;a.push(T,_,M),a.push(_,w,M)}this.setIndex(a),this.setAttribute("position",new lt(l,3)),this.setAttribute("normal",new lt(c,3)),this.setAttribute("uv",new lt(u,2));function b(y,E,T,_,w){const M=Math.cos(y),x=Math.sin(y),S=T/E*y,R=Math.cos(S);w.x=_*(2+R)*.5*M,w.y=_*(2+R)*x*.5,w.z=_*Math.sin(S)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Bv extends Mt{constructor(e=new Tx(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new W,l=new W,c=new Ie;let u=new W;const d=[],f=[],h=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new lt(d,3)),this.setAttribute("normal",new lt(f,3)),this.setAttribute("uv",new lt(h,2));function g(){for(let y=0;y<n;y++)m(y);m(s===!1?n:0),b(),v()}function m(y){u=e.getPointAt(y/n,u);const E=o.normals[y],T=o.binormals[y];for(let _=0;_<=i;_++){const w=_/i*Math.PI*2,M=Math.sin(w),x=-Math.cos(w);l.x=x*E.x+M*T.x,l.y=x*E.y+M*T.y,l.z=x*E.z+M*T.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let y=1;y<=n;y++)for(let E=1;E<=i;E++){const T=(i+1)*(y-1)+(E-1),_=(i+1)*y+(E-1),w=(i+1)*y+E,M=(i+1)*(y-1)+E;p.push(T,_,M),p.push(_,w,M)}}function b(){for(let y=0;y<=n;y++)for(let E=0;E<=i;E++)c.x=y/n,c.y=E/i,h.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Bv(new Pm[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class LL extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new W,s=new W;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,g=f+h;p<g;p+=3)for(let m=0;m<3;m++){const v=a.getX(p+m),b=a.getX(p+(m+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,b),EE(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),EE(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new lt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function EE(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var ME=Object.freeze({__proto__:null,BoxGeometry:xa,CapsuleGeometry:Cv,CircleGeometry:Av,ConeGeometry:Tv,CylinderGeometry:Ru,DodecahedronGeometry:Pv,EdgesGeometry:AL,ExtrudeGeometry:Lv,IcosahedronGeometry:Iv,LatheGeometry:jf,OctahedronGeometry:Xf,PlaneGeometry:zl,PolyhedronGeometry:wa,RingGeometry:Ov,ShapeGeometry:kv,SphereGeometry:Kf,TetrahedronGeometry:Dv,TorusGeometry:Nv,TorusKnotGeometry:Fv,TubeGeometry:Bv,WireframeGeometry:LL});class IL extends ar{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zd extends ii{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qf extends ar{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ss extends qf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class OL extends ar{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kL extends ar{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class DL extends ar{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class NL extends ar{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FL extends ar{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BL extends Dr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function sl(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function VL(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UL(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Eb(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function Rx(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function e5(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let h=0;h<c.times.length;++h){const p=c.times[h]*i;if(!(p<n||p>=r)){d.push(c.times[h]);for(let g=0;g<u;++g)f.push(c.values[h*u+g])}}d.length!==0&&(c.times=sl(d,c.times.constructor),c.values=sl(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function t5(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const h=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);const p=a.times.length-1;let g;if(s<=a.times[0]){const v=u,b=d-u;g=a.values.slice(v,b)}else if(s>=a.times[p]){const v=p*d+u,b=v+d-u;g=a.values.slice(v,b)}else{const v=a.createInterpolant(),b=u,y=d-u;v.evaluate(s),g=v.resultBuffer.slice(b,y)}l==="quaternion"&&new tr().fromArray(g).normalize().conjugate().toArray(g);const m=c.times.length;for(let v=0;v<m;++v){const b=v*h+f;if(l==="quaternion")tr.multiplyQuaternionsFlat(c.values,b,g,0,c.values,b);else{const y=h-f*2;for(let E=0;E<y;++E)c.values[b+E]-=g[E]}}}return t.blendMode=ox,t}const n5={convertArray:sl,isTypedArray:VL,getKeyframeOrder:UL,sortedArray:Eb,flattenJSON:Rx,subclip:e5,makeClipAdditive:t5};class Lu{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $L extends Lu{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nl,endingEnd:nl}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case rl:s=e,a=2*n-r;break;case lf:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case rl:o=e,l=2*r-n;break;case lf:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-n)/(i-n),g=p*p,m=g*p,v=-f*m+2*f*g-f*p,b=(1+f)*m+(-1.5-2*f)*g+(-.5+f)*p+1,y=(-1-h)*m+(1.5+h)*g+.5*p,E=h*m-h*g;for(let T=0;T!==a;++T)s[T]=v*o[u+T]+b*o[c+T]+y*o[l+T]+E*o[d+T];return s}}class Lx extends Lu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class zL extends Lu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class os{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sl(n,this.TimeBufferType),this.values=sl(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:sl(e.times,Array),values:sl(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new zL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Lx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $L(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case El:n=this.InterpolantFactoryMethodDiscrete;break;case da:n=this.InterpolantFactoryMethodLinear;break;case Qp:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return El;case this.InterpolantFactoryMethodLinear:return da;case this.InterpolantFactoryMethodSmooth:return Qp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&VL(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Qp,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,f=d-r,h=d+r;for(let p=0;p!==r;++p){const g=n[d+p];if(g!==n[f+p]||g!==n[h+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,f=o*r;for(let h=0;h!==r;++h)n[f+h]=n[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}os.prototype.TimeBufferType=Float32Array;os.prototype.ValueBufferType=Float32Array;os.prototype.DefaultInterpolation=da;class Hl extends os{}Hl.prototype.ValueTypeName="bool";Hl.prototype.ValueBufferType=Array;Hl.prototype.DefaultInterpolation=El;Hl.prototype.InterpolantFactoryMethodLinear=void 0;Hl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ix extends os{}Ix.prototype.ValueTypeName="color";class Tl extends os{}Tl.prototype.ValueTypeName="number";class HL extends Lu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)tr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class fa extends os{InterpolantFactoryMethodLinear(e){return new HL(this.times,this.values,this.getValueSize(),e)}}fa.prototype.ValueTypeName="quaternion";fa.prototype.DefaultInterpolation=da;fa.prototype.InterpolantFactoryMethodSmooth=void 0;class Gl extends os{}Gl.prototype.ValueTypeName="string";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=El;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class Pl extends os{}Pl.prototype.ValueTypeName="vector";class au{constructor(e,n=-1,r,i=vv){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=gi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(i5(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(os.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=UL(l);l=Eb(l,1,u),c=Eb(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Tl(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=i[d];f||(i[d]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,h,p,g){if(h.length!==0){const m=[],v=[];Rx(h,m,v,p),m.length!==0&&g.push(new d(f,m,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let g=0;g<f[p].morphTargets.length;g++)h[f[p].morphTargets[g]]=-1;for(const g in h){const m=[],v=[];for(let b=0;b!==f[p].morphTargets.length;++b){const y=f[p];m.push(y.time),v.push(y.morphTarget===g?1:0)}i.push(new Tl(".morphTargetInfluence["+g+"]",m,v))}l=h.length*o}else{const h=".bones["+n[d].name+"]";r(Pl,h+".position",f,"pos",i),r(fa,h+".quaternion",f,"rot",i),r(Pl,h+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function r5(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tl;case"vector":case"vector2":case"vector3":case"vector4":return Pl;case"color":return Ix;case"quaternion":return fa;case"bool":case"boolean":return Hl;case"string":return Gl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function i5(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=r5(t.type);if(t.times===void 0){const n=[],r=[];Rx(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ks={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Vv{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const GL=new Vv;class jr{constructor(e){this.manager=e!==void 0?e:GL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}jr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ns={};class s5 extends Error{constructor(e,n){super(e),this.response=n}}class es extends jr{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ks.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ns[e]!==void 0){Ns[e].push({onLoad:n,onProgress:r,onError:i});return}Ns[e]=[],Ns[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ns[e],d=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),h=f?parseInt(f):0,p=h!==0;let g=0;const m=new ReadableStream({start(v){b();function b(){d.read().then(({done:y,value:E})=>{if(y)v.close();else{g+=E.byteLength;const T=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:h});for(let _=0,w=u.length;_<w;_++){const M=u[_];M.onProgress&&M.onProgress(T)}v.enqueue(E),b()}})}}});return new Response(m)}else throw new s5(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Ks.add(e,c);const u=Ns[e];delete Ns[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=Ns[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ns[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class o5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new es(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=au.parse(e[r]);n.push(i)}return n}}class a5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new ml,l=new es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const h=s.parse(f,!0);o[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(a.minFilter=Nn),a.image=o,a.format=h.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){o[p]={mipmaps:[]};for(let g=0;g<f.mipmapCount;g++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+g]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Nn),a.format=f.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class yf extends jr{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ks.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=hf("img");function l(){u(),Ks.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class l5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=new Hf;s.colorSpace=In;const o=new yf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class c5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new pl,a=new es(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:pr,o.wrapT=c.wrapT!==void 0?c.wrapT:pr,o.magFilter=c.magFilter!==void 0?c.magFilter:Nn,o.minFilter=c.minFilter!==void 0?c.minFilter:Nn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Qi),c.mipmapCount===1&&(o.minFilter=Nn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class Ox extends jr{constructor(e){super(e)}load(e,n,r,i){const s=new kn,o=new yf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Sa extends nn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ke(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class WL extends Sa{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ke(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Oy=new pt,CE=new W,AE=new W;class kx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gf,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;CE.setFromMatrixPosition(e.matrixWorld),n.position.copy(CE),AE.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(AE),n.updateMatrixWorld(),Oy.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Oy),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Oy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class u5 extends kx{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=iu*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Dx extends Sa{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new u5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const TE=new pt,ud=new W,ky=new W;class d5 extends kx{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),ud.setFromMatrixPosition(e.matrixWorld),r.position.copy(ud),ky.copy(r.position),ky.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(ky),r.updateMatrixWorld(),i.makeTranslation(-ud.x,-ud.y,-ud.z),TE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TE)}}class Nx extends Sa{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new d5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class f5 extends kx{constructor(){super(new Li(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fx extends Sa{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.shadow=new f5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class jL extends Sa{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class XL extends Sa{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class KL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class qL extends Sa{constructor(e=new KL,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Uv extends jr{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new es(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=Uv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ke().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ie().fromArray(o.value);break;case"v3":i.uniforms[s].value=new W().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Wt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new pt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:IL,SpriteMaterial:bx,RawShaderMaterial:zd,ShaderMaterial:ii,PointsMaterial:Ev,MeshPhysicalMaterial:ss,MeshStandardMaterial:qf,MeshPhongMaterial:OL,MeshToonMaterial:kL,MeshNormalMaterial:DL,MeshLambertMaterial:NL,MeshDepthMaterial:gx,MeshDistanceMaterial:yx,MeshBasicMaterial:Gr,MeshMatcapMaterial:FL,LineDashedMaterial:BL,LineBasicMaterial:Dr,Material:ar};return new n[e]}}class ia{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class YL extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ZL extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new es(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(h,p){if(n[p]!==void 0)return n[p];const m=h.interleavedBuffers[p],v=s(h,m.buffer),b=Dc(m.type,v),y=new Pu(b,m.stride);return y.uuid=m.uuid,n[p]=y,y}function s(h,p){if(r[p]!==void 0)return r[p];const m=h.arrayBuffers[p],v=new Uint32Array(m).buffer;return r[p]=v,v}const o=e.isInstancedBufferGeometry?new YL:new Mt,a=e.data.index;if(a!==void 0){const h=Dc(a.type,a.array);o.setIndex(new Ut(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let g;if(p.isInterleavedBufferAttribute){const m=i(e.data,p.data);g=new _s(m,p.itemSize,p.offset,p.normalized)}else{const m=Dc(p.type,p.array),v=p.isInstancedBufferAttribute?Cl:Ut;g=new v(m,p.itemSize,p.normalized)}p.name!==void 0&&(g.name=p.name),p.usage!==void 0&&g.setUsage(p.usage),o.setAttribute(h,g)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],g=[];for(let m=0,v=p.length;m<v;m++){const b=p[m];let y;if(b.isInterleavedBufferAttribute){const E=i(e.data,b.data);y=new _s(E,b.itemSize,b.offset,b.normalized)}else{const E=Dc(b.type,b.array);y=new Ut(E,b.itemSize,b.normalized)}b.name!==void 0&&(y.name=b.name),g.push(y)}o.morphAttributes[h]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const g=d[h];o.addGroup(g.start,g.count,g.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new W;f.center!==void 0&&h.fromArray(f.center),o.boundingSphere=new gr(h,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class h5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?ia.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new es(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?ia.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new es(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new vl().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Wf().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new ZL;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in ME?a=ME[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new Uv;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=au.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Dc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Vv(n);s=new yf(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,g=f.length;p<g;p++){const m=f[p],v=a(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new pl(v.data,v.width,v.height)))}i[d.uuid]=new il(h)}else{const h=a(d.url);i[d.uuid]=new il(h)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Dc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new yf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new pl(p.data,p.width,p.height)))}r[l.uuid]=new il(u)}else{const u=await s(l.url);r[l.uuid]=new il(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Hf,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new pl:u=new kn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,p5)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],PE),u.wrapT=r(a.wrap[1],PE)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,RE)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,RE)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,g=f.length;p<g;p++){const m=f[p];r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),h.push(r[m])}return h}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,d;switch(e.type){case"Scene":o=new ou,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ke(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new wv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new xv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Li(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new jL(e.color,e.intensity);break;case"DirectionalLight":o=new Fx(e.color,e.intensity);break;case"PointLight":o=new Nx(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new XL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Dx(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new WL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new qL().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new _x(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new En(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;o=new xx(u,d,f),o.instanceMatrix=new Cl(new Float32Array(h.array),16),p!==void 0&&(o.instanceColor=new Cl(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new xL(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(g=>{const m=new vr;m.min.fromArray(g.boxMin),m.max.fromArray(g.boxMax);const v=new gr;return v.radius=g.sphereRadius,v.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:m,sphereInitialized:g.sphereInitialized,sphere:v}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new _L;break;case"Line":o=new ro(a(e.geometry),l(e.material));break;case"LineLoop":o=new wx(a(e.geometry),l(e.material));break;case"LineSegments":o=new rs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Sx(a(e.geometry),l(e.material));break;case"Sprite":o=new bL(l(e.material));break;case"Group":o=new Xs;break;case"Bone":o=new Sv;break;default:o=new nn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)o.add(this.parseObject(f[h],n,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],g=o.getObjectByProperty("uuid",p.object);g!==void 0&&o.addLevel(g,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const p5={UVMapping:pv,CubeReflectionMapping:to,CubeRefractionMapping:ua,EquirectangularReflectionMapping:of,EquirectangularRefractionMapping:af,CubeUVReflectionMapping:Au},PE={RepeatWrapping:no,ClampToEdgeWrapping:pr,MirroredRepeatWrapping:xl},RE={NearestFilter:Vn,NearestMipmapNearestFilter:nu,NearestMipmapLinearFilter:fl,LinearFilter:Nn,LinearMipmapNearestFilter:Vf,LinearMipmapLinearFilter:Qi};class JL extends jr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ks.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ks.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Ks.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ks.add(e,l),s.manager.itemStart(e)}}let vp;class Bx{static getContext(){return vp===void 0&&(vp=new(window.AudioContext||window.webkitAudioContext)),vp}static setContext(e){vp=e}}class m5 extends jr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new es(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);Bx.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const LE=new pt,IE=new pt,Fa=new pt;class v5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Fa.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(hl*n.fov*.5)/n.zoom;let a,l;IE.elements[12]=-i,LE.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Fa.elements[0]=2*n.near/(l-a),Fa.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Fa),a=-o*n.aspect-s,l=o*n.aspect-s,Fa.elements[0]=2*n.near/(l-a),Fa.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Fa)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(IE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(LE)}}class Vx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=OE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=OE();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function OE(){return(typeof performance>"u"?Date:performance).now()}const Ba=new W,kE=new tr,g5=new W,Va=new W;class y5 extends nn{constructor(){super(),this.type="AudioListener",this.context=Bx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ba,kE,g5),Va.set(0,0,-1).applyQuaternion(kE),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ba.x,i),n.positionY.linearRampToValueAtTime(Ba.y,i),n.positionZ.linearRampToValueAtTime(Ba.z,i),n.forwardX.linearRampToValueAtTime(Va.x,i),n.forwardY.linearRampToValueAtTime(Va.y,i),n.forwardZ.linearRampToValueAtTime(Va.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Ba.x,Ba.y,Ba.z),n.setOrientation(Va.x,Va.y,Va.z,r.x,r.y,r.z)}}class QL extends nn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ua=new W,DE=new tr,b5=new W,$a=new W;class _5 extends QL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ua,DE,b5),$a.set(0,0,1).applyQuaternion(DE);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ua.x,r),n.positionY.linearRampToValueAtTime(Ua.y,r),n.positionZ.linearRampToValueAtTime(Ua.z,r),n.orientationX.linearRampToValueAtTime($a.x,r),n.orientationY.linearRampToValueAtTime($a.y,r),n.orientationZ.linearRampToValueAtTime($a.z,r)}else n.setPosition(Ua.x,Ua.y,Ua.z),n.setOrientation($a.x,$a.y,$a.z)}}class x5{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class eI{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){tr.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;tr.multiplyQuaternionsFlat(e,o,e,n,e,r),tr.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const Ux="\\[\\]\\.:\\/",w5=new RegExp("["+Ux+"]","g"),$x="[^"+Ux+"]",S5="[^"+Ux.replace("\\.","")+"]",E5=/((?:WC+[\/:])*)/.source.replace("WC",$x),M5=/(WCOD+)?/.source.replace("WCOD",S5),C5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$x),A5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$x),T5=new RegExp("^"+E5+M5+C5+A5+"$"),P5=["material","materials","bones","map"];class R5{constructor(e,n,r){const i=r||Vt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Vt{constructor(e,n,r){this.path=n,this.parsedPath=r||Vt.parseTrackName(n),this.node=Vt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Vt.Composite(e,n,r):new Vt(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(w5,"")}static parseTrackName(e){const n=T5.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);P5.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Vt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vt.Composite=R5;Vt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vt.prototype.GetterByBindingType=[Vt.prototype._getValue_direct,Vt.prototype._getValue_array,Vt.prototype._getValue_arrayElement,Vt.prototype._getValue_toArray];Vt.prototype.SetterByBindingTypeAndVersioning=[[Vt.prototype._setValue_direct,Vt.prototype._setValue_direct_setNeedsUpdate,Vt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_array,Vt.prototype._setValue_array_setNeedsUpdate,Vt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_arrayElement,Vt.prototype._setValue_arrayElement_setNeedsUpdate,Vt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_fromArray,Vt.prototype._setValue_fromArray_setNeedsUpdate,Vt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class L5{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],h=f.uuid;let p=n[h];if(p===void 0){p=l++,n[h]=p,e.push(f);for(let g=0,m=o;g!==m;++g)s[g].push(new Vt(f,r[g],i[g]))}else if(p<c){a=e[p];const g=--c,m=e[g];n[m.uuid]=p,e[p]=m,n[h]=g,e[g]=f;for(let v=0,b=o;v!==b;++v){const y=s[v],E=y[g];let T=y[p];y[p]=E,T===void 0&&(T=new Vt(f,r[v],i[v])),y[g]=T}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];n[f.uuid]=u,e[u]=f,n[c]=d,e[d]=l;for(let h=0,p=i;h!==p;++h){const g=r[h],m=g[d],v=g[u];g[u]=m,g[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const f=--s,h=e[f],p=--o,g=e[p];n[h.uuid]=d,e[d]=h,n[g.uuid]=f,e[f]=g,e.pop();for(let m=0,v=i;m!==v;++m){const b=r[m],y=b[f],E=b[p];b[d]=y,b[f]=E,b.pop()}}else{const f=--o,h=e[f];f>0&&(n[h.uuid]=d),e[d]=h,e.pop();for(let p=0,g=i;p!==g;++p){const m=r[p];m[d]=m[f],m.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let f=u,h=l.length;f!==h;++f){const p=l[f];d[f]=new Vt(p,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class tI{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:nl,endingEnd:nl};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case ox:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case vv:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===GR;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===zR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=rl,i.endingEnd=rl):(e?i.endingStart=this.zeroSlopeAtStart?rl:nl:i.endingStart=lf,n?i.endingEnd=this.zeroSlopeAtEnd?rl:nl:i.endingEnd=lf)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const I5=new Float32Array(1);class nI extends Es{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=i[d],h=f.name;let p=u[h];if(p!==void 0)++p.referenceCount,o[d]=p;else{if(p=o[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const g=n&&n._propertyBindings[d].binding.parsedPath;p=new eI(Vt.create(r,h,g),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new Lx(new Float32Array(2),new Float32Array(2),1,I5),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?au.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=vv),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new tI(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?au.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class $v{constructor(e){this.value=e}clone(){return new $v(this.value.clone===void 0?this.value:this.value.clone())}}let O5=0;class k5 extends Es{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:O5++}),this.name="",this.usage=ff,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class D5 extends Pu{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class N5{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class rI{constructor(e,n,r=0,i=1/0){this.ray=new Ul(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new bv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Mb(e,this,r,n),r.sort(NE),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Mb(e[i],this,r,n);return r.sort(NE),r}}function NE(t,e){return t.distance-e.distance}function Mb(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)Mb(i[s],e,n,!0)}}class Cb{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Xn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class F5{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const FE=new Ie;class iI{constructor(e=new Ie(1/0,1/0),n=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=FE.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,FE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const BE=new W,gp=new W;class sI{constructor(e=new W,n=new W){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){BE.subVectors(e,this.start),gp.subVectors(this.end,this.start);const r=gp.dot(gp);let s=gp.dot(BE)/r;return n&&(s=Xn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VE=new W;class B5 extends nn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Mt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new lt(i,3));const s=new Dr({fog:!1,toneMapped:!1});this.cone=new rs(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),VE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Po=new W,yp=new pt,Dy=new pt;class V5 extends rs{constructor(e){const n=oI(e),r=new Mt,i=[],s=[],o=new Ke(0,0,1),a=new Ke(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new lt(i,3)),r.setAttribute("color",new lt(s,3));const l=new Dr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");Dy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(yp.multiplyMatrices(Dy,a.matrixWorld),Po.setFromMatrixPosition(yp),i.setXYZ(o,Po.x,Po.y,Po.z),yp.multiplyMatrices(Dy,a.parent.matrixWorld),Po.setFromMatrixPosition(yp),i.setXYZ(o+1,Po.x,Po.y,Po.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function oI(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,oI(t.children[n]));return e}class U5 extends En{constructor(e,n,r){const i=new Kf(n,4,2),s=new Gr({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const $5=new W,UE=new Ke,$E=new Ke;class z5 extends nn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Xf(n);i.rotateY(Math.PI*.5),this.material=new Gr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Ut(o,3)),this.add(new En(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");UE.copy(this.light.color),$E.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?UE:$E;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt($5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class H5 extends rs{constructor(e=10,n=10,r=4473924,i=8947848){r=new Ke(r),i=new Ke(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let f=0,h=0,p=-a;f<=n;f++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=f===s?r:i;g.toArray(c,h),h+=3,g.toArray(c,h),h+=3,g.toArray(c,h),h+=3,g.toArray(c,h),h+=3}const u=new Mt;u.setAttribute("position",new lt(l,3)),u.setAttribute("color",new lt(c,3));const d=new Dr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class G5 extends rs{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Ke(s),o=new Ke(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const f=d/n*(Math.PI*2),h=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(h,0,p);const g=d&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let d=0;d<r;d++){const f=d&1?s:o,h=e-e/r*d;for(let p=0;p<i;p++){let g=p/i*(Math.PI*2),m=Math.sin(g)*h,v=Math.cos(g)*h;a.push(m,0,v),l.push(f.r,f.g,f.b),g=(p+1)/i*(Math.PI*2),m=Math.sin(g)*h,v=Math.cos(g)*h,a.push(m,0,v),l.push(f.r,f.g,f.b)}}const c=new Mt;c.setAttribute("position",new lt(a,3)),c.setAttribute("color",new lt(l,3));const u=new Dr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const zE=new W,bp=new W,HE=new W;class W5 extends nn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Mt;i.setAttribute("position",new lt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Dr({fog:!1,toneMapped:!1});this.lightPlane=new ro(i,s),this.add(this.lightPlane),i=new Mt,i.setAttribute("position",new lt([0,0,0,0,0,1],3)),this.targetLine=new ro(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),zE.setFromMatrixPosition(this.light.matrixWorld),bp.setFromMatrixPosition(this.light.target.matrixWorld),HE.subVectors(bp,zE),this.lightPlane.lookAt(bp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(bp),this.targetLine.scale.z=HE.length()}}const _p=new W,Wn=new zf;class j5 extends rs{constructor(e){const n=new Mt,r=new Dr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,g){l(p),l(g)}function l(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}n.setAttribute("position",new lt(i,3)),n.setAttribute("color",new lt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ke(16755200),u=new Ke(16711680),d=new Ke(43775),f=new Ke(16777215),h=new Ke(3355443);this.setColors(c,u,d,f,h)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Wn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),qn("c",n,e,Wn,0,0,-1),qn("t",n,e,Wn,0,0,1),qn("n1",n,e,Wn,-r,-i,-1),qn("n2",n,e,Wn,r,-i,-1),qn("n3",n,e,Wn,-r,i,-1),qn("n4",n,e,Wn,r,i,-1),qn("f1",n,e,Wn,-r,-i,1),qn("f2",n,e,Wn,r,-i,1),qn("f3",n,e,Wn,-r,i,1),qn("f4",n,e,Wn,r,i,1),qn("u1",n,e,Wn,r*.7,i*1.1,-1),qn("u2",n,e,Wn,-r*.7,i*1.1,-1),qn("u3",n,e,Wn,0,i*2,-1),qn("cf1",n,e,Wn,-r,0,1),qn("cf2",n,e,Wn,r,0,1),qn("cf3",n,e,Wn,0,-i,1),qn("cf4",n,e,Wn,0,i,1),qn("cn1",n,e,Wn,-r,0,-1),qn("cn2",n,e,Wn,r,0,-1),qn("cn3",n,e,Wn,0,-i,-1),qn("cn4",n,e,Wn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qn(t,e,n,r,i,s,o){_p.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],_p.x,_p.y,_p.z)}}const xp=new vr;class X5 extends rs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Mt;s.setIndex(new Ut(r,1)),s.setAttribute("position",new Ut(i,3)),super(s,new Dr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&xp.setFromObject(this.object),xp.isEmpty())return;const n=xp.min,r=xp.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class K5 extends rs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Ut(r,1)),s.setAttribute("position",new lt(i,3)),super(s,new Dr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class q5 extends ro{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new lt(s,3)),o.computeBoundingSphere(),super(o,new Dr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new lt(a,3)),l.computeBoundingSphere(),this.add(new En(l,new Gr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const GE=new W;let wp,Ny;class Y5 extends nn{constructor(e=new W(0,0,1),n=new W(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",wp===void 0&&(wp=new Mt,wp.setAttribute("position",new lt([0,0,0,0,1,0],3)),Ny=new Ru(0,.5,1,5,1),Ny.translate(0,-.5,0)),this.position.copy(n),this.line=new ro(wp,new Dr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(Ny,new Gr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{GE.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(GE,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Z5 extends rs{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Mt;i.setAttribute("position",new lt(n,3)),i.setAttribute("color",new lt(r,3));const s=new Dr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Ke,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aI{constructor(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new pf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const b=[];for(let y=0,E=v.length;y<E;y++){const T=v[y],_=new vl;_.curves=T.curves,b.push(_)}return b}function r(v,b){const y=b.length;let E=!1;for(let T=y-1,_=0;_<y;T=_++){let w=b[T],M=b[_],x=M.x-w.x,S=M.y-w.y;if(Math.abs(S)>Number.EPSILON){if(S<0&&(w=b[_],x=-x,M=b[T],S=-S),v.y<w.y||v.y>M.y)continue;if(v.y===w.y){if(v.x===w.x)return!0}else{const R=S*(v.x-w.x)-x*(v.y-w.y);if(R===0)return!0;if(R<0)continue;E=!E}}else{if(v.y!==w.y)continue;if(M.x<=v.x&&v.x<=w.x||w.x<=v.x&&v.x<=M.x)return!0}}return E}const i=vs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new vl,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],f=[];let h=[],p=0,g;f[p]=void 0,h[p]=[];for(let v=0,b=s.length;v<b;v++)a=s[v],g=a.getPoints(),o=i(g),o=e?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new vl,p:g},f[p].s.curves=a.curves,u&&p++,h[p]=[]):h[p].push({h:a,p:g[0]});if(!f[0])return n(s);if(f.length>1){let v=!1,b=0;for(let y=0,E=f.length;y<E;y++)d[y]=[];for(let y=0,E=f.length;y<E;y++){const T=h[y];for(let _=0;_<T.length;_++){const w=T[_];let M=!0;for(let x=0;x<f.length;x++)r(w.p,f[x].p)&&(y!==x&&b++,M?(M=!1,d[x].push(w)):v=!0);M&&d[y].push(w)}}b>0&&v===!1&&(h=d)}let m;for(let v=0,b=f.length;v<b;v++){l=f[v].s,c.push(l),m=h[v];for(let y=0,E=m.length;y<E;y++)l.holes.push(m[y].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Cu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Cu);const J5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:J_,AddEquation:qo,AddOperation:AR,AdditiveAnimationBlendMode:ox,AdditiveBlending:Sm,AgXToneMapping:IR,AlphaFormat:NR,AlwaysCompare:tL,AlwaysDepth:_R,AlwaysStencilFunc:mb,AmbientLight:jL,AnimationAction:tI,AnimationClip:au,AnimationLoader:o5,AnimationMixer:nI,AnimationObjectGroup:L5,AnimationUtils:n5,ArcCurve:wL,ArrayCamera:vL,ArrowHelper:Y5,AttachedBindMode:H0,Audio:QL,AudioAnalyser:x5,AudioContext:Bx,AudioListener:y5,AudioLoader:m5,AxesHelper:Z5,BackSide:Or,BasicDepthPacking:jR,BasicShadowMap:y3,BatchedMesh:xL,Bone:Sv,BooleanKeyframeTrack:Hl,Box2:iI,Box3:vr,Box3Helper:K5,BoxGeometry:xa,BoxHelper:X5,BufferAttribute:Ut,BufferGeometry:Mt,BufferGeometryLoader:ZL,ByteType:kR,Cache:Ks,Camera:zf,CameraHelper:j5,CanvasTexture:C4,CapsuleGeometry:Cv,CatmullRomCurve3:SL,CineonToneMapping:RR,CircleGeometry:Av,ClampToEdgeWrapping:pr,Clock:Vx,Color:Ke,ColorKeyframeTrack:Ix,ColorManagement:ln,CompressedArrayTexture:E4,CompressedCubeTexture:M4,CompressedTexture:ml,CompressedTextureLoader:a5,ConeGeometry:Tv,ConstantAlphaFactor:gR,ConstantColorFactor:mR,CubeCamera:aL,CubeReflectionMapping:to,CubeRefractionMapping:ua,CubeTexture:Hf,CubeTextureLoader:l5,CubeUVReflectionMapping:Au,CubicBezierCurve:Mx,CubicBezierCurve3:EL,CubicInterpolant:$L,CullFaceBack:B0,CullFaceFront:nR,CullFaceFrontBack:g3,CullFaceNone:tR,Curve:is,CurvePath:CL,CustomBlending:rR,CustomToneMapping:LR,CylinderGeometry:Ru,Cylindrical:F5,Data3DTexture:fx,DataArrayTexture:yv,DataTexture:pl,DataTextureLoader:c5,DataUtils:EV,DecrementStencilOp:A3,DecrementWrapStencilOp:P3,DefaultLoadingManager:GL,DepthFormat:na,DepthStencilFormat:Sl,DepthTexture:vx,DetachedBindMode:OR,DirectionalLight:Fx,DirectionalLightHelper:W5,DiscreteInterpolant:zL,DisplayP3ColorSpace:gv,DodecahedronGeometry:Pv,DoubleSide:Qr,DstAlphaFactor:uR,DstColorFactor:fR,DynamicCopyUsage:G3,DynamicDrawUsage:B3,DynamicReadUsage:$3,EdgesGeometry:AL,EllipseCurve:Mv,EqualCompare:ZR,EqualDepth:wR,EqualStencilFunc:O3,EquirectangularReflectionMapping:of,EquirectangularRefractionMapping:af,Euler:$l,EventDispatcher:Es,ExtrudeGeometry:Lv,FileLoader:es,Float16BufferAttribute:RV,Float32BufferAttribute:lt,Float64BufferAttribute:LV,FloatType:Ki,Fog:wv,FogExp2:xv,FramebufferTexture:xb,FrontSide:bs,Frustum:Gf,GLBufferAttribute:N5,GLSL1:j3,GLSL3:vb,GreaterCompare:JR,GreaterDepth:ER,GreaterEqualCompare:eL,GreaterEqualDepth:SR,GreaterEqualStencilFunc:F3,GreaterStencilFunc:D3,GridHelper:H5,Group:Xs,HalfFloatType:wl,HemisphereLight:WL,HemisphereLightHelper:z5,IcosahedronGeometry:Iv,ImageBitmapLoader:JL,ImageLoader:yf,ImageUtils:dx,IncrementStencilOp:C3,IncrementWrapStencilOp:T3,InstancedBufferAttribute:Cl,InstancedBufferGeometry:YL,InstancedInterleavedBuffer:D5,InstancedMesh:xx,Int16BufferAttribute:TV,Int32BufferAttribute:PV,Int8BufferAttribute:MV,IntType:Q_,InterleavedBuffer:Pu,InterleavedBufferAttribute:_s,Interpolant:Lu,InterpolateDiscrete:El,InterpolateLinear:da,InterpolateSmooth:Qp,InvertStencilOp:R3,KeepStencilOp:qa,KeyframeTrack:os,LOD:_L,LatheGeometry:jf,Layers:bv,LessCompare:YR,LessDepth:xR,LessEqualCompare:cx,LessEqualDepth:sf,LessEqualStencilFunc:k3,LessStencilFunc:I3,Light:Sa,LightProbe:qL,Line:ro,Line3:sI,LineBasicMaterial:Dr,LineCurve:Cx,LineCurve3:ML,LineDashedMaterial:BL,LineLoop:wx,LineSegments:rs,LinearDisplayP3ColorSpace:Uf,LinearEncoding:lx,LinearFilter:Nn,LinearInterpolant:Lx,LinearMipMapLinearFilter:S3,LinearMipMapNearestFilter:w3,LinearMipmapLinearFilter:Qi,LinearMipmapNearestFilter:Vf,LinearSRGBColorSpace:lr,LinearToneMapping:TR,LinearTransfer:cf,Loader:jr,LoaderUtils:ia,LoadingManager:Vv,LoopOnce:zR,LoopPingPong:GR,LoopRepeat:HR,LuminanceAlphaFormat:BR,LuminanceFormat:FR,MOUSE:Ka,Material:ar,MaterialLoader:Uv,MathUtils:Ml,Matrix3:Rt,Matrix4:pt,MaxEquation:z0,Mesh:En,MeshBasicMaterial:Gr,MeshDepthMaterial:gx,MeshDistanceMaterial:yx,MeshLambertMaterial:NL,MeshMatcapMaterial:FL,MeshNormalMaterial:DL,MeshPhongMaterial:OL,MeshPhysicalMaterial:ss,MeshStandardMaterial:qf,MeshToonMaterial:kL,MinEquation:$0,MirroredRepeatWrapping:xl,MixOperation:CR,MultiplyBlending:U0,MultiplyOperation:Bf,NearestFilter:Vn,NearestMipMapLinearFilter:x3,NearestMipMapNearestFilter:_3,NearestMipmapLinearFilter:fl,NearestMipmapNearestFilter:nu,NeverCompare:qR,NeverDepth:bR,NeverStencilFunc:L3,NoBlending:Zs,NoColorSpace:hi,NoToneMapping:Js,NormalAnimationBlendMode:vv,NormalBlending:dl,NotEqualCompare:QR,NotEqualDepth:MR,NotEqualStencilFunc:N3,NumberKeyframeTrack:Tl,Object3D:nn,ObjectLoader:h5,ObjectSpaceNormalMap:KR,OctahedronGeometry:Xf,OneFactor:aR,OneMinusConstantAlphaFactor:yR,OneMinusConstantColorFactor:vR,OneMinusDstAlphaFactor:dR,OneMinusDstColorFactor:hR,OneMinusSrcAlphaFactor:Mm,OneMinusSrcColorFactor:cR,OrthographicCamera:Li,P3Primaries:df,PCFShadowMap:Y_,PCFSoftShadowMap:Z_,PMREMGenerator:yb,Path:pf,PerspectiveCamera:yn,Plane:ds,PlaneGeometry:zl,PlaneHelper:q5,PointLight:Nx,PointLightHelper:U5,Points:Sx,PointsMaterial:Ev,PolarGridHelper:G5,PolyhedronGeometry:wa,PositionalAudio:_5,PropertyBinding:Vt,PropertyMixer:eI,QuadraticBezierCurve:Ax,QuadraticBezierCurve3:Tx,Quaternion:tr,QuaternionKeyframeTrack:fa,QuaternionLinearInterpolant:HL,RED_GREEN_RGTC2_Format:hb,RED_RGTC1_Format:$R,REVISION:Cu,RGBADepthPacking:XR,RGBAFormat:Hr,RGBAIntegerFormat:ix,RGBA_ASTC_10x10_Format:ab,RGBA_ASTC_10x5_Format:ib,RGBA_ASTC_10x6_Format:sb,RGBA_ASTC_10x8_Format:ob,RGBA_ASTC_12x10_Format:lb,RGBA_ASTC_12x12_Format:cb,RGBA_ASTC_4x4_Format:Y0,RGBA_ASTC_5x4_Format:Z0,RGBA_ASTC_5x5_Format:J0,RGBA_ASTC_6x5_Format:Q0,RGBA_ASTC_6x6_Format:eb,RGBA_ASTC_8x5_Format:tb,RGBA_ASTC_8x6_Format:nb,RGBA_ASTC_8x8_Format:rb,RGBA_BPTC_Format:Jp,RGBA_ETC2_EAC_Format:q0,RGBA_PVRTC_2BPPV1_Format:X0,RGBA_PVRTC_4BPPV1_Format:j0,RGBA_S3TC_DXT1_Format:qp,RGBA_S3TC_DXT3_Format:Yp,RGBA_S3TC_DXT5_Format:Zp,RGB_BPTC_SIGNED_Format:ub,RGB_BPTC_UNSIGNED_Format:db,RGB_ETC1_Format:sx,RGB_ETC2_Format:K0,RGB_PVRTC_2BPPV1_Format:W0,RGB_PVRTC_4BPPV1_Format:G0,RGB_S3TC_DXT1_Format:Kp,RGFormat:UR,RGIntegerFormat:rx,RawShaderMaterial:zd,Ray:Ul,Raycaster:rI,Rec709Primaries:uf,RectAreaLight:XL,RedFormat:VR,RedIntegerFormat:nx,ReinhardToneMapping:PR,RenderTarget:iL,RepeatWrapping:no,ReplaceStencilOp:M3,ReverseSubtractEquation:sR,RingGeometry:Ov,SIGNED_RED_GREEN_RGTC2_Format:pb,SIGNED_RED_RGTC1_Format:fb,SRGBColorSpace:In,SRGBTransfer:Tn,Scene:ou,ShaderChunk:At,ShaderLib:Ti,ShaderMaterial:ii,ShadowMaterial:IL,Shape:vl,ShapeGeometry:kv,ShapePath:aI,ShapeUtils:vs,ShortType:DR,Skeleton:Wf,SkeletonHelper:V5,SkinnedMesh:_x,Source:il,Sphere:gr,SphereGeometry:Kf,Spherical:Cb,SphericalHarmonics3:KL,SplineCurve:Px,SpotLight:Dx,SpotLightHelper:B5,Sprite:bL,SpriteMaterial:bx,SrcAlphaFactor:Em,SrcAlphaSaturateFactor:pR,SrcColorFactor:lR,StaticCopyUsage:H3,StaticDrawUsage:ff,StaticReadUsage:U3,StereoCamera:v5,StreamCopyUsage:W3,StreamDrawUsage:V3,StreamReadUsage:z3,StringKeyframeTrack:Gl,SubtractEquation:iR,SubtractiveBlending:V0,TOUCH:Hs,TangentSpaceNormalMap:_a,TetrahedronGeometry:Dv,Texture:kn,TextureLoader:Ox,TorusGeometry:Nv,TorusKnotGeometry:Fv,Triangle:$r,TriangleFanDrawMode:Cm,TriangleStripDrawMode:ax,TrianglesDrawMode:WR,TubeGeometry:Bv,TwoPassDoubleSide:b3,UVMapping:pv,Uint16BufferAttribute:hx,Uint32BufferAttribute:px,Uint8BufferAttribute:CV,Uint8ClampedBufferAttribute:AV,Uniform:$v,UniformsGroup:k5,UniformsLib:Xe,UniformsUtils:$f,UnsignedByteType:Zi,UnsignedInt248Type:ta,UnsignedIntType:js,UnsignedShort4444Type:ex,UnsignedShort5551Type:tx,UnsignedShortType:mv,VSMShadowMap:us,Vector2:Ie,Vector3:W,Vector4:Wt,VectorKeyframeTrack:Pl,VideoTexture:S4,WebGL1Renderer:gL,WebGL3DRenderTarget:fV,WebGLArrayRenderTarget:dV,WebGLCoordinateSystem:qi,WebGLCubeRenderTarget:lL,WebGLMultipleRenderTargets:hV,WebGLRenderTarget:Bi,WebGLRenderer:Wc,WebGLUtils:mL,WebGPUCoordinateSystem:ru,WireframeGeometry:LL,WrapAroundEnding:lf,ZeroCurvatureEnding:nl,ZeroFactor:oR,ZeroSlopeEnding:rl,ZeroStencilOp:E3,_SRGBAFormat:Am,createCanvasElement:rL,sRGBEncoding:ra},Symbol.toStringTag,{value:"Module"}));function io(t){return Nf()?(Qm(t),!0):!1}function bf(){const t=new Set,e=i=>{t.delete(i)};return{on:i=>{t.add(i);const s=()=>e(i);return io(s),{off:s}},off:e,trigger:(...i)=>Promise.all(Array.from(t).map(s=>s(...i)))}}function Pn(t){return typeof t=="function"?t():C(t)}const Ab=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Q5=t=>t!=null,eG=Object.prototype.toString,tG=t=>eG.call(t)==="[object Object]",Tb=()=>{};function nG(t,e){function n(...r){return new Promise((i,s)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return n}function rG(t,e={}){let n,r,i=Tb;const s=a=>{clearTimeout(a),i(),i=Tb};return a=>{const l=Pn(t),c=Pn(e.maxWait);return n&&s(n),l<=0||c!==void 0&&c<=0?(r&&(s(r),r=null),Promise.resolve(a())):new Promise((u,d)=>{i=e.rejectOnCancel?d:u,c&&!r&&(r=setTimeout(()=>{n&&s(n),r=null,u(a())},c)),n=setTimeout(()=>{r&&s(r),r=null,u(a())},l)})}}function iG(t,e,n=!1){return e.reduce((r,i)=>(i in t&&(!n||t[i]!==void 0)&&(r[i]=t[i]),r),{})}function sG(t){return t||on()}function oG(t,e=200,n={}){return nG(rG(e,n),t)}function aG(t,e=200,n={}){const r=le(t.value),i=oG(()=>{r.value=t.value},e,n);return De(t,()=>i()),r}function lG(t,e={}){if(!Xt(t))return kr(t);const n=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const r in t.value)n[r]=_F(()=>({get(){return t.value[r]},set(i){var s;if((s=Pn(e.replaceRef))!=null?s:!0)if(Array.isArray(t.value)){const a=[...t.value];a[r]=i,t.value=a}else{const a={...t.value,[r]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(t.value)),t.value=a}else t.value[r]=i}}));return n}function zx(t,e=!0,n){sG()?kt(t,n):e?t():cn(t)}function cG(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:i=!1}=n;let s=null;const o=le(!1);function a(){s&&(clearInterval(s),s=null)}function l(){o.value=!1,a()}function c(){const u=Pn(e);u<=0||(o.value=!0,i&&t(),a(),s=setInterval(t,u))}if(r&&Ab&&c(),Xt(e)||typeof e=="function"){const u=De(e,()=>{o.value&&Ab&&c()});io(u)}return io(l),{isActive:o,pause:l,resume:c}}function Yi(t){var e;const n=Pn(t);return(e=n==null?void 0:n.$el)!=null?e:n}const uo=Ab?window:void 0;function _f(...t){let e,n,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,i]=t,e=uo):[e,n,r,i]=t,!e)return Tb;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,d,f,h)=>(u.addEventListener(d,f,h),()=>u.removeEventListener(d,f,h)),l=De(()=>[Yi(e),Pn(i)],([u,d])=>{if(o(),!u)return;const f=tG(d)?{...d}:d;s.push(...n.flatMap(h=>r.map(p=>a(u,h,p,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return io(c),c}function uG(){const t=le(!1),e=on();return e&&kt(()=>{t.value=!0},e),t}function zv(t){const e=uG();return A(()=>(e.value,!!t()))}function Hx(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:i=uo}=e,s=le(!1),o=r?1e3/r:null;let a=0,l=null;function c(f){if(!s.value||!i)return;a||(a=f);const h=f-a;if(o&&h<o){l=i.requestAnimationFrame(c);return}a=f,t({delta:h,timestamp:f}),l=i.requestAnimationFrame(c)}function u(){!s.value&&i&&(s.value=!0,a=0,l=i.requestAnimationFrame(c))}function d(){s.value=!1,l!=null&&i&&(i.cancelAnimationFrame(l),l=null)}return n&&u(),io(d),{isActive:nv(s),pause:d,resume:u}}function dG(t,e={}){const{window:n=uo}=e,r=zv(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let i;const s=le(!1),o=c=>{s.value=c.matches},a=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",o):i.removeListener(o))},l=Yn(()=>{r.value&&(a(),i=n.matchMedia(Pn(t)),"addEventListener"in i?i.addEventListener("change",o):i.addListener(o),s.value=i.matches)});return io(()=>{l(),a(),i=void 0}),s}function fG(t,e,n={}){const{window:r=uo,...i}=n;let s;const o=zv(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=A(()=>{const f=Pn(t),h=(Array.isArray(f)?f:[f]).map(Yi).filter(Q5);return new Set(h)}),c=De(()=>l.value,f=>{a(),o.value&&r&&f.size&&(s=new MutationObserver(e),f.forEach(h=>s.observe(h,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),d=()=>{a(),c()};return io(d),{isSupported:o,stop:d,takeRecords:u}}function hG(t={}){const{window:e=uo}=t,n=le(1);if(e){let r=function(){n.value=e.devicePixelRatio,i(),s=e.matchMedia(`(resolution: ${n.value}dppx)`),s.addEventListener("change",r,{once:!0})},i=function(){s==null||s.removeEventListener("change",r)},s;r(),io(i)}return{pixelRatio:n}}function lI(t,e,n={}){const{window:r=uo,...i}=n;let s;const o=zv(()=>r&&"ResizeObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=A(()=>Array.isArray(t)?t.map(d=>Yi(d)):[Yi(t)]),c=De(l,d=>{if(a(),o.value&&r){s=new ResizeObserver(e);for(const f of d)f&&s.observe(f,i)}},{immediate:!0,flush:"post"}),u=()=>{a(),c()};return io(u),{isSupported:o,stop:u}}function pG(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:i=!0,immediate:s=!0}=e,o=le(0),a=le(0),l=le(0),c=le(0),u=le(0),d=le(0),f=le(0),h=le(0);function p(){const g=Yi(t);if(!g){n&&(o.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,f.value=0,h.value=0);return}const m=g.getBoundingClientRect();o.value=m.height,a.value=m.bottom,l.value=m.left,c.value=m.right,u.value=m.top,d.value=m.width,f.value=m.x,h.value=m.y}return lI(t,p),De(()=>Yi(t),g=>!g&&p()),fG(t,p,{attributeFilter:["style","class"]}),i&&_f("scroll",p,{capture:!0,passive:!0}),r&&_f("resize",p,{passive:!0}),zx(()=>{s&&p()}),{height:o,bottom:a,left:l,right:c,top:u,width:d,x:f,y:h,update:p}}function mG(t,e={width:0,height:0},n={}){const{window:r=uo,box:i="content-box"}=n,s=A(()=>{var d,f;return(f=(d=Yi(t))==null?void 0:d.namespaceURI)==null?void 0:f.includes("svg")}),o=le(e.width),a=le(e.height),{stop:l}=lI(t,([d])=>{const f=i==="border-box"?d.borderBoxSize:i==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(r&&s.value){const h=Yi(t);if(h){const p=r.getComputedStyle(h);o.value=Number.parseFloat(p.width),a.value=Number.parseFloat(p.height)}}else if(f){const h=Array.isArray(f)?f:[f];o.value=h.reduce((p,{inlineSize:g})=>p+g,0),a.value=h.reduce((p,{blockSize:g})=>p+g,0)}else o.value=d.contentRect.width,a.value=d.contentRect.height},n);zx(()=>{const d=Yi(t);d&&(o.value="offsetWidth"in d?d.offsetWidth:e.width,a.value="offsetHeight"in d?d.offsetHeight:e.height)});const c=De(()=>Yi(t),d=>{o.value=d?e.width:0,a.value=d?e.height:0});function u(){l(),c()}return{width:o,height:a,stop:u}}function vG(t){var e;const n=le(0);if(typeof performance>"u")return n;const r=(e=t==null?void 0:t.every)!=null?e:10;let i=performance.now(),s=0;return Hx(()=>{if(s+=1,s>=r){const o=performance.now(),a=o-i;n.value=Math.round(1e3/(a/s)),i=o,s=0}}),n}function gG(t={}){const e=le(),n=zv(()=>typeof performance<"u"&&"memory"in performance);if(n.value){const{interval:r=1e3}=t;cG(()=>{e.value=performance.memory},r,{immediate:t.immediate,immediateCallback:t.immediateCallback})}return{isSupported:n,memory:e}}const cI={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},yG=Object.keys(cI);function bG(t={}){const{target:e=uo}=t,n=le(!1),r=le(t.initialValue||{});Object.assign(r.value,cI,r.value);const i=s=>{n.value=!0,!(t.pointerTypes&&!t.pointerTypes.includes(s.pointerType))&&(r.value=iG(s,yG,!1))};if(e){const s={passive:!0};_f(e,["pointerdown","pointermove","pointerup"],i,s),_f(e,"pointerleave",()=>n.value=!1,s)}return{...lG(r),isInside:n}}function _G(t={}){const{window:e=uo,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:s=!0}=t,o=le(n),a=le(r),l=()=>{e&&(s?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};if(l(),zx(l),_f("resize",l,{passive:!0}),i){const c=dG("(orientation: portrait)");De(c,()=>l())}return{width:o,height:a}}var xG=Object.defineProperty,wG=(t,e,n)=>e in t?xG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WE=(t,e,n)=>(wG(t,typeof e!="symbol"?e+"":e,n),n);const SG="@tresjs/core",EG="module",MG="3.7.0",CG="pnpm@8.10.2",AG="Declarative ThreeJS using Vue Components",TG="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",PG="MIT",RG=["vue","3d","threejs","three","threejs-vue"],LG=!1,IG={".":{types:"./dist/index.d.ts",require:"./dist/tres.umd.cjs",import:"./dist/tres.js"},"./components":{types:"./dist/components/index.d.ts"},"./composables":{types:"./dist/composables/index.d.ts"},"./types":{types:"./dist/types/index.d.ts"},"./utils":{types:"./dist/utils/index.d.ts"},"./*":"./*"},OG="./dist/tres.js",kG="./dist/tres.js",DG="./dist/index.d.ts",NG=["dist","*.d.ts"],FG={access:"public"},BG={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint . --ext .js,.jsx,.ts,.tsx,.vue","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts"},VG={three:">=0.133",vue:">=3.3"},UG={"@alvarosabu/utils":"^3.1.1","@vueuse/core":"^10.7.0"},$G={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.6.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.159.0","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","@vitejs/plugin-vue":"^4.5.2","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.0.4","@vue/test-utils":"^2.4.3",eslint:"^8.55.0","eslint-plugin-vue":"^9.19.2",esno:"^4.0.0",gsap:"^3.12.3",jsdom:"^23.0.1",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.0.1","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.159.0",unocss:"^0.58.0",unplugin:"^1.5.1","unplugin-vue-components":"^0.26.0",vite:"^5.0.8","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.6.4","vite-plugin-inspect":"^0.8.1","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.0.0-rc.31",vitest:"^1.0.4",vue:"^3.3.11","vue-demi":"^0.14.6"},zG={name:SG,type:EG,version:MG,packageManager:CG,description:AG,author:TG,license:PG,keywords:RG,sideEffects:LG,exports:IG,main:OG,module:kG,types:DG,files:NG,publishConfig:FG,scripts:BG,peerDependencies:VG,dependencies:UG,devDependencies:$G},HG=({sizes:t,scene:e})=>{const n=le([]),r=A(()=>n.value[0]),i=(a,l=!1)=>{n.value.some(({uuid:c})=>c===a.uuid)||(l?o(a):n.value.push(a))},s=a=>{n.value=n.value.filter(({uuid:l})=>l!==a.uuid)},o=a=>{const l=a instanceof zf?a:n.value.find(u=>u.uuid===a);if(!l)return;const c=n.value.filter(({uuid:u})=>u!==l.uuid);n.value=[l,...c]};return Yn(()=>{t.aspectRatio.value&&n.value.forEach(a=>{a instanceof yn&&(a.aspect=t.aspectRatio.value),(a instanceof yn||a instanceof Li)&&a.updateProjectionMatrix()})}),e.userData.tres__registerCamera=i,e.userData.tres__deregisterCamera=s,ya(()=>{n.value=[]}),{camera:r,cameras:n,registerCamera:i,deregisterCamera:s,setCameraActive:o}},uI=bf(),dI=bf(),Gx=bf(),Hd=new Vx;let tm=0,nm=0;const{pause:GG,resume:WG,isActive:jG}=Hx(()=>{uI.trigger({delta:tm,elapsed:nm,clock:Hd}),dI.trigger({delta:tm,elapsed:nm,clock:Hd}),Gx.trigger({delta:tm,elapsed:nm,clock:Hd})},{immediate:!1});Gx.on(()=>{tm=Hd.getDelta(),nm=Hd.getElapsedTime()});const Iu=()=>({onBeforeLoop:uI.on,onLoop:dI.on,onAfterLoop:Gx.on,pause:GG,resume:WG,isActive:jG}),jE="[TresJS   ] ";function Hv(){function t(r,i){console.error(`${jE} ${r}`,i||"")}function e(r){console.warn(`${jE} ${r}`)}function n(r,i){}return{logError:t,logWarning:e,logMessage:n}}function XG(t){return t instanceof Ke?t:Array.isArray(t)?new Ke(...t):new Ke(t)}class KG extends En{constructor(...e){super(...e),WE(this,"type","HightlightMesh"),WE(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*e);this.scale.set(n,n,n)}}const fI=(t,e)=>{for(const n of Object.keys(e))e[n]instanceof Object&&Object.assign(e[n],fI(t[n],e[n]));return Object.assign(t||{},e),t},qG="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",YG=ZG(qG);function XE(t){return t&&t.nodeType===1}function Sp(t){return t.replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function ZG(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const JG=(t,e)=>{const n=new Set,r=[];for(const i of t){const s=e(i);n.has(s)||(n.add(s),r.push(i))}return r},KE=(t,e)=>{if(!e)return;const n=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return n==null?void 0:n.reduce((r,i)=>r&&r[i],t)},QG=(t,e,n)=>{const r=Array.isArray(e)?e:e.match(/([^[.\]])+/g);r&&r.reduce((i,s,o)=>(i[s]===void 0&&(i[s]={}),o===r.length-1&&(i[s]=n),i[s]),t)};function hI(t,e){if(XE(t)&&XE(e)){const i=t.attributes,s=e.attributes;return i.length!==s.length?!1:Array.from(i).every(({name:o,value:a})=>e.getAttribute(o)===a)}if(t===e)return!0;if(t===null||typeof t!="object"||e===null||typeof e!="object")return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!r.includes(i)||!hI(t[i],e[i]))return!1;return!0}function e6(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!hI(t[n],e[n]))return!1;return!0}function t6(t,e,n,r){const i=l=>{if(l.uuid===e)return l;for(const c of l.children){const u=i(c);if(u)return u}},s=i(t);if(!s){console.warn("Object with UUID not found in the scene.");return}let o=s;for(let l=0;l<n.length-1;l++)if(o[n[l]]!==void 0)o=o[n[l]];else{console.warn(`Property path is not valid: ${n.join(".")}`);return}const a=n[n.length-1];o[a]!==void 0?o[a]=r:console.warn(`Property path is not valid: ${n.join(".")}`)}function n6(t){const e=new Gr({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Qr});return new KG(t.geometry.clone(),e)}const r6=Number.parseInt(Cu.replace("dev","")),Ep={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:In,toneMapping:J_,toneMappingExposure:3,shadowMap:{enabled:!0,type:Z_}}};function i6({scene:t,canvas:e,options:n,disableRender:r,contextParts:{sizes:i,camera:s}}){const o=A(()=>({alpha:Pn(n.alpha),depth:Pn(n.depth),canvas:Yi(e),context:Pn(n.context),stencil:Pn(n.stencil),antialias:Pn(n.antialias)===void 0?!0:Pn(n.antialias),precision:Pn(n.precision),powerPreference:Pn(n.powerPreference),premultipliedAlpha:Pn(n.premultipliedAlpha),preserveDrawingBuffer:Pn(n.preserveDrawingBuffer),logarithmicDepthBuffer:Pn(n.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:Pn(n.failIfMajorPerformanceCaveat)})),a=st(new Wc(o.value));De(o,()=>{a.value.dispose(),a.value=new Wc(o.value)}),Yn(()=>{a.value.setSize(i.width.value,i.height.value)});const{pixelRatio:l}=hG();Yn(()=>{a.value.setPixelRatio(l.value)});const{logError:c}=Hv(),u=(()=>{const p=new Wc,g={shadowMap:{enabled:p.shadowMap.enabled,type:p.shadowMap.type},toneMapping:p.toneMapping,toneMappingExposure:p.toneMappingExposure,outputColorSpace:p.outputColorSpace};return p.dispose(),g})();Yn(()=>{const p=Pn(n.preset);p&&(p in Ep||c(`Renderer Preset must be one of these: ${Object.keys(Ep).join(", ")}`),fI(a.value,Ep[p]));const g=(b,y)=>{const E=Pn(b),T=()=>{if(p)return KE(Ep[p],y)};if(E!==void 0)return E;const _=T();return _!==void 0?_:KE(u,y)},m=(b,y)=>QG(a.value,y,g(b,y));m(n.shadows,"shadowMap.enabled"),m(n.toneMapping,"toneMapping"),m(n.shadowMapType,"shadowMap.type"),r6<150&&m(!n.useLegacyLights,"physicallyCorrectLights"),m(n.outputColorSpace,"outputColorSpace"),m(n.toneMappingExposure,"toneMappingExposure");const v=g(n.clearColor,"clearColor");v&&a.value.setClearColor(v?XG(v):new Ke(0))});const{pause:d,resume:f,onLoop:h}=Iu();return h(()=>{s.value&&!Pn(r)&&a.value.render(t,s.value)}),f(),ya(()=>{d(),a.value.dispose(),a.value.forceContextLoss()}),{renderer:a}}const qE=t=>typeof t=="function",s6=t=>!!t&&t.constructor===Array;function o6(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}async function Gv(t,e,n,r,i){const{logError:s}=Hv(),o=new t;i&&i(o),n&&n(o);const a=(Array.isArray(e)?e:[e]).map(l=>new Promise((c,u)=>{o.load(l,d=>{d.scene&&Object.assign(d,o6(d.scene)),c(d)},r,d=>u(s("[useLoader] - Failed to load resource",d)))}));return s6(e)?await Promise.all(a):await a[0]}const a6=(t,{renderer:e,camera:n,raycaster:r})=>{const i=A(()=>e.value.domElement),{x:s,y:o}=bG({target:i}),{width:a,height:l,top:c,left:u}=pG(i),d=({x:w,y:M})=>{if(i.value)return{x:(w-u.value)/a.value*2-1,y:-((M-c.value)/l.value)*2+1}},f=({x:w,y:M})=>{if(n.value)return r.value.setFromCamera(new Ie(w,M),n.value),r.value.intersectObjects(t.value,!1)},h=w=>{const M=d({x:(w==null?void 0:w.clientX)??s.value,y:(w==null?void 0:w.clientY)??o.value});return M?f(M)||[]:[]},p=A(()=>h()),g=bf(),m=bf(),v=(w,M)=>{w.trigger({event:M,intersects:h(M)})},b=w=>{v(m,w)};let y;const E=w=>{var M;y=(M=h(w)[0])==null?void 0:M.object},T=w=>{var M;w instanceof PointerEvent&&y===((M=h(w)[0])==null?void 0:M.object)&&v(g,w)},_=w=>m.trigger({event:w,intersects:[]});return i.value.addEventListener("pointerup",T),i.value.addEventListener("pointerdown",E),i.value.addEventListener("pointermove",b),i.value.addEventListener("pointerleave",_),ya(()=>{i!=null&&i.value&&(i.value.removeEventListener("pointerup",T),i.value.removeEventListener("pointerdown",E),i.value.removeEventListener("pointermove",b),i.value.removeEventListener("pointerleave",_))}),{intersects:p,onClick:w=>g.on(w).off,onPointerMove:w=>m.on(w).off}},l6=({scene:t,contextParts:e})=>{const n=Sr({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),r=le(new Set),i=f=>{r.value.add(f)},s=f=>{r.value.delete(f)},o=f=>{Object.values(n).forEach(h=>h.delete(f)),s(f)},a=f=>{const{onClick:h,onPointerMove:p,onPointerEnter:g,onPointerLeave:m}=f;h&&n.click.set(f,h),p&&n.pointerMove.set(f,p),g&&n.pointerEnter.set(f,g),m&&n.pointerLeave.set(f,m)};t.userData.tres__registerAtPointerEventHandler=a,t.userData.tres__deregisterAtPointerEventHandler=o,t.userData.tres__registerBlockingObjectAtPointerEventHandler=i,t.userData.tres__deregisterBlockingObjectAtPointerEventHandler=s;const l=A(()=>JG([...Array.from(r.value),...Object.values(n).map(f=>Array.from(f.keys())).flat()],({uuid:f})=>f)),{onClick:c,onPointerMove:u}=a6(l,e);c(({intersects:f,event:h})=>{var p;f.length&&((p=n.click.get(f[0].object))==null||p(f[0],h))});let d;return u(({intersects:f,event:h})=>{var p,g,m,v;const b=(p=f==null?void 0:f[0])==null?void 0:p.object,{pointerLeave:y,pointerEnter:E,pointerMove:T}=n;d&&d!==b&&((g=y.get(d))==null||g(d,h)),b&&(d!==b&&((m=E.get(b))==null||m(f[0],h)),(v=T.get(b))==null||v(f[0],h)),d=b||null}),{registerObject:a,deregisterObject:o}};function pI(t){let e=0;return t.traverse(n=>{if(n.isMesh&&n.geometry){const r=n.geometry,i=r.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,s=r.index?r.index.count*Uint32Array.BYTES_PER_ELEMENT:0,o=r.attributes.normal?r.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,a=r.attributes.uv?r.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,l=i+s+o+a;e+=l}}),e}function c6(t){return(t/1024).toFixed(2)}const Pb=le({}),Wv=t=>Object.assign(Pb.value,t);function u6({scene:t,canvas:e,windowSize:n,disableRender:r,rendererOptions:i}){const s=A(()=>Pn(n)?_G():mG(Pn(e).parentElement)),o=st({width:0,height:0}),a=aG(o,10),l=Yn(()=>{o.value={width:s.value.width.value,height:s.value.height.value}}),c=A(()=>a.value.width/a.value.height),u={height:A(()=>a.value.height),width:A(()=>a.value.width),aspectRatio:c},d=st(t),{camera:f,cameras:h,registerCamera:p,deregisterCamera:g,setCameraActive:m}=HG({sizes:u,scene:t}),{renderer:v}=i6({scene:t,canvas:e,options:i,contextParts:{sizes:u,camera:f},disableRender:r}),b={sizes:u,scene:d,camera:f,cameras:nv(h),renderer:v,raycaster:st(new rI),controls:le(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:Wv,registerCamera:p,setCameraActive:m,deregisterCamera:g};Mr("useTres",b);const y=100,E=vG({every:y}),{isSupported:T,memory:_}=gG({interval:y}),w=160;let M=performance.now();const x=({timestamp:P})=>{b.scene.value&&(b.perf.memory.allocatedMem=pI(b.scene.value)),P-M>=y&&(M=P,b.perf.fps.accumulator.push(E.value),b.perf.fps.accumulator.length>w&&b.perf.fps.accumulator.shift(),b.perf.fps.value=E.value,T.value&&_.value&&(b.perf.memory.accumulator.push(_.value.usedJSHeapSize/1024/1024),b.perf.memory.accumulator.length>w&&b.perf.memory.accumulator.shift(),b.perf.memory.currentMem=b.perf.memory.accumulator.reduce((B,U)=>B+U,0)/b.perf.memory.accumulator.length))};let S=0;const R=1,{pause:I,resume:z}=Hx(({delta:P})=>{window.__TRES__DEVTOOLS__&&(x({timestamp:performance.now()}),S+=P,S>=R&&(window.__TRES__DEVTOOLS__.cb(b),S=0))},{immediate:!0});return ya(()=>{l(),I()}),b}function Wx(){const t=Zn("useTres");if(!t)throw new Error("useTresContext must be used together with useTresContextProvider");return t}let jn=null;const{logError:YE}=Hv(),Fy=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],d6={createElement(t,e,n,r){var i,s;if(r||(r={}),r.args||(r.args=[]),t==="template"||YG(t))return null;let o=t.replace("Tres",""),a;if(t==="primitive"){(r==null?void 0:r.object)===void 0&&YE("Tres primitives need a prop 'object'");const l=r.object;o=l.type,a=Object.assign(l,{type:o,attach:r.attach,primitive:!0})}else{const l=Pb.value[o];l||YE(`${o} is not defined on the THREE namespace. Use extend to add it to the catalog.`),a=new l(...r.args)}return a.isCamera&&(r!=null&&r.position||a.position.set(3,3,3),r!=null&&r.lookAt||a.lookAt(0,0,0)),(r==null?void 0:r.attach)===void 0&&(a.isMaterial?a.attach="material":a.isBufferGeometry&&(a.attach="geometry")),a.isObject3D&&((i=r==null?void 0:r.material)!=null&&i.isMaterial&&(a.userData.tres__materialViaProp=!0),(s=r==null?void 0:r.geometry)!=null&&s.isBufferGeometry&&(a.userData.tres__geometryViaProp=!0)),a.userData={...a.userData,tres__name:o},a},insert(t,e){var n,r,i,s;e&&e.isScene&&(jn=e);const o=e||jn;if(t!=null&&t.isObject3D){if(t!=null&&t.isCamera){if(!(jn!=null&&jn.userData.tres__registerCamera))throw"could not find tres__registerCamera on scene's userData";(r=jn==null?void 0:(n=jn.userData).tres__registerCamera)==null||r.call(n,t)}if(t&&Fy.some(a=>t[a])){if(!(jn!=null&&jn.userData.tres__registerAtPointerEventHandler))throw"could not find tres__registerAtPointerEventHandler on scene's userData";(s=jn==null?void 0:(i=jn.userData).tres__registerAtPointerEventHandler)==null||s.call(i,t)}}t!=null&&t.isObject3D&&o!=null&&o.isObject3D?(o.add(t),t.dispatchEvent({type:"added"})):t!=null&&t.isFog?o.fog=t:typeof(t==null?void 0:t.attach)=="string"&&(t.__previousAttach=t[o==null?void 0:o.attach],o&&(o[t.attach]=t))},remove(t){var e,n;if(t){if(t.isObject3D){const r=t,i=c=>{var u,d;const f=c;c.userData.tres__materialViaProp||((u=f.material)==null||u.dispose(),f.material=void 0),c.userData.tres__geometryViaProp||((d=f.geometry)==null||d.dispose(),f.geometry=void 0)},s=jn==null?void 0:jn.userData.tres__deregisterAtPointerEventHandler,o=jn==null?void 0:jn.userData.tres__deregisterBlockingObjectAtPointerEventHandler,a=c=>{var u,d;if(!o)throw"could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData";if((d=jn==null?void 0:(u=jn.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||d.call(u,c),!s)throw"could not find tres__deregisterAtPointerEventHandler on scene's userData";c&&Fy.some(f=>c[f])&&(s==null||s(c))},l=c=>{const u=jn==null?void 0:jn.userData.tres__deregisterCamera;if(!u)throw"could not find tres__deregisterCamera on scene's userData";c.isCamera&&(u==null||u(c))};(e=t.removeFromParent)==null||e.call(t),r.traverse(c=>{i(c),l(c),a==null||a(c)}),i(r),l(r),a==null||a(r)}(n=t.dispose)==null||n.call(t)}},patchProp(t,e,n,r){var i,s,o,a;if(t){let l=t,c=e;if(t.isObject3D&&c==="blocks-pointer-events"){r||r===""?(s=jn==null?void 0:(i=jn.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||s.call(i,t):(a=jn==null?void 0:(o=jn.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||a.call(o,t);return}let u=Sp(c),d=l==null?void 0:l[u];if(c==="args"){const h=t,p=n??[],g=r??[],m=t.userData.tres__name||t.type;m&&p.length&&!e6(p,g)&&(l=Object.assign(h,new Pb.value[m](...r)));return}if(l.type==="BufferGeometry"){if(c==="args")return;l.setAttribute(Sp(c),new Ut(...r));return}if(c.includes("-")&&d===void 0){const h=c.split("-");d=h.reduce((p,g)=>p[Sp(g)],l),c=h.pop(),u=c.toLowerCase(),d!=null&&d.set||(l=h.reduce((p,g)=>p[Sp(g)],l))}let f=r;if(f===""&&(f=!0),qE(d)){Fy.includes(e)||(Array.isArray(f)?t[u](...f):t[u](f));return}!(d!=null&&d.set)&&!qE(d)?l[u]=f:d.constructor===f.constructor&&d!=null&&d.copy?d==null||d.copy(f):Array.isArray(f)?d.set(...f):!d.isColor&&d.setScalar?d.setScalar(f):d.set(f)}},parentNode(t){return(t==null?void 0:t.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:f6}=NP(d6);Wv(J5);function h6(){return mI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function mI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const p6=typeof Proxy=="function",m6="devtools-plugin:setup",v6="plugin:settings:set";let dd,Rb;function g6(){var t;return dd!==void 0||(typeof window<"u"&&window.performance?(dd=!0,Rb=window.performance):typeof global<"u"&&!((t=global.perf_hooks)===null||t===void 0)&&t.performance?(dd=!0,Rb=global.perf_hooks.performance):dd=!1),dd}function y6(){return g6()?Rb.now():Date.now()}let b6=class{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return y6()}},n&&n.on(v6,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}};function _6(t,e){const n=t,r=mI(),i=h6(),s=p6&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(m6,t,e);else{const o=s?new b6(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}function x6(t,e){const n=`  ${t}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}const vI=t=>{const e={id:t.uuid,label:t.type,children:[],tags:[]};t.name!==""&&e.tags.push({label:t.name,textColor:5750629,backgroundColor:15793395});const n=pI(t);return n>0&&e.tags.push({label:`${c6(n)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),t.type.includes("Light")&&(e.tags.push({label:`${t.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${t.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),t.type.includes("Camera")&&(e.tags.push({label:`${t.fov}`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(t.position.x)} y: ${Math.round(t.position.y)} z: ${Math.round(t.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function gI(t,e){t.children.forEach(n=>{if(n.type==="HightlightMesh")return;const r=vI(n);e.children.push(r),gI(n,r)})}const w6=[],fd="tres:inspector",S6=Sr({sceneGraph:null});function E6(t,e){_6({id:"dev.esm.tres",label:"TresJS ",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:w6,app:t},n=>{typeof n.now!="function"&&x6("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addInspector({id:fd,label:"TresJS ",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{n.sendInspectorTree(fd)},1e3),setInterval(()=>{n.notifyComponentUpdate()},5e3),n.on.getInspectorTree(s=>{if(s.inspectorId===fd){const o=vI(e.scene.value);gI(e.scene.value,o),S6.sceneGraph=o,s.rootNodes=[o]}});let r=null,i=null;n.on.getInspectorState(s=>{if(s.inspectorId===fd){const[o]=e.scene.value.getObjectsByProperty("uuid",s.nodeId);if(!o)return;if(i&&r&&r.parent&&i.remove(r),o.isMesh){const a=n6(o);o.add(a),r=a,i=o}s.state={object:[{key:"uuid",editable:!0,value:o.uuid},{key:"name",editable:!0,value:o.name},{key:"type",editable:!0,value:o.type},{key:"position",editable:!0,value:o.position},{key:"rotation",editable:!0,value:o.rotation},{key:"scale",editable:!0,value:o.scale},{key:"geometry",value:o.geometry},{key:"material",value:o.material},{key:"color",editable:!0,value:o.color},{key:"intensity",editable:!0,value:o.intensity},{key:"castShadow",editable:!0,value:o.castShadow},{key:"receiveShadow",editable:!0,value:o.receiveShadow},{key:"frustumCulled",editable:!0,value:o.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:o.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:o.matrixWorldNeedsUpdate},{key:"matrixWorld",value:o.matrixWorld},{key:"visible",editable:!0,value:o.visible}]}}}),n.on.editInspectorState(s=>{s.inspectorId===fd&&t6(e.scene.value,s.nodeId,s.path,s.state.value)})})}const M6=["data-scene","data-tres"],yI=Me({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(t,{expose:e}){var n;const r=t,{logWarning:i}=Hv(),s=le(),o=st(new ou),{resume:a}=Iu(),l=Cr(),c=(n=on())==null?void 0:n.appContext.app,u=g=>Me({setup(){var m;const v=(m=on())==null?void 0:m.appContext;return v&&(v.app=c),Mr("useTres",g),Mr("extend",Wv),typeof window<"u"&&E6(v.app,g),()=>Nt(qe,null,l!=null&&l.default?l.default():[])}}),d=g=>{const m=u(g);f6(Nt(m),o.value)},f=(g,m=!1)=>{o.value.children=[],m&&(g.renderer.value.dispose(),g.renderer.value.renderLists.dispose(),g.renderer.value.forceContextLoss()),d(g),a()},h=A(()=>r.disableRender),p=st(null);return e({context:p,dispose:()=>f(p.value,!0)}),kt(()=>{const g=s;p.value=u6({scene:o.value,canvas:g,windowSize:r.windowSize,disableRender:h,rendererOptions:r}),l6({scene:o.value,contextParts:p.value});const{registerCamera:m,camera:v,cameras:b,deregisterCamera:y}=p.value;d(p.value);const E=()=>{const T=new yn(45,window.innerWidth/window.innerHeight,.1,1e3);T.position.set(3,3,3),T.lookAt(0,0,0),m(T);const _=Yn(()=>{b.value.length>=2&&(T.removeFromParent(),y(T),_==null||_())})};De(()=>r.camera,(T,_)=>{T&&m(T),_&&(_.removeFromParent(),y(_))},{immediate:!0}),v.value||(i("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),E())}),(g,m)=>(V(),ee("canvas",{ref_key:"canvas",ref:s,"data-scene":o.value.uuid,class:Qe(g.$attrs.class),"data-tres":`tresjs ${C(zG).version}`,style:Be({display:"block",width:"100%",height:"100%",position:g.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...g.$attrs.style})},null,14,M6))}}),C6={install(t){t.component("TresCanvas",yI)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function $n(t){return t==null}function jx(t){return t!==null&&typeof t=="object"}function Lb(t){return t!==null&&typeof t=="object"}function A6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Rl(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const s=t[i],o=e[i];return Lb(s)&&Lb(o)?Object.assign(Object.assign({},r),{[i]:Rl(s,o)}):Object.assign(Object.assign({},r),{[i]:i in e?o:s})},{})}function T6(t){return jx(t)?"target"in t:!1}const P6={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class pi{static alreadyDisposed(){return new pi({type:"alreadydisposed"})}static notBindable(){return new pi({type:"notbindable"})}static notCompatible(e,n){return new pi({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new pi({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new pi({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=P6[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class Rm{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!Rm.isBindable(r))throw pi.notBindable();if(!(e in r))throw pi.propertyNotFound(e);r[e]=n}}class _i{constructor(){this.observers_={}}on(e,n,r){var i;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:n,key:(i=r==null?void 0:r.key)!==null&&i!==void 0?i:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.key!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}}class R6{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,s)=>i===s,this.emitter=new _i,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:s,rawValue:i,sender:this}))}}class L6{constructor(e){this.emitter=new _i,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class I6{constructor(e){this.emitter=new _i,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function yr(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new L6(t):new R6(t,e)}function O6(t){return[new I6(t),(e,n)=>{t.setRawValue(e,n)}]}class un{constructor(e){this.emitter=new _i,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:yr(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new un(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class jv{constructor(e){this.values=un.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class k6{constructor(e){this.values=un.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return $n(r)||(i=Math.max(i,r)),$n(n)||(i=Math.min(i,n)),i}}class D6{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class N6{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const F6={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class B6{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=F6[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const V6={"+":t=>t,"-":t=>-t,"~":t=>~t};class U6{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=V6[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Xx(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function xf(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function $6(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function wf(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function z6(t,e){const n=wf(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=wf(t,e);return i===""?"":r+i}function Kx(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=z6(t,e);return r===""?"":n+r}function bI(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=$6(t,e);return e+=r.length,r===""?"":r+wf(t,e)}function H6(t,e){const n=bI(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=wf(t,e);return e+=i.length,n+r+i+Kx(t,e)}function G6(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=wf(t,e);return e+=r.length,r===""?"":n+r+Kx(t,e)}function W6(t,e){const n=bI(t,e);return e+=n.length,n===""?"":n+Kx(t,e)}const j6=Xx([H6,G6,W6]);function X6(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K6(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=X6(t,e);return r===""?"":n+r}function q6(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Y6(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=q6(t,e);return r===""?"":n+r}function Z6(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function J6(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=Z6(t,e);return r===""?"":n+r}const Q6=Xx([K6,Y6,J6]),e8=Xx([Q6,j6]);function t8(t,e){const n=e8(t,e);return e+=n.length,n===""?null:{evaluable:new N6(n),cursor:e}}function n8(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=xI(t,e);if(!r)return null;e=r.cursor,e+=xf(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function r8(t,e){var n;return(n=t8(t,e))!==null&&n!==void 0?n:n8(t,e)}function _I(t,e){const n=r8(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=_I(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new U6(r,i.evaluable)}):null}function i8(t,e,n){n+=xf(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=xf(e,n).length,{cursor:n,operator:r}):null}function s8(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let s=i.evaluable;for(;;){const o=i8(e,n,r);if(!o)break;r=o.cursor;const a=t(n,r);if(!a)return null;r=a.cursor,s=new B6(o.operator,s,a.evaluable)}return s?{cursor:r,evaluable:s}:null}}const o8=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>s8(t,e),_I);function xI(t,e){return e+=xf(t,e).length,o8(t,e)}function a8(t){const e=xI(t,0);return!e||e.cursor+xf(t,e.cursor).length!==t.length?null:e.evaluable}function ha(t){var e;const n=a8(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function wI(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=ha(t);if(!$n(e))return e}return 0}function si(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function hn(t,e,n,r,i){const s=(t-e)/(n-e);return r+s*(i-r)}function ZE(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function sr(t,e,n){return Math.min(Math.max(t,e),n)}function SI(t,e){return(t%e+e)%e}function l8(t,e){return $n(t.step)?Math.max(ZE(e),2):ZE(t.step)}function EI(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function c8(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function MI(t,e){return $n(t.step)?null:new D6(t.step,e)}function CI(t){return!$n(t.max)&&!$n(t.min)?new jv({max:t.max,min:t.min}):!$n(t.max)||!$n(t.min)?new k6({max:t.max,min:t.min}):null}function AI(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:si(l8(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:EI(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:c8(t,e)}}function TI(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function qx(t){return{constraint:t.constraint,textProps:un.fromObject(AI(t.params,t.initialValue))}}class Yx{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Xv{constructor(e){this.target=e}}class PI extends Xv{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class u8 extends Xv{constructor(e,n){super(e),this.expanded=n}}class d8 extends Xv{constructor(e,n){super(e),this.index=n}}class f8 extends Xv{constructor(e,n){super(e),this.native=n}}class Zx extends Yx{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new _i,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new PI(this,n.binding.target.read(),e.options.last))}}function h8(t,e){const r=Object.keys(e).reduce((i,s)=>{if(i===void 0)return;const o=e[s],a=o(t[s]);return a.succeeded?Object.assign(Object.assign({},i),{[s]:a.value}):void 0},{});return r}function p8(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function m8(t){return t===null?!1:typeof t=="object"}function Fs(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function JE(t){return{custom:e=>Fs(e)(t),boolean:Fs(e=>typeof e=="boolean"?e:void 0)(t),number:Fs(e=>typeof e=="number"?e:void 0)(t),string:Fs(e=>typeof e=="string"?e:void 0)(t),function:Fs(e=>typeof e=="function"?e:void 0)(t),constant:e=>Fs(n=>n===e?e:void 0)(t),raw:Fs(e=>e)(t),object:e=>Fs(n=>{if(m8(n))return h8(n,e)})(t),array:e=>Fs(n=>{if(Array.isArray(n))return p8(n,e)})(t)}}const Ib={optional:JE(!0),required:JE(!1)};function Nr(t,e){const n=e(Ib),r=Ib.required.object(n)(t);return r.succeeded?r.value:void 0}function Ms(t,e,n,r){if(e&&!e(t))return!1;const i=Nr(t,n);return i?r(i):!1}function Cs(t,e){var n;return Rl((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function rm(t){return"value"in t}function v8(t){if(!jx(t)||!("binding"in t))return!1;const e=t.binding;return T6(e)}const ps="http://www.w3.org/2000/svg";function Lm(t){t.offsetHeight}function g8(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function Jx(t){return t.ontouchstart!==void 0}function y8(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const b8={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Kv(t,e){const n=t.createElementNS(ps,"svg");return n.innerHTML=b8[e],n}function RI(t,e,n){t.insertBefore(e,t.children[n])}function Qx(t){t.parentElement&&t.parentElement.removeChild(t)}function LI(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function _8(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function II(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Qs(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function xs(t,e,n){Qs(t.value(e),n)}const x8="tp";function dn(t){return(n,r)=>[x8,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const hd=dn("lbl");function w8(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,s)=>{s>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class S8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(hd()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hd("l")),xs(n.props,"label",s=>{$n(s)?this.element.classList.add(hd(void 0,"nol")):(this.element.classList.remove(hd(void 0,"nol")),_8(r),r.appendChild(w8(e,s)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(hd("v")),this.element.appendChild(i),this.valueElement=i}}class E8{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new S8(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ms(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Cs(null,{label:this.props.get("label")})}}function M8(){return["veryfirst","first","last","verylast"]}const QE=dn(""),eM={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class OI{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{M8().forEach(r=>{n.classList.remove(QE(void 0,eM[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(QE(void 0,eM[r]))})}),this.viewProps.handleDispose(()=>{Qx(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ms(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Cs(null,Object.assign({},this.viewProps.exportState()))}}class C8 extends Yx{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,s=>{r(new f8(this,s.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}}function A8(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function Ou(t,e){return n=>{A8(t,e,n)}}function ew(t,e){Qs(t,n=>{e.textContent=n??""})}const By=dn("btn");class T8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(By()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(By("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(By("t")),ew(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class P8{constructor(e,n){this.emitter=new _i,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new T8(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ms(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Cs(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class tM extends OI{constructor(e,n){const r=new P8(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new E8(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Ms(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Cs(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class kI{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const R8=new kI("2.0.3");function Xr(t){return Object.assign({core:R8},t)}Xr({id:"button",type:"blade",accept(t){const e=Nr(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new tM(t.document,{blade:t.blade,buttonProps:un.fromObject({title:t.params.title}),labelProps:un.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof tM?new C8(t.controller):null}});function L8(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function I8(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function O8(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function k8(t){return jx(t)?"refresh"in t&&typeof t.refresh=="function":!1}function D8(t,e){if(!Rm.isBindable(t))throw pi.notBindable();return new Rm(t,e)}class N8{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new _i,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,D8(e,n),i),a=this.pool_.createBindingApi(o);return this.add(a,i.index)}addFolder(e){return I8(this,e)}addButton(e){return L8(this,e)}addTab(e){return O8(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{k8(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=v8(n.value)?n.value.binding:null;this.emitter_.emit("change",new PI(r,i?i.target.read():n.value.rawValue,e.options.last))}}class tw extends Yx{constructor(e,n){super(e),this.rackApi_=new N8(e.rackController,n)}refresh(){this.rackApi_.refresh()}}class nw extends OI{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ms(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Cs(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Ob(t){return"rackController"in t}class F8{constructor(e){this.emitter=new _i,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw pi.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function B8(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(rm(r)&&r.value===e)return r}return null}function V8(t){return Ob(t)?t.rackController.rack.bcSet_:null}class U8{constructor(e){var n,r;this.emitter=new _i,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new F8(V8),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),rm(r))r.value.emitter.on("change",this.onChildValueChange_);else if(Ob(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(rm(r))r.value.emitter.off("change",this.onChildValueChange_);else if(Ob(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const s=[];i===n&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),i===r&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),i.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=B8(this.find(rm),e.sender);if(!n)throw pi.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class rw{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new U8({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&RI(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Qx(e.bladeController.view.element)}}function DI(){return new un({positions:yr([],{equals:A6})})}class Yf extends un{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=un.createCore(n);return new Yf(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!$n(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};xs(this,"expanded",r),xs(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function $8(t,e){let n=0;return g8(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Lm(e),n=e.clientHeight,t.set("temporaryExpanded",null),Lm(e)}),n}function nM(t,e){e.style.height=t.styleHeight}function iw(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),$n(t.get("expandedHeight"))){const n=$8(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Lm(e)}),t.emitter.on("change",()=>{nM(t,e)}),nM(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class z8 extends tw{constructor(e,n){super(e,n),this.emitter_=new _i,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new u8(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const NI=dn("cnt");class H8{constructor(e,n){var r;this.className_=dn((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),NI()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),xs(this.foldable_,"completed",Ou(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),xs(n.props,"title",c=>{$n(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),ew(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class rM extends nw{constructor(e,n){var r;const i=Yf.create((r=n.expanded)!==null&&r!==void 0?r:!0),s=new H8(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new rw({blade:n.blade,element:s.containerElement,root:n.root,viewProps:n.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,iw(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ms(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Cs(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Xr({id:"folder",type:"blade",accept(t){const e=Nr(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new rM(t.document,{blade:t.blade,expanded:t.params.expanded,props:un.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof rM?new z8(t.controller,t.pool):null}});const G8=dn("");function iM(t,e){return Ou(t,G8(void 0,e))}class Zf extends un{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=O6(yr(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const s=e??{};return new Zf(un.createCore({disabled:(n=s.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=s.hidden)!==null&&r!==void 0?r:!1,parent:(i=s.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Qs(this.globalDisabled_,iM(e,"disabled")),xs(this,"hidden",iM(e,"hidden"))}bindDisabled(e){Qs(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Qs(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const sM=dn("tbp");class W8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sM()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(sM("c")),this.element.appendChild(r),this.containerElement=r}}const pd=dn("tbi");class j8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(pd()),n.viewProps.bindClassModifiers(this.element),xs(n.props,"selected",s=>{s?this.element.classList.add(pd(void 0,"sel")):this.element.classList.remove(pd(void 0,"sel"))});const r=e.createElement("button");r.classList.add(pd("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(pd("t")),ew(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class X8{constructor(e,n){this.emitter=new _i,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new j8(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class kb extends nw{constructor(e,n){const r=new W8(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new rw({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new X8(e,{props:n.itemProps,viewProps:Zf.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,xs(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Ms(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Cs(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class K8 extends tw{constructor(e,n){super(e,n),this.emitter_=new _i,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new kb(n,{blade:DI(),itemProps:un.fromObject({selected:!1,title:e.title}),props:un.fromObject({selected:!1}),viewProps:Zf.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new d8(this,e.rawValue))}}class q8 extends tw{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}}const oM=-1;class Y8{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=yr(!0),this.selectedIndex=yr(oM),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=oM,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const md=dn("tab");class Z8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(md(),NI()),n.viewProps.bindClassModifiers(this.element),Qs(n.empty,Ou(this.element,md(void 0,"nop")));const r=e.createElement("div");r.classList.add(md("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(md("i")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(md("c")),this.element.appendChild(s),this.contentsElement=s}}class aM extends nw{constructor(e,n){const r=new Y8,i=new Z8(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new rw({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;RI(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;Qx(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Xr({id:"tab",type:"blade",accept(t){const e=Nr(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new aM(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new kb(t.document,{blade:DI(),itemProps:un.fromObject({selected:!1,title:n.title}),props:un.fromObject({selected:!1}),viewProps:Zf.create()});e.add(r)}),e},api(t){return t.controller instanceof aM?new K8(t.controller,t.pool):t.controller instanceof kb?new q8(t.controller,t.pool):null}});class sw extends Zx{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class Jf{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function Im(t,e){if(t instanceof e)return t;if(t instanceof Jf){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}class qv{constructor(e){this.values=un.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function Yv(t){var e;const n=Ib;if(Array.isArray(t))return(e=Nr({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function FI(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function ow(t){return $n(t)?null:new qv(FI(t))}const Vy=dn("lst");class J8{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Vy()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(Vy("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(Vy("m")),i.appendChild(Kv(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,xs(this.props_,"options",s=>{LI(this.selectElement),s.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class lu{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new J8(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Ms(e,null,n=>({options:n.required.custom(Yv)}),n=>(this.props.set("options",FI(n.options)),!0))}exportProps(){return Cs(null,{options:this.props.get("options")})}}const lM=dn("pop");class Q8{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(lM()),n.viewProps.bindClassModifiers(this.element),Qs(n.shows,Ou(this.element,lM(void 0,"v")))}}class BI{constructor(e,n){this.shows=yr(!1),this.viewProps=n.viewProps,this.view=new Q8(e,{shows:this.shows,viewProps:this.viewProps})}}const cM=dn("txt");class eW{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cM()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(cM("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class aw{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new eW(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);$n(i)||(this.value.rawValue=i),this.view.refresh()}}function tW(t){return String(t)}function VI(t){return t==="false"?!1:!!t}function uM(t){return tW(t)}function nW(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const rW=si(0);function Om(t){return rW(t)+"%"}function UI(t){return String(t)}function Db(t){return t}function ku({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function s(o){i||(i=!0,o(),i=!1)}t.emitter.on("change",o=>{s(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{t.setRawValue(r(t.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function ti(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Sf(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function so(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function iW(t){return t==="ArrowUp"||t==="ArrowDown"}function $I(t){return iW(t)||t==="ArrowLeft"||t==="ArrowRight"}function Uy(t,e){var n,r;const i=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+s.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+s.top)}}class Wl{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new _i,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Uy(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Uy(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Uy(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Mi=dn("txt");class sW{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Mi(),Mi(void 0,"num")),n.arrayPosition&&this.element.classList.add(Mi(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Mi("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Mi()),this.inputElement.classList.add(Mi("i"));const i=e.createElement("div");i.classList.add(Mi("k")),this.element.appendChild(i),this.knobElement=i;const s=e.createElementNS(ps,"svg");s.classList.add(Mi("g")),this.knobElement.appendChild(s);const o=e.createElementNS(ps,"path");o.classList.add(Mi("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(ps,"path");a.classList.add(Mi("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(dn("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Mi(void 0,"drg"));return}this.element.classList.add(Mi(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=sr(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Qf{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=yr(null),this.view=new sW(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Wl(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),s=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);$n(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=ti(this.props.get("keyScale"),Sf(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){ti(this.props.get("keyScale"),Sf(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const $y=dn("sld");class oW{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add($y()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add($y("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add($y("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=sr(hn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class aW{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new oW(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wl(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(hn(sr(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ti(this.props.get("keyScale"),so(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){ti(this.props.get("keyScale"),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const zy=dn("sldtxt");class lW{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(zy());const r=e.createElement("div");r.classList.add(zy("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(zy("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class dM{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new aW(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new Qf(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new lW(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ms(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Cs(null,{max:e.get("max"),min:e.get("min")})}}function cW(t){return{sliderProps:new un({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new un({formatter:yr(t.formatter),keyScale:t.keyScale,pointerScale:yr(t.pointerScale)})}}const uW={containerUnitSize:"cnt-usz"};function zI(t){return`--${uW[t]}`}function Ef(t){return TI(t)}function Yo(t){if(Lb(t))return Nr(t,Ef)}function qs(t,e){if(!t)return;const n=[],r=MI(t,e);r&&n.push(r);const i=CI(t);return i&&n.push(i),new Jf(n)}function HI(t){if(t==="inline"||t==="popup")return t}function eh(t,e){t.write(e)}const Mp=dn("ckb");class dW{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Mp()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(Mp("l")),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("input");i.classList.add(Mp("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(Mp("w")),this.labelElement.appendChild(s);const o=Kv(e,"check");s.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class fW{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new dW(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function hW(t){const e=[],n=ow(t.options);return n&&e.push(n),new Jf(e)}Xr({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Nr(e,r=>({options:r.optional.custom(Yv),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>VI,constraint:t=>hW(t.params),writer:t=>eh},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Im(r,qv);return i?new lu(e,{props:new un({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new fW(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof lu?new sw(t.controller):null}});const za=dn("col");class pW{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(za()),n.foldable.bindExpandedClass(this.element,za(void 0,"expanded")),xs(n.foldable,"completed",Ou(this.element,za(void 0,"cpl")));const r=e.createElement("div");r.classList.add(za("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(za("s")),r.appendChild(i),this.swatchElement=i;const s=e.createElement("div");if(s.classList.add(za("t")),r.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(za("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function mW(t,e,n){const r=sr(t/255,0,1),i=sr(e/255,0,1),s=sr(n/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let c=0,u=0;const d=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),r===o?c=(i-s)/l:i===o?c=2+(s-r)/l:c=4+(r-i)/l,c=c/6+(c<0?1:0)),[c*360,u*100,d*100]}function vW(t,e,n){const r=(t%360+360)%360,i=sr(e/100,0,1),s=sr(n/100,0,1),o=(1-Math.abs(2*s-1))*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o/2;let c,u,d;return r>=0&&r<60?[c,u,d]=[o,a,0]:r>=60&&r<120?[c,u,d]=[a,o,0]:r>=120&&r<180?[c,u,d]=[0,o,a]:r>=180&&r<240?[c,u,d]=[0,a,o]:r>=240&&r<300?[c,u,d]=[a,0,o]:[c,u,d]=[o,0,a],[(c+l)*255,(u+l)*255,(d+l)*255]}function gW(t,e,n){const r=sr(t/255,0,1),i=sr(e/255,0,1),s=sr(n/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let c;l===0?c=0:o===r?c=60*(((i-s)/l%6+6)%6):o===i?c=60*((s-r)/l+2):c=60*((r-i)/l+4);const u=o===0?0:l/o,d=o;return[c,u*100,d*100]}function GI(t,e,n){const r=SI(t,360),i=sr(e/100,0,1),s=sr(n/100,0,1),o=s*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o;let c,u,d;return r>=0&&r<60?[c,u,d]=[o,a,0]:r>=60&&r<120?[c,u,d]=[a,o,0]:r>=120&&r<180?[c,u,d]=[0,o,a]:r>=180&&r<240?[c,u,d]=[0,a,o]:r>=240&&r<300?[c,u,d]=[a,0,o]:[c,u,d]=[o,0,a],[(c+l)*255,(u+l)*255,(d+l)*255]}function yW(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function bW(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function ws(t){return[t[0],t[1],t[2]]}function Zv(t,e){return[t[0],t[1],t[2],e]}const _W={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:yW,rgb:vW},hsv:{hsl:bW,hsv:(t,e,n)=>[t,e,n],rgb:GI},rgb:{hsl:mW,hsv:gW,rgb:(t,e,n)=>[t,e,n]}};function cu(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function xW(t,e){return t===e?e:SI(t,e)}function WI(t,e,n){var r;const i=cu(e,n);return[e==="rgb"?sr(t[0],0,i[0]):xW(t[0],i[0]),sr(t[1],0,i[1]),sr(t[2],0,i[2]),sr((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function fM(t,e,n,r){const i=cu(e,n),s=cu(e,r);return t.map((o,a)=>o/i[a]*s[a])}function jI(t,e,n){const r=fM(t,e.mode,e.type,"int"),i=_W[e.mode][n.mode](...r);return fM(i,n.mode,"int",n.type)}class an{static black(){return new an([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=WI(e,n,this.type)}getComponents(e){return Zv(jI(ws(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Ro=dn("colp");class wW{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Ro()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Ro("hsv"));const i=e.createElement("div");i.classList.add(Ro("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const s=e.createElement("div");s.classList.add(Ro("h")),this.hPaletteView_=n.hPaletteView,s.appendChild(this.hPaletteView_.element),r.appendChild(s),this.element.appendChild(r);const o=e.createElement("div");if(o.classList.add(Ro("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const a=e.createElement("div");a.classList.add(Ro("a"));const l=e.createElement("div");l.classList.add(Ro("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=e.createElement("div");c.classList.add(Ro("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function SW(t){return t==="int"?"int":t==="float"?"float":void 0}function lw(t){return Nr(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(SW)}),expanded:e.optional.boolean,picker:e.optional.custom(HI),readonly:e.optional.constant(!1)}))}function Ll(t){return t?.1:1}function XI(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class cw{constructor(e,n){this.type="float",this.mode=n,this.comps_=WI(e,n,this.type)}getComponents(e){return Zv(jI(ws(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const EW={int:(t,e)=>new an(t,e),float:(t,e)=>new cw(t,e)};function uw(t,e,n){return EW[n](t,e)}function MW(t){return t.type==="float"}function CW(t){return t.type==="int"}function AW(t){const e=t.getComponents(),n=cu(t.mode,"int");return new an([Math.round(hn(e[0],0,1,0,n[0])),Math.round(hn(e[1],0,1,0,n[1])),Math.round(hn(e[2],0,1,0,n[2])),e[3]],t.mode)}function TW(t){const e=t.getComponents(),n=cu(t.mode,"int");return new cw([hn(e[0],0,n[0],0,1),hn(e[1],0,n[1],0,1),hn(e[2],0,n[2],0,1),e[3]],t.mode)}function Wr(t,e){if(t.type===e)return t;if(CW(t)&&e==="float")return TW(t);if(MW(t)&&e==="int")return AW(t);throw pi.shouldNeverHappen()}function PW(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Ii(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const RW={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function KI(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return RW[r](n)}function qI(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ii(e[1],255),Ii(e[2],255),Ii(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function LW(t){const e=qI(t);return e?new an(e,"rgb"):null}function YI(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ii(e[1],255),Ii(e[2],255),Ii(e[3],255),Ii(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function IW(t){const e=YI(t);return e?new an(e,"rgb"):null}function ZI(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[KI(e[1]),Ii(e[2],100),Ii(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function OW(t){const e=ZI(t);return e?new an(e,"hsl"):null}function JI(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[KI(e[1]),Ii(e[2],100),Ii(e[3],100),Ii(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function kW(t){const e=JI(t);return e?new an(e,"hsl"):null}function QI(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function DW(t){const e=QI(t);return e?new an(e,"rgb"):null}function e2(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),hn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),hn(parseInt(n[4],16),0,255,0,1)]:null}function NW(t){const e=e2(t);return e?new an(e,"rgb"):null}function t2(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function hM(t){return e=>{const n=t2(e);return n?uw(n,"rgb",t):null}}function n2(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function pM(t){return e=>{const n=n2(e);return n?uw(n,"rgb",t):null}}const FW=[{parser:QI,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:e2,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:qI,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:YI,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ZI,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:JI,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:t2,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:n2,result:{alpha:!0,mode:"rgb",notation:"object"}}];function BW(t){return FW.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function VW(t,e="int"){const n=BW(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function th(t){const e=[DW,NW,LW,IW,OW,kW];t==="int"&&e.push(hM("int"),pM("int")),t==="float"&&e.push(hM("float"),pM("float"));const n=nW(e);return r=>{const i=n(r);return i?Wr(i,t):null}}function UW(t){const e=th("int");if(typeof t!="string")return an.black();const n=e(t);return n??an.black()}function r2(t){const e=sr(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function dw(t,e="#"){const n=ws(t.getComponents("rgb")).map(r2).join("");return`${e}${n}`}function fw(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(r2).join("");return`${e}${r}`}function i2(t){const e=si(0),n=Wr(t,"int");return`rgb(${ws(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function im(t){const e=si(2),n=si(0);return`rgba(${Wr(t,"int").getComponents("rgb").map((s,o)=>(o===3?e:n)(s)).join(", ")})`}function $W(t){const e=[si(0),Om,Om],n=Wr(t,"int");return`hsl(${ws(n.getComponents("hsl")).map((i,s)=>e[s](i)).join(", ")})`}function zW(t){const e=[si(0),Om,Om,si(2)];return`hsla(${Wr(t,"int").getComponents("hsl").map((i,s)=>e[s](i)).join(", ")})`}function s2(t,e){const n=si(e==="float"?2:0),r=["r","g","b"],i=Wr(t,e);return`{${ws(i.getComponents("rgb")).map((o,a)=>`${r[a]}: ${n(o)}`).join(", ")}}`}function HW(t){return e=>s2(e,t)}function o2(t,e){const n=si(2),r=si(e==="float"?2:0),i=["r","g","b","a"];return`{${Wr(t,e).getComponents("rgb").map((a,l)=>{const c=l===3?n:r;return`${i[l]}: ${c(a)}`}).join(", ")}}`}function GW(t){return e=>o2(e,t)}const WW=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:dw},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:fw},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:i2},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:im},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:$W},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:zW},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:HW(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:GW(e)}],[])];function a2(t){return WW.reduce((e,n)=>e||(PW(n.format,t)?n.stringifier:null),null)}const vd=dn("apl");class jW{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(vd()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(vd("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(vd("c")),r.appendChild(i),this.colorElem_=i;const s=e.createElement("div");s.classList.add(vd("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(vd("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new an([n[0],n[1],n[2],0],"rgb"),i=new an([n[0],n[1],n[2],255],"rgb"),s=["to right",im(r),im(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=im(e);const o=hn(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class XW{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new jW(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wl(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[s,o,a]=i.getComponents("hsv");this.value.setRawValue(new an([s,o,a,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ti(Ll(!0),so(e));if(n===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new an([i,s,o,a+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ti(Ll(!0),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Sc=dn("coltxt");function KW(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const s=t.createElement("option");return s.textContent=i.text,s.value=i.value,r.appendChild(s),r},t.createDocumentFragment())),e}class qW{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sc()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Sc("m")),this.modeElem_=KW(e),this.modeElem_.classList.add(Sc("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(Sc("mm")),i.appendChild(Kv(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(Sc("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=n.inputViews,this.applyInputViews_(),Qs(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){LI(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(Sc("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function YW(t){return si(t==="float"?2:0)}function ZW(t,e,n){const r=cu(t,e)[n];return new jv({min:0,max:r})}function JW(t,e,n){return new Qf(t,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:un.fromObject({formatter:YW(e.colorType),keyScale:Ll(!1),pointerScale:e.colorType==="float"?.01:1}),value:yr(0,{constraint:ZW(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function QW(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:ha,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=JW(t,n,r);return ku({primary:e.value,secondary:i.value,forward(s){return Wr(s,e.colorType).getComponents(e.colorMode)[r]},backward(s,o){const a=e.colorMode,c=Wr(s,e.colorType).getComponents(a);c[r]=o;const u=uw(Zv(ws(c),c[3]),a,e.colorType);return Wr(u,"int")}}),i})}function ej(t,e){const n=new aw(t,{parser:th("int"),props:un.fromObject({formatter:dw}),value:yr(an.black()),viewProps:e.viewProps});return ku({primary:e.value,secondary:n.value,forward:r=>new an(ws(r.getComponents()),r.mode),backward:(r,i)=>new an(Zv(ws(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function tj(t){return t!=="hex"}class nj{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=yr(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new qW(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return tj(n)?QW(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):ej(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const Hy=dn("hpl");class rj{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Hy()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Hy("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Hy("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=i2(new an([n,100,100],"hsv"));const r=hn(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class ij{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rj(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wl(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=hn(sr(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new an([r,s,o,a],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ti(Ll(!1),so(e));if(n===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new an([i+n,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ti(Ll(!1),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Gy=dn("svp"),mM=64;class sj{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Gy()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=mM,r.width=mM,r.classList.add(Gy("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(Gy("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=y8(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,i,s),a=o.data;for(let u=0;u<s;u++)for(let d=0;d<i;d++){const f=hn(d,0,i,0,100),h=hn(u,0,s,100,0),p=GI(r[0],f,h),g=(u*i+d)*4;a[g]=p[0],a[g+1]=p[1],a[g+2]=p[2],a[g+3]=255}e.putImageData(o,0,0);const l=hn(r[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=hn(r[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class oj{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new sj(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wl(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=hn(e.point.x,0,e.bounds.width,0,100),i=hn(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new an([s,r,i,o],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){$I(e.key)&&e.preventDefault();const[n,r,i,s]=this.value.rawValue.getComponents("hsv"),o=Ll(!1),a=ti(o,so(e)),l=ti(o,Sf(e));a===0&&l===0||this.value.setRawValue(new an([n,r+a,i+l,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Ll(!1),r=ti(n,so(e)),i=ti(n,Sf(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class aj{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new ij(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new oj(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new XW(e,{value:this.value,viewProps:this.viewProps}),text:new Qf(e,{parser:ha,props:un.fromObject({pointerScale:.01,keyScale:.1,formatter:si(2)}),value:yr(0,{constraint:new jv({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ku({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const s=r.getComponents();return s[3]=i,new an(s,r.mode)}}),this.textsC_=new nj(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new wW(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Wy=dn("colsw");class lj{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(Wy()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Wy("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(Wy("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=fw(e)}onValueChange_(){this.update_()}}class cj{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new lj(e,{value:this.value,viewProps:this.viewProps})}}class hw{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Yf.create(n.expanded),this.swatchC_=new cj(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new aw(e,{parser:n.parser,props:un.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new pW(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new BI(e,{viewProps:this.viewProps}):null;const i=new aj(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ku({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iw(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=II(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!Jx(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function uj(t){return ws(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function dj(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function fj(t){return new an([t>>16&255,t>>8&255,t&255],"rgb")}function hj(t){return new an([t>>24&255,t>>16&255,t>>8&255,hn(t&255,0,255,0,1)],"rgb")}function pj(t){return typeof t!="number"?an.black():fj(t)}function mj(t){return typeof t!="number"?an.black():hj(t)}function sm(t,e){return typeof t!="object"||$n(t)?!1:e in t&&typeof t[e]=="number"}function l2(t){return sm(t,"r")&&sm(t,"g")&&sm(t,"b")}function c2(t){return l2(t)&&sm(t,"a")}function u2(t){return l2(t)}function pw(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function vM(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function vj(t){const e=a2(t);return e?(n,r)=>{eh(n,e(r))}:null}function gj(t){const e=t?dj:uj;return(n,r)=>{eh(n,e(r))}}function yj(t,e,n){const i=Wr(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function bj(t,e,n){const i=Wr(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function _j(t,e){return(n,r)=>{t?yj(n,r,e):bj(n,r,e)}}function xj(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function wj(t){return t?e=>fw(e,"0x"):e=>dw(e,"0x")}function Sj(t){return"color"in t||t.view==="color"}Xr({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!Sj(e))return null;const n=lw(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:xj(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?mj:pj,equals:pw,writer:t=>gj(t.params.supportsAlpha)},controller:t=>{var e,n;return new hw(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:wj(t.params.supportsAlpha),parser:th("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Ej(t,e){if(!u2(t))return Wr(an.black(),e);if(e==="int"){const n=vM(t);return new an(n,"rgb")}if(e==="float"){const n=vM(t);return new cw(n,"rgb")}return Wr(an.black(),"int")}function Mj(t){return c2(t)}function Cj(t){return e=>{const n=Ej(e,t);return Wr(n,"int")}}function Aj(t,e){return n=>t?o2(n,e):s2(n,e)}Xr({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!u2(t))return null;const r=lw(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=XI(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>Cj(t.params.colorType),equals:pw,writer:t=>_j(Mj(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=c2(t.initialValue);return new hw(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Aj(r,t.params.colorType),parser:th("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});Xr({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=VW(t,XI(e));if(!n)return null;const r=a2(n);if(!r)return null;const i=lw(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>UW,equals:pw,writer:t=>{const e=vj(t.params.format);if(!e)throw pi.notBindable();return e}},controller:t=>{var e,n;return new hw(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:th("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class mw{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var s,o;return(o=(s=this.components[i])===null||s===void 0?void 0:s.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)}}const gM=dn("pndtxt");class Tj{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(gM()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(gM("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function Pj(t,e,n){return new Qf(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:yr(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class vw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>Pj(e,n,i)),this.acs_.forEach((r,i)=>{ku({primary:this.value,secondary:r.value,forward:s=>n.assembly.toComponents(s)[i],backward:(s,o)=>{const a=n.assembly.toComponents(s);return a[i]=o,n.assembly.fromComponents(a)}})}),this.view=new Tj(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class Rj extends Zx{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function Lj(t,e){const n=[],r=MI(t,e);r&&n.push(r);const i=CI(t);i&&n.push(i);const s=ow(t.options);return s&&n.push(s),new Jf(n)}Xr({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Nr(e,r=>Object.assign(Object.assign({},TI(r)),{options:r.optional.custom(Yv),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wI,constraint:t=>Lj(t.params,t.initialValue),writer:t=>eh},controller:t=>{const e=t.value,n=t.constraint,r=n&&Im(n,qv);if(r)return new lu(t.document,{props:new un({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=AI(t.params,e.rawValue),s=n&&Im(n,jv);return s?new dM(t.document,Object.assign(Object.assign({},cW(Object.assign(Object.assign({},i),{keyScale:yr(i.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:ha,value:e,viewProps:t.viewProps})):new Qf(t.document,{parser:ha,props:un.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof dM?new Rj(t.controller):t.controller.valueController instanceof lu?new sw(t.controller):null}});class sa{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if($n(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const d2={toComponents:t=>t.getComponents(),fromComponents:t=>new sa(...t)},Ec=dn("p2d");class Ij{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ec()),n.viewProps.bindClassModifiers(this.element),Qs(n.expanded,Ou(this.element,Ec(void 0,"expanded")));const r=e.createElement("div");r.classList.add(Ec("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(Ec("b")),i.appendChild(Kv(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const s=e.createElement("div");if(s.classList.add(Ec("t")),r.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Ec("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Lo=dn("p2dp");class Oj{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Lo()),n.layout==="popup"&&this.element.classList.add(Lo(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Lo("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(ps,"svg");i.classList.add(Lo("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=e.createElementNS(ps,"line");s.classList.add(Lo("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(ps,"line");o.classList.add(Lo("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(ps,"line");a.classList.add(Lo("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(Lo("m")),this.padElement.appendChild(l),this.markerElem_=l,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=hn(e,-r,+r,0,100),s=hn(n,-r,+r,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function yM(t,e,n){return[ti(e[0],so(t)),ti(e[1],Sf(t))*(n?1:-1)]}class kj{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Oj(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wl(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=hn(e.point.x,0,e.bounds.width,-r,+r),s=hn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new sa(i,s),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){$I(e.key)&&e.preventDefault();const[n,r]=yM(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new sa(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=yM(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Dj{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Yf.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new BI(e,{viewProps:this.viewProps}):null;const s=new kj(e,{layout:n.pickerLayout,props:new un({invertsY:yr(n.invertsY),max:yr(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new vw(e,{assembly:d2,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Ij(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ku({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iw(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=II(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!Jx(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function Nj(t){return sa.isObject(t)?new sa(t.x,t.y):new sa}function Fj(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Bj(t,e){return new mw({assembly:d2,components:[qs(Object.assign(Object.assign({},t),t.x),e.x),qs(Object.assign(Object.assign({},t),t.y),e.y)]})}function bM(t,e){var n,r;if(!$n(t.min)||!$n(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=EI(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function Vj(t,e){var n,r;const i=bM(Rl(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),s=bM(Rl(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,s)}function Uj(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Xr({id:"input-point2d",type:"input",accept:(t,e)=>{if(!sa.isObject(t))return null;const n=Nr(e,r=>Object.assign(Object.assign({},Ef(r)),{expanded:r.optional.boolean,picker:r.optional.custom(HI),readonly:r.optional.constant(!1),x:r.optional.custom(Yo),y:r.optional.object(Object.assign(Object.assign({},Ef(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Nj,constraint:t=>Bj(t.params,t.initialValue),equals:sa.equals,writer:()=>Fj},controller:t=>{var e,n;const r=t.document,i=t.value,s=t.constraint,o=[t.params.x,t.params.y];return new Dj(r,{axes:i.rawValue.getComponents().map((a,l)=>{var c;return qx({constraint:s.components[l],initialValue:a,params:Rl(t.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Uj(t.params),max:Vj(t.params,i.rawValue),parser:ha,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class jc{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if($n(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const f2={toComponents:t=>t.getComponents(),fromComponents:t=>new jc(...t)};function $j(t){return jc.isObject(t)?new jc(t.x,t.y,t.z):new jc}function zj(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function Hj(t,e){return new mw({assembly:f2,components:[qs(Object.assign(Object.assign({},t),t.x),e.x),qs(Object.assign(Object.assign({},t),t.y),e.y),qs(Object.assign(Object.assign({},t),t.z),e.z)]})}Xr({id:"input-point3d",type:"input",accept:(t,e)=>{if(!jc.isObject(t))return null;const n=Nr(e,r=>Object.assign(Object.assign({},Ef(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Yo),y:r.optional.custom(Yo),z:r.optional.custom(Yo)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>$j,constraint:t=>Hj(t.params,t.initialValue),equals:jc.equals,writer:t=>zj},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new vw(t.document,{assembly:f2,axes:e.rawValue.getComponents().map((i,s)=>{var o;return qx({constraint:n.components[s],initialValue:i,params:Rl(t.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:ha,value:e,viewProps:t.viewProps})}});class Xc{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if($n(e))return!1;const n=e.x,r=e.y,i=e.z,s=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const h2={toComponents:t=>t.getComponents(),fromComponents:t=>new Xc(...t)};function Gj(t){return Xc.isObject(t)?new Xc(t.x,t.y,t.z,t.w):new Xc}function Wj(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function jj(t,e){return new mw({assembly:h2,components:[qs(Object.assign(Object.assign({},t),t.x),e.x),qs(Object.assign(Object.assign({},t),t.y),e.y),qs(Object.assign(Object.assign({},t),t.z),e.z),qs(Object.assign(Object.assign({},t),t.w),e.w)]})}Xr({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Xc.isObject(t))return null;const n=Nr(e,r=>Object.assign(Object.assign({},Ef(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Yo),x:r.optional.custom(Yo),y:r.optional.custom(Yo),z:r.optional.custom(Yo)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Gj,constraint:t=>jj(t.params,t.initialValue),equals:Xc.equals,writer:t=>Wj},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new vw(t.document,{assembly:h2,axes:e.rawValue.getComponents().map((i,s)=>{var o;return qx({constraint:n.components[s],initialValue:i,params:Rl(t.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:ha,value:e,viewProps:t.viewProps})}});function Xj(t){const e=[],n=ow(t.options);return n&&e.push(n),new Jf(e)}Xr({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Nr(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(Yv)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>UI,constraint:t=>Xj(t.params),writer:t=>eh},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Im(r,qv);return i?new lu(e,{props:new un({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new aw(e,{parser:s=>s,props:un.fromObject({formatter:Db}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof lu?new sw(t.controller):null}});const Jv={monitor:{defaultInterval:200,defaultRows:3}},_M=dn("mll");class Kj{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(_M()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(_M("i")),r.style.height=`calc(var(${zI("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class gw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Kj(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const xM=dn("sgl");class qj{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(xM()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(xM("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class yw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new qj(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Xr({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Nr(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>VI},controller:t=>{var e;return t.value.rawValue.length===1?new yw(t.document,{formatter:uM,value:t.value,viewProps:t.viewProps}):new gw(t.document,{formatter:uM,rows:(e=t.params.rows)!==null&&e!==void 0?e:Jv.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class Yj extends Zx{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Io=dn("grl");class Zj{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Io()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(ps,"svg");r.classList.add(Io("g")),r.style.height=`calc(var(${zI("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(ps,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=e.createElement("div");s.classList.add(Io("t"),dn("tt")()),this.element.appendChild(s),this.tooltipElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((d,f)=>{if(d===void 0)return;const h=hn(f,0,r,0,e),p=hn(d,i,s,n,0);o.push([h,p].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(Io("t","a"));return}const c=hn(this.cursor_.rawValue,0,r,0,e),u=hn(l,i,s,n,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(Io("t","a"))||(a.classList.add(Io("t","a"),Io("t","in")),Lm(a),a.classList.remove(Io("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class p2{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=yr(-1),this.view=new Zj(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Jx(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Wl(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ms(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Cs(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(hn(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(hn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Nb(t){return $n(t.format)?si(2):t.format}function Jj(t){var e;return t.value.rawValue.length===1?new yw(t.document,{formatter:Nb(t.params),value:t.value,viewProps:t.viewProps}):new gw(t.document,{formatter:Nb(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:Jv.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function Qj(t){var e,n,r;return new p2(t.document,{formatter:Nb(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:Jv.monitor.defaultRows,props:un.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function wM(t){return t.view==="graph"}Xr({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Nr(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>wM(t)?64:1,reader:t=>wI},controller:t=>wM(t.params)?Qj(t):Jj(t),api:t=>t.controller.valueController instanceof p2?new Yj(t.controller):null});Xr({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Nr(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>UI},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new gw(t.document,{formatter:Db,rows:(e=t.params.rows)!==null&&e!==void 0?e:Jv.monitor.defaultRows,value:n,viewProps:t.viewProps}):new yw(t.document,{formatter:Db,value:n,viewProps:t.viewProps})}});new kI("4.0.3");const e9=parseInt(Cu.replace(/\D+/g,""));var t9=Object.defineProperty,n9=(t,e,n)=>e in t?t9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r9=(t,e,n)=>(n9(t,typeof e!="symbol"?e+"":e,n),n);async function SM(t){const e=await t.arrayBuffer(),n=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${t.type||""};base64,${n}`}let Cp,jy,Mc,Ap;function Xy(t,e=1/0,n=null){jy||(jy=new zl(2,2,1,1)),Mc||(Mc=new ii({uniforms:{blitTexture:new $v(t)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),Mc.uniforms.blitTexture.value=t,Mc.defines.IS_SRGB="colorSpace"in t?t.colorSpace==="srgb":t.encoding===3001,Mc.needsUpdate=!0,Ap||(Ap=new En(jy,Mc),Ap.frustrumCulled=!1);const r=new yn,i=new ou;i.add(Ap),n||(n=Cp=new Wc({antialias:!1})),n.setSize(Math.min(t.image.width,e),Math.min(t.image.height,e)),n.clear(),n.render(i,r);const s=new kn(n.domElement);return s.minFilter=t.minFilter,s.magFilter=t.magFilter,s.wrapS=t.wrapS,s.wrapT=t.wrapT,s.name=t.name,Cp&&(Cp.dispose(),Cp=null),s}const EM={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class m2{constructor(){this.pluginCallbacks=[],this.register(function(e){return new h9(e)}),this.register(function(e){return new p9(e)}),this.register(function(e){return new g9(e)}),this.register(function(e){return new y9(e)}),this.register(function(e){return new b9(e)}),this.register(function(e){return new _9(e)}),this.register(function(e){return new m9(e)}),this.register(function(e){return new v9(e)}),this.register(function(e){return new x9(e)}),this.register(function(e){return new w9(e)}),this.register(function(e){return new S9(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){const s=new f9,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,n,i).catch(r)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,i,s,n)})}}r9(m2,"Utils",{insertKeyframe:function(t,e){const n=t.getValueSize(),r=new t.TimeBufferType(t.times.length+1),i=new t.ValueBufferType(t.values.length+n),s=t.createInterpolant(new t.ValueBufferType(n));let o;if(t.times.length===0){r[0]=e;for(let a=0;a<n;a++)i[a]=0;o=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<.001)return 0;r[0]=e,r.set(t.times,1),i.set(s.evaluate(e),0),i.set(t.values,n),o=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<.001)return t.times.length-1;r[r.length-1]=e,r.set(t.times,0),i.set(t.values,0),i.set(s.evaluate(e),t.values.length),o=r.length-1}else for(let a=0;a<t.times.length;a++){if(Math.abs(t.times[a]-e)<.001)return a;if(t.times[a]<e&&t.times[a+1]>e){r.set(t.times.slice(0,a+1),0),r[a+1]=e,r.set(t.times.slice(a+1),a+2),i.set(t.values.slice(0,(a+1)*n),0),i.set(s.evaluate(e),(a+1)*n),i.set(t.values.slice((a+1)*n),(a+2)*n),o=a+1;break}}return t.times=r,t.values=i,o},mergeMorphTargetTracks:function(t,e){const n=[],r={},i=t.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=Vt.parseTrackName(o.name),l=Vt.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){n.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(da)}const c=l.morphTargetInfluences.length,u=l.morphTargetDictionary[a.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let d;if(r[l.uuid]===void 0){d=o.clone();const h=new d.ValueBufferType(c*d.times.length);for(let p=0;p<d.times.length;p++)h[p*c+u]=d.values[p];d.name=(a.nodeName||"")+".morphTargetInfluences",d.values=h,r[l.uuid]=d,n.push(d);continue}const f=o.createInterpolant(new o.ValueBufferType(1));d=r[l.uuid];for(let h=0;h<d.times.length;h++)d.values[h*c+u]=f.evaluate(d.times[h]);for(let h=0;h<o.times.length;h++){const p=this.insertKeyframe(d,o.times[h]);d.values[p*c+u]=o.values[h]}}return t.tracks=n,t}});const zt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Ky="KHR_mesh_quantization",vi={};vi[Vn]=zt.NEAREST;vi[nu]=zt.NEAREST_MIPMAP_NEAREST;vi[fl]=zt.NEAREST_MIPMAP_LINEAR;vi[Nn]=zt.LINEAR;vi[Vf]=zt.LINEAR_MIPMAP_NEAREST;vi[Qi]=zt.LINEAR_MIPMAP_LINEAR;vi[pr]=zt.CLAMP_TO_EDGE;vi[no]=zt.REPEAT;vi[xl]=zt.MIRRORED_REPEAT;const MM={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},i9=new Ke,CM=12,s9=1179937895,o9=2,AM=8,a9=1313821514,l9=5130562;function Rd(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})}function c9(t){return new TextEncoder().encode(t).buffer}function u9(t){return Rd(t.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function d9(t,e,n){const r={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+n;i++)for(let s=0;s<t.itemSize;s++){let o;t.itemSize>4?o=t.array[i*t.itemSize+s]:(s===0?o=t.getX(i):s===1?o=t.getY(i):s===2?o=t.getZ(i):s===3&&(o=t.getW(i)),t.normalized===!0&&(o=Ml.normalize(o,t.array))),r.min[s]=Math.min(r.min[s],o),r.max[s]=Math.max(r.max[s],o)}return r}function v2(t){return Math.ceil(t/4)*4}function qy(t,e=0){const n=v2(t.byteLength);if(n!==t.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(t)),e!==0)for(let i=t.byteLength;i<n;i++)r[i]=e;return r.buffer}return t}function TM(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function PM(t,e){if(t.toBlob!==void 0)return new Promise(r=>t.toBlob(r,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),t.convertToBlob({type:e,quality:n})}class f9{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,n,r={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;r=i.options;const a=i.extensionsUsed,l=i.extensionsRequired,c=new Blob(s,{type:"application/octet-stream"}),u=Object.keys(a),d=Object.keys(l);u.length>0&&(o.extensionsUsed=u),d.length>0&&(o.extensionsRequired=d),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=c.size),r.binary===!0?c.arrayBuffer().then(f=>{const h=qy(f),p=new DataView(new ArrayBuffer(AM));p.setUint32(0,h.byteLength,!0),p.setUint32(4,l9,!0);const g=qy(c9(JSON.stringify(o)),32),m=new DataView(new ArrayBuffer(AM));m.setUint32(0,g.byteLength,!0),m.setUint32(4,a9,!0);const v=new ArrayBuffer(CM),b=new DataView(v);b.setUint32(0,s9,!0),b.setUint32(4,o9,!0);const y=CM+m.byteLength+g.byteLength+p.byteLength+h.byteLength;b.setUint32(8,y,!0),new Blob([v,m,g,p,h],{type:"application/octet-stream"}).arrayBuffer().then(n)}):o.buffers&&o.buffers.length>0?SM(c).then(f=>{o.buffers[0].uri=f,n(o)}):n(o)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const o in s.gltfExtensions)n.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(n.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(e,r)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new W;for(let r=0,i=e.count;r<i;r++)if(Math.abs(n.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const r=e.clone(),i=new W;for(let s=0,o=r.count;s<o;s++)i.fromBufferAttribute(r,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(s,i.x,i.y,i.z);return n.attributesNormalized.set(e,r),r}applyTextureTransform(e,n){let r=!1;const i={};(n.offset.x!==0||n.offset.y!==0)&&(i.offset=n.offset.toArray(),r=!0),n.rotation!==0&&(i.rotation=n.rotation,r=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(i.scale=n.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,n){if(e===n)return e;function r(f){return("colorSpace"in f?f.colorSpace==="srgb":f.encoding===3001)?function(h){return h<.04045?h*.0773993808:Math.pow(h*.9478672986+.0521327014,2.4)}:function(h){return h}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof ml&&(e=Xy(e)),n instanceof ml&&(n=Xy(n));const i=e?e.image:null,s=n?n.image:null,o=Math.max(i?i.width:0,s?s.width:0),a=Math.max(i?i.height:0,s?s.height:0),l=TM();l.width=o,l.height=a;const c=l.getContext("2d");c.fillStyle="#00ffff",c.fillRect(0,0,o,a);const u=c.getImageData(0,0,o,a);if(i){c.drawImage(i,0,0,o,a);const f=r(e),h=c.getImageData(0,0,o,a).data;for(let p=2;p<h.length;p+=4)u.data[p]=f(h[p]/256)*256}if(s){c.drawImage(s,0,0,o,a);const f=r(n),h=c.getImageData(0,0,o,a).data;for(let p=1;p<h.length;p+=4)u.data[p]=f(h[p]/256)*256}c.putImageData(u,0,0);const d=(e||n).clone();return d.source=new kn(l).source,"colorSpace"in d?d.colorSpace="":d.encoding=3e3,d.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),d}processBuffer(e){const n=this.json,r=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,n,r,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;switch(n){case zt.BYTE:case zt.UNSIGNED_BYTE:a=1;break;case zt.SHORT:case zt.UNSIGNED_SHORT:a=2;break;default:a=4}const l=v2(i*e.itemSize*a),c=new DataView(new ArrayBuffer(l));let u=0;for(let f=r;f<r+i;f++)for(let h=0;h<e.itemSize;h++){let p;e.itemSize>4?p=e.array[f*e.itemSize+h]:(h===0?p=e.getX(f):h===1?p=e.getY(f):h===2?p=e.getZ(f):h===3&&(p=e.getW(f)),e.normalized===!0&&(p=Ml.normalize(p,e.array))),n===zt.FLOAT?c.setFloat32(u,p,!0):n===zt.INT?c.setInt32(u,p,!0):n===zt.UNSIGNED_INT?c.setUint32(u,p,!0):n===zt.SHORT?c.setInt16(u,p,!0):n===zt.UNSIGNED_SHORT?c.setUint16(u,p,!0):n===zt.BYTE?c.setInt8(u,p):n===zt.UNSIGNED_BYTE&&c.setUint8(u,p),u+=a}const d={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};return s!==void 0&&(d.target=s),s===zt.ARRAY_BUFFER&&(d.byteStride=e.itemSize*a),this.byteOffset+=l,o.bufferViews.push(d),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,r=n.json;return r.bufferViews||(r.bufferViews=[]),e.arrayBuffer().then(i=>{const s=qy(i),o={buffer:n.processBuffer(s),byteOffset:n.byteOffset,byteLength:s.byteLength};return n.byteOffset+=s.byteLength,r.bufferViews.push(o)-1})}processAccessor(e,n,r,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=zt.FLOAT;else if(e.array.constructor===Int32Array)a=zt.INT;else if(e.array.constructor===Uint32Array)a=zt.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=zt.SHORT;else if(e.array.constructor===Uint16Array)a=zt.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=zt.BYTE;else if(e.array.constructor===Uint8Array)a=zt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(r===void 0&&(r=0),i===void 0&&(i=e.count),i===0)return null;const l=d9(e,r,i);let c;n!==void 0&&(c=e===n.index?zt.ELEMENT_ARRAY_BUFFER:zt.ARRAY_BUFFER);const u=this.processBufferView(e,a,r,i,c),d={bufferView:u.id,byteOffset:u.byteOffset,componentType:a,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(d)-1}processImage(e,n,r,i="image/png"){if(e!==null){const s=this,o=s.cache,a=s.json,l=s.options,c=s.pending;o.images.has(e)||o.images.set(e,{});const u=o.images.get(e),d=i+":flipY/"+r.toString();if(u[d]!==void 0)return u[d];a.images||(a.images=[]);const f={mimeType:i},h=TM();h.width=Math.min(e.width,l.maxTextureSize),h.height=Math.min(e.height,l.maxTextureSize);const p=h.getContext("2d");if(r===!0&&(p.translate(0,h.height),p.scale(1,-1)),e.data!==void 0){n!==Hr&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let v=0;v<m.length;v+=4)m[v+0]=e.data[v+0],m[v+1]=e.data[v+1],m[v+2]=e.data[v+2],m[v+3]=e.data[v+3];p.putImageData(new ImageData(m,e.width,e.height),0,0)}else p.drawImage(e,0,0,h.width,h.height);l.binary===!0?c.push(PM(h,i).then(m=>s.processBufferViewImage(m)).then(m=>{f.bufferView=m})):h.toDataURL!==void 0?f.uri=h.toDataURL(i):c.push(PM(h,i).then(SM).then(m=>{f.uri=m}));const g=a.images.push(f)-1;return u[d]=g,g}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const r={magFilter:vi[e.magFilter],minFilter:vi[e.minFilter],wrapS:vi[e.wrapS],wrapT:vi[e.wrapT]};return n.samplers.push(r)-1}processTexture(e){const n=this.options,r=this.cache,i=this.json;if(r.textures.has(e))return r.textures.get(e);i.textures||(i.textures=[]),e instanceof ml&&(e=Xy(e,n.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(o.name=e.name),this._invokeAll(function(l){l.writeTexture&&l.writeTexture(e,o)});const a=i.textures.push(o)-1;return r.textures.set(e,a),a}processMaterial(e){const n=this.cache,r=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(Rd(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a),channel:a.channel};this.applyTextureTransform(l,a),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const l={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){const a={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Qr&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=r.materials.push(i)-1;return n.materials.set(e,o),o}processMesh(e){const n=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,E=e.material.length;y<E;y++)i.push(e.material[y].uuid);else i.push(e.material.uuid);const s=i.join(":");if(n.meshes.has(s))return n.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=zt.LINES:e.isLineLoop?a=zt.LINE_LOOP:e.isLine?a=zt.LINE_STRIP:e.isPoints?a=zt.POINTS:a=e.material.wireframe?zt.LINES:zt.TRIANGLES;const l={},c={},u=[],d=[],f={...e9>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},h=o.getAttribute("normal");h!==void 0&&!this.isNormalizedNormalAttribute(h)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(h)));let p=null;for(let y in o.attributes){if(y.slice(0,5)==="morph")continue;const E=o.attributes[y];if(y=f[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),n.attributes.has(this.getUID(E))){c[y]=n.attributes.get(this.getUID(E));continue}p=null;const T=E.array;y==="JOINTS_0"&&!(T instanceof Uint16Array)&&!(T instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new Ut(new Uint16Array(T),E.itemSize,E.normalized));const _=this.processAccessor(p||E,o);_!==null&&(y.startsWith("_")||this.detectMeshQuantization(y,E),c[y]=_,n.attributes.set(this.getUID(E),_))}if(h!==void 0&&o.setAttribute("normal",h),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const y=[],E=[],T={};if(e.morphTargetDictionary!==void 0)for(const _ in e.morphTargetDictionary)T[e.morphTargetDictionary[_]]=_;for(let _=0;_<e.morphTargetInfluences.length;++_){const w={};let M=!1;for(const x in o.morphAttributes){if(x!=="position"&&x!=="normal"){M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);continue}const S=o.morphAttributes[x][_],R=x.toUpperCase(),I=o.attributes[x];if(n.attributes.has(this.getUID(S,!0))){w[R]=n.attributes.get(this.getUID(S,!0));continue}const z=S.clone();if(!o.morphTargetsRelative)for(let P=0,B=S.count;P<B;P++)for(let U=0;U<S.itemSize;U++)U===0&&z.setX(P,S.getX(P)-I.getX(P)),U===1&&z.setY(P,S.getY(P)-I.getY(P)),U===2&&z.setZ(P,S.getZ(P)-I.getZ(P)),U===3&&z.setW(P,S.getW(P)-I.getW(P));w[R]=this.processAccessor(z,o),n.attributes.set(this.getUID(I,!0),w[R])}d.push(w),y.push(e.morphTargetInfluences[_]),e.morphTargetDictionary!==void 0&&E.push(T[_])}l.weights=y,E.length>0&&(l.extras={},l.extras.targetNames=E)}const g=Array.isArray(e.material);if(g&&o.groups.length===0)return null;const m=g?e.material:[e.material],v=g?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,E=v.length;y<E;y++){const T={mode:a,attributes:c};if(this.serializeUserData(o,T),d.length>0&&(T.targets=d),o.index!==null){let w=this.getUID(o.index);(v[y].start!==void 0||v[y].count!==void 0)&&(w+=":"+v[y].start+":"+v[y].count),n.attributes.has(w)?T.indices=n.attributes.get(w):(T.indices=this.processAccessor(o.index,o,v[y].start,v[y].count),n.attributes.set(w,T.indices)),T.indices===null&&delete T.indices}const _=this.processMaterial(m[v[y].materialIndex]);_!==null&&(T.material=_),u.push(T)}l.primitives=u,r.meshes||(r.meshes=[]),this._invokeAll(function(y){y.writeMesh&&y.writeMesh(e,l)});const b=r.meshes.push(l)-1;return n.meshes.set(s,b),b}detectMeshQuantization(e,n){if(this.extensionsUsed[Ky])return;let r;switch(n.array.constructor){case Int8Array:r="byte";break;case Uint8Array:r="unsigned byte";break;case Int16Array:r="short";break;case Uint16Array:r="unsigned short";break;default:return}n.normalized&&(r+=" normalized");const i=e.split("_",1)[0];EM[i]&&EM[i].includes(r)&&(this.extensionsUsed[Ky]=!0,this.extensionsRequired[Ky]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Ml.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),n.cameras.push(i)-1}processAnimation(e,n){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=m2.Utils.mergeMorphTargetTracks(e.clone(),n);const s=e.tracks,o=[],a=[];for(let l=0;l<s.length;++l){const c=s[l],u=Vt.parseTrackName(c.name);let d=Vt.findNode(n,u.nodeName);const f=MM[u.propertyName];if(u.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(u.objectIndex):d=void 0),!d||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name),null;const h=1;let p=c.values.length/c.times.length;f===MM.morphTargetInfluences&&(p/=d.morphTargetInfluences.length);let g;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(g="CUBICSPLINE",p/=3):c.getInterpolation()===El?g="STEP":g="LINEAR",a.push({input:this.processAccessor(new Ut(c.times,h)),output:this.processAccessor(new Ut(c.values,p)),interpolation:g}),o.push({sampler:a.length-1,target:{node:i.get(d),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:o}),r.animations.length-1}processSkin(e){const n=this.json,r=this.nodeMap,i=n.nodes[r.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(s.bones.length*16),c=new pt;for(let u=0;u<s.bones.length;++u)a.push(r.get(s.bones[u])),c.copy(s.boneInverses[u]),c.multiply(e.bindMatrix).toArray(l,u*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new Ut(l,16)),joints:a,skeleton:r.get(o)}),i.skin=n.skins.length-1}processNode(e){const n=this.json,r=this.options,i=this.nodeMap;n.nodes||(n.nodes=[]);const s={};if(r.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();Rd(a,[0,0,0,1])||(s.rotation=a),Rd(l,[0,0,0])||(s.translation=l),Rd(c,[1,1,1])||(s.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),u9(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,c=e.children.length;l<c;l++){const u=e.children[l];if(u.visible||r.onlyVisible===!1){const d=this.processNode(u);d!==null&&a.push(d)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=n.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const n=this.json,r=this.options;n.scenes||(n.scenes=[],n.scene=0);const i={};e.name!==""&&(i.name=e.name),n.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const c=this.processNode(l);c!==null&&s.push(c)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const n=new ou;n.name="AuxScene";for(let r=0;r<e.length;r++)n.children.push(e[r]);this.processScene(n)}processInput(e){const n=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof ou?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<n.animations.length;++i)this.processAnimation(n.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let n=0,r=this.plugins.length;n<r;n++)e(this.plugins[n])}}class h9{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,s=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),n.extensions=n.extensions||{},n.extensions[this.name]={light:a.length-1}}}let p9=class{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(!t.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},m9=class{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.clearcoat===0)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=t.clearcoat,t.clearcoatMap){const s={index:n.processTexture(t.clearcoatMap),texCoord:t.clearcoatMap.channel};n.applyTextureTransform(s,t.clearcoatMap),i.clearcoatTexture=s}if(i.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const s={index:n.processTexture(t.clearcoatRoughnessMap),texCoord:t.clearcoatRoughnessMap.channel};n.applyTextureTransform(s,t.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=s}if(t.clearcoatNormalMap){const s={index:n.processTexture(t.clearcoatNormalMap),texCoord:t.clearcoatNormalMap.channel};n.applyTextureTransform(s,t.clearcoatNormalMap),i.clearcoatNormalTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},v9=class{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.iridescence===0)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=t.iridescence,t.iridescenceMap){const s={index:n.processTexture(t.iridescenceMap),texCoord:t.iridescenceMap.channel};n.applyTextureTransform(s,t.iridescenceMap),i.iridescenceTexture=s}if(i.iridescenceIor=t.iridescenceIOR,i.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){const s={index:n.processTexture(t.iridescenceThicknessMap),texCoord:t.iridescenceThicknessMap.channel};n.applyTextureTransform(s,t.iridescenceThicknessMap),i.iridescenceThicknessTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},g9=class{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=t.transmission,t.transmissionMap){const s={index:n.processTexture(t.transmissionMap),texCoord:t.transmissionMap.channel};n.applyTextureTransform(s,t.transmissionMap),i.transmissionTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},y9=class{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=t.thickness,t.thicknessMap){const s={index:n.processTexture(t.thicknessMap),texCoord:t.thicknessMap.channel};n.applyTextureTransform(s,t.thicknessMap),i.thicknessTexture=s}i.attenuationDistance=t.attenuationDistance,i.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},b9=class{constructor(t){this.writer=t,this.name="KHR_materials_ior"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.ior===1.5)return;const n=this.writer.extensionsUsed,r={};r.ior=t.ior,e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}},_9=class{constructor(t){this.writer=t,this.name="KHR_materials_specular"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.specularIntensity===1&&t.specularColor.equals(i9)&&!t.specularIntensityMap&&!t.specularColorTexture)return;const n=this.writer,r=n.extensionsUsed,i={};if(t.specularIntensityMap){const s={index:n.processTexture(t.specularIntensityMap),texCoord:t.specularIntensityMap.channel};n.applyTextureTransform(s,t.specularIntensityMap),i.specularTexture=s}if(t.specularColorMap){const s={index:n.processTexture(t.specularColorMap),texCoord:t.specularColorMap.channel};n.applyTextureTransform(s,t.specularColorMap),i.specularColorTexture=s}i.specularFactor=t.specularIntensity,i.specularColorFactor=t.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},x9=class{constructor(t){this.writer=t,this.name="KHR_materials_sheen"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.sheen==0)return;const n=this.writer,r=n.extensionsUsed,i={};if(t.sheenRoughnessMap){const s={index:n.processTexture(t.sheenRoughnessMap),texCoord:t.sheenRoughnessMap.channel};n.applyTextureTransform(s,t.sheenRoughnessMap),i.sheenRoughnessTexture=s}if(t.sheenColorMap){const s={index:n.processTexture(t.sheenColorMap),texCoord:t.sheenColorMap.channel};n.applyTextureTransform(s,t.sheenColorMap),i.sheenColorTexture=s}i.sheenRoughnessFactor=t.sheenRoughness,i.sheenColorFactor=t.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},w9=class{constructor(t){this.writer=t,this.name="KHR_materials_anisotropy"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||t.anisotropy==0)return;const n=this.writer,r=n.extensionsUsed,i={};if(t.anisotropyMap){const s={index:n.processTexture(t.anisotropyMap)};n.applyTextureTransform(s,t.anisotropyMap),i.anisotropyTexture=s}i.anisotropyStrength=t.anisotropy,i.anisotropyRotation=t.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=i,r[this.name]=!0}},S9=class{constructor(t){this.writer=t,this.name="KHR_materials_emissive_strength"}writeMaterial(t,e){if(!t.isMeshStandardMaterial||t.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,r={};r.emissiveStrength=t.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};var nh=Uint8Array,g2=Uint16Array,E9=Uint32Array,M9=new nh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C9=new nh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),y2=function(t,e){for(var n=new g2(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new E9(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},b2=y2(M9,2),A9=b2[0],T9=b2[1];A9[28]=258,T9[258]=28;y2(C9,0);var P9=new g2(32768);for(var On=0;On<32768;++On){var Oo=(On&43690)>>>1|(On&21845)<<1;Oo=(Oo&52428)>>>2|(Oo&13107)<<2,Oo=(Oo&61680)>>>4|(Oo&3855)<<4,P9[On]=((Oo&65280)>>>8|(Oo&255)<<8)>>>1}var Qv=new nh(288);for(var On=0;On<144;++On)Qv[On]=8;for(var On=144;On<256;++On)Qv[On]=9;for(var On=256;On<280;++On)Qv[On]=7;for(var On=280;On<288;++On)Qv[On]=8;var R9=new nh(32);for(var On=0;On<32;++On)R9[On]=5;var L9=new nh(0),I9=typeof TextDecoder<"u"&&new TextDecoder,O9=0;try{I9.decode(L9,{stream:!0}),O9=1}catch{}new $r;new W;new $l(0,0,0,"YXZ");new W;var k9=Object.defineProperty,D9=(t,e,n)=>e in t?k9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bt=(t,e,n)=>(D9(t,typeof e!="symbol"?e+"":e,n),n);const Tp=new Ul,RM=new ds,N9=Math.cos(70*(Math.PI/180)),LM=(t,e)=>(t%e+e)%e;class F9 extends Es{constructor(e,n){super(),bt(this,"object"),bt(this,"domElement"),bt(this,"enabled",!0),bt(this,"target",new W),bt(this,"minDistance",0),bt(this,"maxDistance",1/0),bt(this,"minZoom",0),bt(this,"maxZoom",1/0),bt(this,"minPolarAngle",0),bt(this,"maxPolarAngle",Math.PI),bt(this,"minAzimuthAngle",-1/0),bt(this,"maxAzimuthAngle",1/0),bt(this,"enableDamping",!1),bt(this,"dampingFactor",.05),bt(this,"enableZoom",!0),bt(this,"zoomSpeed",1),bt(this,"enableRotate",!0),bt(this,"rotateSpeed",1),bt(this,"enablePan",!0),bt(this,"panSpeed",1),bt(this,"screenSpacePanning",!0),bt(this,"keyPanSpeed",7),bt(this,"zoomToCursor",!1),bt(this,"autoRotate",!1),bt(this,"autoRotateSpeed",2),bt(this,"reverseOrbit",!1),bt(this,"reverseHorizontalOrbit",!1),bt(this,"reverseVerticalOrbit",!1),bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),bt(this,"mouseButtons",{LEFT:Ka.ROTATE,MIDDLE:Ka.DOLLY,RIGHT:Ka.PAN}),bt(this,"touches",{ONE:Hs.ROTATE,TWO:Hs.DOLLY_PAN}),bt(this,"target0"),bt(this,"position0"),bt(this,"zoom0"),bt(this,"_domElementKeyEvents",null),bt(this,"getPolarAngle"),bt(this,"getAzimuthalAngle"),bt(this,"setPolarAngle"),bt(this,"setAzimuthalAngle"),bt(this,"getDistance"),bt(this,"listenToKeyEvents"),bt(this,"stopListenToKeyEvents"),bt(this,"saveState"),bt(this,"reset"),bt(this,"update"),bt(this,"connect"),bt(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=oe=>{let Le=LM(oe,2*Math.PI),tt=u.phi;tt<0&&(tt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Ge=Math.abs(Le-tt);2*Math.PI-Ge<Ge&&(Le<tt?Le+=2*Math.PI:tt+=2*Math.PI),d.phi=Le-tt,r.update()},this.setAzimuthalAngle=oe=>{let Le=LM(oe,2*Math.PI),tt=u.theta;tt<0&&(tt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Ge=Math.abs(Le-tt);2*Math.PI-Ge<Ge&&(Le<tt?Le+=2*Math.PI:tt+=2*Math.PI),d.theta=Le-tt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=oe=>{oe.addEventListener("keydown",Ne),this._domElementKeyEvents=oe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const oe=new W,Le=new W(0,1,0),tt=new tr().setFromUnitVectors(e.up,Le),Ge=tt.clone().invert(),$e=new W,ce=new tr,Je=2*Math.PI;return function(){const nt=r.object.position;tt.setFromUnitVectors(e.up,Le),Ge.copy(tt).invert(),oe.copy(nt).sub(r.target),oe.applyQuaternion(tt),u.setFromVector3(oe),r.autoRotate&&l===a.NONE&&P(I()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let ft=r.minAzimuthAngle,at=r.maxAzimuthAngle;isFinite(ft)&&isFinite(at)&&(ft<-Math.PI?ft+=Je:ft>Math.PI&&(ft-=Je),at<-Math.PI?at+=Je:at>Math.PI&&(at-=Je),ft<=at?u.theta=Math.max(ft,Math.min(at,u.theta)):u.theta=u.theta>(ft+at)/2?Math.max(ft,u.theta):Math.min(at,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&x||r.object.isOrthographicCamera?u.radius=Se(u.radius):u.radius=Se(u.radius*f),oe.setFromSpherical(u),oe.applyQuaternion(Ge),nt.copy(r.target).add(oe),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),h.set(0,0,0));let Zt=!1;if(r.zoomToCursor&&x){let Jt=null;if(r.object instanceof yn&&r.object.isPerspectiveCamera){const Cn=oe.length();Jt=Se(Cn*f);const Dn=Cn-Jt;r.object.position.addScaledVector(w,Dn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Cn=new W(M.x,M.y,0);Cn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Zt=!0;const Dn=new W(M.x,M.y,0);Dn.unproject(r.object),r.object.position.sub(Dn).add(Cn),r.object.updateMatrixWorld(),Jt=oe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Jt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Jt).add(r.object.position):(Tp.origin.copy(r.object.position),Tp.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Tp.direction))<N9?e.lookAt(r.target):(RM.setFromNormalAndCoplanarPoint(r.object.up,r.target),Tp.intersectPlane(RM,r.target))))}else r.object instanceof Li&&r.object.isOrthographicCamera&&(Zt=f!==1,Zt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,x=!1,Zt||$e.distanceToSquared(r.object.position)>c||8*(1-ce.dot(r.object.quaternion))>c?(r.dispatchEvent(i),$e.copy(r.object.position),ce.copy(r.object.quaternion),Zt=!1,!0):!1}})(),this.connect=oe=>{oe===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=oe,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ye),r.domElement.addEventListener("pointerdown",Q),r.domElement.addEventListener("pointercancel",ye),r.domElement.addEventListener("wheel",xe)},this.dispose=()=>{var oe,Le,tt,Ge,$e,ce;(oe=r.domElement)==null||oe.removeEventListener("contextmenu",Ye),(Le=r.domElement)==null||Le.removeEventListener("pointerdown",Q),(tt=r.domElement)==null||tt.removeEventListener("pointercancel",ye),(Ge=r.domElement)==null||Ge.removeEventListener("wheel",xe),($e=r.domElement)==null||$e.ownerDocument.removeEventListener("pointermove",ie),(ce=r.domElement)==null||ce.ownerDocument.removeEventListener("pointerup",pe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new Cb,d=new Cb;let f=1;const h=new W,p=new Ie,g=new Ie,m=new Ie,v=new Ie,b=new Ie,y=new Ie,E=new Ie,T=new Ie,_=new Ie,w=new W,M=new Ie;let x=!1;const S=[],R={};function I(){return 2*Math.PI/60/60*r.autoRotateSpeed}function z(){return Math.pow(.95,r.zoomSpeed)}function P(oe){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=oe:d.theta-=oe}function B(oe){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=oe:d.phi-=oe}const U=(()=>{const oe=new W;return function(Le,tt){oe.setFromMatrixColumn(tt,0),oe.multiplyScalar(-Le),h.add(oe)}})(),j=(()=>{const oe=new W;return function(Le,tt){r.screenSpacePanning===!0?oe.setFromMatrixColumn(tt,1):(oe.setFromMatrixColumn(tt,0),oe.crossVectors(r.object.up,oe)),oe.multiplyScalar(Le),h.add(oe)}})(),Z=(()=>{const oe=new W;return function(Le,tt){const Ge=r.domElement;if(Ge&&r.object instanceof yn&&r.object.isPerspectiveCamera){const $e=r.object.position;oe.copy($e).sub(r.target);let ce=oe.length();ce*=Math.tan(r.object.fov/2*Math.PI/180),U(2*Le*ce/Ge.clientHeight,r.object.matrix),j(2*tt*ce/Ge.clientHeight,r.object.matrix)}else Ge&&r.object instanceof Li&&r.object.isOrthographicCamera?(U(Le*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),j(tt*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ne(oe){r.object instanceof yn&&r.object.isPerspectiveCamera||r.object instanceof Li&&r.object.isOrthographicCamera?f/=oe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function K(oe){r.object instanceof yn&&r.object.isPerspectiveCamera||r.object instanceof Li&&r.object.isOrthographicCamera?f*=oe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function fe(oe){if(!r.zoomToCursor||!r.domElement)return;x=!0;const Le=r.domElement.getBoundingClientRect(),tt=oe.clientX-Le.left,Ge=oe.clientY-Le.top,$e=Le.width,ce=Le.height;M.x=tt/$e*2-1,M.y=-(Ge/ce)*2+1,w.set(M.x,M.y,1).unproject(r.object).sub(r.object.position).normalize()}function Se(oe){return Math.max(r.minDistance,Math.min(r.maxDistance,oe))}function de(oe){p.set(oe.clientX,oe.clientY)}function ae(oe){fe(oe),E.set(oe.clientX,oe.clientY)}function ge(oe){v.set(oe.clientX,oe.clientY)}function ue(oe){g.set(oe.clientX,oe.clientY),m.subVectors(g,p).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(P(2*Math.PI*m.x/Le.clientHeight),B(2*Math.PI*m.y/Le.clientHeight)),p.copy(g),r.update()}function J(oe){T.set(oe.clientX,oe.clientY),_.subVectors(T,E),_.y>0?ne(z()):_.y<0&&K(z()),E.copy(T),r.update()}function X(oe){b.set(oe.clientX,oe.clientY),y.subVectors(b,v).multiplyScalar(r.panSpeed),Z(y.x,y.y),v.copy(b),r.update()}function L(oe){fe(oe),oe.deltaY<0?K(z()):oe.deltaY>0&&ne(z()),r.update()}function N(oe){let Le=!1;switch(oe.code){case r.keys.UP:Z(0,r.keyPanSpeed),Le=!0;break;case r.keys.BOTTOM:Z(0,-r.keyPanSpeed),Le=!0;break;case r.keys.LEFT:Z(r.keyPanSpeed,0),Le=!0;break;case r.keys.RIGHT:Z(-r.keyPanSpeed,0),Le=!0;break}Le&&(oe.preventDefault(),r.update())}function G(){if(S.length==1)p.set(S[0].pageX,S[0].pageY);else{const oe=.5*(S[0].pageX+S[1].pageX),Le=.5*(S[0].pageY+S[1].pageY);p.set(oe,Le)}}function $(){if(S.length==1)v.set(S[0].pageX,S[0].pageY);else{const oe=.5*(S[0].pageX+S[1].pageX),Le=.5*(S[0].pageY+S[1].pageY);v.set(oe,Le)}}function O(){const oe=S[0].pageX-S[1].pageX,Le=S[0].pageY-S[1].pageY,tt=Math.sqrt(oe*oe+Le*Le);E.set(0,tt)}function k(){r.enableZoom&&O(),r.enablePan&&$()}function H(){r.enableZoom&&O(),r.enableRotate&&G()}function Y(oe){if(S.length==1)g.set(oe.pageX,oe.pageY);else{const tt=et(oe),Ge=.5*(oe.pageX+tt.x),$e=.5*(oe.pageY+tt.y);g.set(Ge,$e)}m.subVectors(g,p).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(P(2*Math.PI*m.x/Le.clientHeight),B(2*Math.PI*m.y/Le.clientHeight)),p.copy(g)}function te(oe){if(S.length==1)b.set(oe.pageX,oe.pageY);else{const Le=et(oe),tt=.5*(oe.pageX+Le.x),Ge=.5*(oe.pageY+Le.y);b.set(tt,Ge)}y.subVectors(b,v).multiplyScalar(r.panSpeed),Z(y.x,y.y),v.copy(b)}function he(oe){const Le=et(oe),tt=oe.pageX-Le.x,Ge=oe.pageY-Le.y,$e=Math.sqrt(tt*tt+Ge*Ge);T.set(0,$e),_.set(0,Math.pow(T.y/E.y,r.zoomSpeed)),ne(_.y),E.copy(T)}function F(oe){r.enableZoom&&he(oe),r.enablePan&&te(oe)}function D(oe){r.enableZoom&&he(oe),r.enableRotate&&Y(oe)}function Q(oe){var Le,tt;r.enabled!==!1&&(S.length===0&&((Le=r.domElement)==null||Le.ownerDocument.addEventListener("pointermove",ie),(tt=r.domElement)==null||tt.ownerDocument.addEventListener("pointerup",pe)),ut(oe),oe.pointerType==="touch"?Ee(oe):Oe(oe))}function ie(oe){r.enabled!==!1&&(oe.pointerType==="touch"?be(oe):re(oe))}function pe(oe){var Le,tt,Ge;dt(oe),S.length===0&&((Le=r.domElement)==null||Le.releasePointerCapture(oe.pointerId),(tt=r.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",ie),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointerup",pe)),r.dispatchEvent(o),l=a.NONE}function ye(oe){dt(oe)}function Oe(oe){let Le;switch(oe.button){case 0:Le=r.mouseButtons.LEFT;break;case 1:Le=r.mouseButtons.MIDDLE;break;case 2:Le=r.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case Ka.DOLLY:if(r.enableZoom===!1)return;ae(oe),l=a.DOLLY;break;case Ka.ROTATE:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(r.enablePan===!1)return;ge(oe),l=a.PAN}else{if(r.enableRotate===!1)return;de(oe),l=a.ROTATE}break;case Ka.PAN:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(r.enableRotate===!1)return;de(oe),l=a.ROTATE}else{if(r.enablePan===!1)return;ge(oe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function re(oe){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ue(oe);break;case a.DOLLY:if(r.enableZoom===!1)return;J(oe);break;case a.PAN:if(r.enablePan===!1)return;X(oe);break}}function xe(oe){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(oe.preventDefault(),r.dispatchEvent(s),L(oe),r.dispatchEvent(o))}function Ne(oe){r.enabled===!1||r.enablePan===!1||N(oe)}function Ee(oe){switch(it(oe),S.length){case 1:switch(r.touches.ONE){case Hs.ROTATE:if(r.enableRotate===!1)return;G(),l=a.TOUCH_ROTATE;break;case Hs.PAN:if(r.enablePan===!1)return;$(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Hs.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;k(),l=a.TOUCH_DOLLY_PAN;break;case Hs.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;H(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function be(oe){switch(it(oe),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Y(oe),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;te(oe),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;F(oe),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;D(oe),r.update();break;default:l=a.NONE}}function Ye(oe){r.enabled!==!1&&oe.preventDefault()}function ut(oe){S.push(oe)}function dt(oe){delete R[oe.pointerId];for(let Le=0;Le<S.length;Le++)if(S[Le].pointerId==oe.pointerId){S.splice(Le,1);return}}function it(oe){let Le=R[oe.pointerId];Le===void 0&&(Le=new Ie,R[oe.pointerId]=Le),Le.set(oe.pageX,oe.pageY)}function et(oe){const Le=oe.pointerId===S[0].pointerId?S[1]:S[0];return R[Le.pointerId]}n!==void 0&&this.connect(n),this.update()}}new pt;new $l;new W;var B9=Object.defineProperty,V9=(t,e,n)=>e in t?B9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bw=(t,e,n)=>(V9(t,typeof e!="symbol"?e+"":e,n),n);class _2{constructor(e){bw(this,"data"),this.data=e}generateShapes(e,n=100,r){const i=[],s={letterSpacing:0,lineHeight:1,...r},o=U9(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(i,o[a].toShapes(!1));return i}}bw(_2,"isFont");bw(_2,"type");function U9(t,e,n,r){const i=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<i.length;u++){const d=i[u];if(d===`
`)l=0,c-=o*r.lineHeight;else{const f=$9(d,s,l,c,n);f&&(l+=f.offsetX+r.letterSpacing,a.push(f.path))}}return a}function $9(t,e,n,r,i){const s=i.glyphs[t]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}const o=new aI;let a,l,c,u,d,f,h,p;if(s.o){const g=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let m=0,v=g.length;m<v;)switch(g[m++]){case"m":a=parseInt(g[m++])*e+n,l=parseInt(g[m++])*e+r,o.moveTo(a,l);break;case"l":a=parseInt(g[m++])*e+n,l=parseInt(g[m++])*e+r,o.lineTo(a,l);break;case"q":c=parseInt(g[m++])*e+n,u=parseInt(g[m++])*e+r,d=parseInt(g[m++])*e+n,f=parseInt(g[m++])*e+r,o.quadraticCurveTo(d,f,c,u);break;case"b":c=parseInt(g[m++])*e+n,u=parseInt(g[m++])*e+r,d=parseInt(g[m++])*e+n,f=parseInt(g[m++])*e+r,h=parseInt(g[m++])*e+n,p=parseInt(g[m++])*e+r,o.bezierCurveTo(d,f,h,p,c,u);break}}return{offsetX:s.ha*e,path:o}}function x2(t,e){const n=le(e),r=new nI(n.value),i=ga({});t.forEach(o=>{const a=r.clipAction(o,n.value);i[o.name]=a});const{onLoop:s}=Iu();return s(({delta:o})=>{r.update(o)}),{actions:i,mixer:r}}class Mf extends En{constructor(e,n={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new yn;const r=this,i=n.color!==void 0?new Ke(n.color):new Ke(8355711),s=n.textureWidth||512,o=n.textureHeight||512,a=n.clipBias||0,l=n.shader||Mf.ReflectorShader,c=n.multisample!==void 0?n.multisample:4,u=new ds,d=new W,f=new W,h=new W,p=new pt,g=new W(0,0,-1),m=new Wt,v=new W,b=new W,y=new Wt,E=new pt,T=this.camera,_=new Bi(s,o,{samples:c,type:wl}),w=new ii({name:l.name!==void 0?l.name:"unspecified",uniforms:$f.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});w.uniforms.tDiffuse.value=_.texture,w.uniforms.color.value=i,w.uniforms.textureMatrix.value=E,this.material=w,this.onBeforeRender=function(M,x,S){if(f.setFromMatrixPosition(r.matrixWorld),h.setFromMatrixPosition(S.matrixWorld),p.extractRotation(r.matrixWorld),d.set(0,0,1),d.applyMatrix4(p),v.subVectors(f,h),v.dot(d)>0)return;v.reflect(d).negate(),v.add(f),p.extractRotation(S.matrixWorld),g.set(0,0,-1),g.applyMatrix4(p),g.add(h),b.subVectors(f,g),b.reflect(d).negate(),b.add(f),T.position.copy(v),T.up.set(0,1,0),T.up.applyMatrix4(p),T.up.reflect(d),T.lookAt(b),T.far=S.far,T.updateMatrixWorld(),T.projectionMatrix.copy(S.projectionMatrix),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(T.projectionMatrix),E.multiply(T.matrixWorldInverse),E.multiply(r.matrixWorld),u.setFromNormalAndCoplanarPoint(d,f),u.applyMatrix4(T.matrixWorldInverse),m.set(u.normal.x,u.normal.y,u.normal.z,u.constant);const R=T.projectionMatrix;y.x=(Math.sign(m.x)+R.elements[8])/R.elements[0],y.y=(Math.sign(m.y)+R.elements[9])/R.elements[5],y.z=-1,y.w=(1+R.elements[10])/R.elements[14],m.multiplyScalar(2/m.dot(y)),R.elements[2]=m.x,R.elements[6]=m.y,R.elements[10]=m.z+1-a,R.elements[14]=m.w,r.visible=!1;const I=M.getRenderTarget(),z=M.xr.enabled,P=M.shadowMap.autoUpdate;M.xr.enabled=!1,M.shadowMap.autoUpdate=!1,M.setRenderTarget(_),M.state.buffers.depth.setMask(!0),M.autoClear===!1&&M.clear(),M.render(x,T),M.xr.enabled=z,M.shadowMap.autoUpdate=P,M.setRenderTarget(I);const B=S.viewport;B!==void 0&&M.state.viewport(B),r.visible=!0},this.getRenderTarget=function(){return _},this.dispose=function(){_.dispose(),r.material.dispose()}}}Mf.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const z9=["args","material-uniforms-color-value"],H9=me("TresPlaneGeometry",{args:[5,5]},null,-1);Mf.ReflectorShader;function G9(t){return Nf()?(Qm(t),!0):!1}function w2(t){return typeof t=="function"?t():C(t)}const W9=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j9=Object.prototype.toString,X9=t=>j9.call(t)==="[object Object]",K9=()=>{};function q9(t){var e;const n=w2(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Y9=W9?window:void 0;function Yy(...t){let e,n,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,i]=t,e=Y9):[e,n,r,i]=t,!e)return K9;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,d,f,h)=>(u.addEventListener(d,f,h),()=>u.removeEventListener(d,f,h)),l=De(()=>[q9(e),w2(i)],([u,d])=>{if(o(),!u)return;const f=X9(d)?{...d}:d;s.push(...n.flatMap(h=>r.map(p=>a(u,h,p,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return G9(c),c}class km extends En{constructor(){super(km.Geometry,new Gr({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new W,n=new W,r=new xb(16,16),i=new xb(16,16);let s=Zi;const o=km.Geometry,a=new zd({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),l=new zd({uniforms:{map:{value:r},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),c=new En(o,a),u=[],d=S2.Shader,f=new zd({name:d.name,uniforms:{map:{value:null},occlusionMap:{value:i},color:{value:new Ke(16777215)},scale:{value:new Ie},screenPosition:{value:new W}},vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Sm,transparent:!0,depthWrite:!1}),h=new En(o,f);this.addElement=function(b){u.push(b)};const p=new Ie,g=new Ie,m=new iI,v=new Wt;this.onBeforeRender=function(b,y,E){b.getCurrentViewport(v);const T=b.getRenderTarget(),_=T!==null?T.texture.type:Zi;s!==_&&(r.dispose(),i.dispose(),r.type=i.type=_,s=_);const w=v.w/v.z,M=v.z/2,x=v.w/2;let S=16/v.w;if(p.set(S*w,S),m.min.set(v.x,v.y),m.max.set(v.x+(v.z-16),v.y+(v.w-16)),n.setFromMatrixPosition(this.matrixWorld),n.applyMatrix4(E.matrixWorldInverse),!(n.z>0)&&(e.copy(n).applyMatrix4(E.projectionMatrix),g.x=v.x+e.x*M+M-8,g.y=v.y+e.y*x+x-8,m.containsPoint(g))){b.copyFramebufferToTexture(g,r);let R=a.uniforms;R.scale.value=p,R.screenPosition.value=e,b.renderBufferDirect(E,null,o,a,c,null),b.copyFramebufferToTexture(g,i),R=l.uniforms,R.scale.value=p,R.screenPosition.value=e,b.renderBufferDirect(E,null,o,l,c,null);const I=-e.x*2,z=-e.y*2;for(let P=0,B=u.length;P<B;P++){const U=u[P],j=f.uniforms;j.color.value.copy(U.color),j.map.value=U.texture,j.screenPosition.value.x=e.x+I*U.distance,j.screenPosition.value.y=e.y+z*U.distance,S=U.size/v.w;const Z=v.w/v.z;j.scale.value.set(S*Z,S),f.uniformsNeedUpdate=!0,b.renderBufferDirect(E,null,o,f,h,null)}}},this.dispose=function(){a.dispose(),l.dispose(),f.dispose(),r.dispose(),i.dispose();for(let b=0,y=u.length;b<y;b++)u[b].texture.dispose()}}}class S2{constructor(e,n=1,r=0,i=new Ke(16777215)){this.texture=e,this.size=n,this.distance=r,this.color=i}}S2.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};km.Geometry=function(){const t=new Mt,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),n=new Pu(e,5);return t.setIndex([0,1,2,0,2,3]),t.setAttribute("position",new _s(n,3,0,!1)),t.setAttribute("uv",new _s(n,2,3,!1)),t}();Ml.clamp;Ml.lerp;const Z9=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],IM=Me({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:1/0},minAzimuthAngle:{default:-1/0},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:1/0},minZoom:{default:0},maxZoom:{default:1/0},touches:{default:()=>({ONE:Hs.ROTATE,TWO:Hs.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(t,{expose:e,emit:n}){const r=t,i=n,{makeDefault:s,autoRotate:o,autoRotateSpeed:a,enableDamping:l,dampingFactor:c,enablePan:u,keyPanSpeed:d,maxAzimuthAngle:f,minAzimuthAngle:h,maxPolarAngle:p,minPolarAngle:g,minDistance:m,maxDistance:v,minZoom:b,maxZoom:y,enableZoom:E,zoomSpeed:T,enableRotate:_,touches:w,rotateSpeed:M,target:x}=kr(r),{camera:S,renderer:R,extend:I,controls:z}=Wx(),P=le(null);I({OrbitControls:F9}),De(P,j=>{B(),j&&s.value?z.value=j:z.value=null});function B(){Yy(P.value,"change",()=>i("change",P.value)),Yy(P.value,"start",()=>i("start",P.value)),Yy(P.value,"end",()=>i("end",P.value))}const{onLoop:U}=Iu();return U(()=>{P.value&&(l.value||o.value)&&P.value.update()}),ya(()=>{P.value&&P.value.dispose()}),e({value:P}),(j,Z)=>(j.camera||C(S))&&(j.domElement||C(R))?(V(),ee("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:P,target:C(x),"auto-rotate":C(o),"auto-rotate-speed":C(a),"enable-damping":C(l),"damping-factor":C(c),"enable-pan":C(u),"key-pan-speed":C(d),keys:j.keys,"max-azimuth-angle":C(f),"min-azimuth-angle":C(h),"max-polar-angle":C(p),"min-polar-angle":C(g),"min-distance":C(m),"max-distance":C(v),"min-zoom":C(b),"max-zoom":C(y),touches:C(w),"enable-zoom":C(E),"zoom-speed":C(T),"enable-rotate":C(_),"rotate-speed":C(M),args:[j.camera||C(S),j.domElement||C(R).domElement]},null,8,Z9)):ve("",!0)}});var J9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Q9={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var d=typeof Pp=="function"&&Pp;if(!u&&d)return d(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}u=i[c]={exports:{}},r[c][0].call(u.exports,function(f){var h=r[c][1][f];return o(h||f)},u,u.exports,n,r,i,s)}return i[c].exports}for(var a=typeof Pp=="function"&&Pp,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){var p=n("crypto");function g(_,w){w=b(_,w);var M;return(M=w.algorithm!=="passthrough"?p.createHash(w.algorithm):new T).write===void 0&&(M.write=M.update,M.end=M.update),E(w,M).dispatch(_),M.update||M.end(""),M.digest?M.digest(w.encoding==="buffer"?void 0:w.encoding):(_=M.read(),w.encoding!=="buffer"?_.toString(w.encoding):_)}(i=r.exports=g).sha1=function(_){return g(_)},i.keys=function(_){return g(_,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(_){return g(_,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(_){return g(_,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var m=p.getHashes?p.getHashes().slice():["sha1","md5"],v=(m.push("passthrough"),["buffer","hex","binary","base64"]);function b(_,w){var M={};if(M.algorithm=(w=w||{}).algorithm||"sha1",M.encoding=w.encoding||"hex",M.excludeValues=!!w.excludeValues,M.algorithm=M.algorithm.toLowerCase(),M.encoding=M.encoding.toLowerCase(),M.ignoreUnknown=w.ignoreUnknown===!0,M.respectType=w.respectType!==!1,M.respectFunctionNames=w.respectFunctionNames!==!1,M.respectFunctionProperties=w.respectFunctionProperties!==!1,M.unorderedArrays=w.unorderedArrays===!0,M.unorderedSets=w.unorderedSets!==!1,M.unorderedObjects=w.unorderedObjects!==!1,M.replacer=w.replacer||void 0,M.excludeKeys=w.excludeKeys||void 0,_===void 0)throw new Error("Object argument required.");for(var x=0;x<m.length;++x)m[x].toLowerCase()===M.algorithm.toLowerCase()&&(M.algorithm=m[x]);if(m.indexOf(M.algorithm)===-1)throw new Error('Algorithm "'+M.algorithm+'"  not supported. supported values: '+m.join(", "));if(v.indexOf(M.encoding)===-1&&M.algorithm!=="passthrough")throw new Error('Encoding "'+M.encoding+'"  not supported. supported values: '+v.join(", "));return M}function y(_){if(typeof _=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(_))!=null}function E(_,w,M){M=M||[];function x(S){return w.update?w.update(S,"utf8"):w.write(S,"utf8")}return{dispatch:function(S){return this["_"+((S=_.replacer?_.replacer(S):S)===null?"null":typeof S)](S)},_object:function(S){var R,I=Object.prototype.toString.call(S),z=/\[object (.*)\]/i.exec(I);if(z=(z=z?z[1]:"unknown:["+I+"]").toLowerCase(),0<=(I=M.indexOf(S)))return this.dispatch("[CIRCULAR:"+I+"]");if(M.push(S),a!==void 0&&a.isBuffer&&a.isBuffer(S))return x("buffer:"),x(S);if(z==="object"||z==="function"||z==="asyncfunction")return I=Object.keys(S),_.unorderedObjects&&(I=I.sort()),_.respectType===!1||y(S)||I.splice(0,0,"prototype","__proto__","constructor"),_.excludeKeys&&(I=I.filter(function(P){return!_.excludeKeys(P)})),x("object:"+I.length+":"),R=this,I.forEach(function(P){R.dispatch(P),x(":"),_.excludeValues||R.dispatch(S[P]),x(",")});if(!this["_"+z]){if(_.ignoreUnknown)return x("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z](S)},_array:function(S,P){P=P!==void 0?P:_.unorderedArrays!==!1;var I=this;if(x("array:"+S.length+":"),!P||S.length<=1)return S.forEach(function(B){return I.dispatch(B)});var z=[],P=S.map(function(B){var U=new T,j=M.slice();return E(_,U,j).dispatch(B),z=z.concat(j.slice(M.length)),U.read().toString()});return M=M.concat(z),P.sort(),this._array(P,!1)},_date:function(S){return x("date:"+S.toJSON())},_symbol:function(S){return x("symbol:"+S.toString())},_error:function(S){return x("error:"+S.toString())},_boolean:function(S){return x("bool:"+S.toString())},_string:function(S){x("string:"+S.length+":"),x(S.toString())},_function:function(S){x("fn:"),y(S)?this.dispatch("[native]"):this.dispatch(S.toString()),_.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(S.name)),_.respectFunctionProperties&&this._object(S)},_number:function(S){return x("number:"+S.toString())},_xml:function(S){return x("xml:"+S.toString())},_null:function(){return x("Null")},_undefined:function(){return x("Undefined")},_regexp:function(S){return x("regex:"+S.toString())},_uint8array:function(S){return x("uint8array:"),this.dispatch(Array.prototype.slice.call(S))},_uint8clampedarray:function(S){return x("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(S))},_int8array:function(S){return x("int8array:"),this.dispatch(Array.prototype.slice.call(S))},_uint16array:function(S){return x("uint16array:"),this.dispatch(Array.prototype.slice.call(S))},_int16array:function(S){return x("int16array:"),this.dispatch(Array.prototype.slice.call(S))},_uint32array:function(S){return x("uint32array:"),this.dispatch(Array.prototype.slice.call(S))},_int32array:function(S){return x("int32array:"),this.dispatch(Array.prototype.slice.call(S))},_float32array:function(S){return x("float32array:"),this.dispatch(Array.prototype.slice.call(S))},_float64array:function(S){return x("float64array:"),this.dispatch(Array.prototype.slice.call(S))},_arraybuffer:function(S){return x("arraybuffer:"),this.dispatch(new Uint8Array(S))},_url:function(S){return x("url:"+S.toString())},_map:function(S){return x("map:"),S=Array.from(S),this._array(S,_.unorderedSets!==!1)},_set:function(S){return x("set:"),S=Array.from(S),this._array(S,_.unorderedSets!==!1)},_file:function(S){return x("file:"),this.dispatch([S.name,S.size,S.type,S.lastModfied])},_blob:function(){if(_.ignoreUnknown)return x("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return x("domwindow")},_bigint:function(S){return x("bigint:"+S.toString())},_process:function(){return x("process")},_timer:function(){return x("timer")},_pipe:function(){return x("pipe")},_tcp:function(){return x("tcp")},_udp:function(){return x("udp")},_tty:function(){return x("tty")},_statwatcher:function(){return x("statwatcher")},_securecontext:function(){return x("securecontext")},_connection:function(){return x("connection")},_zlib:function(){return x("zlib")},_context:function(){return x("context")},_nodescript:function(){return x("nodescript")},_httpparser:function(){return x("httpparser")},_dataview:function(){return x("dataview")},_signal:function(){return x("signal")},_fsevent:function(){return x("fsevent")},_tlswrap:function(){return x("tlswrap")}}}function T(){return{buf:"",write:function(_){this.buf+=_},end:function(_){this.buf+=_},read:function(){return this.buf}}}i.writeToStream=function(_,w,M){return M===void 0&&(M=w,w={}),E(w=b(_,w),M).dispatch(_)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){(function(p){var g=typeof Uint8Array<"u"?Uint8Array:Array,m=43,v=47,b=48,y=97,E=65,T=45,_=95;function w(M){return M=M.charCodeAt(0),M===m||M===T?62:M===v||M===_?63:M<b?-1:M<b+10?M-b+26+26:M<E+26?M-E:M<y+26?M-y+26:void 0}p.toByteArray=function(M){var x,S;if(0<M.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var R=M.length,R=M.charAt(R-2)==="="?2:M.charAt(R-1)==="="?1:0,I=new g(3*M.length/4-R),z=0<R?M.length-4:M.length,P=0;function B(U){I[P++]=U}for(x=0;x<z;x+=4,0)B((16711680&(S=w(M.charAt(x))<<18|w(M.charAt(x+1))<<12|w(M.charAt(x+2))<<6|w(M.charAt(x+3))))>>16),B((65280&S)>>8),B(255&S);return R==2?B(255&(S=w(M.charAt(x))<<2|w(M.charAt(x+1))>>4)):R==1&&(B((S=w(M.charAt(x))<<10|w(M.charAt(x+1))<<4|w(M.charAt(x+2))>>2)>>8&255),B(255&S)),I},p.fromByteArray=function(M){var x,S,R,I,z=M.length%3,P="";function B(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(x=0,R=M.length-z;x<R;x+=3)S=(M[x]<<16)+(M[x+1]<<8)+M[x+2],P+=B((I=S)>>18&63)+B(I>>12&63)+B(I>>6&63)+B(63&I);switch(z){case 1:P=(P+=B((S=M[M.length-1])>>2))+B(S<<4&63)+"==";break;case 2:P=(P=(P+=B((S=(M[M.length-2]<<8)+M[M.length-1])>>10))+B(S>>4&63))+B(S<<2&63)+"="}return P}})(i===void 0?this.base64js={}:i)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,r,i){(function(s,o,m,l,c,u,d,f,h){var p=n("base64-js"),g=n("ieee754");function m(L,N,G){if(!(this instanceof m))return new m(L,N,G);var $,O,k,H,Y=typeof L;if(N==="base64"&&Y=="string")for(L=(H=L).trim?H.trim():H.replace(/^\s+|\s+$/g,"");L.length%4!=0;)L+="=";if(Y=="number")$=Z(L);else if(Y=="string")$=m.byteLength(L,N);else{if(Y!="object")throw new Error("First argument needs to be a number, array or string.");$=Z(L.length)}if(m._useTypedArrays?O=m._augment(new Uint8Array($)):((O=this).length=$,O._isBuffer=!0),m._useTypedArrays&&typeof L.byteLength=="number")O._set(L);else if(ne(H=L)||m.isBuffer(H)||H&&typeof H=="object"&&typeof H.length=="number")for(k=0;k<$;k++)m.isBuffer(L)?O[k]=L.readUInt8(k):O[k]=L[k];else if(Y=="string")O.write(L,0,N);else if(Y=="number"&&!m._useTypedArrays&&!G)for(k=0;k<$;k++)O[k]=0;return O}function v(L,N,G,$){return m._charsWritten=de(function(O){for(var k=[],H=0;H<O.length;H++)k.push(255&O.charCodeAt(H));return k}(N),L,G,$)}function b(L,N,G,$){return m._charsWritten=de(function(O){for(var k,H,Y=[],te=0;te<O.length;te++)H=O.charCodeAt(te),k=H>>8,H=H%256,Y.push(H),Y.push(k);return Y}(N),L,G,$)}function y(L,N,G){var $="";G=Math.min(L.length,G);for(var O=N;O<G;O++)$+=String.fromCharCode(L[O]);return $}function E(L,N,G,k){k||(X(typeof G=="boolean","missing or invalid endian"),X(N!=null,"missing offset"),X(N+1<L.length,"Trying to read beyond buffer length"));var O,k=L.length;if(!(k<=N))return G?(O=L[N],N+1<k&&(O|=L[N+1]<<8)):(O=L[N]<<8,N+1<k&&(O|=L[N+1])),O}function T(L,N,G,k){k||(X(typeof G=="boolean","missing or invalid endian"),X(N!=null,"missing offset"),X(N+3<L.length,"Trying to read beyond buffer length"));var O,k=L.length;if(!(k<=N))return G?(N+2<k&&(O=L[N+2]<<16),N+1<k&&(O|=L[N+1]<<8),O|=L[N],N+3<k&&(O+=L[N+3]<<24>>>0)):(N+1<k&&(O=L[N+1]<<16),N+2<k&&(O|=L[N+2]<<8),N+3<k&&(O|=L[N+3]),O+=L[N]<<24>>>0),O}function _(L,N,G,$){if($||(X(typeof G=="boolean","missing or invalid endian"),X(N!=null,"missing offset"),X(N+1<L.length,"Trying to read beyond buffer length")),!(L.length<=N))return $=E(L,N,G,!0),32768&$?-1*(65535-$+1):$}function w(L,N,G,$){if($||(X(typeof G=="boolean","missing or invalid endian"),X(N!=null,"missing offset"),X(N+3<L.length,"Trying to read beyond buffer length")),!(L.length<=N))return $=T(L,N,G,!0),2147483648&$?-1*(4294967295-$+1):$}function M(L,N,G,$){return $||(X(typeof G=="boolean","missing or invalid endian"),X(N+3<L.length,"Trying to read beyond buffer length")),g.read(L,N,G,23,4)}function x(L,N,G,$){return $||(X(typeof G=="boolean","missing or invalid endian"),X(N+7<L.length,"Trying to read beyond buffer length")),g.read(L,N,G,52,8)}function S(L,N,G,$,O){if(O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+1<L.length,"trying to write beyond buffer length"),ge(N,65535)),O=L.length,!(O<=G))for(var k=0,H=Math.min(O-G,2);k<H;k++)L[G+k]=(N&255<<8*($?k:1-k))>>>8*($?k:1-k)}function R(L,N,G,$,O){if(O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+3<L.length,"trying to write beyond buffer length"),ge(N,4294967295)),O=L.length,!(O<=G))for(var k=0,H=Math.min(O-G,4);k<H;k++)L[G+k]=N>>>8*($?k:3-k)&255}function I(L,N,G,$,O){O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+1<L.length,"Trying to write beyond buffer length"),ue(N,32767,-32768)),L.length<=G||S(L,0<=N?N:65535+N+1,G,$,O)}function z(L,N,G,$,O){O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+3<L.length,"Trying to write beyond buffer length"),ue(N,2147483647,-2147483648)),L.length<=G||R(L,0<=N?N:4294967295+N+1,G,$,O)}function P(L,N,G,$,O){O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+3<L.length,"Trying to write beyond buffer length"),J(N,34028234663852886e22,-34028234663852886e22)),L.length<=G||g.write(L,N,G,$,23,4)}function B(L,N,G,$,O){O||(X(N!=null,"missing value"),X(typeof $=="boolean","missing or invalid endian"),X(G!=null,"missing offset"),X(G+7<L.length,"Trying to write beyond buffer length"),J(N,17976931348623157e292,-17976931348623157e292)),L.length<=G||g.write(L,N,G,$,52,8)}i.Buffer=m,i.SlowBuffer=m,i.INSPECT_MAX_BYTES=50,m.poolSize=8192,m._useTypedArrays=function(){try{var L=new ArrayBuffer(0),N=new Uint8Array(L);return N.foo=function(){return 42},N.foo()===42&&typeof N.subarray=="function"}catch{return!1}}(),m.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.isBuffer=function(L){return!(L==null||!L._isBuffer)},m.byteLength=function(L,N){var G;switch(L+="",N||"utf8"){case"hex":G=L.length/2;break;case"utf8":case"utf-8":G=fe(L).length;break;case"ascii":case"binary":case"raw":G=L.length;break;case"base64":G=Se(L).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":G=2*L.length;break;default:throw new Error("Unknown encoding")}return G},m.concat=function(L,N){if(X(ne(L),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),L.length===0)return new m(0);if(L.length===1)return L[0];if(typeof N!="number")for(O=N=0;O<L.length;O++)N+=L[O].length;for(var G=new m(N),$=0,O=0;O<L.length;O++){var k=L[O];k.copy(G,$),$+=k.length}return G},m.prototype.write=function(L,N,G,$){isFinite(N)?isFinite(G)||($=G,G=void 0):(te=$,$=N,N=G,G=te),N=Number(N)||0;var O,k,H,Y,te=this.length-N;switch((!G||te<(G=Number(G)))&&(G=te),$=String($||"utf8").toLowerCase()){case"hex":O=function(he,F,D,Q){D=Number(D)||0;var ie=he.length-D;(!Q||ie<(Q=Number(Q)))&&(Q=ie),X((ie=F.length)%2==0,"Invalid hex string"),ie/2<Q&&(Q=ie/2);for(var pe=0;pe<Q;pe++){var ye=parseInt(F.substr(2*pe,2),16);X(!isNaN(ye),"Invalid hex string"),he[D+pe]=ye}return m._charsWritten=2*pe,pe}(this,L,N,G);break;case"utf8":case"utf-8":k=this,H=N,Y=G,O=m._charsWritten=de(fe(L),k,H,Y);break;case"ascii":case"binary":O=v(this,L,N,G);break;case"base64":k=this,H=N,Y=G,O=m._charsWritten=de(Se(L),k,H,Y);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=b(this,L,N,G);break;default:throw new Error("Unknown encoding")}return O},m.prototype.toString=function(L,N,G){var $,O,k,H,Y=this;if(L=String(L||"utf8").toLowerCase(),N=Number(N)||0,(G=G!==void 0?Number(G):Y.length)===N)return"";switch(L){case"hex":$=function(te,he,F){var D=te.length;(!he||he<0)&&(he=0),(!F||F<0||D<F)&&(F=D);for(var Q="",ie=he;ie<F;ie++)Q+=K(te[ie]);return Q}(Y,N,G);break;case"utf8":case"utf-8":$=function(te,he,F){var D="",Q="";F=Math.min(te.length,F);for(var ie=he;ie<F;ie++)te[ie]<=127?(D+=ae(Q)+String.fromCharCode(te[ie]),Q=""):Q+="%"+te[ie].toString(16);return D+ae(Q)}(Y,N,G);break;case"ascii":case"binary":$=y(Y,N,G);break;case"base64":O=Y,H=G,$=(k=N)===0&&H===O.length?p.fromByteArray(O):p.fromByteArray(O.slice(k,H));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":$=function(te,he,F){for(var D=te.slice(he,F),Q="",ie=0;ie<D.length;ie+=2)Q+=String.fromCharCode(D[ie]+256*D[ie+1]);return Q}(Y,N,G);break;default:throw new Error("Unknown encoding")}return $},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.copy=function(L,N,G,$){if(N=N||0,($=$||$===0?$:this.length)!==(G=G||0)&&L.length!==0&&this.length!==0){X(G<=$,"sourceEnd < sourceStart"),X(0<=N&&N<L.length,"targetStart out of bounds"),X(0<=G&&G<this.length,"sourceStart out of bounds"),X(0<=$&&$<=this.length,"sourceEnd out of bounds"),$>this.length&&($=this.length);var O=($=L.length-N<$-G?L.length-N+G:$)-G;if(O<100||!m._useTypedArrays)for(var k=0;k<O;k++)L[k+N]=this[k+G];else L._set(this.subarray(G,G+O),N)}},m.prototype.slice=function(L,N){var G=this.length;if(L=j(L,G,0),N=j(N,G,G),m._useTypedArrays)return m._augment(this.subarray(L,N));for(var $=N-L,O=new m($,void 0,!0),k=0;k<$;k++)O[k]=this[k+L];return O},m.prototype.get=function(L){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(L)},m.prototype.set=function(L,N){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(L,N)},m.prototype.readUInt8=function(L,N){if(N||(X(L!=null,"missing offset"),X(L<this.length,"Trying to read beyond buffer length")),!(L>=this.length))return this[L]},m.prototype.readUInt16LE=function(L,N){return E(this,L,!0,N)},m.prototype.readUInt16BE=function(L,N){return E(this,L,!1,N)},m.prototype.readUInt32LE=function(L,N){return T(this,L,!0,N)},m.prototype.readUInt32BE=function(L,N){return T(this,L,!1,N)},m.prototype.readInt8=function(L,N){if(N||(X(L!=null,"missing offset"),X(L<this.length,"Trying to read beyond buffer length")),!(L>=this.length))return 128&this[L]?-1*(255-this[L]+1):this[L]},m.prototype.readInt16LE=function(L,N){return _(this,L,!0,N)},m.prototype.readInt16BE=function(L,N){return _(this,L,!1,N)},m.prototype.readInt32LE=function(L,N){return w(this,L,!0,N)},m.prototype.readInt32BE=function(L,N){return w(this,L,!1,N)},m.prototype.readFloatLE=function(L,N){return M(this,L,!0,N)},m.prototype.readFloatBE=function(L,N){return M(this,L,!1,N)},m.prototype.readDoubleLE=function(L,N){return x(this,L,!0,N)},m.prototype.readDoubleBE=function(L,N){return x(this,L,!1,N)},m.prototype.writeUInt8=function(L,N,G){G||(X(L!=null,"missing value"),X(N!=null,"missing offset"),X(N<this.length,"trying to write beyond buffer length"),ge(L,255)),N>=this.length||(this[N]=L)},m.prototype.writeUInt16LE=function(L,N,G){S(this,L,N,!0,G)},m.prototype.writeUInt16BE=function(L,N,G){S(this,L,N,!1,G)},m.prototype.writeUInt32LE=function(L,N,G){R(this,L,N,!0,G)},m.prototype.writeUInt32BE=function(L,N,G){R(this,L,N,!1,G)},m.prototype.writeInt8=function(L,N,G){G||(X(L!=null,"missing value"),X(N!=null,"missing offset"),X(N<this.length,"Trying to write beyond buffer length"),ue(L,127,-128)),N>=this.length||(0<=L?this.writeUInt8(L,N,G):this.writeUInt8(255+L+1,N,G))},m.prototype.writeInt16LE=function(L,N,G){I(this,L,N,!0,G)},m.prototype.writeInt16BE=function(L,N,G){I(this,L,N,!1,G)},m.prototype.writeInt32LE=function(L,N,G){z(this,L,N,!0,G)},m.prototype.writeInt32BE=function(L,N,G){z(this,L,N,!1,G)},m.prototype.writeFloatLE=function(L,N,G){P(this,L,N,!0,G)},m.prototype.writeFloatBE=function(L,N,G){P(this,L,N,!1,G)},m.prototype.writeDoubleLE=function(L,N,G){B(this,L,N,!0,G)},m.prototype.writeDoubleBE=function(L,N,G){B(this,L,N,!1,G)},m.prototype.fill=function(L,N,G){if(N=N||0,G=G||this.length,X(typeof(L=typeof(L=L||0)=="string"?L.charCodeAt(0):L)=="number"&&!isNaN(L),"value is not a number"),X(N<=G,"end < start"),G!==N&&this.length!==0){X(0<=N&&N<this.length,"start out of bounds"),X(0<=G&&G<=this.length,"end out of bounds");for(var $=N;$<G;$++)this[$]=L}},m.prototype.inspect=function(){for(var L=[],N=this.length,G=0;G<N;G++)if(L[G]=K(this[G]),G===i.INSPECT_MAX_BYTES){L[G+1]="...";break}return"<Buffer "+L.join(" ")+">"},m.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(m._useTypedArrays)return new m(this).buffer;for(var L=new Uint8Array(this.length),N=0,G=L.length;N<G;N+=1)L[N]=this[N];return L.buffer};var U=m.prototype;function j(L,N,G){return typeof L!="number"?G:N<=(L=~~L)?N:0<=L||0<=(L+=N)?L:0}function Z(L){return(L=~~Math.ceil(+L))<0?0:L}function ne(L){return(Array.isArray||function(N){return Object.prototype.toString.call(N)==="[object Array]"})(L)}function K(L){return L<16?"0"+L.toString(16):L.toString(16)}function fe(L){for(var N=[],G=0;G<L.length;G++){var $=L.charCodeAt(G);if($<=127)N.push(L.charCodeAt(G));else for(var O=G,k=(55296<=$&&$<=57343&&G++,encodeURIComponent(L.slice(O,G+1)).substr(1).split("%")),H=0;H<k.length;H++)N.push(parseInt(k[H],16))}return N}function Se(L){return p.toByteArray(L)}function de(L,N,G,$){for(var O=0;O<$&&!(O+G>=N.length||O>=L.length);O++)N[O+G]=L[O];return O}function ae(L){try{return decodeURIComponent(L)}catch{return""}}function ge(L,N){X(typeof L=="number","cannot write a non-number as a number"),X(0<=L,"specified a negative value for writing an unsigned value"),X(L<=N,"value is larger than maximum value for type"),X(Math.floor(L)===L,"value has a fractional component")}function ue(L,N,G){X(typeof L=="number","cannot write a non-number as a number"),X(L<=N,"value larger than maximum allowed value"),X(G<=L,"value smaller than minimum allowed value"),X(Math.floor(L)===L,"value has a fractional component")}function J(L,N,G){X(typeof L=="number","cannot write a non-number as a number"),X(L<=N,"value larger than maximum allowed value"),X(G<=L,"value smaller than minimum allowed value")}function X(L,N){if(!L)throw new Error(N||"Failed assertion")}m._augment=function(L){return L._isBuffer=!0,L._get=L.get,L._set=L.set,L.get=U.get,L.set=U.set,L.write=U.write,L.toString=U.toString,L.toLocaleString=U.toString,L.toJSON=U.toJSON,L.copy=U.copy,L.slice=U.slice,L.readUInt8=U.readUInt8,L.readUInt16LE=U.readUInt16LE,L.readUInt16BE=U.readUInt16BE,L.readUInt32LE=U.readUInt32LE,L.readUInt32BE=U.readUInt32BE,L.readInt8=U.readInt8,L.readInt16LE=U.readInt16LE,L.readInt16BE=U.readInt16BE,L.readInt32LE=U.readInt32LE,L.readInt32BE=U.readInt32BE,L.readFloatLE=U.readFloatLE,L.readFloatBE=U.readFloatBE,L.readDoubleLE=U.readDoubleLE,L.readDoubleBE=U.readDoubleBE,L.writeUInt8=U.writeUInt8,L.writeUInt16LE=U.writeUInt16LE,L.writeUInt16BE=U.writeUInt16BE,L.writeUInt32LE=U.writeUInt32LE,L.writeUInt32BE=U.writeUInt32BE,L.writeInt8=U.writeInt8,L.writeInt16LE=U.writeInt16LE,L.writeInt16BE=U.writeInt16BE,L.writeInt32LE=U.writeInt32LE,L.writeInt32BE=U.writeInt32BE,L.writeFloatLE=U.writeFloatLE,L.writeFloatBE=U.writeFloatBE,L.writeDoubleLE=U.writeDoubleLE,L.writeDoubleBE=U.writeDoubleBE,L.fill=U.fill,L.inspect=U.inspect,L.toArrayBuffer=U.toArrayBuffer,L}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,r,i){(function(s,o,p,l,c,u,d,f,h){var p=n("buffer").Buffer,g=4,m=new p(g);m.fill(0),r.exports={hash:function(v,b,y,E){for(var T=b(function(S,R){S.length%g!=0&&(I=S.length+(g-S.length%g),S=p.concat([S,m],I));for(var I,z=[],P=R?S.readInt32BE:S.readInt32LE,B=0;B<S.length;B+=g)z.push(P.call(S,B));return z}(v=p.isBuffer(v)?v:new p(v),E),8*v.length),b=E,_=new p(y),w=b?_.writeInt32BE:_.writeInt32LE,M=0;M<T.length;M++)w.call(_,T[M],4*M,!0);return _}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,r,i){(function(s,o,p,l,c,u,d,f,h){var p=n("buffer").Buffer,g=n("./sha"),m=n("./sha256"),v=n("./rng"),b={sha1:g,sha256:m,md5:n("./md5")},y=64,E=new p(y);function T(S,R){var I=b[S=S||"sha1"],z=[];return I||_("algorithm:",S,"is not yet supported"),{update:function(P){return p.isBuffer(P)||(P=new p(P)),z.push(P),P.length,this},digest:function(P){var B=p.concat(z),B=R?function(U,j,Z){p.isBuffer(j)||(j=new p(j)),p.isBuffer(Z)||(Z=new p(Z)),j.length>y?j=U(j):j.length<y&&(j=p.concat([j,E],y));for(var ne=new p(y),K=new p(y),fe=0;fe<y;fe++)ne[fe]=54^j[fe],K[fe]=92^j[fe];return Z=U(p.concat([ne,Z])),U(p.concat([K,Z]))}(I,R,B):I(B);return z=null,P?B.toString(P):B}}}function _(){var S=[].slice.call(arguments).join(" ");throw new Error([S,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}E.fill(0),i.createHash=function(S){return T(S)},i.createHmac=T,i.randomBytes=function(S,R){if(!R||!R.call)return new p(v(S));try{R.call(this,void 0,new p(v(S)))}catch(I){R(I)}};var w,M=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],x=function(S){i[S]=function(){_("sorry,",S,"is not implemented yet")}};for(w in M)x(M[w])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){var p=n("./helpers");function g(_,w){_[w>>5]|=128<<w%32,_[14+(w+64>>>9<<4)]=w;for(var M=1732584193,x=-271733879,S=-1732584194,R=271733878,I=0;I<_.length;I+=16){var z=M,P=x,B=S,U=R,M=v(M,x,S,R,_[I+0],7,-680876936),R=v(R,M,x,S,_[I+1],12,-389564586),S=v(S,R,M,x,_[I+2],17,606105819),x=v(x,S,R,M,_[I+3],22,-1044525330);M=v(M,x,S,R,_[I+4],7,-176418897),R=v(R,M,x,S,_[I+5],12,1200080426),S=v(S,R,M,x,_[I+6],17,-1473231341),x=v(x,S,R,M,_[I+7],22,-45705983),M=v(M,x,S,R,_[I+8],7,1770035416),R=v(R,M,x,S,_[I+9],12,-1958414417),S=v(S,R,M,x,_[I+10],17,-42063),x=v(x,S,R,M,_[I+11],22,-1990404162),M=v(M,x,S,R,_[I+12],7,1804603682),R=v(R,M,x,S,_[I+13],12,-40341101),S=v(S,R,M,x,_[I+14],17,-1502002290),M=b(M,x=v(x,S,R,M,_[I+15],22,1236535329),S,R,_[I+1],5,-165796510),R=b(R,M,x,S,_[I+6],9,-1069501632),S=b(S,R,M,x,_[I+11],14,643717713),x=b(x,S,R,M,_[I+0],20,-373897302),M=b(M,x,S,R,_[I+5],5,-701558691),R=b(R,M,x,S,_[I+10],9,38016083),S=b(S,R,M,x,_[I+15],14,-660478335),x=b(x,S,R,M,_[I+4],20,-405537848),M=b(M,x,S,R,_[I+9],5,568446438),R=b(R,M,x,S,_[I+14],9,-1019803690),S=b(S,R,M,x,_[I+3],14,-187363961),x=b(x,S,R,M,_[I+8],20,1163531501),M=b(M,x,S,R,_[I+13],5,-1444681467),R=b(R,M,x,S,_[I+2],9,-51403784),S=b(S,R,M,x,_[I+7],14,1735328473),M=y(M,x=b(x,S,R,M,_[I+12],20,-1926607734),S,R,_[I+5],4,-378558),R=y(R,M,x,S,_[I+8],11,-2022574463),S=y(S,R,M,x,_[I+11],16,1839030562),x=y(x,S,R,M,_[I+14],23,-35309556),M=y(M,x,S,R,_[I+1],4,-1530992060),R=y(R,M,x,S,_[I+4],11,1272893353),S=y(S,R,M,x,_[I+7],16,-155497632),x=y(x,S,R,M,_[I+10],23,-1094730640),M=y(M,x,S,R,_[I+13],4,681279174),R=y(R,M,x,S,_[I+0],11,-358537222),S=y(S,R,M,x,_[I+3],16,-722521979),x=y(x,S,R,M,_[I+6],23,76029189),M=y(M,x,S,R,_[I+9],4,-640364487),R=y(R,M,x,S,_[I+12],11,-421815835),S=y(S,R,M,x,_[I+15],16,530742520),M=E(M,x=y(x,S,R,M,_[I+2],23,-995338651),S,R,_[I+0],6,-198630844),R=E(R,M,x,S,_[I+7],10,1126891415),S=E(S,R,M,x,_[I+14],15,-1416354905),x=E(x,S,R,M,_[I+5],21,-57434055),M=E(M,x,S,R,_[I+12],6,1700485571),R=E(R,M,x,S,_[I+3],10,-1894986606),S=E(S,R,M,x,_[I+10],15,-1051523),x=E(x,S,R,M,_[I+1],21,-2054922799),M=E(M,x,S,R,_[I+8],6,1873313359),R=E(R,M,x,S,_[I+15],10,-30611744),S=E(S,R,M,x,_[I+6],15,-1560198380),x=E(x,S,R,M,_[I+13],21,1309151649),M=E(M,x,S,R,_[I+4],6,-145523070),R=E(R,M,x,S,_[I+11],10,-1120210379),S=E(S,R,M,x,_[I+2],15,718787259),x=E(x,S,R,M,_[I+9],21,-343485551),M=T(M,z),x=T(x,P),S=T(S,B),R=T(R,U)}return Array(M,x,S,R)}function m(_,w,M,x,S,R){return T((w=T(T(w,_),T(x,R)))<<S|w>>>32-S,M)}function v(_,w,M,x,S,R,I){return m(w&M|~w&x,_,w,S,R,I)}function b(_,w,M,x,S,R,I){return m(w&x|M&~x,_,w,S,R,I)}function y(_,w,M,x,S,R,I){return m(w^M^x,_,w,S,R,I)}function E(_,w,M,x,S,R,I){return m(M^(w|~x),_,w,S,R,I)}function T(_,w){var M=(65535&_)+(65535&w);return(_>>16)+(w>>16)+(M>>16)<<16|65535&M}r.exports=function(_){return p.hash(_,g,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){r.exports=function(p){for(var g,m=new Array(p),v=0;v<p;v++)!(3&v)&&(g=4294967296*Math.random()),m[v]=g>>>((3&v)<<3)&255;return m}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){var p=n("./helpers");function g(b,y){b[y>>5]|=128<<24-y%32,b[15+(y+64>>9<<4)]=y;for(var E,T,_,w=Array(80),M=1732584193,x=-271733879,S=-1732584194,R=271733878,I=-1009589776,z=0;z<b.length;z+=16){for(var P=M,B=x,U=S,j=R,Z=I,ne=0;ne<80;ne++){w[ne]=ne<16?b[z+ne]:v(w[ne-3]^w[ne-8]^w[ne-14]^w[ne-16],1);var K=m(m(v(M,5),(K=x,T=S,_=R,(E=ne)<20?K&T|~K&_:!(E<40)&&E<60?K&T|K&_|T&_:K^T^_)),m(m(I,w[ne]),(E=ne)<20?1518500249:E<40?1859775393:E<60?-1894007588:-899497514)),I=R,R=S,S=v(x,30),x=M,M=K}M=m(M,P),x=m(x,B),S=m(S,U),R=m(R,j),I=m(I,Z)}return Array(M,x,S,R,I)}function m(b,y){var E=(65535&b)+(65535&y);return(b>>16)+(y>>16)+(E>>16)<<16|65535&E}function v(b,y){return b<<y|b>>>32-y}r.exports=function(b){return p.hash(b,g,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){function p(y,E){var T=(65535&y)+(65535&E);return(y>>16)+(E>>16)+(T>>16)<<16|65535&T}function g(y,E){var T,_=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),M=new Array(64);y[E>>5]|=128<<24-E%32,y[15+(E+64>>9<<4)]=E;for(var x,S,R=0;R<y.length;R+=16){for(var I=w[0],z=w[1],P=w[2],B=w[3],U=w[4],j=w[5],Z=w[6],ne=w[7],K=0;K<64;K++)M[K]=K<16?y[K+R]:p(p(p((S=M[K-2],v(S,17)^v(S,19)^b(S,10)),M[K-7]),(S=M[K-15],v(S,7)^v(S,18)^b(S,3))),M[K-16]),T=p(p(p(p(ne,v(S=U,6)^v(S,11)^v(S,25)),U&j^~U&Z),_[K]),M[K]),x=p(v(x=I,2)^v(x,13)^v(x,22),I&z^I&P^z&P),ne=Z,Z=j,j=U,U=p(B,T),B=P,P=z,z=I,I=p(T,x);w[0]=p(I,w[0]),w[1]=p(z,w[1]),w[2]=p(P,w[2]),w[3]=p(B,w[3]),w[4]=p(U,w[4]),w[5]=p(j,w[5]),w[6]=p(Z,w[6]),w[7]=p(ne,w[7])}return w}var m=n("./helpers"),v=function(y,E){return y>>>E|y<<32-E},b=function(y,E){return y>>>E};r.exports=function(y){return m.hash(y,g,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){i.read=function(p,g,m,v,R){var y,E,T=8*R-v-1,_=(1<<T)-1,w=_>>1,M=-7,x=m?R-1:0,S=m?-1:1,R=p[g+x];for(x+=S,y=R&(1<<-M)-1,R>>=-M,M+=T;0<M;y=256*y+p[g+x],x+=S,M-=8);for(E=y&(1<<-M)-1,y>>=-M,M+=v;0<M;E=256*E+p[g+x],x+=S,M-=8);if(y===0)y=1-w;else{if(y===_)return E?NaN:1/0*(R?-1:1);E+=Math.pow(2,v),y-=w}return(R?-1:1)*E*Math.pow(2,y-v)},i.write=function(p,g,m,v,b,I){var E,T,_=8*I-b-1,w=(1<<_)-1,M=w>>1,x=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=v?0:I-1,R=v?1:-1,I=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(T=isNaN(g)?1:0,E=w):(E=Math.floor(Math.log(g)/Math.LN2),g*(v=Math.pow(2,-E))<1&&(E--,v*=2),2<=(g+=1<=E+M?x/v:x*Math.pow(2,1-M))*v&&(E++,v/=2),w<=E+M?(T=0,E=w):1<=E+M?(T=(g*v-1)*Math.pow(2,b),E+=M):(T=g*Math.pow(2,M-1)*Math.pow(2,b),E=0));8<=b;p[m+S]=255&T,S+=R,T/=256,b-=8);for(E=E<<b|T,_+=b;0<_;p[m+S]=255&E,S+=R,E/=256,_-=8);p[m+S-R]|=128*I}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,r,i){(function(s,o,a,l,c,u,d,f,h){var p,g,m;function v(){}(s=r.exports={}).nextTick=(g=typeof window<"u"&&window.setImmediate,m=typeof window<"u"&&window.postMessage&&window.addEventListener,g?function(b){return window.setImmediate(b)}:m?(p=[],window.addEventListener("message",function(b){var y=b.source;y!==window&&y!==null||b.data!=="process-tick"||(b.stopPropagation(),0<p.length&&p.shift()())},!0),function(b){p.push(b),window.postMessage("process-tick","*")}):function(b){setTimeout(b,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Q9);var e7=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Fb=e7;Fb=Fb.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)});Fb.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function t7(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n7(t){var e=t7(t,"string");return typeof e=="symbol"?e:String(e)}function _n(t,e,n){return e=n7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _t={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},Kr,Cc;Kr={},_n(Kr,"".concat(_t.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(_t.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),_n(Kr,"".concat(_t.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(_t.position,`;
  `)}),_n(Kr,"".concat(_t.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(_t.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),_n(Kr,"".concat(_t.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(_t.pointSize,`;
    `)}),_n(Kr,"".concat(_t.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(_t.diffuseColor,`;
  `)}),_n(Kr,"".concat(_t.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(_t.fragColor,`;
  `)}),_n(Kr,"".concat(_t.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(_t.emissive,`;
    `)}),_n(Kr,"".concat(_t.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(_t.roughness,`;
    `)}),_n(Kr,"".concat(_t.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(_t.metalness,`;
    `)}),_n(Kr,"".concat(_t.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(_t.ao,`;
    `)}),_n(Kr,"".concat(_t.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(_t.bump," - (dot(").concat(_t.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),_n(Kr,"".concat(_t.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(_t.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(_t.depthAlpha,`;
    `)});Cc={},_n(Cc,"".concat(_t.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(_t.position,`, 1.0 );
  `)}),_n(Cc,"".concat(_t.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(_t.position,`;
  `)}),_n(Cc,"".concat(_t.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(_t.diffuseColor,`;
  `)}),_n(Cc,"".concat(_t.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(_t.fragColor,`;
  `)});var qr;qr={},_n(qr,"".concat(_t.position),"*"),_n(qr,"".concat(_t.positionRaw),"*"),_n(qr,"".concat(_t.normal),"*"),_n(qr,"".concat(_t.pointSize),["PointsMaterial"]),_n(qr,"".concat(_t.diffuseColor),"*"),_n(qr,"".concat(_t.fragColor),"*"),_n(qr,"".concat(_t.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),_n(qr,"".concat(_t.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),_n(qr,"".concat(_t.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),_n(qr,"".concat(_t.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),_n(qr,"".concat(_t.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),_n(qr,"".concat(_t.depthAlpha),"*");new vr;new W;Xe.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ie(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Ti.line={uniforms:$f.merge([Xe.common,Xe.fog,Xe.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new W;new W;new Wt;new Wt;new Wt;new W;new pt;new sI;new W;new vr;new gr;new Wt;class _w extends En{constructor(){const e=_w.SkyShader,n=new ii({name:e.name,uniforms:$f.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:Or,depthWrite:!1});super(new xa(1,1,1),n),this.isSky=!0}}_w.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new W},up:{value:new W(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var r7={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(J9,function(){var n=function(){function r(h){return o.appendChild(h.dom),h}function i(h){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===h?"block":"none";s=h}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(h){h.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=r(new n.Panel("FPS","#0ff","#002")),d=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){c++;var h=(performance||Date).now();if(d.update(h-a,200),h>l+1e3&&(u.update(1e3*c/(h-l),100),l=h,c=0,f)){var p=performance.memory;f.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return h},update:function(){a=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,d=48*c,f=3*c,h=2*c,p=3*c,g=15*c,m=74*c,v=30*c,b=document.createElement("canvas");b.width=u,b.height=d,b.style.cssText="width:80px;height:48px";var y=b.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=s,y.fillRect(0,0,u,d),y.fillStyle=i,y.fillText(r,f,h),y.fillRect(p,g,m,v),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p,g,m,v),{dom:b,update:function(E,T){o=Math.min(o,E),a=Math.max(a,E),y.fillStyle=s,y.globalAlpha=1,y.fillRect(0,0,u,g),y.fillStyle=i,y.fillText(l(E)+" "+r+" ("+l(o)+"-"+l(a)+")",f,h),y.drawImage(b,p+c,g,m-c,v,p,g,m-c,v),y.fillRect(p+m-c,g,c,v),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p+m-c,g,c,l((1-E/T)*v))}}},n})})(r7);var i7=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,s7=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const rh=new W(0,0,0),xw=new W(0,0,0),o7=new W(0,0,0);function OM(t,e,n){const r=rh.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[(Number.isNaN(r.x)?0:r.x)*i+i,-(r.y*s)+s]}function a7(t,e){const n=rh.setFromMatrixPosition(t.matrixWorld),r=xw.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(o7);return i.angleTo(s)>Math.PI/2}function l7(t,e,n,r){const i=rh.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(new Ie(s.x,s.y),e);const o=n.intersectObjects(r,!0);if(o.length>0){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function c7(t,e){if(e instanceof Li)return e.zoom;if(e instanceof yn){const n=rh.setFromMatrixPosition(t.matrixWorld),r=xw.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function u7(t,e,n){if(e instanceof yn||e instanceof Li){const r=rh.setFromMatrixPosition(t.matrixWorld),i=xw.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const Bb=t=>Math.abs(t)<1e-10?0:t;function E2(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Bb(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const d7=(t=>e=>E2(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),f7=(t=>(e,n)=>E2(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]),h7=["geometry","material"];new zl;const p7="/assets/HKMap-5qlz0CU7.png";function kM(t,e){if(e===WR)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Cm||e===ax){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(e===Cm)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class eg extends jr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new b7(n)}),this.register(function(n){return new T7(n)}),this.register(function(n){return new P7(n)}),this.register(function(n){return new R7(n)}),this.register(function(n){return new x7(n)}),this.register(function(n){return new w7(n)}),this.register(function(n){return new S7(n)}),this.register(function(n){return new E7(n)}),this.register(function(n){return new y7(n)}),this.register(function(n){return new M7(n)}),this.register(function(n){return new _7(n)}),this.register(function(n){return new A7(n)}),this.register(function(n){return new C7(n)}),this.register(function(n){return new v7(n)}),this.register(function(n){return new L7(n)}),this.register(function(n){return new I7(n)})}load(e,n,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ia.extractUrlBase(e);o=ia.resolveURL(c,this.path)}else o=ia.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===M2){try{o[Gt.KHR_BINARY_GLTF]=new O7(e)}catch(d){i&&i(d);return}s=JSON.parse(o[Gt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new j7(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(d){case Gt.KHR_MATERIALS_UNLIT:o[d]=new g7;break;case Gt.KHR_DRACO_MESH_COMPRESSION:o[d]=new k7(s,this.dracoLoader);break;case Gt.KHR_TEXTURE_TRANSFORM:o[d]=new D7;break;case Gt.KHR_MESH_QUANTIZATION:o[d]=new N7;break;default:f.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function m7(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v7{constructor(e){this.parser=e,this.name=Gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ke(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],lr);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Fx(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Nx(u),c.distance=d;break;case"spot":c=new Dx(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,jo(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class g7{constructor(){this.name=Gt.KHR_MATERIALS_UNLIT}getMaterialType(){return Gr}extendParams(e,n,r){const i=[];e.color=new Ke(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],lr),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,In))}return Promise.all(i)}}class y7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class b7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ie(a,a)}return Promise.all(s)}}class _7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class x7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Ke(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],lr)}return o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,In)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class w7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class S7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Ke().setRGB(a[0],a[1],a[2],lr),Promise.all(s)}}class E7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class M7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Ke().setRGB(a[0],a[1],a[2],lr),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,In)),Promise.all(s)}}class C7{constructor(e){this.parser=e,this.name=Gt.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return n.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(n,"bumpMap",o.bumpTexture)),Promise.all(s)}}class A7{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ss}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class T7{constructor(e){this.parser=e,this.name=Gt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class P7{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class R7{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class L7{constructor(e){this.name=Gt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,f=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,f,i.mode,i.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,i.mode,i.filter),h})})}else return null}}class I7{constructor(e){this.name=Gt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ci.TRIANGLES&&c.mode!==Ci.TRIANGLE_STRIP&&c.mode!==Ci.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,h=[];for(const p of d){const g=new pt,m=new W,v=new tr,b=new W(1,1,1),y=new xx(p.geometry,p.material,f);for(let E=0;E<f;E++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,E),l.SCALE&&b.fromBufferAttribute(l.SCALE,E),y.setMatrixAt(E,g.compose(m,v,b));for(const E in l)if(E==="_COLOR_0"){const T=l[E];y.instanceColor=new Cl(T.array,T.itemSize,T.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&p.geometry.setAttribute(E,l[E]);nn.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),h.push(y)}return u.isGroup?(u.clear(),u.add(...h),u):h[0]}))}}const M2="glTF",gd=12,DM={JSON:1313821514,BIN:5130562};class O7{constructor(e){this.name=Gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,gd),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==M2)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-gd,s=new DataView(e,gd);let o=0;for(;o<i;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===DM.JSON){const c=new Uint8Array(e,gd+o,a);this.content=r.decode(c)}else if(l===DM.BIN){const c=gd+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class k7{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=Vb[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=Vb[u]||u.toLowerCase();if(o[u]!==void 0){const f=r.accessors[e.attributes[u]],h=Kc[f.componentType];c[d]=h.name,l[d]=f.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(d,f){i.decodeDracoFile(u,function(h){for(const p in h.attributes){const g=h.attributes[p],m=l[p];m!==void 0&&(g.normalized=m)}d(h)},a,c,lr,f)})})}}class D7{constructor(){this.name=Gt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class N7{constructor(){this.name=Gt.KHR_MESH_QUANTIZATION}}class C2 extends Lu{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-n,d=(r-n)/u,f=d*d,h=f*d,p=e*c,g=p-c,m=-2*h+3*f,v=h-f,b=1-m,y=v-f+d;for(let E=0;E!==a;E++){const T=o[g+E+a],_=o[g+E+l]*u,w=o[p+E+a],M=o[p+E]*u;s[E]=b*T+y*_+m*w+v*M}return s}}const F7=new tr;class B7 extends C2{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return F7.fromArray(s).normalize().toArray(s),s}}const Ci={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Kc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NM={9728:Vn,9729:Nn,9984:nu,9985:Vf,9986:fl,9987:Qi},FM={33071:pr,33648:xl,10497:no},Zy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Vb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ko={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},V7={CUBICSPLINE:void 0,LINEAR:da,STEP:El},Jy={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function U7(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new qf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:bs})),t.DefaultMaterial}function Ha(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function jo(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function $7(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const f=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):t.attributes.position;o.push(f)}if(i){const f=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):t.attributes.normal;a.push(f)}if(s){const f=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):t.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2];return r&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=d),s&&(t.morphAttributes.color=f),t.morphTargetsRelative=!0,t})}function z7(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function H7(t){let e;const n=t.extensions&&t.extensions[Gt.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+Qy(n.attributes):e=t.indices+":"+Qy(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+Qy(t.targets[r]);return e}function Qy(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function Ub(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function G7(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const W7=new pt;class j7{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new m7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Ox(this.options.manager):this.textureLoader=new JL(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new es(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Ha(s,a,i),jo(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(ia.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Zy[i.type],a=Kc[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Ut(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Zy[i.type],c=Kc[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=i.byteOffset||0,h=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let g,m;if(h&&h!==d){const v=Math.floor(f/h),b="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let y=n.cache.get(b);y||(g=new c(a,v*h,i.count*h/u),y=new Pu(g,h/u),n.cache.add(b,y)),m=new _s(y,l,f%h/u,p)}else a===null?g=new c(i.count*l):g=new c(a,f,i.count*l),m=new Ut(g,l,p);if(i.sparse!==void 0){const v=Zy.SCALAR,b=Kc[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,E=i.sparse.values.byteOffset||0,T=new b(o[1],y,i.sparse.count*v),_=new c(o[2],E,i.sparse.count*l);a!==null&&(m=new Ut(m.array.slice(),m.itemSize,m.normalized));for(let w=0,M=T.length;w<M;w++){const x=T[w];if(m.setX(x,_[w*l]),l>=2&&m.setY(x,_[w*l+1]),l>=3&&m.setZ(x,_[w*l+2]),l>=4&&m.setW(x,_[w*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=NM[f.magFilter]||Nn,u.minFilter=NM[f.minFilter]||Qi,u.wrapS=FM[f.wrapS]||no,u.wrapT=FM[f.wrapT]||no,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;n.isImageBitmapLoader===!0&&(p=function(g){const m=new kn(g);m.needsUpdate=!0,f(m)}),n.load(ia.resolveURL(d,s.path),p,void 0,h)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||G7(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Gt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Gt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.colorSpace=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ev,ar.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Dr,ar.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return qf}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Gt.KHR_MATERIALS_UNLIT]){const d=i[Gt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,n))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ke(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],lr),a.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",d.baseColorTexture,In)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Qr);const u=s.alphaMode||Jy.OPAQUE;if(u===Jy.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Jy.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Gr&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ie(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Gr&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Gr){const d=s.emissiveFactor;a.emissive=new Ke().setRGB(d[0],d[1],d[2],lr)}return s.emissiveTexture!==void 0&&o!==Gr&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,In)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),jo(d,s),n.associations.set(d,{materials:e}),s.extensions&&Ha(i,d,s),d})}createUniqueName(e){const n=Vt.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return BM(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=H7(c),d=i[u];if(d)o.push(d.promise);else{let f;c.extensions&&c.extensions[Gt.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=BM(new Mt,c,n),i[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?U7(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let h=0,p=u.length;h<p;h++){const g=u[h],m=o[h];let v;const b=c[h];if(m.mode===Ci.TRIANGLES||m.mode===Ci.TRIANGLE_STRIP||m.mode===Ci.TRIANGLE_FAN||m.mode===void 0)v=s.isSkinnedMesh===!0?new _x(g,b):new En(g,b),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),m.mode===Ci.TRIANGLE_STRIP?v.geometry=kM(v.geometry,ax):m.mode===Ci.TRIANGLE_FAN&&(v.geometry=kM(v.geometry,Cm));else if(m.mode===Ci.LINES)v=new rs(g,b);else if(m.mode===Ci.LINE_STRIP)v=new ro(g,b);else if(m.mode===Ci.LINE_LOOP)v=new wx(g,b);else if(m.mode===Ci.POINTS)v=new Sx(g,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(v.geometry.morphAttributes).length>0&&z7(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),jo(v,s),m.extensions&&Ha(i,v,m),n.assignFinalMaterial(v),d.push(v)}for(let h=0,p=d.length;h<p;h++)n.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return s.extensions&&Ha(i,d[0],s),d[0];const f=new Xs;s.extensions&&Ha(i,f,s),n.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new yn(Ml.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Li(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),jo(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const f=new pt;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Wf(a,l)})}loadAnimation(e){const n=this.json,r=this,i=n.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,f=i.channels.length;d<f;d++){const h=i.channels[d],p=i.samplers[h.sampler],g=h.target,m=g.node,v=i.parameters!==void 0?i.parameters[p.input]:p.input,b=i.parameters!==void 0?i.parameters[p.output]:p.output;g.node!==void 0&&(o.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",b)),c.push(p),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const f=d[0],h=d[1],p=d[2],g=d[3],m=d[4],v=[];for(let b=0,y=f.length;b<y;b++){const E=f[b],T=h[b],_=p[b],w=g[b],M=m[b];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const x=r._createAnimationTracks(E,T,_,w,M);if(x)for(let S=0;S<x.length;S++)v.push(x[S])}return new au(s,void 0,v)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],f=c[2];f!==null&&u.traverse(function(h){h.isSkinnedMesh&&h.bind(f,W7)});for(let h=0,p=d.length;h<p;h++)u.add(d[h]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Sv:c.length>1?u=new Xs:c.length===1?u=c[0]:u=new nn,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),jo(u,s),s.extensions&&Ha(r,u,s),s.matrix!==void 0){const d=new pt;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new Xs;r.name&&(s.name=i.createUniqueName(r.name)),jo(s,r),r.extensions&&Ha(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[f,h]of i.associations)(f instanceof ar||f instanceof kn)&&d.set(f,h);return u.traverse(f=>{const h=i.associations.get(f);h!=null&&d.set(f,h)}),d};return i.associations=c(s),s})}_createAnimationTracks(e,n,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];ko[s.path]===ko.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let c;switch(ko[s.path]){case ko.weights:c=Tl;break;case ko.rotation:c=fa;break;case ko.position:case ko.scale:c=Pl;break;default:switch(r.itemSize){case 1:c=Tl;break;case 2:case 3:default:c=Pl;break}break}const u=i.interpolation!==void 0?V7[i.interpolation]:da,d=this._getArrayFromAccessor(r);for(let f=0,h=l.length;f<h;f++){const p=new c(l[f]+"."+ko[s.path],n.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const r=Ub(n.constructor),i=new Float32Array(n.length);for(let s=0,o=n.length;s<o;s++)i[s]=n[s]*r;n=i}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof fa?B7:C2;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function X7(t,e,n){const r=e.attributes,i=new vr;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new W(l[0],l[1],l[2]),new W(c[0],c[1],c[2])),a.normalized){const u=Ub(Kc[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new W,l=new W;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const f=n.json.accessors[d.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const g=Ub(Kc[f.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new gr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function BM(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=Vb[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return ln.workingColorSpace!==lr&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ln.workingColorSpace}" not supported.`),jo(t,e),X7(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?$7(t,e.targets,n):t})}function K7(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}const Oi=K7();function q7(){const t={w:!1,a:!1,s:!1,d:!1},e=l=>{t[l.key]=!0},n=l=>{t[l.key]=!1},r=.05,i=.05,s=new tr,o=new W(0,0,-1);function a(l,c){t.w||t.s?(o.set(0,0,t.w?-1:1),o.applyQuaternion(l.quaternion),o.normalize(),o.multiplyScalar(i),l.position.add(o),Oi.emit("move",l.position),c.play()):c.stop(),(t.a||t.d)&&(s.multiply(new tr().setFromAxisAngle(new W(0,t.a?1:-1,0),r)),l.setRotationFromQuaternion(s),Oi.emit("move",l.position))}return kt(()=>{window.addEventListener("keydown",e),window.addEventListener("keyup",n)}),Sn(()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}),{keyListener:a}}var Y7=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let A2;const tg=t=>A2=t,T2=Symbol();function $b(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Gd;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Gd||(Gd={}));function Z7(){const t=YT(!0),e=t.run(()=>le({}));let n=[],r=[];const i=iv({install(s){tg(i),i._a=s,s.provide(T2,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!Y7?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const P2=()=>{};function VM(t,e,n,r=P2){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Nf()&&Qm(i),i}function Ac(t,...e){t.slice().forEach(n=>{n(...e)})}const J7=t=>t();function zb(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];$b(i)&&$b(r)&&t.hasOwnProperty(n)&&!Xt(r)&&!Qo(r)?t[n]=zb(i,r):t[n]=r}return t}const Q7=Symbol();function eX(t){return!$b(t)||!t.hasOwnProperty(Q7)}const{assign:$o}=Object;function tX(t){return!!(Xt(t)&&t.effect)}function nX(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const u=kr(n.state.value[t]);return $o(u,s,Object.keys(o||{}).reduce((d,f)=>(d[f]=iv(A(()=>{tg(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=R2(t,c,e,n,r,!0),l}function R2(t,e,n={},r,i,s){let o;const a=$o({actions:{}},n),l={deep:!0};let c,u,d=[],f=[],h;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),le({});let g;function m(M){let x;c=u=!1,typeof M=="function"?(M(r.state.value[t]),x={type:Gd.patchFunction,storeId:t,events:h}):(zb(r.state.value[t],M),x={type:Gd.patchObject,payload:M,storeId:t,events:h});const S=g=Symbol();cn().then(()=>{g===S&&(c=!0)}),u=!0,Ac(d,x,r.state.value[t])}const v=s?function(){const{state:x}=n,S=x?x():{};this.$patch(R=>{$o(R,S)})}:P2;function b(){o.stop(),d=[],f=[],r._s.delete(t)}function y(M,x){return function(){tg(r);const S=Array.from(arguments),R=[],I=[];function z(U){R.push(U)}function P(U){I.push(U)}Ac(f,{args:S,name:M,store:T,after:z,onError:P});let B;try{B=x.apply(this&&this.$id===t?this:T,S)}catch(U){throw Ac(I,U),U}return B instanceof Promise?B.then(U=>(Ac(R,U),U)).catch(U=>(Ac(I,U),Promise.reject(U))):(Ac(R,B),B)}}const E={_p:r,$id:t,$onAction:VM.bind(null,f),$patch:m,$reset:v,$subscribe(M,x={}){const S=VM(d,M,x.detached,()=>R()),R=o.run(()=>De(()=>r.state.value[t],I=>{(x.flush==="sync"?u:c)&&M({storeId:t,type:Gd.direct,events:h},I)},$o({},l,x)));return S},$dispose:b},T=Sr(E);r._s.set(t,T);const w=(r._a&&r._a.runWithContext||J7)(()=>r._e.run(()=>(o=YT()).run(e)));for(const M in w){const x=w[M];if(Xt(x)&&!tX(x)||Qo(x))s||(p&&eX(x)&&(Xt(x)?x.value=p[M]:zb(x,p[M])),r.state.value[t][M]=x);else if(typeof x=="function"){const S=y(M,x);w[M]=S,a.actions[M]=x}}return $o(T,w),$o(Yt(T),w),Object.defineProperty(T,"$state",{get:()=>r.state.value[t],set:M=>{m(x=>{$o(x,M)})}}),r._p.forEach(M=>{$o(T,o.run(()=>M({store:T,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(T.$state,p),c=!0,u=!0,T}function L2(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=cB();return a=a||(c?Zn(T2,null):null),a&&tg(a),a=A2,a._s.has(r)||(s?R2(r,e,i,a):nX(r,i,a)),a._s.get(r)}return o.$id=r,o}const jl=L2("weather",{actions:{setHumidity(t){t.map(e=>(e.data.map(n=>Rp(n)),e)),this.$state.Humidity=t},setRainfall(t){t.map(e=>(e.data.map(n=>Rp(n)),e)),this.$state.Rainfall=t},setWind(t){t.map(e=>(e.data.map(n=>Rp(n)),e)),this.$state.Wind=t},setCloud(t){t.map(e=>Rp(e)),this.$state.Cloud=t},setUVRay(t){t.map(e=>rX(e)),this.$state.UVRay=t}},state(){return{Humidity:[],Rainfall:[],UVRay:[],Wind:[],Cloud:[]}},getters:{getHumidity(t){return t.Humidity},getRainfall(t){return t.Rainfall},getUVRay(t){return t.UVRay},getWind(t){return t.Wind},getCloud(t){return t.Cloud}}});function Rp(t){return delete Object.assign(t,{year:t["/Year"]})["/Year"],delete Object.assign(t,{month:t["/Month"]})["/Month"],delete Object.assign(t,{day:t["/Day"]})["/Day"],delete Object.assign(t,{value:t["/Value"]})["/Value"],delete Object.assign(t,{completeness:t["/data Completeness"]})["/data Completeness"],t}function rX(t){return delete Object.assign(t,{year:t.Year}).Year,delete Object.assign(t,{month:t.Month}).Month,delete Object.assign(t,{day:t.Day}).Day,delete Object.assign(t,{value:t.Value}).Value,delete Object.assign(t,{completeness:t.Completeness}).Completeness,t}const Du=L2("date",{actions:{setDate(t){this.$state.date=t}},state(){return{date:{year:2023,month:1,day:1}}},getters:{getDate(t){return t.date}}}),ni={:[-.9,-17.5],:[6.67,.16],:[2.64,-11.25],:[.74,-7.4],:[-13.96,-3.77],:[2.85,-23.3],:[-4.13,-8.6],:[16.5,-6.3],:[5.4,-5.1],:[2.97,4.91],:[-7.05,8.66],:[-8,18],:[-11.3,-11.7],:[-16.75,5.23],:[-7.39,-.88],:[-1,-1.6],:[9.38,4.9],:[2.7,14],:[2.46,-.08],:[14,0],:[12.43,20.51],:[-9.5,-13.95],:[14.2,-5.66],:[7.76,-14.38],:[1.56,11]," ()":[-2.21,.36],:[5,4],:[1.52,3.36],:[5.6,8.48],:[1.64,8.06],:[1.64,8.06],:[-12.5,-4],:[7.42,8.71],:[-18.9,1.247],:[-16.7,9.92],:[-2.21,.36],:[-1.7,8.857],:[0,19.5],:[17.57,-14.56]},iX=["position"],sX=me("TresBoxGeometry",{args:[.01,.3,.01]},null,-1),oX=me("TresMeshBasicMaterial",{color:"grey",transparent:!0,opacity:.5},null,-1),aX=[sX,oX],lX=Me({__name:"RainFall",setup(t){const e=jl(),n=Du();let r=st([]);De(()=>n.date,a=>{i(a)},{immediate:!0});function i(a={year:"2023",month:"1",day:"1"}){r.value=[];const l=[];e.Rainfall.forEach(c=>{const u=ni[c.place],d=c.data.find(h=>h.year==a.year&&h.month==a.month&&h.day==a.day),f=d!=null&&d.value?parseInt(d.value)>50?50:parseInt(d.value):0;for(let h=0;h<f;h++){for(let p=u[0]-5;p<u[0]+5;p+=1.5)for(let g=u[0]-5;g<u[0]+5;g+=1.5){let m=999,v="";Object.keys(ni).forEach(b=>{let y=Math.sqrt((p-ni[b][0])**2+(g-ni[b][1])**2);y<m&&(m=y,v=b)}),v==c.place&&l.push({position:[p,5,g],velocity:Math.random()*.5+.5})}l.push({position:[u[0]+Math.random()*4-1,5,u[1]+Math.random()*4-1],velocity:Math.random()*.5+.5})}}),r.value=l}const s=o();function o(){return setInterval(()=>{const l=[...r.value];l.forEach(c=>{c.position[1]=c.position[1]-c.velocity<0?5:c.position[1]-c.velocity}),r.value=l},10)}return Sn(()=>{s&&clearInterval(s)}),(a,l)=>(V(!0),ee(qe,null,vt(C(r),(c,u)=>(V(),ee("TresMesh",{key:u,position:[c.position[0],c.position[1],c.position[2]],name:"Rain Fall"},aX,8,iX))),128))}}),cX=["object"],uX=me("TresDirectionalLight",{position:[0,30,0]},null,-1),dX=Me({__name:"Sun",async setup(t){let e,n;const r=new URL("/assets/sun-_i_cSWbv.glb",import.meta.url),{scene:i}=([e,n]=uv(()=>Gv(eg,r.href)),e=await e,n(),e);return(s,o)=>(V(),ee(qe,null,[me("primitive",{object:C(i),scale:1,position:[0,30,0]},null,8,cX),uX],64))}}),fX=["far"],hX=Me({__name:"Humidity",setup(t){const e=jl(),n=Du(),r=le(30);let i={year:2023,month:1,day:1};De(()=>n.date,o=>{i=o}),s({x:0,z:0}),Oi.on("move",o=>{const a=s(o);r.value=a/3});function s(o){let a=999,l=0;return e.Humidity.forEach(c=>{const u=ni[c.place];let d=Math.sqrt((u[0]-o.x)**2+(u[1]-o.z)**2);if(d<a){a=d;const f=c.data.find(h=>h.year==i.year&&h.month==i.month&&h.day==i.day);l=f?parseInt(f.value):100}}),l}return(o,a)=>(V(),ee("TresFog",{color:16777215,far:r.value,near:0,name:"Humidity"},null,8,fX))}}),pX=["power"],mX=Me({__name:"UVRay",setup(t){const e=le(0),n=jl(),r=Du();De(()=>r.date,s=>{i(s)},{immediate:!0});function i(s={year:"2023",month:"1",day:"1"}){const o=n.UVRay.find(a=>a.year==s.year&&a.month==s.month&&a.day==s.day);e.value=o!=null&&o.value?500*parseInt(o.value):0}return(s,o)=>(V(),ee("TresDirectionalLight",{position:[0,10,0],color:14315734,power:e.value,name:"UV Ray"},null,8,pX))}}),vX=["object","position"],gX=Me({__name:"Wind",async setup(t){let e,n;const r=new URL("/assets/turbine-BQCx0Q_Y.glb",import.meta.url),{scene:i,animations:s}=([e,n]=uv(()=>Gv(eg,r.href)),e=await e,n(),e),o=jl(),a=Du();let l=st([]);De(()=>a.date,u=>{c(u)},{immediate:!0});function c(u={year:"2023",month:"1",day:"1"}){let d=[];o.Wind.forEach(f=>{const h=ni[f.place],p=i.clone(),{actions:g}=x2(s,p),m=g["rotation|Action"];m.play();const v=f.data.find(b=>b.year==u.year&&b.month==u.month&&b.day==u.day);m.timeScale=v?parseInt(v.value):0,d.push({model:p,position:[h[0],2.3,h[1]]})}),l.value=d}return(u,d)=>(V(!0),ee(qe,null,vt(C(l),f=>(V(),ee("primitive",{object:f.model,scale:.03,position:f.position,key:f,name:"Wind"},null,8,vX))),128))}}),yX=["object","position","keys"],bX=Me({__name:"Cloud",async setup(t){let e,n;const r=new URL("/assets/cloud-CXqquAo8.glb",import.meta.url),{scene:i}=([e,n]=uv(()=>Gv(eg,r.href)),e=await e,n(),e),s=jl(),o=Du(),a=st([]);De(()=>o.date,u=>{l(u)},{immediate:!0});function l(u={year:"2023",month:"1",day:"1"}){const d=s.Cloud.find(h=>h.year==u.year&&h.month==u.month&&h.day==u.day),f=d!=null&&d.value?parseInt(d.value):0;for(let h=0;h<f;h++)a.value.push({position:[Math.random()*50-25,5,Math.random()*50-25],up:!0,velocity:Math.random()*.01})}const c=setInterval(()=>{let u=[...a.value];u.forEach(d=>{d.position[1]+=d.up?d.velocity:-1*d.velocity,d.position[1]>6&&(d.up=!1),d.position[1]<4&&(d.up=!0)}),a.value=u},10);return Sn(()=>{c&&clearInterval(c)}),(u,d)=>(V(!0),ee(qe,null,vt(a.value,(f,h)=>(V(),ee("primitive",{object:C(i).clone(),scale:.5,position:[f.position[0],f.position[1],f.position[2]],keys:h,name:"Cloud"},null,8,yX))),256))}}),_X=["rotation-x"],xX=me("TresPlaneGeometry",{args:[10,10,1,1]},null,-1),wX=["map"],SX=["object"],EX=Me({__name:"Index",async setup(t){let e,n;const r=[{label:"Rain Fall",comp:lX,show:!0},{label:"Sun Light",comp:dX,show:!0},{label:"Humidity",comp:hX,show:!0},{label:"UV Ray",comp:mX,show:!0},{label:"Wind",comp:gX,show:!0},{label:"Cloud",comp:bX,show:!0}],i=st(r),s=new Vv,a=new Ox(s).load(p7),l=new URL("/assets/man-9XMtMb0d.gltf",import.meta.url),{scene:c,animations:u}=([e,n]=uv(()=>Gv(eg,l.href)),e=await e,n(),e),{actions:d}=x2(u,c),f=d["GltfAnimation 0"];f.play();const h=le(null),p=le(null),g=le(null),m=le(null),{onLoop:v}=Iu(),{keyListener:b}=q7();return v(({delta:y,elapsed:E})=>{h.value&&(b(h.value,f),p.value&&p.value.lookAt(h.value.position))}),Wv({OrbitControls:IM}),Oi.on("panel:weather",y=>{var _,w,M;const E=(M=(w=(_=m==null?void 0:m.value)==null?void 0:_.context)==null?void 0:w.scene)==null?void 0:M.value;let T=[...r];T.forEach(x=>{if(y.includes(x.label))x.show=!0;else{for(x.show=!1;E!=null&&E.getObjectByName(x.label);)E.remove(E.getObjectByName(x.label));x.label=="Humidity"&&(E.fog=null)}}),i.value=T}),Oi.on("panel:date",()=>{var E,T,_;const y=(_=(T=(E=m==null?void 0:m.value)==null?void 0:E.context)==null?void 0:T.scene)==null?void 0:_.value;r.forEach(w=>{for(;y!=null&&y.getObjectByName(w.label);)y.remove(y.getObjectByName(w.label))})}),Oi.on("panel:location",y=>{h.value&&(h.value.position.set(ni[y][0],0,ni[y][1]),Oi.emit("move",{x:ni[y][0],y:0,z:ni[y][1]}))}),(y,E)=>(V(),Te(C(yI),{"clear-color":"#FFFFFF",shadows:"",alpha:"","window-size":"",ref_key:"sceneRef",ref:m},{default:we(()=>[ke(C(IM)),me("TresMesh",{ref_key:"boxRef",ref:g,scale:5,"rotation-x":-1*Math.PI/2},[xX,me("TresMeshStandardMaterial",{map:C(a)},null,8,wX)],8,_X),me("TresGroup",{ref_key:"modelRef",ref:h,position:[0,0,2]},[me("primitive",{object:C(c),scale:1e-4},null,8,SX),me("TresPerspectiveCamera",{ref_key:"cameraRef",ref:p,position:[0,7,2],fov:45,aspect:1,near:.1,far:300},null,512)],512),(V(!0),ee(qe,null,vt(i.value,(T,_)=>(V(),Te(V_,{key:_},{default:we(()=>[T.show?(V(),Te(mr(T.comp),{key:0})):ve("",!0)]),_:2},1024))),128))]),_:1},512))}}),MX=Me({__name:"Weather",props:["options"],emits:["update"],setup(t,{emit:e}){const n=t,r=["Humidity","Rain Fall","Sun Light","UV Ray","Wind","Cloud"],i=e,s=le(n.options);return(o,a)=>{const l=Ur("VaOptionList");return V(),Te(l,{modelValue:s.value,"onUpdate:modelValue":[a[0]||(a[0]=c=>s.value=c),a[1]||(a[1]=c=>i("update",s.value))],options:r},null,8,["modelValue"])}}});function CX(t){const e=ga({title:"Weather",content:MX,options:t});return De(()=>e.options,n=>{Oi.emit("panel:weather",n)}),{WeatherOptionCollapses:e}}const AX=Me({__name:"Date",props:["date"],emits:["update"],setup(t,{emit:e}){const r=le(t.date),i=e;return(s,o)=>{const a=Ur("VaDateInput");return V(),Te(a,{modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>r.value=l),o[1]||(o[1]=l=>i("update",r.value))],clearable:"",allowedDays:l=>l.getFullYear()===2023},null,8,["modelValue","allowedDays"])}}});function TX(t){const e=Du(),n=ga({title:"Date",content:AX,date:t});return De(()=>n.date,r=>{e.setDate({year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()}),Oi.emit("panel:date",{year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()})}),{DateTimeOptionObj:n}}const PX=Me({__name:"Location",props:["location"],emits:["update"],setup(t,{emit:e}){const n=Object.keys(ni),r=e,i=t,s=le(n.includes(i.location)?i.location:n[0]);return(o,a)=>{const l=Ur("VaSelect");return V(),Te(l,{modelValue:s.value,"onUpdate:modelValue":[a[0]||(a[0]=c=>s.value=c),a[1]||(a[1]=c=>r("update",s.value))],placeholder:"Go To",color:"#990099",options:C(n)},null,8,["modelValue","options"])}}});function RX(){const t=ga({title:"Location",content:PX,location:""});return De(()=>t.location,e=>{Oi.emit("panel:location",e)}),{LocationOptionCollapses:t}}function LX(){const t=jl(),e=Sr({location:"",position:{x:0,z:0},date:{year:"2023",month:"1",day:"1"},weather:{cloud:"0",humidity:"0",rainfall:"0",wind:"0",uvRay:"0"}});return n(),r(),i(),s(),o(),Oi.on("move",a=>{let l=999,c="";Object.keys(ni).forEach(u=>{const d=Math.sqrt((ni[u][0]-a.x)**2+(ni[u][1]-a.z)**2);d<l&&(l=d,c=u)}),e.location=c,e.position.x=a.x.toFixed(2),e.position.z=a.z.toFixed(2),r(),i(),s()}),Oi.on("panel:date",a=>{e.date={...a};const l=t.Cloud.find(c=>c.year==a.year&&c.month==a.month&&c.day==a.day);e.weather.cloud=l?l.value:"0",n(),r(),i(),s(),o()}),e;function n(){const a=t.Cloud.find(l=>l.year==e.date.year&&l.month==e.date.month&&l.day==e.date.day);e.weather.cloud=a?a.value:"no data"}function r(){const a=t.Humidity.find(c=>c.place==e.location),l=a==null?void 0:a.data.find(c=>c.year==e.date.year&&c.month==e.date.month&&c.day==e.date.day);e.weather.humidity=l?l.value:"no data"}function i(){const a=t.Rainfall.find(c=>c.place==e.location),l=a==null?void 0:a.data.find(c=>c.year==e.date.year&&c.month==e.date.month&&c.day==e.date.day);e.weather.rainfall=l!=null&&l.value?l.value:"no data"}function s(){const a=t.Wind.find(c=>c.place==e.location),l=a==null?void 0:a.data.find(c=>c.year==e.date.year&&c.month==e.date.month&&c.day==e.date.day);e.weather.wind=l!=null&&l.value?l.value:"no data"}function o(){const a=t.UVRay.find(l=>l.year==e.date.year&&l.month==e.date.month&&l.day==e.date.day);e.weather.uvRay=a!=null&&a.value?a.value:"no data"}}const I2=t=>(TF("data-v-2459255c"),t=t(),PF(),t),IX={class:"wrapper"},OX={class:"right-mid"},kX={class:"d-flex"},DX=I2(()=>me("div",null,[me("h2",null,"Location:"),me("h2",null,"Date:"),me("h2",null,"Cloud:"),me("h2",null,"Humidity:"),me("h2",null,"Rainfall:"),me("h2",null,"Wind:"),me("h2",null,"UV Ray:")],-1)),NX=I2(()=>me("div",null,"",-1)),FX=Me({__name:"Index",setup(t){const{WeatherOptionCollapses:e}=CX(["Humidity","Rain Fall","Sun Light","UV Ray","Wind","Cloud"]),{DateTimeOptionObj:n}=TX(new Date("2023-01-01")),{LocationOptionCollapses:r}=RX(),i=LX();return(s,o)=>{const a=Ur("VaButton"),l=Ur("VaCollapse"),c=Ur("VaAccordion"),u=Ur("VaIcon"),d=Ur("VaSidebarItemTitle"),f=Ur("VaSidebarItemContent"),h=Ur("VaSidebarItem"),p=Ur("VaSidebar");return V(),ee(qe,null,[me("div",IX,[ke(c,{class:"d-flex justify-space-evenly"},{default:we(()=>[ke(l,{style:{width:"100%"}},{header:we(()=>[ke(a,{color:"info",gradient:"",class:"mb-2"},{default:we(()=>[gt(Ze(C(e).title),1)]),_:1})]),content:we(()=>[(V(),Te(mr(C(e).content),{options:C(e).options,onUpdate:o[0]||(o[0]=g=>C(e).options=g),class:"bg"},null,40,["options"]))]),_:1}),ke(l,{style:{width:"100%"}},{header:we(()=>[ke(a,{color:"info",gradient:"",class:"mb-2"},{default:we(()=>[gt(Ze(C(n).title),1)]),_:1})]),content:we(()=>[(V(),Te(mr(C(n).content),{onUpdate:o[1]||(o[1]=g=>C(n).date=g),date:C(n).date,class:"bg"},null,40,["date"]))]),_:1}),ke(l,{style:{width:"100%"}},{header:we(()=>[ke(a,{color:"info",gradient:"",class:"mb-2"},{default:we(()=>[gt(Ze(C(r).title),1)]),_:1})]),content:we(()=>[(V(),Te(mr(C(r).content),{location:C(r).location,onUpdate:o[2]||(o[2]=g=>C(r).location=g)},null,40,["location"]))]),_:1})]),_:1})]),me("div",OX,[ke(p,{width:"22rem",color:"#d3d3d3"},{default:we(()=>[ke(h,null,{default:we(()=>[ke(f,null,{default:we(()=>[ke(u,{name:"room"}),ke(d,null,{default:we(()=>[me("div",kX,[DX,NX,me("div",null,[me("h2",null,Ze(`${C(i).location} (${C(i).position.x}, ${C(i).position.z})`),1),me("h2",null,Ze(`${C(i).date.year}/${C(i).date.month}/${C(i).date.day}`),1),me("h2",null,Ze(`${C(i).weather.cloud}`),1),me("h2",null,Ze(`${C(i).weather.humidity}`),1),me("h2",null,Ze(`${C(i).weather.rainfall}`),1),me("h2",null,Ze(`${C(i).weather.wind}`),1),me("h2",null,Ze(`${C(i).weather.uvRay}`),1)])])]),_:1})]),_:1})]),_:1})]),_:1})])],64)}}}),BX=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},VX=BX(FX,[["__scopeId","data-v-2459255c"]]);function O2(t,e){return function(){return t.apply(e,arguments)}}const{toString:UX}=Object.prototype,{getPrototypeOf:ww}=Object,ng=(t=>e=>{const n=UX.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),As=t=>(t=t.toLowerCase(),e=>ng(e)===t),rg=t=>e=>typeof e===t,{isArray:Nu}=Array,Cf=rg("undefined");function $X(t){return t!==null&&!Cf(t)&&t.constructor!==null&&!Cf(t.constructor)&&Ni(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const k2=As("ArrayBuffer");function zX(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&k2(t.buffer),e}const HX=rg("string"),Ni=rg("function"),D2=rg("number"),ig=t=>t!==null&&typeof t=="object",GX=t=>t===!0||t===!1,om=t=>{if(ng(t)!=="object")return!1;const e=ww(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WX=As("Date"),jX=As("File"),XX=As("Blob"),KX=As("FileList"),qX=t=>ig(t)&&Ni(t.pipe),YX=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ni(t.append)&&((e=ng(t))==="formdata"||e==="object"&&Ni(t.toString)&&t.toString()==="[object FormData]"))},ZX=As("URLSearchParams"),JX=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ih(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Nu(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function N2(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const F2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,B2=t=>!Cf(t)&&t!==F2;function Hb(){const{caseless:t}=B2(this)&&this||{},e={},n=(r,i)=>{const s=t&&N2(e,i)||i;om(e[s])&&om(r)?e[s]=Hb(e[s],r):om(r)?e[s]=Hb({},r):Nu(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ih(arguments[r],n);return e}const QX=(t,e,n,{allOwnKeys:r}={})=>(ih(e,(i,s)=>{n&&Ni(i)?t[s]=O2(i,n):t[s]=i},{allOwnKeys:r}),t),eK=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tK=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nK=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&ww(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rK=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},iK=t=>{if(!t)return null;if(Nu(t))return t;let e=t.length;if(!D2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},sK=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ww(Uint8Array)),oK=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},aK=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lK=As("HTMLFormElement"),cK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),UM=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),uK=As("RegExp"),V2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ih(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},dK=t=>{V2(t,(e,n)=>{if(Ni(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ni(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},fK=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Nu(t)?r(t):r(String(t).split(e)),n},hK=()=>{},pK=(t,e)=>(t=+t,Number.isFinite(t)?t:e),e0="abcdefghijklmnopqrstuvwxyz",$M="0123456789",U2={DIGIT:$M,ALPHA:e0,ALPHA_DIGIT:e0+e0.toUpperCase()+$M},mK=(t=16,e=U2.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function vK(t){return!!(t&&Ni(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const gK=t=>{const e=new Array(10),n=(r,i)=>{if(ig(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Nu(r)?[]:{};return ih(r,(o,a)=>{const l=n(o,i+1);!Cf(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},yK=As("AsyncFunction"),bK=t=>t&&(ig(t)||Ni(t))&&Ni(t.then)&&Ni(t.catch),Fe={isArray:Nu,isArrayBuffer:k2,isBuffer:$X,isFormData:YX,isArrayBufferView:zX,isString:HX,isNumber:D2,isBoolean:GX,isObject:ig,isPlainObject:om,isUndefined:Cf,isDate:WX,isFile:jX,isBlob:XX,isRegExp:uK,isFunction:Ni,isStream:qX,isURLSearchParams:ZX,isTypedArray:sK,isFileList:KX,forEach:ih,merge:Hb,extend:QX,trim:JX,stripBOM:eK,inherits:tK,toFlatObject:nK,kindOf:ng,kindOfTest:As,endsWith:rK,toArray:iK,forEachEntry:oK,matchAll:aK,isHTMLForm:lK,hasOwnProperty:UM,hasOwnProp:UM,reduceDescriptors:V2,freezeMethods:dK,toObjectSet:fK,toCamelCase:cK,noop:hK,toFiniteNumber:pK,findKey:N2,global:F2,isContextDefined:B2,ALPHABET:U2,generateString:mK,isSpecCompliantForm:vK,toJSONObject:gK,isAsyncFn:yK,isThenable:bK};function en(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Fe.inherits(en,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $2=en.prototype,z2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{z2[t]={value:t}});Object.defineProperties(en,z2);Object.defineProperty($2,"isAxiosError",{value:!0});en.from=(t,e,n,r,i,s)=>{const o=Object.create($2);return Fe.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),en.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const _K=null;function Gb(t){return Fe.isPlainObject(t)||Fe.isArray(t)}function H2(t){return Fe.endsWith(t,"[]")?t.slice(0,-2):t}function zM(t,e,n){return t?t.concat(e).map(function(i,s){return i=H2(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function xK(t){return Fe.isArray(t)&&!t.some(Gb)}const wK=Fe.toFlatObject(Fe,{},null,function(e){return/^is[A-Z]/.test(e)});function sg(t,e,n){if(!Fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!Fe.isUndefined(m[g])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(e);if(!Fe.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(Fe.isDate(p))return p.toISOString();if(!l&&Fe.isBlob(p))throw new en("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(p)||Fe.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,m){let v=p;if(p&&!m&&typeof p=="object"){if(Fe.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(Fe.isArray(p)&&xK(p)||(Fe.isFileList(p)||Fe.endsWith(g,"[]"))&&(v=Fe.toArray(p)))return g=H2(g),v.forEach(function(y,E){!(Fe.isUndefined(y)||y===null)&&e.append(o===!0?zM([g],E,s):o===null?g:g+"[]",c(y))}),!1}return Gb(p)?!0:(e.append(zM(m,g,s),c(p)),!1)}const d=[],f=Object.assign(wK,{defaultVisitor:u,convertValue:c,isVisitable:Gb});function h(p,g){if(!Fe.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),Fe.forEach(p,function(v,b){(!(Fe.isUndefined(v)||v===null)&&i.call(e,v,Fe.isString(b)?b.trim():b,g,f))===!0&&h(v,g?g.concat(b):[b])}),d.pop()}}if(!Fe.isObject(t))throw new TypeError("data must be an object");return h(t),e}function HM(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Sw(t,e){this._pairs=[],t&&sg(t,this,e)}const G2=Sw.prototype;G2.append=function(e,n){this._pairs.push([e,n])};G2.toString=function(e){const n=e?function(r){return e.call(this,r,HM)}:HM;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function SK(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function W2(t,e,n){if(!e)return t;const r=n&&n.encode||SK,i=n&&n.serialize;let s;if(i?s=i(e,n):s=Fe.isURLSearchParams(e)?e.toString():new Sw(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class GM{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const j2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EK=typeof URLSearchParams<"u"?URLSearchParams:Sw,MK=typeof FormData<"u"?FormData:null,CK=typeof Blob<"u"?Blob:null,AK={isBrowser:!0,classes:{URLSearchParams:EK,FormData:MK,Blob:CK},protocols:["http","https","file","blob","url","data"]},X2=typeof window<"u"&&typeof document<"u",TK=(t=>X2&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),PK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:X2,hasStandardBrowserEnv:TK,hasStandardBrowserWebWorkerEnv:PK},Symbol.toStringTag,{value:"Module"})),ms={...RK,...AK};function LK(t,e){return sg(t,new ms.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ms.isNode&&Fe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function IK(t){return Fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function OK(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function K2(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Fe.isArray(i)?i.length:o,l?(Fe.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Fe.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Fe.isArray(i[o])&&(i[o]=OK(i[o])),!a)}if(Fe.isFormData(t)&&Fe.isFunction(t.entries)){const n={};return Fe.forEachEntry(t,(r,i)=>{e(IK(r),i,n,0)}),n}return null}function kK(t,e,n){if(Fe.isString(t))try{return(e||JSON.parse)(t),Fe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ew={transitional:j2,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Fe.isObject(e);if(s&&Fe.isHTMLForm(e)&&(e=new FormData(e)),Fe.isFormData(e))return i?JSON.stringify(K2(e)):e;if(Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return LK(e,this.formSerializer).toString();if((a=Fe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return sg(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),kK(e)):e}],transformResponse:[function(e){const n=this.transitional||Ew.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&Fe.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?en.from(a,en.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ms.classes.FormData,Blob:ms.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],t=>{Ew.headers[t]={}});const Mw=Ew,DK=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NK=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&DK[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},WM=Symbol("internals");function yd(t){return t&&String(t).trim().toLowerCase()}function am(t){return t===!1||t==null?t:Fe.isArray(t)?t.map(am):String(t)}function FK(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BK=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function t0(t,e,n,r,i){if(Fe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Fe.isString(e)){if(Fe.isString(r))return e.indexOf(r)!==-1;if(Fe.isRegExp(r))return r.test(e)}}function VK(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function UK(t,e){const n=Fe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class og{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=yd(l);if(!u)throw new Error("header name must be a non-empty string");const d=Fe.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=am(a))}const o=(a,l)=>Fe.forEach(a,(c,u)=>s(c,u,l));return Fe.isPlainObject(e)||e instanceof this.constructor?o(e,n):Fe.isString(e)&&(e=e.trim())&&!BK(e)?o(NK(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=yd(e),e){const r=Fe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return FK(i);if(Fe.isFunction(n))return n.call(this,i,r);if(Fe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=yd(e),e){const r=Fe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||t0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=yd(o),o){const a=Fe.findKey(r,o);a&&(!n||t0(r,r[a],a,n))&&(delete r[a],i=!0)}}return Fe.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||t0(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Fe.forEach(this,(i,s)=>{const o=Fe.findKey(r,s);if(o){n[o]=am(i),delete n[s];return}const a=e?VK(s):String(s).trim();a!==s&&delete n[s],n[a]=am(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Fe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Fe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[WM]=this[WM]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=yd(o);r[a]||(UK(i,o),r[a]=!0)}return Fe.isArray(e)?e.forEach(s):s(e),this}}og.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors(og.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Fe.freezeMethods(og);const eo=og;function n0(t,e){const n=this||Mw,r=e||n,i=eo.from(r.headers);let s=r.data;return Fe.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function q2(t){return!!(t&&t.__CANCEL__)}function sh(t,e,n){en.call(this,t??"canceled",en.ERR_CANCELED,e,n),this.name="CanceledError"}Fe.inherits(sh,en,{__CANCEL__:!0});function $K(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new en("Request failed with status code "+n.status,[en.ERR_BAD_REQUEST,en.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const zK=ms.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Fe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Fe.isString(r)&&o.push("path="+r),Fe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function HK(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function GK(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Y2(t,e){return t&&!HK(e)?GK(t,e):e}const WK=ms.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=Fe.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function jK(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function XK(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function jM(t,e){let n=0;const r=XK(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const KK=typeof XMLHttpRequest<"u",qK=KK&&function(t){return new Promise(function(n,r){let i=t.data;const s=eo.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(Fe.isFormData(i)){if(ms.hasStandardBrowserEnv||ms.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[g,...m]=u?u.split(";").map(v=>v.trim()).filter(Boolean):[];s.setContentType([g||"multipart/form-data",...m].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+m))}const f=Y2(t.baseURL,t.url);d.open(t.method.toUpperCase(),W2(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function h(){if(!d)return;const g=eo.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};$K(function(y){n(y),c()},function(y){r(y),c()},v),d=null}if("onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(h)},d.onabort=function(){d&&(r(new en("Request aborted",en.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new en("Network Error",en.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||j2;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),r(new en(m,v.clarifyTimeoutError?en.ETIMEDOUT:en.ECONNABORTED,t,d)),d=null},ms.hasStandardBrowserEnv&&(a&&Fe.isFunction(a)&&(a=a(t)),a||a!==!1&&WK(f))){const g=t.xsrfHeaderName&&t.xsrfCookieName&&zK.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&Fe.forEach(s.toJSON(),function(m,v){d.setRequestHeader(v,m)}),Fe.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",jM(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",jM(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=g=>{d&&(r(!g||g.type?new sh(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=jK(f);if(p&&ms.protocols.indexOf(p)===-1){r(new en("Unsupported protocol "+p+":",en.ERR_BAD_REQUEST,t));return}d.send(i||null)})},Wb={http:_K,xhr:qK};Fe.forEach(Wb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const XM=t=>`- ${t}`,YK=t=>Fe.isFunction(t)||t===null||t===!1,Z2={getAdapter:t=>{t=Fe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!YK(n)&&(r=Wb[(o=String(n)).toLowerCase()],r===void 0))throw new en(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(XM).join(`
`):" "+XM(s[0]):"as no adapter specified";throw new en("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wb};function r0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new sh(null,t)}function KM(t){return r0(t),t.headers=eo.from(t.headers),t.data=n0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Z2.getAdapter(t.adapter||Mw.adapter)(t).then(function(r){return r0(t),r.data=n0.call(t,t.transformResponse,r),r.headers=eo.from(r.headers),r},function(r){return q2(r)||(r0(t),r&&r.response&&(r.response.data=n0.call(t,t.transformResponse,r.response),r.response.headers=eo.from(r.response.headers))),Promise.reject(r)})}const qM=t=>t instanceof eo?{...t}:t;function uu(t,e){e=e||{};const n={};function r(c,u,d){return Fe.isPlainObject(c)&&Fe.isPlainObject(u)?Fe.merge.call({caseless:d},c,u):Fe.isPlainObject(u)?Fe.merge({},u):Fe.isArray(u)?u.slice():u}function i(c,u,d){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!Fe.isUndefined(u))return r(void 0,u)}function o(c,u){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(qM(c),qM(u),!0)};return Fe.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||i,f=d(t[u],e[u],u);Fe.isUndefined(f)&&d!==a||(n[u]=f)}),n}const J2="1.6.8",Cw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Cw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const YM={};Cw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+J2+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new en(i(o," has been removed"+(n?" in "+n:"")),en.ERR_DEPRECATED);return n&&!YM[o]&&(YM[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function ZK(t,e,n){if(typeof t!="object")throw new en("options must be an object",en.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new en("option "+s+" must be "+l,en.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new en("Unknown option "+s,en.ERR_BAD_OPTION)}}const jb={assertOptions:ZK,validators:Cw},Do=jb.validators;class Dm{constructor(e){this.defaults=e,this.interceptors={request:new GM,response:new GM}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=uu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&jb.assertOptions(r,{silentJSONParsing:Do.transitional(Do.boolean),forcedJSONParsing:Do.transitional(Do.boolean),clarifyTimeoutError:Do.transitional(Do.boolean)},!1),i!=null&&(Fe.isFunction(i)?n.paramsSerializer={serialize:i}:jb.assertOptions(i,{encode:Do.function,serialize:Do.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Fe.merge(s.common,s[n.method]);s&&Fe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=eo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!l){const p=[KM.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=n;for(d=0;d<f;){const p=a[d++],g=a[d++];try{h=p(h)}catch(m){g.call(this,m);break}}try{u=KM.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=uu(this.defaults,e);const n=Y2(e.baseURL,e.url);return W2(n,e.params,e.paramsSerializer)}}Fe.forEach(["delete","get","head","options"],function(e){Dm.prototype[e]=function(n,r){return this.request(uu(r||{},{method:e,url:n,data:(r||{}).data}))}});Fe.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(uu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Dm.prototype[e]=n(),Dm.prototype[e+"Form"]=n(!0)});const lm=Dm;class Aw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new sh(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Aw(function(i){e=i}),cancel:e}}}const JK=Aw;function QK(t){return function(n){return t.apply(null,n)}}function eq(t){return Fe.isObject(t)&&t.isAxiosError===!0}const Xb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xb).forEach(([t,e])=>{Xb[e]=t});const tq=Xb;function Q2(t){const e=new lm(t),n=O2(lm.prototype.request,e);return Fe.extend(n,lm.prototype,e,{allOwnKeys:!0}),Fe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Q2(uu(t,i))},n}const rr=Q2(Mw);rr.Axios=lm;rr.CanceledError=sh;rr.CancelToken=JK;rr.isCancel=q2;rr.VERSION=J2;rr.toFormData=sg;rr.AxiosError=en;rr.Cancel=rr.CanceledError;rr.all=function(e){return Promise.all(e)};rr.spread=QK;rr.isAxiosError=eq;rr.mergeConfig=uu;rr.AxiosHeaders=eo;rr.formToJSON=t=>K2(Fe.isHTMLForm(t)?new FormData(t):t);rr.getAdapter=Z2.getAdapter;rr.HttpStatusCode=tq;rr.default=rr;const nq=rr.create({baseURL:"http://localhost:8088",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:1e6});async function oh(t){return nq.get(t).then(e=>e.data)}async function rq(){return oh("/data/humidity")}async function iq(){return oh("/data/rainfall")}async function sq(){return oh("/data/cloud")}async function oq(){return oh("/data/uvRay")}async function aq(){return oh("/data/wind")}async function lq(){const t=jl(),e=await Promise.all([iq(),rq(),oq(),aq(),sq()]);return t.setRainfall(e[0]),t.setHumidity(e[1]),t.setUVRay(e[2]),t.setWind(e[3]),t.setCloud(e[4]),!0}const cq={key:0},eO=Me({__name:"App",setup(t){const e=le(!0);return kt(async()=>{try{await lq()}catch(n){console.error(n)}finally{e.value=!1}}),(n,r)=>(V(),Te(V_,null,{fallback:we(()=>[gt(" loading... ")]),default:we(()=>[e.value?ve("",!0):(V(),ee("div",cq,[ke(EX),ke(VX)]))]),_:1}))}});/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ic=typeof document<"u";function uq(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const gn=Object.assign;function i0(t,e){const n={};for(const r in e){const i=e[r];n[r]=ts(i)?i.map(t):t(i)}return n}const Wd=()=>{},ts=Array.isArray,tO=/#/g,dq=/&/g,fq=/\//g,hq=/=/g,pq=/\?/g,nO=/\+/g,mq=/%5B/g,vq=/%5D/g,rO=/%5E/g,gq=/%60/g,iO=/%7B/g,yq=/%7C/g,sO=/%7D/g,bq=/%20/g;function Tw(t){return encodeURI(""+t).replace(yq,"|").replace(mq,"[").replace(vq,"]")}function _q(t){return Tw(t).replace(iO,"{").replace(sO,"}").replace(rO,"^")}function Kb(t){return Tw(t).replace(nO,"%2B").replace(bq,"+").replace(tO,"%23").replace(dq,"%26").replace(gq,"`").replace(iO,"{").replace(sO,"}").replace(rO,"^")}function xq(t){return Kb(t).replace(hq,"%3D")}function wq(t){return Tw(t).replace(tO,"%23").replace(pq,"%3F")}function Sq(t){return t==null?"":wq(t).replace(fq,"%2F")}function Af(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Eq=/\/$/,Mq=t=>t.replace(Eq,"");function s0(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Pq(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Af(o)}}function Cq(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ZM(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Aq(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&du(e.matched[r],n.matched[i])&&oO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function du(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function oO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Tq(t[n],e[n]))return!1;return!0}function Tq(t,e){return ts(t)?JM(t,e):ts(e)?JM(e,t):t===e}function JM(t,e){return ts(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Pq(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Tf;(function(t){t.pop="pop",t.push="push"})(Tf||(Tf={}));var jd;(function(t){t.back="back",t.forward="forward",t.unknown=""})(jd||(jd={}));function Rq(t){if(!t)if(Ic){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Mq(t)}const Lq=/^[^#]+#/;function Iq(t,e){return t.replace(Lq,"#")+e}function Oq(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ag=()=>({left:window.scrollX,top:window.scrollY});function kq(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Oq(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function QM(t,e){return(history.state?history.state.position-e:-1)+t}const qb=new Map;function Dq(t,e){qb.set(t,e)}function Nq(t){const e=qb.get(t);return qb.delete(t),e}let Fq=()=>location.protocol+"//"+location.host;function aO(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ZM(l,"")}return ZM(n,t)+r+i}function Bq(t,e,n,r){let i=[],s=[],o=null;const a=({state:f})=>{const h=aO(t,location),p=n.value,g=e.value;let m=0;if(f){if(n.value=h,e.value=f,o&&o===p){o=null;return}m=g?f.position-g.position:0}else r(h);i.forEach(v=>{v(n.value,p,{delta:m,type:Tf.pop,direction:m?m>0?jd.forward:jd.back:jd.unknown})})};function l(){o=n.value}function c(f){i.push(f);const h=()=>{const p=i.indexOf(f);p>-1&&i.splice(p,1)};return s.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(gn({},f.state,{scroll:ag()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function eC(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ag():null}}function Vq(t){const{history:e,location:n}=window,r={value:aO(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:Fq()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=gn({},e.state,eC(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=gn({},i.value,e.state,{forward:l,scroll:ag()});s(u.current,u,!0);const d=gn({},eC(r.value,l,null),{position:u.position+1},c);s(l,d,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function Uq(t){t=Rq(t);const e=Vq(t),n=Bq(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=gn({location:"",base:t,go:r,createHref:Iq.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function $q(t){return typeof t=="string"||t&&typeof t=="object"}function lO(t){return typeof t=="string"||typeof t=="symbol"}const No={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},cO=Symbol("");var tC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(tC||(tC={}));function fu(t,e){return gn(new Error,{type:t,[cO]:!0},e)}function Bs(t,e){return t instanceof Error&&cO in t&&(e==null||!!(t.type&e))}const nC="[^/]+?",zq={sensitive:!1,strict:!1,start:!0,end:!0},Hq=/[.+*?^${}()[\]/\\]/g;function Gq(t,e){const n=gn({},zq,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(Hq,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=f;s.push({name:p,repeatable:g,optional:m});const b=v||nC;if(b!==nC){h+=10;try{new RegExp(`(${b})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+E.message)}}let y=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(y=m&&c.length<2?`(?:/${y})`:"/"+y),m&&(y+="?"),i+=y,h+=20,m&&(h+=-8),g&&(h+=-20),b===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=s[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,v=p in c?c[p]:"";if(ts(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=ts(v)?v.join("/"):v;if(!b)if(m)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function Wq(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function jq(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Wq(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(rC(r))return 1;if(rC(i))return-1}return i.length-r.length}function rC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Xq={type:0,value:""},Kq=/[a-zA-Z0-9_]/;function qq(t){if(!t)return[[]];if(t==="/")return[[Xq]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:Kq.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function Yq(t,e,n){const r=Gq(qq(t.path),n),i=gn(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Zq(t,e){const n=[],r=new Map;e=oC({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,d,f){const h=!f,p=Jq(u);p.aliasOf=f&&f.record;const g=oC(e,u),m=[p];if("alias"in u){const y=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of y)m.push(gn({},p,{components:f?f.record.components:p.components,path:E,aliasOf:f?f.record:p}))}let v,b;for(const y of m){const{path:E}=y;if(d&&E[0]!=="/"){const T=d.record.path,_=T[T.length-1]==="/"?"":"/";y.path=d.record.path+(E&&_+E)}if(v=Yq(y,d,g),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),h&&u.name&&!sC(v)&&o(u.name)),p.children){const T=p.children;for(let _=0;_<T.length;_++)s(T[_],v,f&&f.children[_])}f=f||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return b?()=>{o(b)}:Wd}function o(u){if(lO(u)){const d=r.get(u);d&&(r.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let d=0;for(;d<n.length&&jq(u,n[d])>=0&&(u.record.path!==n[d].record.path||!uO(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!sC(u)&&r.set(u.record.name,u)}function c(u,d){let f,h={},p,g;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw fu(1,{location:u});g=f.record.name,h=gn(iC(d.params,f.keys.filter(b=>!b.optional).concat(f.parent?f.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),u.params&&iC(u.params,f.keys.map(b=>b.name))),p=f.stringify(h)}else if(u.path!=null)p=u.path,f=n.find(b=>b.re.test(p)),f&&(h=f.parse(p),g=f.record.name);else{if(f=d.name?r.get(d.name):n.find(b=>b.re.test(d.path)),!f)throw fu(1,{location:u,currentLocation:d});g=f.record.name,h=gn({},d.params,u.params),p=f.stringify(h)}const m=[];let v=f;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:h,matched:m,meta:eY(m)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function iC(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Jq(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Qq(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Qq(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function sC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function eY(t){return t.reduce((e,n)=>gn(e,n.meta),{})}function oC(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function uO(t,e){return e.children.some(n=>n===t||uO(t,n))}function tY(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(nO," "),o=s.indexOf("="),a=Af(o<0?s:s.slice(0,o)),l=o<0?null:Af(s.slice(o+1));if(a in e){let c=e[a];ts(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function aC(t){let e="";for(let n in t){const r=t[n];if(n=xq(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ts(r)?r.map(s=>s&&Kb(s)):[r&&Kb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function nY(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ts(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const rY=Symbol(""),lC=Symbol(""),Pw=Symbol(""),dO=Symbol(""),Yb=Symbol("");function bd(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Xo(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(fu(4,{from:n,to:e})):f instanceof Error?l(f):$q(f)?l(fu(2,{from:e,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function o0(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(iY(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Xo(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=uq(u)?u.default:u;o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Xo(h,n,r,o,a,i)()}))}}return s}function iY(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function cC(t){const e=Zn(Pw),n=Zn(dO),r=A(()=>e.resolve(C(t.to))),i=A(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(du.bind(null,u));if(f>-1)return f;const h=uC(l[c-2]);return c>1&&uC(u)===h&&d[d.length-1].path!==h?d.findIndex(du.bind(null,l[c-2])):f}),s=A(()=>i.value>-1&&lY(n.params,r.value.params)),o=A(()=>i.value>-1&&i.value===n.matched.length-1&&oO(n.params,r.value.params));function a(l={}){return aY(l)?e[C(t.replace)?"replace":"push"](C(t.to)).catch(Wd):Promise.resolve()}return{route:r,href:A(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const sY=Me({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:cC,setup(t,{slots:e}){const n=Sr(cC(t)),{options:r}=Zn(Pw),i=A(()=>({[dC(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[dC(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Nt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),oY=sY;function aY(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function lY(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ts(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function uC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const dC=(t,e,n)=>t??e??n,cY=Me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Zn(Yb),i=A(()=>t.route||r.value),s=Zn(lC,0),o=A(()=>{let c=C(s);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=A(()=>i.value.matched[o.value]);Mr(lC,A(()=>o.value+1)),Mr(rY,a),Mr(Yb,i);const l=le();return De(()=>[l.value,a.value,t.name],([c,u,d],[f,h,p])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!du(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return fC(n.default,{Component:f,route:c});const h=d.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,m=Nt(f,gn({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return fC(n.default,{Component:m,route:c})||m}}});function fC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const uY=cY;function dY(t){const e=Zq(t.routes,t),n=t.parseQuery||tY,r=t.stringifyQuery||aC,i=t.history,s=bd(),o=bd(),a=bd(),l=st(No);let c=No;Ic&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=i0.bind(null,J=>""+J),d=i0.bind(null,Sq),f=i0.bind(null,Af);function h(J,X){let L,N;return lO(J)?(L=e.getRecordMatcher(J),N=X):N=J,e.addRoute(N,L)}function p(J){const X=e.getRecordMatcher(J);X&&e.removeRoute(X)}function g(){return e.getRoutes().map(J=>J.record)}function m(J){return!!e.getRecordMatcher(J)}function v(J,X){if(X=gn({},X||l.value),typeof J=="string"){const k=s0(n,J,X.path),H=e.resolve({path:k.path},X),Y=i.createHref(k.fullPath);return gn(k,H,{params:f(H.params),hash:Af(k.hash),redirectedFrom:void 0,href:Y})}let L;if(J.path!=null)L=gn({},J,{path:s0(n,J.path,X.path).path});else{const k=gn({},J.params);for(const H in k)k[H]==null&&delete k[H];L=gn({},J,{params:d(k)}),X.params=d(X.params)}const N=e.resolve(L,X),G=J.hash||"";N.params=u(f(N.params));const $=Cq(r,gn({},J,{hash:_q(G),path:N.path})),O=i.createHref($);return gn({fullPath:$,hash:G,query:r===aC?nY(J.query):J.query||{}},N,{redirectedFrom:void 0,href:O})}function b(J){return typeof J=="string"?s0(n,J,l.value.path):gn({},J)}function y(J,X){if(c!==J)return fu(8,{from:X,to:J})}function E(J){return w(J)}function T(J){return E(gn(b(J),{replace:!0}))}function _(J){const X=J.matched[J.matched.length-1];if(X&&X.redirect){const{redirect:L}=X;let N=typeof L=="function"?L(J):L;return typeof N=="string"&&(N=N.includes("?")||N.includes("#")?N=b(N):{path:N},N.params={}),gn({query:J.query,hash:J.hash,params:N.path!=null?{}:J.params},N)}}function w(J,X){const L=c=v(J),N=l.value,G=J.state,$=J.force,O=J.replace===!0,k=_(L);if(k)return w(gn(b(k),{state:typeof k=="object"?gn({},G,k.state):G,force:$,replace:O}),X||L);const H=L;H.redirectedFrom=X;let Y;return!$&&Aq(r,N,L)&&(Y=fu(16,{to:H,from:N}),fe(N,N,!0,!1)),(Y?Promise.resolve(Y):S(H,N)).catch(te=>Bs(te)?Bs(te,2)?te:K(te):Z(te,H,N)).then(te=>{if(te){if(Bs(te,2))return w(gn({replace:O},b(te.to),{state:typeof te.to=="object"?gn({},G,te.to.state):G,force:$}),X||H)}else te=I(H,N,!0,O,G);return R(H,N,te),te})}function M(J,X){const L=y(J,X);return L?Promise.reject(L):Promise.resolve()}function x(J){const X=ae.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(J):J()}function S(J,X){let L;const[N,G,$]=fY(J,X);L=o0(N.reverse(),"beforeRouteLeave",J,X);for(const k of N)k.leaveGuards.forEach(H=>{L.push(Xo(H,J,X))});const O=M.bind(null,J,X);return L.push(O),ue(L).then(()=>{L=[];for(const k of s.list())L.push(Xo(k,J,X));return L.push(O),ue(L)}).then(()=>{L=o0(G,"beforeRouteUpdate",J,X);for(const k of G)k.updateGuards.forEach(H=>{L.push(Xo(H,J,X))});return L.push(O),ue(L)}).then(()=>{L=[];for(const k of $)if(k.beforeEnter)if(ts(k.beforeEnter))for(const H of k.beforeEnter)L.push(Xo(H,J,X));else L.push(Xo(k.beforeEnter,J,X));return L.push(O),ue(L)}).then(()=>(J.matched.forEach(k=>k.enterCallbacks={}),L=o0($,"beforeRouteEnter",J,X,x),L.push(O),ue(L))).then(()=>{L=[];for(const k of o.list())L.push(Xo(k,J,X));return L.push(O),ue(L)}).catch(k=>Bs(k,8)?k:Promise.reject(k))}function R(J,X,L){a.list().forEach(N=>x(()=>N(J,X,L)))}function I(J,X,L,N,G){const $=y(J,X);if($)return $;const O=X===No,k=Ic?history.state:{};L&&(N||O?i.replace(J.fullPath,gn({scroll:O&&k&&k.scroll},G)):i.push(J.fullPath,G)),l.value=J,fe(J,X,L,O),K()}let z;function P(){z||(z=i.listen((J,X,L)=>{if(!ge.listening)return;const N=v(J),G=_(N);if(G){w(gn(G,{replace:!0}),N).catch(Wd);return}c=N;const $=l.value;Ic&&Dq(QM($.fullPath,L.delta),ag()),S(N,$).catch(O=>Bs(O,12)?O:Bs(O,2)?(w(O.to,N).then(k=>{Bs(k,20)&&!L.delta&&L.type===Tf.pop&&i.go(-1,!1)}).catch(Wd),Promise.reject()):(L.delta&&i.go(-L.delta,!1),Z(O,N,$))).then(O=>{O=O||I(N,$,!1),O&&(L.delta&&!Bs(O,8)?i.go(-L.delta,!1):L.type===Tf.pop&&Bs(O,20)&&i.go(-1,!1)),R(N,$,O)}).catch(Wd)}))}let B=bd(),U=bd(),j;function Z(J,X,L){K(J);const N=U.list();return N.length?N.forEach(G=>G(J,X,L)):console.error(J),Promise.reject(J)}function ne(){return j&&l.value!==No?Promise.resolve():new Promise((J,X)=>{B.add([J,X])})}function K(J){return j||(j=!J,P(),B.list().forEach(([X,L])=>J?L(J):X()),B.reset()),J}function fe(J,X,L,N){const{scrollBehavior:G}=t;if(!Ic||!G)return Promise.resolve();const $=!L&&Nq(QM(J.fullPath,0))||(N||!L)&&history.state&&history.state.scroll||null;return cn().then(()=>G(J,X,$)).then(O=>O&&kq(O)).catch(O=>Z(O,J,X))}const Se=J=>i.go(J);let de;const ae=new Set,ge={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:t,push:E,replace:T,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:U.add,isReady:ne,install(J){const X=this;J.component("RouterLink",oY),J.component("RouterView",uY),J.config.globalProperties.$router=X,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>C(l)}),Ic&&!de&&l.value===No&&(de=!0,E(i.location).catch(G=>{}));const L={};for(const G in No)Object.defineProperty(L,G,{get:()=>l.value[G],enumerable:!0});J.provide(Pw,X),J.provide(dO,ga(L)),J.provide(Yb,l);const N=J.unmount;ae.add(J),J.unmount=function(){ae.delete(J),ae.size<1&&(c=No,z&&z(),z=null,l.value=No,de=!1,j=!1),N()}}};function ue(J){return J.reduce((X,L)=>X.then(()=>x(L)),Promise.resolve())}return ge}function fY(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>du(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>du(c,l))||i.push(l))}return[n,r,i]}const hY=dY({history:Uq(),routes:[{path:"/",component:eO}]}),hC={light:{primary:"#154EC1",secondary:"#767C88",success:"#3D9209",info:"#158DE3",danger:"#E42222",warning:"#FFD43A",backgroundPrimary:"#f6f6f6",backgroundSecondary:"#FFFFFF",backgroundElement:"#ECF0F1",backgroundBorder:"#DEE5F2",textPrimary:"#262824",textInverted:"#FFFFFF",shadow:"rgba(0, 0, 0, 0.12)",focus:"#49A8FF",transparent:"rgba(0, 0, 0, 0)"},dark:{primary:"#3472F0",secondary:"#767C88",success:"#66BE33",info:"#3EAAF8",danger:"#F34030",warning:"#FFD952",backgroundPrimary:"#050A10",backgroundSecondary:"#1F262F",backgroundElement:"#131A22",backgroundBorder:"#3D4C58",textPrimary:"#F1F1F1",textInverted:"#0B121A",shadow:"rgba(255, 255, 255, 0.12)",focus:"#49A8FF",transparent:"rgba(0, 0, 0, 0)"}},pY=Symbol("vaBreakpoint"),mY={xs:0,sm:640,md:1024,lg:1440,xl:1920},vY=()=>({enabled:!0,bodyClass:!0,thresholds:mY}),Zb=(t,e=null)=>we(()=>[t],e),pC=t=>typeof t=="string"?Nt(Eu,t):yl(t)?t:Te(t),gY=(t,e=null)=>Object.keys(t).reduce((n,r)=>{const i=t[r];return n[r]=typeof i=="function"?i:Zb(i,e),n},{}),yY=t=>{const e=t.render||t.ssrRender;if(!e)return;const n=e.name==="_sfc_render"||e.name==="_sfc_ssrRender";return function(...r){const i=r[0],s=i.$.slots,o=new Proxy(i,{get(l,c){return c==="$slots"?gY(s):l[c]}}),a=n?void 0:o;return e.call(a,o,...r.slice(1))}};var Lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function br(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bY(){this.__data__=[],this.size=0}var _Y=bY;function xY(t,e){return t===e||t!==t&&e!==e}var lg=xY,wY=lg;function SY(t,e){for(var n=t.length;n--;)if(wY(t[n][0],e))return n;return-1}var cg=SY,EY=cg,MY=Array.prototype,CY=MY.splice;function AY(t){var e=this.__data__,n=EY(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():CY.call(e,n,1),--this.size,!0}var TY=AY,PY=cg;function RY(t){var e=this.__data__,n=PY(e,t);return n<0?void 0:e[n][1]}var LY=RY,IY=cg;function OY(t){return IY(this.__data__,t)>-1}var kY=OY,DY=cg;function NY(t,e){var n=this.__data__,r=DY(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var FY=NY,BY=_Y,VY=TY,UY=LY,$Y=kY,zY=FY;function Fu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fu.prototype.clear=BY;Fu.prototype.delete=VY;Fu.prototype.get=UY;Fu.prototype.has=$Y;Fu.prototype.set=zY;var ug=Fu,HY=ug;function GY(){this.__data__=new HY,this.size=0}var WY=GY;function jY(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var XY=jY;function KY(t){return this.__data__.get(t)}var qY=KY;function YY(t){return this.__data__.has(t)}var ZY=YY,JY=typeof Lp=="object"&&Lp&&Lp.Object===Object&&Lp,fO=JY,QY=fO,eZ=typeof self=="object"&&self&&self.Object===Object&&self,tZ=QY||eZ||Function("return this")(),as=tZ,nZ=as,rZ=nZ.Symbol,ah=rZ,mC=ah,hO=Object.prototype,iZ=hO.hasOwnProperty,sZ=hO.toString,_d=mC?mC.toStringTag:void 0;function oZ(t){var e=iZ.call(t,_d),n=t[_d];try{t[_d]=void 0;var r=!0}catch{}var i=sZ.call(t);return r&&(e?t[_d]=n:delete t[_d]),i}var aZ=oZ,lZ=Object.prototype,cZ=lZ.toString;function uZ(t){return cZ.call(t)}var dZ=uZ,vC=ah,fZ=aZ,hZ=dZ,pZ="[object Null]",mZ="[object Undefined]",gC=vC?vC.toStringTag:void 0;function vZ(t){return t==null?t===void 0?mZ:pZ:gC&&gC in Object(t)?fZ(t):hZ(t)}var fo=vZ;function gZ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xi=gZ;const yZ=br(xi);var bZ=fo,_Z=xi,xZ="[object AsyncFunction]",wZ="[object Function]",SZ="[object GeneratorFunction]",EZ="[object Proxy]";function MZ(t){if(!_Z(t))return!1;var e=bZ(t);return e==wZ||e==SZ||e==xZ||e==EZ}var dg=MZ;const hu=br(dg);var CZ=as,AZ=CZ["__core-js_shared__"],TZ=AZ,a0=TZ,yC=function(){var t=/[^.]+$/.exec(a0&&a0.keys&&a0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function PZ(t){return!!yC&&yC in t}var RZ=PZ,LZ=Function.prototype,IZ=LZ.toString;function OZ(t){if(t!=null){try{return IZ.call(t)}catch{}try{return t+""}catch{}}return""}var pO=OZ,kZ=dg,DZ=RZ,NZ=xi,FZ=pO,BZ=/[\\^$.*+?()[\]{}|]/g,VZ=/^\[object .+?Constructor\]$/,UZ=Function.prototype,$Z=Object.prototype,zZ=UZ.toString,HZ=$Z.hasOwnProperty,GZ=RegExp("^"+zZ.call(HZ).replace(BZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WZ(t){if(!NZ(t)||DZ(t))return!1;var e=kZ(t)?GZ:VZ;return e.test(FZ(t))}var jZ=WZ;function XZ(t,e){return t==null?void 0:t[e]}var KZ=XZ,qZ=jZ,YZ=KZ;function ZZ(t,e){var n=YZ(t,e);return qZ(n)?n:void 0}var Xl=ZZ,JZ=Xl,QZ=as,eJ=JZ(QZ,"Map"),Rw=eJ,tJ=Xl,nJ=tJ(Object,"create"),fg=nJ,bC=fg;function rJ(){this.__data__=bC?bC(null):{},this.size=0}var iJ=rJ;function sJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var oJ=sJ,aJ=fg,lJ="__lodash_hash_undefined__",cJ=Object.prototype,uJ=cJ.hasOwnProperty;function dJ(t){var e=this.__data__;if(aJ){var n=e[t];return n===lJ?void 0:n}return uJ.call(e,t)?e[t]:void 0}var fJ=dJ,hJ=fg,pJ=Object.prototype,mJ=pJ.hasOwnProperty;function vJ(t){var e=this.__data__;return hJ?e[t]!==void 0:mJ.call(e,t)}var gJ=vJ,yJ=fg,bJ="__lodash_hash_undefined__";function _J(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yJ&&e===void 0?bJ:e,this}var xJ=_J,wJ=iJ,SJ=oJ,EJ=fJ,MJ=gJ,CJ=xJ;function Bu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Bu.prototype.clear=wJ;Bu.prototype.delete=SJ;Bu.prototype.get=EJ;Bu.prototype.has=MJ;Bu.prototype.set=CJ;var AJ=Bu,_C=AJ,TJ=ug,PJ=Rw;function RJ(){this.size=0,this.__data__={hash:new _C,map:new(PJ||TJ),string:new _C}}var LJ=RJ;function IJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var OJ=IJ,kJ=OJ;function DJ(t,e){var n=t.__data__;return kJ(e)?n[typeof e=="string"?"string":"hash"]:n.map}var hg=DJ,NJ=hg;function FJ(t){var e=NJ(this,t).delete(t);return this.size-=e?1:0,e}var BJ=FJ,VJ=hg;function UJ(t){return VJ(this,t).get(t)}var $J=UJ,zJ=hg;function HJ(t){return zJ(this,t).has(t)}var GJ=HJ,WJ=hg;function jJ(t,e){var n=WJ(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var XJ=jJ,KJ=LJ,qJ=BJ,YJ=$J,ZJ=GJ,JJ=XJ;function Vu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Vu.prototype.clear=KJ;Vu.prototype.delete=qJ;Vu.prototype.get=YJ;Vu.prototype.has=ZJ;Vu.prototype.set=JJ;var mO=Vu,QJ=ug,eQ=Rw,tQ=mO,nQ=200;function rQ(t,e){var n=this.__data__;if(n instanceof QJ){var r=n.__data__;if(!eQ||r.length<nQ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new tQ(r)}return n.set(t,e),this.size=n.size,this}var iQ=rQ,sQ=ug,oQ=WY,aQ=XY,lQ=qY,cQ=ZY,uQ=iQ;function Uu(t){var e=this.__data__=new sQ(t);this.size=e.size}Uu.prototype.clear=oQ;Uu.prototype.delete=aQ;Uu.prototype.get=lQ;Uu.prototype.has=cQ;Uu.prototype.set=uQ;var vO=Uu;function dQ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var fQ=dQ,hQ=Xl,pQ=function(){try{var t=hQ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),gO=pQ,xC=gO;function mQ(t,e,n){e=="__proto__"&&xC?xC(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Lw=mQ,vQ=Lw,gQ=lg,yQ=Object.prototype,bQ=yQ.hasOwnProperty;function _Q(t,e,n){var r=t[e];(!(bQ.call(t,e)&&gQ(r,n))||n===void 0&&!(e in t))&&vQ(t,e,n)}var Iw=_Q,xQ=Iw,wQ=Lw;function SQ(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?wQ(n,a,l):xQ(n,a,l)}return n}var $u=SQ;function EQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var MQ=EQ;function CQ(t){return t!=null&&typeof t=="object"}var ls=CQ,AQ=fo,TQ=ls,PQ="[object Arguments]";function RQ(t){return TQ(t)&&AQ(t)==PQ}var LQ=RQ,wC=LQ,IQ=ls,yO=Object.prototype,OQ=yO.hasOwnProperty,kQ=yO.propertyIsEnumerable,DQ=wC(function(){return arguments}())?wC:function(t){return IQ(t)&&OQ.call(t,"callee")&&!kQ.call(t,"callee")},pg=DQ,NQ=Array.isArray,Ts=NQ,Nm={exports:{}};function FQ(){return!1}var BQ=FQ;Nm.exports;(function(t,e){var n=as,r=BQ,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(Nm,Nm.exports);var Ow=Nm.exports,VQ=9007199254740991,UQ=/^(?:0|[1-9]\d*)$/;function $Q(t,e){var n=typeof t;return e=e??VQ,!!e&&(n=="number"||n!="symbol"&&UQ.test(t))&&t>-1&&t%1==0&&t<e}var mg=$Q,zQ=9007199254740991;function HQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zQ}var kw=HQ,GQ=fo,WQ=kw,jQ=ls,XQ="[object Arguments]",KQ="[object Array]",qQ="[object Boolean]",YQ="[object Date]",ZQ="[object Error]",JQ="[object Function]",QQ="[object Map]",eee="[object Number]",tee="[object Object]",nee="[object RegExp]",ree="[object Set]",iee="[object String]",see="[object WeakMap]",oee="[object ArrayBuffer]",aee="[object DataView]",lee="[object Float32Array]",cee="[object Float64Array]",uee="[object Int8Array]",dee="[object Int16Array]",fee="[object Int32Array]",hee="[object Uint8Array]",pee="[object Uint8ClampedArray]",mee="[object Uint16Array]",vee="[object Uint32Array]",Rn={};Rn[lee]=Rn[cee]=Rn[uee]=Rn[dee]=Rn[fee]=Rn[hee]=Rn[pee]=Rn[mee]=Rn[vee]=!0;Rn[XQ]=Rn[KQ]=Rn[oee]=Rn[qQ]=Rn[aee]=Rn[YQ]=Rn[ZQ]=Rn[JQ]=Rn[QQ]=Rn[eee]=Rn[tee]=Rn[nee]=Rn[ree]=Rn[iee]=Rn[see]=!1;function gee(t){return jQ(t)&&WQ(t.length)&&!!Rn[GQ(t)]}var yee=gee;function bee(t){return function(e){return t(e)}}var vg=bee,Fm={exports:{}};Fm.exports;(function(t,e){var n=fO,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Fm,Fm.exports);var gg=Fm.exports,_ee=yee,xee=vg,SC=gg,EC=SC&&SC.isTypedArray,wee=EC?xee(EC):_ee,bO=wee,See=MQ,Eee=pg,Mee=Ts,Cee=Ow,Aee=mg,Tee=bO,Pee=Object.prototype,Ree=Pee.hasOwnProperty;function Lee(t,e){var n=Mee(t),r=!n&&Eee(t),i=!n&&!r&&Cee(t),s=!n&&!r&&!i&&Tee(t),o=n||r||i||s,a=o?See(t.length,String):[],l=a.length;for(var c in t)(e||Ree.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Aee(c,l)))&&a.push(c);return a}var _O=Lee,Iee=Object.prototype;function Oee(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Iee;return t===n}var Dw=Oee;function kee(t,e){return function(n){return t(e(n))}}var xO=kee,Dee=xO,Nee=Dee(Object.keys,Object),Fee=Nee,Bee=Dw,Vee=Fee,Uee=Object.prototype,$ee=Uee.hasOwnProperty;function zee(t){if(!Bee(t))return Vee(t);var e=[];for(var n in Object(t))$ee.call(t,n)&&n!="constructor"&&e.push(n);return e}var Hee=zee,Gee=dg,Wee=kw;function jee(t){return t!=null&&Wee(t.length)&&!Gee(t)}var yg=jee,Xee=_O,Kee=Hee,qee=yg;function Yee(t){return qee(t)?Xee(t):Kee(t)}var Nw=Yee,Zee=$u,Jee=Nw;function Qee(t,e){return t&&Zee(e,Jee(e),t)}var ete=Qee;function tte(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var nte=tte,rte=xi,ite=Dw,ste=nte,ote=Object.prototype,ate=ote.hasOwnProperty;function lte(t){if(!rte(t))return ste(t);var e=ite(t),n=[];for(var r in t)r=="constructor"&&(e||!ate.call(t,r))||n.push(r);return n}var cte=lte,ute=_O,dte=cte,fte=yg;function hte(t){return fte(t)?ute(t,!0):dte(t)}var lh=hte,pte=$u,mte=lh;function vte(t,e){return t&&pte(e,mte(e),t)}var gte=vte,Bm={exports:{}};Bm.exports;(function(t,e){var n=as,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(Bm,Bm.exports);var wO=Bm.exports;function yte(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var SO=yte;function bte(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var _te=bte;function xte(){return[]}var EO=xte,wte=_te,Ste=EO,Ete=Object.prototype,Mte=Ete.propertyIsEnumerable,MC=Object.getOwnPropertySymbols,Cte=MC?function(t){return t==null?[]:(t=Object(t),wte(MC(t),function(e){return Mte.call(t,e)}))}:Ste,Fw=Cte,Ate=$u,Tte=Fw;function Pte(t,e){return Ate(t,Tte(t),e)}var Rte=Pte;function Lte(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Bw=Lte,Ite=xO,Ote=Ite(Object.getPrototypeOf,Object),Vw=Ote,kte=Bw,Dte=Vw,Nte=Fw,Fte=EO,Bte=Object.getOwnPropertySymbols,Vte=Bte?function(t){for(var e=[];t;)kte(e,Nte(t)),t=Dte(t);return e}:Fte,MO=Vte,Ute=$u,$te=MO;function zte(t,e){return Ute(t,$te(t),e)}var Hte=zte,Gte=Bw,Wte=Ts;function jte(t,e,n){var r=e(t);return Wte(t)?r:Gte(r,n(t))}var CO=jte,Xte=CO,Kte=Fw,qte=Nw;function Yte(t){return Xte(t,qte,Kte)}var Zte=Yte,Jte=CO,Qte=MO,ene=lh;function tne(t){return Jte(t,ene,Qte)}var AO=tne,nne=Xl,rne=as,ine=nne(rne,"DataView"),sne=ine,one=Xl,ane=as,lne=one(ane,"Promise"),cne=lne,une=Xl,dne=as,fne=une(dne,"Set"),hne=fne,pne=Xl,mne=as,vne=pne(mne,"WeakMap"),gne=vne,Jb=sne,Qb=Rw,e_=cne,t_=hne,n_=gne,TO=fo,zu=pO,CC="[object Map]",yne="[object Object]",AC="[object Promise]",TC="[object Set]",PC="[object WeakMap]",RC="[object DataView]",bne=zu(Jb),_ne=zu(Qb),xne=zu(e_),wne=zu(t_),Sne=zu(n_),Za=TO;(Jb&&Za(new Jb(new ArrayBuffer(1)))!=RC||Qb&&Za(new Qb)!=CC||e_&&Za(e_.resolve())!=AC||t_&&Za(new t_)!=TC||n_&&Za(new n_)!=PC)&&(Za=function(t){var e=TO(t),n=e==yne?t.constructor:void 0,r=n?zu(n):"";if(r)switch(r){case bne:return RC;case _ne:return CC;case xne:return AC;case wne:return TC;case Sne:return PC}return e});var Uw=Za,Ene=Object.prototype,Mne=Ene.hasOwnProperty;function Cne(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Mne.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Ane=Cne,Tne=as,Pne=Tne.Uint8Array,Rne=Pne,LC=Rne;function Lne(t){var e=new t.constructor(t.byteLength);return new LC(e).set(new LC(t)),e}var $w=Lne,Ine=$w;function One(t,e){var n=e?Ine(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var kne=One,Dne=/\w*$/;function Nne(t){var e=new t.constructor(t.source,Dne.exec(t));return e.lastIndex=t.lastIndex,e}var Fne=Nne,IC=ah,OC=IC?IC.prototype:void 0,kC=OC?OC.valueOf:void 0;function Bne(t){return kC?Object(kC.call(t)):{}}var Vne=Bne,Une=$w;function $ne(t,e){var n=e?Une(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var PO=$ne,zne=$w,Hne=kne,Gne=Fne,Wne=Vne,jne=PO,Xne="[object Boolean]",Kne="[object Date]",qne="[object Map]",Yne="[object Number]",Zne="[object RegExp]",Jne="[object Set]",Qne="[object String]",ere="[object Symbol]",tre="[object ArrayBuffer]",nre="[object DataView]",rre="[object Float32Array]",ire="[object Float64Array]",sre="[object Int8Array]",ore="[object Int16Array]",are="[object Int32Array]",lre="[object Uint8Array]",cre="[object Uint8ClampedArray]",ure="[object Uint16Array]",dre="[object Uint32Array]";function fre(t,e,n){var r=t.constructor;switch(e){case tre:return zne(t);case Xne:case Kne:return new r(+t);case nre:return Hne(t,n);case rre:case ire:case sre:case ore:case are:case lre:case cre:case ure:case dre:return jne(t,n);case qne:return new r;case Yne:case Qne:return new r(t);case Zne:return Gne(t);case Jne:return new r;case ere:return Wne(t)}}var hre=fre,pre=xi,DC=Object.create,mre=function(){function t(){}return function(e){if(!pre(e))return{};if(DC)return DC(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),vre=mre,gre=vre,yre=Vw,bre=Dw;function _re(t){return typeof t.constructor=="function"&&!bre(t)?gre(yre(t)):{}}var RO=_re,xre=Uw,wre=ls,Sre="[object Map]";function Ere(t){return wre(t)&&xre(t)==Sre}var Mre=Ere,Cre=Mre,Are=vg,NC=gg,FC=NC&&NC.isMap,Tre=FC?Are(FC):Cre,Pre=Tre,Rre=Uw,Lre=ls,Ire="[object Set]";function Ore(t){return Lre(t)&&Rre(t)==Ire}var kre=Ore,Dre=kre,Nre=vg,BC=gg,VC=BC&&BC.isSet,Fre=VC?Nre(VC):Dre,Bre=Fre,Vre=vO,Ure=fQ,$re=Iw,zre=ete,Hre=gte,Gre=wO,Wre=SO,jre=Rte,Xre=Hte,Kre=Zte,qre=AO,Yre=Uw,Zre=Ane,Jre=hre,Qre=RO,eie=Ts,tie=Ow,nie=Pre,rie=xi,iie=Bre,sie=Nw,oie=lh,aie=1,lie=2,cie=4,LO="[object Arguments]",uie="[object Array]",die="[object Boolean]",fie="[object Date]",hie="[object Error]",IO="[object Function]",pie="[object GeneratorFunction]",mie="[object Map]",vie="[object Number]",OO="[object Object]",gie="[object RegExp]",yie="[object Set]",bie="[object String]",_ie="[object Symbol]",xie="[object WeakMap]",wie="[object ArrayBuffer]",Sie="[object DataView]",Eie="[object Float32Array]",Mie="[object Float64Array]",Cie="[object Int8Array]",Aie="[object Int16Array]",Tie="[object Int32Array]",Pie="[object Uint8Array]",Rie="[object Uint8ClampedArray]",Lie="[object Uint16Array]",Iie="[object Uint32Array]",An={};An[LO]=An[uie]=An[wie]=An[Sie]=An[die]=An[fie]=An[Eie]=An[Mie]=An[Cie]=An[Aie]=An[Tie]=An[mie]=An[vie]=An[OO]=An[gie]=An[yie]=An[bie]=An[_ie]=An[Pie]=An[Rie]=An[Lie]=An[Iie]=!0;An[hie]=An[IO]=An[xie]=!1;function cm(t,e,n,r,i,s){var o,a=e&aie,l=e&lie,c=e&cie;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!rie(t))return t;var u=eie(t);if(u){if(o=Zre(t),!a)return Wre(t,o)}else{var d=Yre(t),f=d==IO||d==pie;if(tie(t))return Gre(t,a);if(d==OO||d==LO||f&&!i){if(o=l||f?{}:Qre(t),!a)return l?Xre(t,Hre(o,t)):jre(t,zre(o,t))}else{if(!An[d])return i?t:{};o=Jre(t,d,a)}}s||(s=new Vre);var h=s.get(t);if(h)return h;s.set(t,o),iie(t)?t.forEach(function(m){o.add(cm(m,e,n,m,t,s))}):nie(t)&&t.forEach(function(m,v){o.set(v,cm(m,e,n,v,t,s))});var p=c?l?qre:Kre:l?oie:sie,g=u?void 0:p(t);return Ure(g||t,function(m,v){g&&(v=m,m=t[v]),$re(o,v,cm(m,e,n,v,t,s))}),o}var kO=cm,Oie=kO,kie=1,Die=4;function Nie(t){return Oie(t,kie|Die)}var Fie=Nie;const r_=br(Fie);function Bie(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}var Vie=Bie;function Uie(t){return function(e){return t==null?void 0:t[e]}}var $ie=Uie,zie=$ie,Hie={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Gie=zie(Hie),Wie=Gie;function jie(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var DO=jie,Xie=fo,Kie=ls,qie="[object Symbol]";function Yie(t){return typeof t=="symbol"||Kie(t)&&Xie(t)==qie}var bg=Yie,UC=ah,Zie=DO,Jie=Ts,Qie=bg,ese=1/0,$C=UC?UC.prototype:void 0,zC=$C?$C.toString:void 0;function NO(t){if(typeof t=="string")return t;if(Jie(t))return Zie(t,NO)+"";if(Qie(t))return zC?zC.call(t):"";var e=t+"";return e=="0"&&1/t==-ese?"-0":e}var tse=NO,nse=tse;function rse(t){return t==null?"":nse(t)}var ch=rse,ise=Wie,sse=ch,ose=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ase="\\u0300-\\u036f",lse="\\ufe20-\\ufe2f",cse="\\u20d0-\\u20ff",use=ase+lse+cse,dse="["+use+"]",fse=RegExp(dse,"g");function hse(t){return t=sse(t),t&&t.replace(ose,ise).replace(fse,"")}var pse=hse,mse=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function vse(t){return t.match(mse)||[]}var gse=vse,yse=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function bse(t){return yse.test(t)}var _se=bse,FO="\\ud800-\\udfff",xse="\\u0300-\\u036f",wse="\\ufe20-\\ufe2f",Sse="\\u20d0-\\u20ff",Ese=xse+wse+Sse,BO="\\u2700-\\u27bf",VO="a-z\\xdf-\\xf6\\xf8-\\xff",Mse="\\xac\\xb1\\xd7\\xf7",Cse="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ase="\\u2000-\\u206f",Tse=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",UO="A-Z\\xc0-\\xd6\\xd8-\\xde",Pse="\\ufe0e\\ufe0f",$O=Mse+Cse+Ase+Tse,zO="[']",HC="["+$O+"]",Rse="["+Ese+"]",HO="\\d+",Lse="["+BO+"]",GO="["+VO+"]",WO="[^"+FO+$O+HO+BO+VO+UO+"]",Ise="\\ud83c[\\udffb-\\udfff]",Ose="(?:"+Rse+"|"+Ise+")",kse="[^"+FO+"]",jO="(?:\\ud83c[\\udde6-\\uddff]){2}",XO="[\\ud800-\\udbff][\\udc00-\\udfff]",Oc="["+UO+"]",Dse="\\u200d",GC="(?:"+GO+"|"+WO+")",Nse="(?:"+Oc+"|"+WO+")",WC="(?:"+zO+"(?:d|ll|m|re|s|t|ve))?",jC="(?:"+zO+"(?:D|LL|M|RE|S|T|VE))?",KO=Ose+"?",qO="["+Pse+"]?",Fse="(?:"+Dse+"(?:"+[kse,jO,XO].join("|")+")"+qO+KO+")*",Bse="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vse="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Use=qO+KO+Fse,$se="(?:"+[Lse,jO,XO].join("|")+")"+Use,zse=RegExp([Oc+"?"+GO+"+"+WC+"(?="+[HC,Oc,"$"].join("|")+")",Nse+"+"+jC+"(?="+[HC,Oc+GC,"$"].join("|")+")",Oc+"?"+GC+"+"+WC,Oc+"+"+jC,Vse,Bse,HO,$se].join("|"),"g");function Hse(t){return t.match(zse)||[]}var Gse=Hse,Wse=gse,jse=_se,Xse=ch,Kse=Gse;function qse(t,e,n){return t=Xse(t),e=n?void 0:e,e===void 0?jse(t)?Kse(t):Wse(t):t.match(e)||[]}var Yse=qse,Zse=Vie,Jse=pse,Qse=Yse,eoe="[']",toe=RegExp(eoe,"g");function noe(t){return function(e){return Zse(Qse(Jse(e).replace(toe,"")),t,"")}}var zw=noe,roe=zw,ioe=roe(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),soe=ioe;const Pf=br(soe);function ooe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var YO=ooe,aoe=YO;function loe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:aoe(t,e,n)}var coe=loe,uoe="\\ud800-\\udfff",doe="\\u0300-\\u036f",foe="\\ufe20-\\ufe2f",hoe="\\u20d0-\\u20ff",poe=doe+foe+hoe,moe="\\ufe0e\\ufe0f",voe="\\u200d",goe=RegExp("["+voe+uoe+poe+moe+"]");function yoe(t){return goe.test(t)}var ZO=yoe;function boe(t){return t.split("")}var _oe=boe,JO="\\ud800-\\udfff",xoe="\\u0300-\\u036f",woe="\\ufe20-\\ufe2f",Soe="\\u20d0-\\u20ff",Eoe=xoe+woe+Soe,Moe="\\ufe0e\\ufe0f",Coe="["+JO+"]",i_="["+Eoe+"]",s_="\\ud83c[\\udffb-\\udfff]",Aoe="(?:"+i_+"|"+s_+")",QO="[^"+JO+"]",ek="(?:\\ud83c[\\udde6-\\uddff]){2}",tk="[\\ud800-\\udbff][\\udc00-\\udfff]",Toe="\\u200d",nk=Aoe+"?",rk="["+Moe+"]?",Poe="(?:"+Toe+"(?:"+[QO,ek,tk].join("|")+")"+rk+nk+")*",Roe=rk+nk+Poe,Loe="(?:"+[QO+i_+"?",i_,ek,tk,Coe].join("|")+")",Ioe=RegExp(s_+"(?="+s_+")|"+Loe+Roe,"g");function Ooe(t){return t.match(Ioe)||[]}var koe=Ooe,Doe=_oe,Noe=ZO,Foe=koe;function Boe(t){return Noe(t)?Foe(t):Doe(t)}var Voe=Boe,Uoe=coe,$oe=ZO,zoe=Voe,Hoe=ch;function Goe(t){return function(e){e=Hoe(e);var n=$oe(e)?zoe(e):void 0,r=n?n[0]:e.charAt(0),i=n?Uoe(n,1).join(""):e.slice(1);return r[t]()+i}}var Woe=Goe,joe=Woe,Xoe=joe("toUpperCase"),ik=Xoe,Koe=ch,qoe=ik;function Yoe(t){return qoe(Koe(t).toLowerCase())}var Zoe=Yoe,Joe=Zoe,Qoe=zw,eae=Qoe(function(t,e,n){return e=e.toLowerCase(),t+(n?Joe(e):e)}),tae=eae;const nae=br(tae);function rae(t){return t==null}var iae=rae;const Ji=br(iae);var sae=as,oae=function(){return sae.Date.now()},aae=oae,lae=/\s/;function cae(t){for(var e=t.length;e--&&lae.test(t.charAt(e)););return e}var uae=cae,dae=uae,fae=/^\s+/;function hae(t){return t&&t.slice(0,dae(t)+1).replace(fae,"")}var pae=hae,mae=pae,XC=xi,vae=bg,KC=NaN,gae=/^[-+]0x[0-9a-f]+$/i,yae=/^0b[01]+$/i,bae=/^0o[0-7]+$/i,_ae=parseInt;function xae(t){if(typeof t=="number")return t;if(vae(t))return KC;if(XC(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=XC(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=mae(t);var n=yae.test(t);return n||bae.test(t)?_ae(t.slice(2),n?2:8):gae.test(t)?KC:+t}var sk=xae,wae=xi,l0=aae,qC=sk,Sae="Expected a function",Eae=Math.max,Mae=Math.min;function Cae(t,e,n){var r,i,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Sae);e=qC(e)||0,wae(n)&&(u=!!n.leading,d="maxWait"in n,s=d?Eae(qC(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(_){var w=r,M=i;return r=i=void 0,c=_,o=t.apply(M,w),o}function p(_){return c=_,a=setTimeout(v,e),u?h(_):o}function g(_){var w=_-l,M=_-c,x=e-w;return d?Mae(x,s-M):x}function m(_){var w=_-l,M=_-c;return l===void 0||w>=e||w<0||d&&M>=s}function v(){var _=l0();if(m(_))return b(_);a=setTimeout(v,g(_))}function b(_){return a=void 0,f&&r?h(_):(r=i=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function E(){return a===void 0?o:b(l0())}function T(){var _=l0(),w=m(_);if(r=arguments,i=this,l=_,w){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,e),h(l)}return a===void 0&&(a=setTimeout(v,e)),o}return T.cancel=y,T.flush=E,T}var ok=Cae;const Hw=br(ok);var Aae=Ts,Tae=bg,Pae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rae=/^\w*$/;function Lae(t,e){if(Aae(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Tae(t)?!0:Rae.test(t)||!Pae.test(t)||e!=null&&t in Object(e)}var Iae=Lae,ak=mO,Oae="Expected a function";function Gw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Oae);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Gw.Cache||ak),n}Gw.Cache=ak;var kae=Gw,Dae=kae,Nae=500;function Fae(t){var e=Dae(t,function(r){return n.size===Nae&&n.clear(),r}),n=e.cache;return e}var Bae=Fae,Vae=Bae,Uae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$ae=/\\(\\)?/g,zae=Vae(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Uae,function(n,r,i,s){e.push(i?s.replace($ae,"$1"):r||n)}),e}),Hae=zae,Gae=Ts,Wae=Iae,jae=Hae,Xae=ch;function Kae(t,e){return Gae(t)?t:Wae(t,e)?[t]:jae(Xae(t))}var Hu=Kae,qae=bg,Yae=1/0;function Zae(t){if(typeof t=="string"||qae(t))return t;var e=t+"";return e=="0"&&1/t==-Yae?"-0":e}var _g=Zae,Jae=Hu,Qae=_g;function ele(t,e){e=Jae(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Qae(e[n++])];return n&&n==r?t:void 0}var lk=ele,tle=Iw,nle=Hu,rle=mg,YC=xi,ile=_g;function sle(t,e,n,r){if(!YC(t))return t;e=nle(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=ile(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=r?r(u,l,a):void 0,c===void 0&&(c=YC(u)?u:rle(e[i+1])?[]:{})}tle(a,l,c),a=a[l]}return t}var ole=sle,ale=lk,lle=ole,cle=Hu;function ule(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=ale(t,o);n(a,o)&&lle(s,cle(o,t),a)}return s}var dle=ule;function fle(t,e){return t!=null&&e in Object(t)}var hle=fle,ple=Hu,mle=pg,vle=Ts,gle=mg,yle=kw,ble=_g;function _le(t,e,n){e=ple(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=ble(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&yle(i)&&gle(o,i)&&(vle(t)||mle(t)))}var xle=_le,wle=hle,Sle=xle;function Ele(t,e){return t!=null&&Sle(t,e,wle)}var Mle=Ele,Cle=dle,Ale=Mle;function Tle(t,e){return Cle(t,e,function(n,r){return Ale(t,r)})}var Ple=Tle,ZC=ah,Rle=pg,Lle=Ts,JC=ZC?ZC.isConcatSpreadable:void 0;function Ile(t){return Lle(t)||Rle(t)||!!(JC&&t&&t[JC])}var Ole=Ile,kle=Bw,Dle=Ole;function ck(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Dle),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?ck(a,e-1,n,r,i):kle(i,a):r||(i[i.length]=a)}return i}var Nle=ck,Fle=Nle;function Ble(t){var e=t==null?0:t.length;return e?Fle(t,1):[]}var uk=Ble;const QC=br(uk);function Vle(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Ule=Vle,$le=Ule,eA=Math.max;function zle(t,e,n){return e=eA(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=eA(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),$le(t,this,a)}}var dk=zle;function Hle(t){return function(){return t}}var Gle=Hle;function Wle(t){return t}var fk=Wle,jle=Gle,tA=gO,Xle=fk,Kle=tA?function(t,e){return tA(t,"toString",{configurable:!0,enumerable:!1,value:jle(e),writable:!0})}:Xle,qle=Kle,Yle=800,Zle=16,Jle=Date.now;function Qle(t){var e=0,n=0;return function(){var r=Jle(),i=Zle-(r-n);if(n=r,i>0){if(++e>=Yle)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ece=Qle,tce=qle,nce=ece,rce=nce(tce),hk=rce,ice=uk,sce=dk,oce=hk;function ace(t){return oce(sce(t,void 0,ice),t+"")}var pk=ace,lce=Ple,cce=pk,uce=cce(function(t,e){return t==null?{}:lce(t,e)}),dce=uce;const wn=br(dce);var fce=fo,hce=Ts,pce=ls,mce="[object String]";function vce(t){return typeof t=="string"||!hce(t)&&pce(t)&&fce(t)==mce}var gce=vce;const Vm=br(gce);var yce=Lw,bce=lg;function _ce(t,e,n){(n!==void 0&&!bce(t[e],n)||n===void 0&&!(e in t))&&yce(t,e,n)}var mk=_ce;function xce(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var wce=xce,Sce=wce,Ece=Sce(),Mce=Ece,Cce=yg,Ace=ls;function Tce(t){return Ace(t)&&Cce(t)}var Pce=Tce,Rce=fo,Lce=Vw,Ice=ls,Oce="[object Object]",kce=Function.prototype,Dce=Object.prototype,vk=kce.toString,Nce=Dce.hasOwnProperty,Fce=vk.call(Object);function Bce(t){if(!Ice(t)||Rce(t)!=Oce)return!1;var e=Lce(t);if(e===null)return!0;var n=Nce.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&vk.call(n)==Fce}var gk=Bce;function Vce(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var yk=Vce,Uce=$u,$ce=lh;function zce(t){return Uce(t,$ce(t))}var Hce=zce,nA=mk,Gce=wO,Wce=PO,jce=SO,Xce=RO,rA=pg,iA=Ts,Kce=Pce,qce=Ow,Yce=dg,Zce=xi,Jce=gk,Qce=bO,sA=yk,eue=Hce;function tue(t,e,n,r,i,s,o){var a=sA(t,n),l=sA(e,n),c=o.get(l);if(c){nA(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=iA(l),h=!f&&qce(l),p=!f&&!h&&Qce(l);u=l,f||h||p?iA(a)?u=a:Kce(a)?u=jce(a):h?(d=!1,u=Gce(l,!0)):p?(d=!1,u=Wce(l,!0)):u=[]:Jce(l)||rA(l)?(u=a,rA(a)?u=eue(a):(!Zce(a)||Yce(a))&&(u=Xce(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),nA(t,n,u)}var nue=tue,rue=vO,iue=mk,sue=Mce,oue=nue,aue=xi,lue=lh,cue=yk;function bk(t,e,n,r,i){t!==e&&sue(e,function(s,o){if(i||(i=new rue),aue(s))oue(t,e,o,n,bk,r,i);else{var a=r?r(cue(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),iue(t,o,a)}},lue)}var uue=bk,due=fk,fue=dk,hue=hk;function pue(t,e){return hue(fue(t,e,due),t+"")}var mue=pue,vue=lg,gue=yg,yue=mg,bue=xi;function _ue(t,e,n){if(!bue(n))return!1;var r=typeof e;return(r=="number"?gue(n)&&yue(e,n.length):r=="string"&&e in n)?vue(n[e],t):!1}var xue=_ue,wue=mue,Sue=xue;function Eue(t){return wue(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&Sue(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var Mue=Eue,Cue=uue,Aue=Mue,Tue=Aue(function(t,e,n){Cue(t,e,n)}),Pue=Tue;const o_=br(Pue);function Rue(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Lue=Rue,Iue=lk,Oue=YO;function kue(t,e){return e.length<2?t:Iue(t,Oue(e,0,-1))}var Due=kue,Nue=Hu,Fue=Lue,Bue=Due,Vue=_g;function Uue(t,e){return e=Nue(e,t),t=Bue(t,e),t==null||delete t[Vue(Fue(e))]}var $ue=Uue,zue=gk;function Hue(t){return zue(t)?void 0:t}var Gue=Hue,Wue=DO,jue=kO,Xue=$ue,Kue=Hu,que=$u,Yue=Gue,Zue=pk,Jue=AO,Que=1,ede=2,tde=4,nde=Zue(function(t,e){var n={};if(t==null)return n;var r=!1;e=Wue(e,function(s){return s=Kue(s,t),r||(r=s.length>1),s}),que(t,Jue(t),n),r&&(n=jue(n,Que|ede|tde,Yue));for(var i=e.length;i--;)Xue(n,e[i]);return n}),rde=nde;const ho=br(rde);function ide(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}var sde=ide,ode=sde,c0=sk;function ade(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=c0(n),n=n===n?n:0),e!==void 0&&(e=c0(e),e=e===e?e:0),ode(c0(t),e,n)}var lde=ade;const Il=br(lde);function cde(){}var ude=cde;const dde=br(ude);var fde=ok,hde=xi,pde="Expected a function";function mde(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(pde);return hde(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fde(t,e,{leading:r,maxWait:e,trailing:i})}var vde=mde;const _k=br(vde);var gde=zw,yde=ik,bde=gde(function(t,e,n){return t+(n?" ":"")+yde(e)}),_de=bde;const oA=br(_de);var xde=fo,wde=ls,Sde="[object Date]";function Ede(t){return wde(t)&&xde(t)==Sde}var Mde=Ede,Cde=Mde,Ade=vg,aA=gg,lA=aA&&aA.isDate,Tde=lA?Ade(lA):Cde,Pde=Tde;const Xd=br(Pde);var Rde=fo,Lde=ls,Ide="[object Number]";function Ode(t){return typeof t=="number"||Lde(t)&&Rde(t)==Ide}var kde=Ode;const cA=br(kde),a_="child:",Ww="$va:childComponents",xk=t=>Object.keys(t).reduce((e,n)=>{const r=`${a_}${n}`;return e[r]={type:Object,required:!1,default:void 0},e},{}),wk=t=>{const e=A(()=>Object.keys(t).reduce((r,i)=>{if(i.startsWith(a_)){const s=i.slice(a_.length);r[s]=t[i]}return r},{}));Mr(Ww,e)},Sk=()=>{var t;const e=(t=on())==null?void 0:t.attrs["va-child"];if(!e)return null;const n=Zn(Ww);return n!=null&&n.value?A(()=>n.value[e]):null},Dde=()=>{var t;const e=(t=on())==null?void 0:t.attrs["va-child"];if(!e)return null;const n=Zn(Ww);return n!=null&&n.value?A(()=>{var r;return(r=n.value[e])==null?void 0:r.preset}):null},Nde=/([a-z0-9])([A-Z])/g,Fde=t=>t.replace(Nde,"$1-$2").toLowerCase(),Bde=(t,e)=>e in t?t[e]:t[Fde(e)],Vde=(t,e)=>{const n=t.props,r=Sk();return new Proxy(n,{get:(i,s)=>{var o,a;if(typeof s!="string")return i[s];const l=(o=r==null?void 0:r.value)==null?void 0:o[s];if(l!==void 0)return l;const c=t.vnode.props||{},u=i[s];if(Bde(c,s)!==void 0)return u;const f=(a=e.value)==null?void 0:a[s];return f!==void 0?f:u}})},Ude=(t,e)=>{const n=t.attrs;return new Proxy(n,{get:(r,i)=>{var s;if(typeof i!="string")return r[i];if(i==="class")return Qe([e.value.class,n.class]);if(i==="style")return Be([e.value.style,n.style]);const o=(s=e.value)==null?void 0:s[i];return o!==void 0?o:r[i]},ownKeys(r){return[...new Set([...Object.keys(n),...Object.keys(e.value)])]},getOwnPropertyDescriptor(r,i){return Reflect.getOwnPropertyDescriptor(e.value,i)??Reflect.getOwnPropertyDescriptor(n,i)}})},u0="slot:",$de=(t,e)=>{const n=t.slots,r=Sk(),i=A(()=>Object.keys(e.value).reduce((s,o)=>(o.startsWith(u0)&&(s[o.slice(u0.length)]=e.value[o]),s),{}));return new Proxy(n,{get:(s,o)=>{var a,l;if(typeof o!="string")return s[o];const c=`${u0}${o}`,u=(a=r==null?void 0:r.value)==null?void 0:a[c];if(u!==void 0)return Zb(pC(u));const d=s[o];if(d!==void 0)return d;const f=(l=i.value)==null?void 0:l[o];return f!==void 0?Zb(pC(f)):d},ownKeys(s){return[...new Set([...Object.keys(n),...Object.keys(i.value)])]},getOwnPropertyDescriptor(s,o){return Reflect.getOwnPropertyDescriptor(i.value,o)??Reflect.getOwnPropertyDescriptor(n,o)}})},Ek="VaLocalConfig",zde=A(()=>[]);function jw(){return Zn(Ek,zde)}function Mk(t){Mr(Ek,t)}function Hde(t){const e=jw(),n=A(()=>[...e.value,t.value]);Mk(n)}const Gde=typeof process<"u"?process:{},Wde=Gde.env||{},jde=Wde.NODE_ENV||"",Gu=typeof __DEV__<"u"?__DEV__:!["prod","production"].includes(jde),qt=(...t)=>(Gu&&console.warn(...t),!1),Xde=t=>{throw new Error(`[Vuestic] ${t}`)};let l_=null,xd=null;const uA=t=>{(xd==null?void 0:xd._instance)===null&&(xd=null),!(t===null&&xd===null)&&(xd=l_,l_=t)},Ck=()=>l_,Ak=(t,e=void 0)=>{var n;const r=(n=Ck())==null?void 0:n._context.provides[t];return on()?Zn(t,e):r??Xde("You're using Vuestic composable outside Vue app. Since you registered Vuestic in multiple apps, composables can not be used outside setup function anymore.")},Ip=t=>t&&typeof t=="object"&&!Array.isArray(t),Um=(t,e)=>!Ip(t)||!Ip(e)?e:(Object.keys(e).forEach(n=>{const r=t[n],i=e[n];Ip(r)&&Ip(i)?t[n]=Um(Object.create(Object.getPrototypeOf(r),Object.getOwnPropertyDescriptors(r)),i):t[n]=i}),t),Kde=[{prefix:"bg",property:"background-color"},{prefix:"text",property:["color","fill"]}],qde=()=>Kde,Tk=t=>({...t,get variables(){return this.presets[this.currentPresetName]},set variables(e){this.presets[this.currentPresetName]=e}}),Yde=()=>Tk({threshold:150,presets:{light:hC.light,dark:hC.dark},currentPresetName:"light"}),Zde=[{name:"va-arrow-first",to:"mi-first_page"},{name:"va-arrow-last",to:"mi-last_page"},{name:"va-arrow-right",to:"mi-chevron_right"},{name:"va-arrow-left",to:"mi-chevron_left"},{name:"va-arrow-down",to:"mi-expand_more"},{name:"va-arrow-up",to:"mi-expand_less"},{name:"va-calendar",to:"mi-calendar_today"},{name:"va-delete",to:"mi-delete_outline"},{name:"va-check",to:"mi-check"},{name:"va-check-circle",to:"mi-check_circle"},{name:"va-warning",to:"mi-warning"},{name:"va-clear",to:"mi-highlight_off"},{name:"va-close",to:"mi-close"},{name:"va-loading",to:"mi-loop"},{name:"va-plus",to:"add"},{name:"va-minus",to:"remove"}],Jde=[{name:"mi-{icon}",class:"material-icons",resolve:({icon:t})=>({content:t})},{name:"{icon}",class:"material-icons",resolve:({icon:t})=>({content:t})}],Qde=t=>(t.aliases=t.aliases||[],t.fonts=t.fonts||[],[...t.aliases,...Zde,...t.fonts,...Jde]),efe=()=>Qde({}),tfe=()=>({VaIcon:{sizesConfig:{defaultSize:18,sizes:{small:14,medium:18,large:24}}},VaRating:{sizesConfig:{defaultSize:18,sizes:{small:14,medium:18,large:24}}},all:{},presets:{VaButton:{default:{backgroundOpacity:1,hoverBehavior:"mask",hoverOpacity:.15,pressedBehavior:"mask",pressedOpacity:.13},primary:{backgroundOpacity:.1,hoverBehavior:"opacity",hoverOpacity:.07,pressedBehavior:"opacity",pressedOpacity:.13},secondary:{backgroundOpacity:0,hoverBehavior:"opacity",hoverOpacity:.07,pressedBehavior:"opacity",pressedOpacity:.13},plain:{plain:!0,hoverBehavior:"mask",hoverOpacity:.15,pressedBehavior:"mask",pressedOpacity:.13},plainOpacity:{plain:!0,textOpacity:.6,hoverBehavior:"opacity",hoverOpacity:1,pressedBehavior:"opacity",pressedOpacity:.9}},VaInputWrapper:{solid:{background:"backgroundElement"},bordered:{class:"va-input-wrapper--bordered",background:"backgroundElement"}},VaCheckbox:{solid:{style:"--va-checkbox-background: var(--va-background-element)"}},VaRadio:{solid:{style:"--va-radio-background: var(--va-background-element)"}},VaMenu:{context:{cursor:!0,placement:"right-start",trigger:"right-click"}}}}),nfe=()=>({search:"Search",noOptions:"Items not found",ok:"OK",cancel:"Cancel",uploadFile:"Upload file",undo:"Undo",dropzone:"Drop files here to upload",fileDeleted:"File deleted",closeAlert:"close alert",backToTop:"back to top",toggleDropdown:"toggle dropdown",carousel:"carousel",goPreviousSlide:"go previous slide",goNextSlide:"go next slide",goSlide:"go slide {index}",slideOf:"slide {index} of {length}",close:"close",openColorPicker:"open color picker",colorSelection:"color selection",colorName:"color {color}",decreaseCounter:"decrease counter",increaseCounter:"increase counter",selectAllRows:"select all rows",sortColumnBy:"sort column by {name}",selectRowByIndex:"select row {index}",resetDate:"reset date",nextPeriod:"next period",switchView:"switch view",previousPeriod:"previous period",removeFile:"remove file",reset:"reset",pagination:"pagination",goToTheFirstPage:"go to the first page",goToPreviousPage:"go to the previous page",goToSpecificPage:"go to the {page} page",goToSpecificPageInput:"enter the page number to go",goNextPage:"go next page",goLastPage:"go last page",currentRating:"current rating {value} of {max}",voteRating:"vote rating {value} of {max}",optionsFilter:"options filter",splitPanels:"split panels",movePaginationLeft:"move pagination left",movePaginationRight:"move pagination right",resetTime:"reset time",closeToast:"close toast",selectedOption:"Selected option",noSelectedOption:"Option is not selected",breadcrumbs:"breadcrumbs",counterValue:"counter value",selectedDate:"selected date",selectedTime:"selected time",progressState:"progress state",color:"color",next:"Next",back:"Previous",finish:"Finish",step:"step",progress:"progress",loading:"Loading",sliderValue:"Current slider value is {value}",switch:"Switch",inputField:"Input field"}),xg=Symbol("GLOBAL_CONFIG"),rfe=()=>({colors:Yde(),icons:efe(),components:tfe(),breakpoint:vY(),i18n:nfe(),colorsClasses:qde(),routerComponent:void 0}),Pk=(t={})=>{const e=le(Um(rfe(),t));return{getGlobalConfig:()=>e.value,setGlobalConfig:s=>{const o=typeof s=="function"?s(e.value):s;e.value=r_(o)},mergeGlobalConfig:s=>{const o=typeof s=="function"?s(e.value):s;e.value=Um(r_(e.value),o)},globalConfig:e}},ife=t=>{var e,n;const r=((e=on())==null?void 0:e.appContext.provides)||((n=Ck())==null?void 0:n._context.provides);if(!r)throw new Error("Vue app not found for provide");return r[xg]=t,t};function po(){let t=Ak(xg);return t||(t=Pk(),ife(t)),t}const sfe=(t,e)=>{const n=jw(),{globalConfig:r}=po(),i=A(()=>e.preset),s=a=>{var l,c,u;return(u=(c=(l=r.value.components)==null?void 0:l.presets)==null?void 0:c[t.name])==null?void 0:u[a]},o=Dde();return A(()=>{var a,l;const c={...(a=r.value.components)==null?void 0:a.all,...(l=r.value.components)==null?void 0:l[t.name]},u=n.value.reduce((h,p)=>p[t.name]?{...h,...p[t.name]}:h,{}),d=(o==null?void 0:o.value)||i.value||u.preset||c.preset,f=d&&s(d);return{...c,...u,...f}})},ofe=t=>(e,n)=>{var r;const i=on(),s=sfe(t,e),o=A(()=>ho(s.value,Object.keys(e))),a=Vde(i,s),l=Ude(i,o),c=$de(i,s);i.props=a,i.attrs=l,i.slots=c;const u=(r=t.setup)==null?void 0:r.call(t,Xa(a),{...n,attrs:l,slots:c});return typeof u=="object"&&!i.exposed&&n.expose(u),u},c_=t=>{const e=ofe(t),n=yY(t);return{...t,setup:e,render:"render"in t?n:void 0,ssrRender:"ssrRender"in t?n:void 0}},u_="__c",afe=t=>(t[u_]=c_(t[u_]),t),mo=t=>"setup"in t?c_(t):u_ in t?afe(t):(t.setup=()=>({}),c_(t)),ze=mo,lfe={defaultSize:48,sizes:{small:32,medium:48,large:64}},cfe={defaultSize:1,sizes:{small:.75,medium:1,large:1.25}},Kl={size:{type:[String,Number],default:"",validator:t=>typeof t=="string"||typeof t=="number"},sizesConfig:{type:Object,default:()=>lfe},fontSizesConfig:{type:Object,default:()=>cfe}},ufe=/(?<fontSize>\d+)(?<extension>px|rem)/i,dA=t=>t/16-.5,fA=t=>typeof t=="number"?`${t}px`:String(t),dfe=t=>"sizesConfig"in t,ffe=t=>{const e="size";return A(()=>{let n=t[e];if(dfe(t)){const{defaultSize:r,sizes:i}=t.sizesConfig;if(Ji(n)&&(n=r),i){const s=i[n];if(s)return fA(s)}}return fA(n)})},ql=(t,e=(n=>(n=on())==null?void 0:n.type.name)())=>{const{getGlobalConfig:n}=po(),r=A(()=>{var a,l;return e?(l=(a=n().components)==null?void 0:a[e])==null?void 0:l.sizesConfig:void 0}),i=A(()=>{var a,l,c;const{defaultSize:u,sizes:d}=t.sizesConfig,f=(a=r.value)==null?void 0:a.defaultSize;if(!t.size)return`${u||f}px`;if(typeof t.size=="string"){const h=(c=(l=r.value)==null?void 0:l.sizes)==null?void 0:c[t.size],p=d[t.size];return p?`${p}px`:h?`${h}px`:t.size}return`${t.size}px`}),s=A(()=>{const{defaultSize:a,sizes:l}=t.fontSizesConfig;if(!t.size)return a;if(typeof t.size=="string"){if(t.size in l)return l[t.size];const c=t.size.match(ufe);if(!c||!c.groups)throw new Error("Size prop should be either valid string or number");const{extension:u,fontSize:d}=c.groups;return u==="rem"?+d:dA(+d)}return dA(t.size)}),o=A(()=>`${s.value}rem`);return{sizeComputed:i,fontSizeComputed:o,fontSizeInRem:s}},rt={preset:{type:String,default:void 0}},hfe=(t,e)=>e.test(t),Rk=(t,e)=>{if(typeof e!="string"&&e.global)return[...t.matchAll(e)].map(r=>r.slice(1));const n=t.match(e)||[];return n?n.length>1?n.slice(1):n:[]},Lk=/{[^}]*}/g,Ik=t=>t.replace(Lk,"(.*)"),pfe=t=>(t.match(Lk)||[]).map(e=>e.replace(/{|}/g,"")),mfe=(t,e)=>Rk(t,Ik(e)),vfe=(t,e)=>{const n=pfe(e),r=mfe(t,e);return n.reduce((i,s,o)=>({...i,[s]:r[o]}),{})},gfe=(t,e)=>(t.match(e)||[])[0]===t,yfe=(t,e)=>{const n=Ik(e);return gfe(t,new RegExp(n))},Ok=t=>typeof t.name=="string",kk=t=>t.name instanceof RegExp,bfe=(t,e)=>Ok(e)?yfe(t,e.name):kk(e)?hfe(t,e.name):!1,_fe=(t,e)=>{const n=vfe(t,e.name);return e.resolve&&e.resolve(n)},xfe=(t,e)=>{if(e.name.global)throw new Error(`Bad icon config with name ${e.name}. Please, don't use global regex as name.`);const n=Rk(t,e.name);return e.resolveFromRegex&&e.resolveFromRegex(...n)},wfe=(t,e)=>{if(Ok(e))return _fe(t,e);if(kk(e))return xfe(t,e);throw Error("Unknown icon config")},Sfe=(t,e,n=[])=>{const r=e.find(i=>n.includes(i.name.toString())?!1:bfe(t,i));if(!r)throw new Error(`Can not find icon config from ${t}. Please provide default config.`);return r},Dk=(t,e,n=[])=>{if(!t)return;const r=Sfe(t,e,n),i=o_(wfe(t,r),r);return n=[...n,r.name.toString()],o_(Dk(i.to,e,n),i)},Efe=t=>{const e=["name","to","resolve","resolveFromRegex"],n=t;return e.forEach(r=>{delete n[r]}),n},Mfe=(t,e)=>{const n=Dk(t,e);return n===void 0?{}:Efe(n)},Cfe=()=>{const{globalConfig:t}=po();return{getIcon:e=>Mfe(e,t.value.icons)}},vo=t=>t,Nk=Symbol("VaAppCachePlugin"),Afe=vo(()=>({install(t){const e={colorContrast:{}};t.provide(Nk,e)}})),Tfe=()=>{const t=Ak(Nk);return t||{colorContrast:{}}},Fk=t=>{const e=A(t),n=new Proxy(e,{get(r,i,s){if(typeof e.value=="object")return C(Reflect.get(e.value,i,s))},set(r,i,s){return Xt(e.value[i])&&!Xt(s)?e.value[i].value=s:e.value[i]=s,!0},deleteProperty(r,i){return Reflect.deleteProperty(e.value,i)},has(r,i){return typeof e.value!="object"?!1:Reflect.has(e.value,i)},ownKeys(){return typeof e.value!="object"?[]:Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return Sr(n)};var Kt=function(){return Kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kt.apply(this,arguments)};function hA(t,e,n){if(n||arguments.length===2)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var Ot,Ko,Jr,$m;(function(t){t.HEX="HEX",t.RGB="RGB",t.HSL="HSL",t.CMYK="CMYK"})(Ot||(Ot={})),function(t){t.ANALOGOUS="ANALOGOUS",t.COMPLEMENTARY="COMPLEMENTARY",t.SPLIT_COMPLEMENTARY="SPLIT_COMPLEMENTARY",t.TRIADIC="TRIADIC",t.TETRADIC="TETRADIC",t.SQUARE="SQUARE"}(Ko||(Ko={})),function(t){t.ADDITIVE="ADDITIVE",t.SUBTRACTIVE="SUBTRACTIVE"}(Jr||(Jr={})),function(t){t.black="#000000",t.silver="#C0C0C0",t.gray="#808080",t.white="#FFFFFF",t.maroon="#800000",t.red="#FF0000",t.purple="#800080",t.fuchsia="#FF00FF",t.green="#008000",t.lime="#00FF00",t.olive="#808000",t.yellow="#FFFF00",t.navy="#000080",t.blue="#0000FF",t.teal="#008080",t.aqua="#00FFFF",t.orange="#FFA500",t.aliceblue="#F0F8FF",t.antiquewhite="#FAEBD7",t.aquamarine="#7FFFD4",t.azure="#F0FFFF",t.beige="#F5F5DC",t.bisque="#FFE4C4",t.blanchedalmond="#FFEBCD",t.blueviolet="#8A2BE2",t.brown="#A52A2A",t.burlywood="#DEB887",t.cadetblue="#5F9EA0",t.chartreuse="#7FFF00",t.chocolate="#D2691E",t.coral="#FF7F50",t.cornflowerblue="#6495ED",t.cornsilk="#FFF8DC",t.crimson="#DC143C",t.cyan="#00FFFF",t.darkblue="#00008B",t.darkcyan="#008B8B",t.darkgoldenrod="#B8860B",t.darkgray="#A9A9A9",t.darkgreen="#006400",t.darkgrey="#A9A9A9",t.darkkhaki="#BDB76B",t.darkmagenta="#8B008B",t.darkolivegreen="#556B2F",t.darkorange="#FF8C00",t.darkorchid="#9932CC",t.darkred="#8B0000",t.darksalmon="#E9967A",t.darkseagreen="#8FBC8F",t.darkslateblue="#483D8B",t.darkslategray="#2F4F4F",t.darkslategrey="#2F4F4F",t.darkturquoise="#00CED1",t.darkviolet="#9400D3",t.deeppink="#FF1493",t.deepskyblue="#00BFFF",t.dimgray="#696969",t.dimgrey="#696969",t.dodgerblue="#1E90FF",t.firebrick="#B22222",t.floralwhite="#FFFAF0",t.forestgreen="#228B22",t.gainsboro="#DCDCDC",t.ghostwhite="#F8F8FF",t.gold="#FFD700",t.goldenrod="#DAA520",t.greenyellow="#ADFF2F",t.grey="#808080",t.honeydew="#F0FFF0",t.hotpink="#FF69B4",t.indianred="#CD5C5C",t.indigo="#4B0082",t.ivory="#FFFFF0",t.khaki="#F0E68C",t.lavender="#E6E6FA",t.lavenderblush="#FFF0F5",t.lawngreen="#7CFC00",t.lemonchiffon="#FFFACD",t.lightblue="#ADD8E6",t.lightcoral="#F08080",t.lightcyan="#E0FFFF",t.lightgoldenrodyellow="#FAFAD2",t.lightgray="#D3D3D3",t.lightgreen="#90EE90",t.lightgrey="#D3D3D3",t.lightpink="#FFB6C1",t.lightsalmon="#FFA07A",t.lightseagreen="#20B2AA",t.lightskyblue="#87CEFA",t.lightslategray="#778899",t.lightslategrey="#778899",t.lightsteelblue="#B0C4DE",t.lightyellow="#FFFFE0",t.limegreen="#32CD32",t.linen="#FAF0E6",t.magenta="#FF00FF",t.mediumaquamarine="#66CDAA",t.mediumblue="#0000CD",t.mediumorchid="#BA55D3",t.mediumpurple="#9370DB",t.mediumseagreen="#3CB371",t.mediumslateblue="#7B68EE",t.mediumspringgreen="#00FA9A",t.mediumturquoise="#48D1CC",t.mediumvioletred="#C71585",t.midnightblue="#191970",t.mintcream="#F5FFFA",t.mistyrose="#FFE4E1",t.moccasin="#FFE4B5",t.navajowhite="#FFDEAD",t.oldlace="#FDF5E6",t.olivedrab="#6B8E23",t.orangered="#FF4500",t.orchid="#DA70D6",t.palegoldenrod="#EEE8AA",t.palegreen="#98FB98",t.paleturquoise="#AFEEEE",t.palevioletred="#DB7093",t.papayawhip="#FFEFD5",t.peachpuff="#FFDAB9",t.peru="#CD853F",t.pink="#FFC0CB",t.plum="#DDA0DD",t.powderblue="#B0E0E6",t.rosybrown="#BC8F8F",t.royalblue="#4169E1",t.saddlebrown="#8B4513",t.salmon="#FA8072",t.sandybrown="#F4A460",t.seagreen="#2E8B57",t.seashell="#FFF5EE",t.sienna="#A0522D",t.skyblue="#87CEEB",t.slateblue="#6A5ACD",t.slategray="#708090",t.slategrey="#708090",t.snow="#FFFAFA",t.springgreen="#00FF7F",t.steelblue="#4682B4",t.tan="#D2B48C",t.thistle="#D8BFD8",t.tomato="#FF6347",t.turquoise="#40E0D0",t.violet="#EE82EE",t.wheat="#F5DEB3",t.whitesmoke="#F5F5F5",t.yellowgreen="#9ACD32",t.rebeccapurple="#663399"}($m||($m={}));var wd,Sd,Ed,Md,Vs,Ga,Wa,Bk=Object.keys($m),Ld=((wd={})[Ot.HEX]=/^#(?:([a-f\d])([a-f\d])([a-f\d])([a-f\d])?|([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?)$/i,wd[Ot.RGB]=/^rgba?\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,wd[Ot.HSL]=/^hsla?\s*\(\s*(?:(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*,\s*((?:\d*\.)?\d+)%\s*,\s*((?:\d*\.)?\d+)%(?:\s*,\s*((?:\d*\.)?\d+))?|(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*((?:\d*\.)?\d+)%\s*((?:\d*\.)?\d+)%(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,wd[Ot.CMYK]=/^(?:device-cmyk|cmyk)\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,wd),Pfe=/^(-?(?:\d*\.)?\d+)((?:deg|grad|rad|turn)?)$/,oo=/^(\d+(?:\.\d+)?|\.\d+)%$/,d_=/^0x([a-f\d]{1,2})$/i,Rfe="The provided string color doesn't have a correct format",Lfe="The provided color object doesn't have the proper keys or format",d0=function(t,e,n){return n<0&&(n+=6),n>=6&&(n-=6),n<1?Math.round(255*((e-t)*n+t)):n<3?Math.round(255*e):n<4?Math.round(255*((e-t)*(4-n)+t)):Math.round(255*t)},wr=function(t,e,n){e/=100;var r=(n/=100)<=.5?n*(e+1):n+e-n*e,i=2*n-r;return{r:d0(i,r,(t/=60)+2),g:d0(i,r,t),b:d0(i,r,t-2)}},Xw=function(t,e,n,r){return r=1-r,{r:Math.round(255*(1-t)*r),g:Math.round(255*(1-e)*r),b:Math.round(255*(1-n)*r)}},f_=function(t,e,n){t/=255,e/=255,n/=255;var r=1-Math.max(t,e,n),i=1-r,s=(i-t)/i,o=(i-e)/i,a=(i-n)/i;return{c:Math.round(100*s),m:Math.round(100*o),y:Math.round(100*a),k:Math.round(100*r)}},pu=function(t,e,n,r){r===void 0&&(r=1),t/=255,e/=255,n/=255,r=Math.min(r,1);var i=Math.max(t,e,n),s=Math.min(t,e,n),o=i-s,a=0,l=0,c=(i+s)/2;if(o===0)a=0,l=0;else{switch(i){case t:a=(e-n)/o%6;break;case e:a=(n-t)/o+2;break;case n:a=(t-e)/o+4}(a=Math.round(60*a))<0&&(a+=360),l=o/(1-Math.abs(2*c-1))}return{h:a,s:Math.round(100*l),l:Math.round(100*c),a:r}},pA=function(t,e){if(t<0&&(t+=360),t>360&&(t-=360),t===360||t===0)return t;var n=[[0,120],[120,180],[180,240],[240,360]],r=[[0,60],[60,120],[120,240],[240,360]],i=e?r:n,s=0,o=0,a=0,l=0;return(e?n:r).find(function(c,u){return t>=c[0]&&t<c[1]&&(s=c[0],o=c[1],a=i[u][0],l=i[u][1],!0)}),a+(l-a)/(o-s)*(t-s)},Qn=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},zm=function(t){return oo.test("".concat(t))?+"".concat(t).replace(oo,"$1"):Math.min(+t,100)},Op=function(t){return t.length===1&&(t+=t),parseInt(t,16)},kp=function(t){var e=Lt(t).toString(16).toUpperCase();return e.length===1?"0x0".concat(e):"0x".concat(e)},Dp=function(t){var e=Lt(t).toString(16).toUpperCase();return e.length===1&&(e="0".concat(e)),e},ol=function(t,e){return e===void 0&&(e=!1),!e&&oo.test(t)?Math.min(255*+t.replace(oo,"$1")/100,255):d_.test(t)?t.length===3?e?parseInt(t+t.slice(-1))/255:parseInt(t+t.slice(-1)):e?Lt(t,6)/255:Lt(t,6):Math.min(+t,e?1:255)},Zo=function(t){return Math.min(oo.test(t)?+t.replace(oo,"$1")/100:+t,1)},Vk=function(t){return t.sort().join("").toUpperCase()},Lt=function(t,e){e===void 0&&(e=0);var n=Math.pow(10,e);return Math.round(+t*n)/n},Gi=function(t,e,n){return Math.max(e,Math.min(t,n))},Bt=((Sd={})[Ot.HEX]=function(t){return"#".concat(Dp(t.r)).concat(Dp(t.g)).concat(Dp(t.b)).concat(Qn(t,"a")&&Dp(t.a)||"")},Sd[Ot.RGB]=function(t){return"rgb".concat(Qn(t,"a")?"a":"","(").concat(Lt(t.r),",").concat(Lt(t.g),",").concat(Lt(t.b)).concat(Qn(t,"a")&&",".concat(Lt(t.a,2))||"",")")},Sd[Ot.HSL]=function(t){return"hsl".concat(Qn(t,"a")?"a":"","(").concat(Lt(t.h),",").concat(Lt(t.s),"%,").concat(Lt(t.l),"%").concat(Qn(t,"a")&&",".concat(Lt(t.a,2))||"",")")},Sd[Ot.CMYK]=function(t){return"cmyk(".concat(Lt(t.c),"%,").concat(Lt(t.m),"%,").concat(Lt(t.y),"%,").concat(Lt(t.k),"%").concat(Qn(t,"a")&&",".concat(Lt(t.a,2))||"",")")},Sd),Rf=function(t){if(typeof t=="string"){var e=t.match(Pfe),n=+e[1];switch(e[2]){case"rad":t=Math.round(180*n/Math.PI);break;case"turn":t=Math.round(360*n);break;default:t=n}}return(t>360||t<0)&&(t-=360*Math.floor(t/360)),t},zr=function(t){return typeof t=="string"&&(t=oo.test(t)?+t.replace(oo,"$1")/100:+t),isNaN(+t)||t>1?1:Lt(t,6)},Wu=function(t,e,n){return e.reduce(function(r,i){return hA(hA([],r,!0),[Kt(Kt({},t),{h:n===Jr.ADDITIVE?Rf(t.h+i):Rf(pA(pA(t.h,!1)+i,!0))})],!1)},[Kt({},t)])},Ife=function(t,e){return Wu(t,[30,-30],e)},Ofe=function(t,e){return Wu(t,[180],e)},kfe=function(t,e){return Wu(t,[150,-150],e)},Dfe=function(t,e){return Wu(t,[120,-120],e)},Nfe=function(t,e){return Wu(t,[60,-120,180],e)},Ffe=function(t,e){return Wu(t,[90,-90,180],e)},mA=Object.entries(Ot).reduce(function(t,e){var n=e[0],r=e[1];if(n!==Ot.HEX){var i=Vk(n.split(""));t[i]=r,t["A"+i]=r}return t},{}),Ai=function(t){return typeof t=="string"?function(e){var n;if(Object.keys(Ot).some(function(r){if(Ld[r].test(e))return n=r,!0}),!n&&~Bk.indexOf(e)&&(n=Ot.HEX),!n)throw new Error(Rfe);return n}(t):function(e){var n,r=!1,i=Vk(Object.keys(e));if(mA[i]&&(n=mA[i]),n&&n===Ot.RGB){var s=Object.entries(e).some(function(a){return!d_.test("".concat(a[1]))}),o=Object.entries(e).some(function(a){return!(oo.test("".concat(a[1]))||!d_.test("".concat(a[1]))&&!isNaN(+a[1])&&+a[1]<=255)});s&&o&&(r=!0),s||(n=Ot.HEX)}if(!n||r)throw new Error(Lfe);return n}(t)},Bfe=((Ed={})[Ot.HEX]=function(t){var e=(~Bk.indexOf(t)?$m[t]:t).match(Ld.HEX),n={r:Op(e[1]||e[5]),g:Op(e[2]||e[6]),b:Op(e[3]||e[7])},r=e[4]||e[8];return r!==void 0&&(n.a=Op(r)/255),n},Ed[Ot.RGB]=function(t){var e=t.match(Ld.RGB),n=ol(e[1]||e[5]),r=ol(e[2]||e[6]),i=ol(e[3]||e[7]),s=e[4]||e[8],o={r:Math.min(n,255),g:Math.min(r,255),b:Math.min(i,255)};return s!==void 0&&(o.a=zr(s)),o},Ed[Ot.HSL]=function(t){var e=t.match(Ld.HSL),n=Rf(e[1]||e[5]),r=zm(e[2]||e[6]),i=zm(e[3]||e[7]),s=e[4]||e[8],o=wr(n,r,i);return s!==void 0&&(o.a=zr(s)),o},Ed[Ot.CMYK]=function(t){var e=t.match(Ld.CMYK),n=Zo(e[1]||e[6]),r=Zo(e[2]||e[7]),i=Zo(e[3]||e[8]),s=Zo(e[4]||e[9]),o=e[5]||e[10],a=Xw(n,r,i,s);return o!==void 0&&(a.a=zr(o)),a},Ed),Vfe=((Md={})[Ot.HEX]=function(t){var e={r:ol("".concat(t.r)),g:ol("".concat(t.g)),b:ol("".concat(t.b))};return Qn(t,"a")&&(e.a=Math.min(ol("".concat(t.a),!0),1)),e},Md[Ot.RGB]=function(t){return this.HEX(t)},Md[Ot.HSL]=function(t){var e=zm("".concat(t.s)),n=zm("".concat(t.l)),r=wr(Rf(t.h),e,n);return Qn(t,"a")&&(r.a=zr(t.a)),r},Md[Ot.CMYK]=function(t){var e=Zo("".concat(t.c)),n=Zo("".concat(t.m)),r=Zo("".concat(t.y)),i=Zo("".concat(t.k)),s=Xw(e,n,r,i);return Qn(t,"a")&&(s.a=zr(t.a)),s},Md),Ol=function(t,e){return e===void 0&&(e=Ai(t)),typeof t=="string"?Bfe[e](t):Vfe[e](t)},Ht=((Vs={})[Ot.HEX]=function(t){return{r:kp(t.r),g:kp(t.g),b:kp(t.b)}},Vs.HEXA=function(t){var e=Ht.HEX(t);return e.a=Qn(t,"a")?kp(255*t.a):"0xFF",e},Vs[Ot.RGB]=function(t){return Qn(t,"a")&&delete t.a,t},Vs.RGBA=function(t){return t.a=Qn(t,"a")?Lt(t.a,2):1,t},Vs[Ot.HSL]=function(t){var e=pu(t.r,t.g,t.b);return delete e.a,e},Vs.HSLA=function(t){var e=Ht.HSL(t);return e.a=Qn(t,"a")?Lt(t.a,2):1,e},Vs[Ot.CMYK]=function(t){return f_(t.r,t.g,t.b)},Vs.CMYKA=function(t){var e=f_(t.r,t.g,t.b);return e.a=Qn(t,"a")?Lt(t.a,2):1,e},Vs),vA=function(t,e,n){var r=Ai(t),i=typeof t=="string",s=Ol(t,r),o=typeof t=="string"&&Qn(s,"a")||typeof t!="string"&&Qn(t,"a"),a=pu(s.r,s.g,s.b,s.a);o||delete a.a;var l=n?a.l/(e+1):(100-a.l)/(e+1),c=Array(e).fill(null).map(function(u,d){return Kt(Kt({},a),{l:a.l+l*(d+1)*(1-2*+n)})});switch(r){case Ot.HEX:default:return c.map(function(u){var d=wr(u.h,u.s,u.l);return o&&(d.a=u.a),i?o?Bt.HEX(Kt(Kt({},d),{a:Lt(255*d.a,6)})):Bt.HEX(d):o?Ht.HEXA(d):Ht.HEX(d)});case Ot.RGB:return c.map(function(u){var d=wr(u.h,u.s,u.l);return o&&(d.a=u.a),i?Bt.RGB(d):o?Ht.RGBA(d):Ht.RGB(d)});case Ot.HSL:return c.map(function(u){return i?Bt.HSL(u):o?Ht.HSLA(Kt(Kt({},wr(u.h,u.s,u.l)),{a:u.a})):Ht.HSL(wr(u.h,u.s,u.l))})}},Tc=((Ga={buildHarmony:function(t,e,n){var r=Ai(t),i=Ol(t,r),s=pu(i.r,i.g,i.b,i.a),o=typeof t=="string"&&Qn(i,"a")||typeof t!="string"&&Qn(t,"a"),a=typeof t=="string";switch(r){case Ot.HEX:default:return o?this.HEXA(s,e,n,a):this.HEX(s,e,n,a);case Ot.HSL:return o?this.HSLA(s,e,n,a):this.HSL(s,e,n,a);case Ot.RGB:return o?this.RGBA(s,e,n,a):this.RGB(s,e,n,a)}}})[Ot.HEX]=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.HEX(wr(i.h,i.s,i.l)):Ht.HEX(wr(i.h,i.s,i.l))})},Ga.HEXA=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.HEX(Kt(Kt({},wr(i.h,i.s,i.l)),{a:255*zr(i.a)})):Ht.HEXA(Kt(Kt({},wr(i.h,i.s,i.l)),{a:zr(i.a)}))})},Ga[Ot.RGB]=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.RGB(wr(i.h,i.s,i.l)):Ht.RGB(wr(i.h,i.s,i.l))})},Ga.RGBA=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.RGB(Kt(Kt({},wr(i.h,i.s,i.l)),{a:zr(i.a)})):Ht.RGBA(Kt(Kt({},wr(i.h,i.s,i.l)),{a:zr(i.a)}))})},Ga[Ot.HSL]=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.HSL({h:i.h,s:i.s,l:i.l}):Ht.HSL(wr(i.h,i.s,i.l))})},Ga.HSLA=function(t,e,n,r){return e(t,n).map(function(i){return r?Bt.HSL(Kt(Kt({},i),{a:zr(i.a)})):Ht.HSLA(Kt(Kt({},wr(i.h,i.s,i.l)),{a:zr(i.a)}))})},Ga),Pc=((Wa={mix:function(t,e){var n,r,i,s,o,a,l,c,u,d,f,h,p,g,m,v=t.map(function(T){var _=Ai(T);return Ol(T,_)}),b=e===Jr.SUBTRACTIVE?v.map(function(T){var _,w,M,x,S,R,I,z,P,B,U,j,Z,ne,K=(_=T.r,w=T.g,M=T.b,x=Math.min(_,w,M),S=Math.min(255-_,255-w,255-M),R=_-x,I=w-x,z=M-x,P=Math.min(R,I),B=R-P,U=(I+P)/2,j=(z+I-P)/2,Z=Math.max(B,U,j)/Math.max(R,I,z),ne=isNaN(Z)||Z===1/0||Z<=0?1:Z,{r:B/ne+S,y:U/ne+S,b:j/ne+S});return Qn(T,"a")&&(K.a=T.a),K}):null;function y(T){var _=e===Jr.ADDITIVE?{r:0,g:0,b:0,a:0}:{r:0,y:0,b:0,a:0};return T.reduce(function(w,M){var x=Qn(M,"a")?M.a:1,S={r:Math.min(w.r+M.r*x,255),b:Math.min(w.b+M.b*x,255),a:1-(1-x)*(1-w.a)},R="g"in w?w.g:w.y,I="g"in M?M.g:M.y;return Kt(Kt({},S),e===Jr.ADDITIVE?{g:Math.min(R+I*x,255)}:{y:Math.min(R+I*x,255)})},_)}if(e===Jr.ADDITIVE)n=y(v);else{var E=y(b);r=E.r,i=E.y,s=E.b,o=Math.min(r,i,s),a=Math.min(255-r,255-i,255-s),l=r-o,c=i-o,u=s-o,d=Math.min(c,u),f=l+c-d,h=c+d,p=2*(u-d),g=Math.max(f,h,p)/Math.max(l,c,u),m=isNaN(g)||g===1/0||g<=0?1:g,(n={r:f/m+a,g:h/m+a,b:p/m+a}).a=E.a}return{r:Lt(n.r,2),g:Lt(n.g,2),b:Lt(n.b,2),a:Gi(n.a,0,1)}}})[Ot.HEX]=function(t,e,n){var r=this.mix(t,e);return delete r.a,n?Bt.HEX(r):Ht.HEX(r)},Wa.HEXA=function(t,e,n){var r=this.mix(t,e);return r.a=n?255*zr(r.a):zr(r.a),n?Bt.HEX(r):Ht.HEXA(r)},Wa[Ot.RGB]=function(t,e,n){var r=this.mix(t,e);return delete r.a,n?Bt.RGB(r):Ht.RGB(r)},Wa.RGBA=function(t,e,n){var r=this.mix(t,e);return n?Bt.RGB(r):Ht.RGBA(r)},Wa[Ot.HSL]=function(t,e,n){var r=this.mix(t,e),i=pu(r.r,r.g,r.b);return delete r.a,delete i.a,n?Bt.HSL(i):Ht.HSL(r)},Wa.HSLA=function(t,e,n){var r=this.mix(t,e),i=pu(r.r,r.g,r.b,r.a);return n?Bt.HSL(i):Ht.HSLA(r)},Wa),Fo=function(t,e,n,r,i){var s=r(Ol(t,e));return n?i(s):s},Rc=function(t,e,n,r,i,s){n<1&&(n=5);var o=function(a,l,c){var u=c-1,d=(l.r-a.r)/u,f=(l.g-a.g)/u,h=(l.b-a.b)/u,p=zr(a.a),g=(zr(l.a)-p)/u;return Array(c).fill(null).map(function(m,v){return v===0?a:v===u?l:{r:Lt(a.r+d*v),g:Lt(a.g+f*v),b:Lt(a.b+h*v),a:Lt(p+g*v,2)}})}(Ol(t),Ol(e),n);return o.map(function(a){var l=i(a);return r?s(l):l})},Kw=function(){function t(e){this.rgb=Ol(e),this.updateHSL(),this.updateCMYK()}return t.prototype.updateRGB=function(){this.rgb=Kt(Kt({},wr(this.hsl.h,this.hsl.s,this.hsl.l)),{a:this.hsl.a})},t.prototype.updateRGBFromCMYK=function(){this.rgb=Kt(Kt({},Xw(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k)),{a:this.rgb.a})},t.prototype.updateHSL=function(){this.hsl=pu(this.rgb.r,this.rgb.g,this.rgb.b,this.rgb.a)},t.prototype.updateCMYK=function(){this.cmyk=f_(this.rgb.r,this.rgb.g,this.rgb.b)},t.prototype.updateRGBAndCMYK=function(){return this.updateRGB(),this.updateCMYK(),this},t.prototype.updateHSLAndCMYK=function(){return this.updateHSL(),this.updateCMYK(),this},t.prototype.updateRGBAndHSL=function(){return this.updateRGBFromCMYK(),this.updateHSL(),this},t.prototype.setH=function(e){return this.hsl.h=Rf(e),this.updateRGBAndCMYK()},t.prototype.setS=function(e){return this.hsl.s=Gi(e,0,100),this.updateRGBAndCMYK()},t.prototype.setL=function(e){return this.hsl.l=Gi(e,0,100),this.updateRGBAndCMYK()},t.prototype.setR=function(e){return this.rgb.r=Gi(e,0,255),this.updateHSLAndCMYK()},t.prototype.setG=function(e){return this.rgb.g=Gi(e,0,255),this.updateHSLAndCMYK()},t.prototype.setB=function(e){return this.rgb.b=Gi(e,0,255),this.updateHSLAndCMYK()},t.prototype.setA=function(e){return this.hsl.a=this.rgb.a=Gi(e,0,1),this},t.prototype.setC=function(e){return this.cmyk.c=Gi(e,0,100),this.updateRGBAndHSL()},t.prototype.setM=function(e){return this.cmyk.m=Gi(e,0,100),this.updateRGBAndHSL()},t.prototype.setY=function(e){return this.cmyk.y=Gi(e,0,100),this.updateRGBAndHSL()},t.prototype.setK=function(e){return this.cmyk.k=Gi(e,0,100),this.updateRGBAndHSL()},Object.defineProperty(t.prototype,"H",{get:function(){return Lt(this.hsl.h)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"S",{get:function(){return Lt(this.hsl.s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"L",{get:function(){return Lt(this.hsl.l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R",{get:function(){return Lt(this.rgb.r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"G",{get:function(){return Lt(this.rgb.g)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return Lt(this.rgb.b)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"A",{get:function(){return Lt(this.hsl.a,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"C",{get:function(){return Lt(this.cmyk.c)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"M",{get:function(){return Lt(this.cmyk.m)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Y",{get:function(){return Lt(this.cmyk.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"K",{get:function(){return Lt(this.cmyk.k)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HEXObject",{get:function(){return Ht.HEX(this.rgb)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HEXAObject",{get:function(){return Ht.HEXA(this.rgb)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RGBObject",{get:function(){return{r:this.R,g:this.G,b:this.B}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RGBAObject",{get:function(){return Kt(Kt({},this.RGBObject),{a:this.hsl.a})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HSLObject",{get:function(){return{h:this.H,s:this.S,l:this.L}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HSLAObject",{get:function(){return Kt(Kt({},this.HSLObject),{a:this.hsl.a})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CMYKObject",{get:function(){return{c:this.C,m:this.M,y:this.Y,k:this.K}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CMYKAObject",{get:function(){return{c:this.C,m:this.M,y:this.Y,k:this.K,a:this.hsl.a}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HEX",{get:function(){var e=this.rgb,n={r:e.r,g:e.g,b:e.b};return Bt.HEX(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HEXA",{get:function(){var e=this.rgb,n={r:e.r,g:e.g,b:e.b,a:255*this.hsl.a};return Bt.HEX(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RGB",{get:function(){var e=this.rgb,n={r:e.r,g:e.g,b:e.b};return Bt.RGB(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RGBA",{get:function(){var e=this.rgb,n={r:e.r,g:e.g,b:e.b,a:this.hsl.a};return Bt.RGB(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HSL",{get:function(){var e=this.hsl,n={h:e.h,s:e.s,l:e.l};return Bt.HSL(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HSLA",{get:function(){return Bt.HSL(this.hsl)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CMYK",{get:function(){return Bt.CMYK(this.cmyk)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CMYKA",{get:function(){return Bt.CMYK(Kt(Kt({},this.cmyk),{a:this.hsl.a}))},enumerable:!1,configurable:!0}),t.toHEX=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.HEX,Bt.HEX)},t.toHEXA=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.HEXA,Bt.HEX)},t.toRGB=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.RGB,Bt.RGB)},t.toRGBA=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.RGBA,Bt.RGB)},t.toHSL=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.HSL,Bt.HSL)},t.toHSLA=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.HSLA,Bt.HSL)},t.toCMYK=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.CMYK,Bt.CMYK)},t.toCMYKA=function(e,n){n===void 0&&(n=!0);var r=Ai(e);return Fo(e,r,n,Ht.CMYKA,Bt.CMYK)},t.getBlendHEX=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.HEX,Bt.HEX)},t.getBlendHEXA=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.HEXA,Bt.HEX)},t.getBlendRGB=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.RGB,Bt.RGB)},t.getBlendRGBA=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.RGBA,Bt.RGB)},t.getBlendHSL=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.HSL,Bt.HSL)},t.getBlendHSLA=function(e,n,r,i){return r===void 0&&(r=5),i===void 0&&(i=!0),Rc(e,n,r,i,Ht.HSLA,Bt.HSL)},t.getMixHEX=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.HEX(e,n,r)},t.getMixHEXA=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.HEXA(e,n,r)},t.getMixRGB=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.RGB(e,n,r)},t.getMixRGBA=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.RGBA(e,n,r)},t.getMixHSL=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.HSL(e,n,r)},t.getMixHSLA=function(e,n,r){return n===void 0&&(n=Jr.ADDITIVE),r===void 0&&(r=!0),Pc.HSLA(e,n,r)},t.getShades=function(e,n){return vA(e,n,!0)},t.getTints=function(e,n){return vA(e,n,!1)},t.getHarmony=function(e,n,r){switch(n===void 0&&(n=Ko.COMPLEMENTARY),r===void 0&&(r=Jr.ADDITIVE),n){case Ko.ANALOGOUS:return Tc.buildHarmony(e,Ife,r);case Ko.SPLIT_COMPLEMENTARY:return Tc.buildHarmony(e,kfe,r);case Ko.TRIADIC:return Tc.buildHarmony(e,Dfe,r);case Ko.TETRADIC:return Tc.buildHarmony(e,Nfe,r);case Ko.SQUARE:return Tc.buildHarmony(e,Ffe,r);default:return Tc.buildHarmony(e,Ofe,r)}},t}();const ns=t=>{try{return new Kw(t)}catch(e){throw new Error(`Color ${t} is not valid. Please, provide valid color.`,{cause:e})}},Ufe=t=>/var\(--.+\)/.test(t),Hm=t=>`--va-${Pf(t)}`,gA=t=>nae(t),qw=(t,e)=>ns(t).setA(e).RGBA,yA=t=>{const{R:e,G:n,B:r}=ns(t);return Math.sqrt(e*e*.241+n*n*.691+r*r*.068)},Uk=(t,e=.4)=>ns(t).setA(e).RGBA,$fe=(t,e=.4)=>ns(t).setA(e).RGBA,$k=(t,e=.2)=>ns(t).setA(e).RGBA,zk=(t,e=.3)=>ns(t).setA(e).RGBA,Ja=(t,e)=>{const n=ns(t);return e.h&&n.setH(n.H+e.h),e.s&&n.setS(n.S+e.s),e.l&&n.setL(n.L+e.l),e.a&&n.setA(n.A+e.a),n.HSLA},zfe=(t,e)=>{const n=ns(t);return e.h!==void 0&&n.setH(e.h),e.s!==void 0&&n.setS(e.s),e.l!==void 0&&n.setL(e.l),e.a!==void 0&&n.setA(e.a),n.HSLA},Hfe=t=>{const e=Kw.toHSLA(t,!1);if(e.s<10)return Ja(e,{h:2,s:5,l:10});if(e.s<30)return Ja(e,{s:-14,l:11});if(e.h>=0&&e.h<44||e.h>=285)return Ja(e,{h:11,s:27,l:8});if(e.h>=44&&e.h<85)return Ja(e,{h:3,l:9});if(e.h>=85&&e.h<165)return Ja(e,{h:16,l:14});if(e.h>=165&&e.h<285)return Ja(e,{h:-15,s:3,l:2});throw new Error("This method should handle all colors. But it didn't for some reason.")},Yw=t=>{const e=Hfe(t),n=Kw.toHSLA(t);return`linear-gradient(to right, ${e}, ${n})`},Gfe=(t,e,n)=>{const r=qw(e,n);return`linear-gradient(0deg, ${r}, ${r}), ${t}`},Wfe=t=>/^#([\da-f]{3}){1,2}$|^#([\da-f]{4}){1,2}$|(rgb|hsl)a?\((\s*-?\d+%?\s*,){2}(\s*-?\d+%?\s*,?\s*\)?)(,\s*(0?\.\d+)?|1)?\)/.test(t.toLocaleLowerCase()),jfe=(t,e)=>{const n=ns(t),r=ns(e),i=r.A;return i===1?r.RGBA:(i===0||(n.setR(Math.round(n.R*(1-i)+r.R*i)),n.setG(Math.round(n.G*(1-i)+r.G*i)),n.setB(Math.round(n.B*(1-i)+r.B*i))),n.RGBA)},Xfe=t=>t?t==="transparent"?!0:ns(t).A<=.1:!1,Zw={color:{type:String,default:""}},ct=()=>{const t=po();if(!t)throw new Error("useColors must be used in setup function or Vuestic GlobalConfigPlugin is not registered!");const{globalConfig:e}=t,n=Fk({get:()=>e.value.colors.presets[e.value.colors.currentPresetName],set:m=>{r(m)}}),r=m=>{e.value.colors.presets[e.value.colors.currentPresetName]={...e.value.colors.variables,...m}},i=()=>n,s=(m,v,b)=>{if(v||(v=n.primary),m==="transparent")return"#ffffff00";if(m==="currentColor")return m;if(m!=null&&m.startsWith("on")){const E=m.slice(2);if(n[gA(E)])return s(f(s(E)),void 0,b)}m||(m=s(v));const y=n[m]||n[gA(m)];return y?b?`var(${Hm(m)})`:y:Wfe(m)||b&&Ufe(m)?m:(qt(`'${m}' is not a proper color! Use HEX or default color themes
      names (https://vuestic.dev/en/styles/colors#default-color-themes)`),s(v))},o=m=>A({get(){return s(m)},set(v){r({[m]:v})}}),a=(m,v="va")=>Object.keys(m).filter(b=>m[b]!==void 0).reduce((b,y)=>(b[`--${v}-${Pf(y)}`]=s(m[y],void 0,!0),b[`--${v}-on-${Pf(y)}`]=s(f(s(m[y])),void 0,!0),b),{}),l=Tfe(),c=m=>typeof m!="string"?yA(m):(l.colorContrast[m]||(l.colorContrast[m]=yA(m)),l.colorContrast[m]),u=A(()=>c(s("textPrimary"))>255/2?"textInverted":"textPrimary"),d=A(()=>c(s("textPrimary"))>255/2?"textPrimary":"textInverted"),f=(m,v,b)=>{const y=`on${Df(String(m))}`;return n[y]?n[y]:(v=v||u.value,b=b||d.value,c(m)>e.value.colors.threshold?v:b)},h=A({get:()=>e.value.colors.currentPresetName,set:m=>{g(m)}}),p=A(()=>e.value.colors.presets),g=m=>{if(e.value.colors.currentPresetName=m,!e.value.colors.presets[m])return qt(`Preset ${m} does not exist`)};return{colors:n,currentPresetName:h,presets:p,applyPreset:g,setColors:r,getColors:i,getColor:s,getComputedColor:o,getBoxShadowColor:Uk,getBoxShadowColorFromBg:$fe,getHoverColor:$k,getFocusColor:zk,getGradientBackground:Yw,getTextColor:f,shiftHSLAColor:Ja,setHSLAColor:zfe,colorsToCSSVariable:a,colorToRgba:qw,getStateMaskGradientBackground:Gfe}},Hk=Me({name:"VaIcon",__name:"VaIcon",props:{...Kl,...rt,name:{type:String,default:""},tag:{type:String},component:{type:Object},color:{type:String},rotation:{type:[String,Number]},spin:{type:[String,Boolean]},flip:{type:String,default:"off",validator:t=>["off","horizontal","vertical","both"].includes(t)}},setup(t){const e=t,{getColor:n}=ct(),{sizeComputed:r}=ql(e),{getIcon:i}=Cfe(),s=A(()=>i(e.name)),o=A(()=>e.component||e.tag||s.value.component||s.value.tag||"i"),a=ba(),l=A(()=>({...s.value.attrs,...ho(a,["class"])})),c=g=>{if(!(g===void 0||g===!1))return g==="counter-clockwise"?"va-icon--spin-reverse":"va-icon--spin"},u=A(()=>[s.value.class,c(e.spin??s.value.spin)]),d=A(()=>{const g=e.rotation?`rotate(${e.rotation}deg)`:"",m=e.flip==="vertical"||e.flip==="both"?-1:1,v=e.flip==="horizontal"||e.flip==="both"?-1:1;return`${e.flip==="off"?"":`scale(${m}, ${v})`} ${g}`.trim()}),f=A(()=>({transform:d.value,cursor:a.onClick?"pointer":null,color:e.color?n(e.color,void 0,!0):s.value.color,fontSize:r.value,height:r.value,lineHeight:r.value})),h=A(()=>a.tabindex??-1),p=A(()=>a.role!=="button"||h.value<0);return(g,m)=>(V(),Te(mr(o.value),Re({class:["va-icon",u.value],style:f.value,"aria-hidden":p.value,notranslate:""},l.value),{default:we(()=>[se(g.$slots,"default",{},()=>[s.value.content?(V(),ee(qe,{key:0},[gt(Ze(s.value.content),1)],64)):ve("",!0)])]),_:3},16,["class","style","aria-hidden"]))}}),St=ze(Hk),Kfe=()=>{const t=on(),e=t==null?void 0:t.appContext.app,{globalProperties:n}=e.config;return"$vaGlobalVariable"in n||(n.$vaGlobalVariable=Sr({})),n.$vaGlobalVariable},Gk=(t,e)=>{const n=Kfe();return t in n||(n[t]=e),A({get:()=>n[t],set:r=>{n[t]=r}})},Ps=()=>{const t=on(),e=Gk("uuidCounter",0);return t.$vaUuid=t.$vaUuid||`va-${e.value++}`,`va-${e.value}`},qfe=t=>{const n=`message-list-${Ps()}`,r=A(()=>({id:n,role:"alert"})),i=A(()=>!!(typeof t.modelValue=="string"&&t.modelValue.length>0||Array.isArray(t.modelValue)&&t.modelValue.length>0)),s=A(()=>({"aria-describedby":i.value?n:void 0,"aria-invalid":t.hasError}));return{messageListAttributes:r,childAttributes:s}},Yfe={class:"va-message-list__list"},Zfe=Me({name:"VaMessageList",inheritAttrs:!1,__name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String},hasError:{type:Boolean,default:!1}},setup(t,{expose:e}){const n=t,{getColor:r}=ct(),{childAttributes:i,messageListAttributes:s}=qfe(n),o=A(()=>n.modelValue?Array.isArray(n.modelValue)?n.modelValue.slice(0,n.limit):[n.modelValue]:[]),a=A(()=>n.color?{color:r(n.color)}:{});return e({messages:o}),(l,c)=>(V(),ee(qe,null,[se(l.$slots,"default",Ue(je({ariaAttributes:C(i),messages:o.value,attrs:l.$attrs}))),se(l.$slots,"messages",Ue(je({ariaAttributes:C(s),messages:o.value})),()=>[o.value.length>0?(V(),ee("div",Re({key:0,class:"va-message-list",style:a.value},C(s)),[me("ul",Yfe,[(V(!0),ee(qe,null,vt(o.value,(u,d)=>(V(),ee("li",{key:d,class:"va-message-list__message"},[se(l.$slots,"message",Ue(je({messages:o.value,message:u})),()=>[t.hasError?(V(),Te(C(St),{key:0,class:"va-message-list__icon",name:"va-warning",size:16})):ve("",!0),gt(Ze(u),1)])]))),128))])],16)):ve("",!0)])],64))}}),wg=ze(Zfe);function kl(t,e,n,r){const i=on(),s=A(()=>{const l=e[t];return i!=null&&i.vnode.props?t in i.vnode.props&&i.vnode.props[t]!==void 0:l!==void 0});if(r===void 0)return[A({set(l){n(`update:${t}`,l)},get(){return e[t]}})];const o=e[t],a=le(o===void 0?r:o);return De(()=>e[t],l=>{l!==void 0&&(a.value=l)}),[A({set(l){a.value=l,n(`update:${t}`,l)},get(){return s.value?e[t]:a.value}})]}const Jfe=t=>typeof t=="object"&&"_setter"in t,Qfe=(t,e)=>{if(!Jfe(t))return;const n=t._setter;t._setter=r=>{e(r),n(r)}},Wk=Symbol("FormService"),jk=t=>{const e=Zn(Wk,null);if(!e)return{forceDirty:le(!1),forceHideErrorMessages:le(!1),forceHideErrors:le(!1),forceHideLoading:le(!1),fields:A(()=>[]),registerField:()=>{},unregisterField:()=>{},immediate:A(()=>!1)};const n=Ps();return kt(()=>{e.registerField(n,t)}),Sn(()=>{e.unregisterField(n)}),e},bA=(t=[],e=null)=>(Vm(t)&&(t=[t]),t.map(n=>hu(n)?n(e):n)),go={name:{type:String,default:void 0},rules:{type:Array,default:()=>[]},dirty:{type:Boolean,default:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1},modelValue:{}},Ea=["update:error","update:errorMessages","update:dirty"],Np=t=>typeof t=="object"&&typeof t.then=="function",ehe=(t,e,n)=>{const r=le(e.dirty||!1);return Qfe(t,()=>{r.value=!0,n("update:dirty",!0)}),De(t,(i,s)=>{i===s&&(r.value=!0)},{deep:!0}),De(()=>e.dirty,i=>{r.value!==i&&(r.value=i)}),{isDirty:r}},the=()=>{const t=le(!1);return{isTouched:t,onBlur:()=>{t.value=!0}}},nhe=t=>{let e=!0;return(...n)=>{if(!e)return;e=!1;const r=t(...n);return cn(()=>{e=!0}),r}},yo=(t,e,n)=>{const{reset:r,focus:i}=n,[s]=kl("error",t,e,!1),[o]=kl("errorMessages",t,e,[]),a=le(!1),{isTouched:l,onBlur:c}=the(),u=A(()=>({"aria-invalid":s.value,"aria-errormessage":typeof o.value=="string"?o.value:o.value.join(", ")})),d=()=>{o.value=[],s.value=!1,g.value=!1,l.value=!1,a.value=!1},f=M=>{let x=!1,S=[];return M.forEach(R=>{Vm(R)?(S=[...S,R],x=!0):R===!1&&(x=!0)}),o.value=S,s.value=x,!x},h=async()=>{if(!t.rules||!t.rules.length)return!0;const M=bA(QC(t.rules),n.value.value),x=M.filter(R=>Np(R)),S=M.filter(R=>!Np(R));return x.length?(a.value=!0,Promise.all(x).then(R=>(a.value=!1,f([...S,...R])))):f(S)},p=nhe(()=>{if(!t.rules||!t.rules.length)return!0;const M=QC(t.rules),x=bA(M,n.value.value),S=x.filter(z=>Np(z)),R=x.filter(z=>!Np(z)),I=R.some(z=>Vm(z)?z:z===!1);return S.length&&!I?(a.value=!0,Promise.all(S).then(z=>{f([...R,...z]),a.value=!1}),I):f(R)});Yn(()=>p());const{isDirty:g}=ehe(n.value,t,e),{forceHideErrors:m,forceHideLoading:v,forceHideErrorMessages:b,forceDirty:y,immediate:E}=jk({isTouched:l,isDirty:g,isValid:A(()=>!s.value),isLoading:a,errorMessages:o,validate:p,validateAsync:h,resetValidation:d,focus:i,reset:()=>{r(),d(),p()},value:A(()=>n.value||t.modelValue),name:or(t,"name")}),T=A(()=>t.immediateValidation||E.value);let _=!0;const w=M=>{_=!1,M(),cn(()=>{_=!0})};return De(n.value,()=>{if(_)return p()},{immediate:T.value}),{isDirty:g,isValid:A(()=>!s.value),isError:s,isTouched:l,isLoading:A(()=>v.value?!1:a.value),computedError:A(()=>m.value?!1:T.value||l.value||g.value||y.value?s.value:!1),computedErrorMessages:A(()=>b.value?[]:o.value),listeners:{onBlur:c},validate:p,resetValidation:d,withoutValidation:w,validationAriaAttributes:u}},rhe={class:"va-message-list-wrapper"},Sg=Me({name:"VaMessageListWrapper",__name:"VaMessageListWrapper",props:{...go},setup(t){const e=t,n=A(()=>e.error?"danger":e.success?"success":""),r=or(e,"error"),i=A(()=>e.error?e.errorMessages:e.messages),s=A(()=>e.error?Number(e.errorCount):99);return(o,a)=>(V(),ee("div",rhe,[ke(C(wg),{color:n.value,limit:s.value,"has-error":r.value,"model-value":i.value,"inherit-slots":["message"]},{default:we(l=>[se(o.$slots,"default",Ue(je(l)))]),_:3},8,["color","limit","has-error","model-value"])]))}}),ihe=t=>{const{globalConfig:e,mergeGlobalConfig:n,setGlobalConfig:r,getGlobalConfig:i}=po(),s=A(()=>{var o;const a=r_(e.value),l={...a,colors:Tk(a.colors)},c=Um(l,t.value);return(o=t.value.colors)!=null&&o.variables&&Object.keys(t.value.colors.variables).forEach(u=>{c.colors.variables[u]=t.value.colors.variables[u]}),c});return Mr(xg,{mergeGlobalConfig:n,setGlobalConfig:r,getGlobalConfig:i,globalConfig:s}),s},Kd=(t,e)=>{if(!t)return null;if(!("type"in t)||t.type===Eu||typeof t=="string")return Nt("div",e,t);if(t.type===Ir)return t;if("$el"in t)return Kd(t.$el,e);if(t.type===V_)return Nt(t.ssContent,e);if(t.type===rf){if(t.children===null)return t;const n=Kd(t.children[0],e);return n&&(t.children[0]=Nt(n,e)),t}if(t.type===qe)return t.children===null?t:t.children.length===1?Nt(qe,t.props,[Kd(t.children[0],e)]):Nt("div",e,t);if(typeof t.type.render=="function"){const n=Nt(t);if(Array.isArray(n.children)&&n.children.length>1)return Nt("div",e,n.children)}return Nt(t,e)},_A=(t,e={},n={})=>{const r=t==null?void 0:t(e);if(!r)return null;const i=r.filter(s=>s.type!==Ir);return i.length===0?null:i.length===1?Kd(i[0],n):Nt("div",n,r)},Xk=(t,e={},n={})=>{const r=t==null?void 0:t(e);return r?r.map(i=>Kd(i,n)):null},she=Me({name:"VaCssVarsRenderer",inheritAttrs:!1,setup(t,{slots:e,attrs:n}){const{colorsToCSSVariable:r,colors:i}=ct(),s=A(()=>r(i));return()=>Nt(qe,n,Xk(e.default,{},{style:s.value})||void 0)}}),uh=Me({name:"VaConfig",inheritAttrs:!1,__name:"VaConfig",props:{...rt,components:{type:Object,default:()=>({})},colors:{type:Object},i18n:{type:Object}},setup(t){const e=t,n=jw(),r=A(()=>[...n.value,e.components]);Mk(r),ihe(A(()=>{const s={};return e.colors&&(s.colors=e.colors),e.i18n&&(s.i18n=e.i18n),s}));const i=A(()=>!!e.colors);return(s,o)=>i.value?(V(),Te(C(she),Ue(Re({key:0},s.$attrs)),{default:we(()=>[se(s.$slots,"default")]),_:3},16)):se(s.$slots,"default",{key:1})}}),ohe={class:"va-separator","aria-hidden":"true"},ahe=Me({name:"VaSeparator",__name:"VaSeparator",setup(t){return(e,n)=>(V(),ee("div",ohe))}}),lhe={class:"va-spacer","aria-hidden":"true"},che=Me({name:"VaSpacer",__name:"VaSpacer",setup(t){return(e,n)=>(V(),ee("div",lhe))}}),Eg=()=>{const t=le(!1);return kt(()=>{t.value=!0}),Sn(()=>{t.value=!1}),t},h_=t=>{const e=on(),n=st(),r=()=>{var i;n.value=(i=e.proxy)==null?void 0:i.$refs[t]};return kt(r),cv(r),Sn(r),n},Kk=t=>t.config.globalProperties,pa=(t,e,n)=>{const r=Kk(t);r[e]=n},uhe=(t,e)=>Kk(t)[e],dhe=vo((t={})=>({install(e){const n=Pk(t);t!=null&&t.componentsAll&&console.warn("Global config -> `componentsAll` was moved to Global config -> components.all. Please replace this to make it work. More info here: https://github.com/epicmaxco/vuestic-ui/issues/1967"),e.provide(xg,n),pa(e,"$vaConfig",n)}})),Yl=()=>typeof window>"u",Jw=()=>!Yl(),qk=()=>typeof window>"u"?void 0:window,fhe={},Xi=()=>Yl()?typeof globalThis>"u"?fhe:globalThis:window;let hhe=0;const f0=(t=4)=>Math.random().toString(36).substring(2,t+2),Qw=()=>`${f0(8)}-${f0(4)}-${f0(4)}-${++hhe}`,eS=(t,e)=>{if(Yl())return;let n=document.getElementById(t);n?n.innerHTML=e():(n=document.createElement("style"),n.setAttribute("type","text/css"),n.setAttribute("id",t),n.innerHTML=e(),document.head.append(n))},xA=(t,e)=>`${Hm(t)}: ${e};
`,phe=(t,e)=>{const{colors:n,getTextColor:r,getColor:i,currentPresetName:s,applyPreset:o}=ct(),a=(d=n)=>{if(!d)return;const f=Object.keys(d),h=f.map(g=>`${Hm(g)}: ${d[g]}`).join(";"),p=f.map(g=>`${Hm(`on-${g}`)}: ${i(r(d[g]))}`).join(";");return`${h};${p}`},l=(d=n)=>{const f=Object.keys(d);let h=`:root {
`;return f.forEach(p=>{h+=xA(p,d[p])}),f.forEach(p=>{h+=xA(`on-${p}`,i(r(d[p])))}),h+=`}
`,h},c=A(Qw),u=d=>{if(!d||Yl())return;const f=l(d);eS(`va-color-variables-${c.value}`,()=>f)};return De(n,d=>{u(d)},{immediate:!0,deep:!0}),{colors:n,currentPresetName:s,renderCSSVariables:a,updateColors:u,renderCSSVariablesStyleContent:l}},mhe=vo(t=>({install(e){pa(e,"$vaColorConfig",phe())}})),Yk=t=>{const e=A(Jw),n=le(null);return De(e,()=>{e.value&&(n.value=t())},{immediate:!0}),n},Mg=()=>Yk(()=>window),Mn=t=>{if(t&&typeof t=="object"&&(t=C(t),!!t))return typeof t.$el<"u"?t.$el:t},p_=(t,...e)=>{if(!(!t||typeof t!="object")){if("addEventListener"in t&&typeof t.addEventListener=="function"){t.addEventListener(...e);return}"parentElement"in t&&p_(t.parentElement,...e)}},m_=(t,...e)=>{if(!(!t||typeof t!="object")){if("removeEventListener"in t&&typeof t.removeEventListener=="function"){t.removeEventListener(...e);return}"parentElement"in t&&m_(t.parentElement,...e)}},bn=(t,e,n)=>{const r=n&&typeof n!="boolean"?n:Mg(),i=typeof n=="boolean"?n:!1;De(r,(s,o)=>{Array.isArray(t)?t.forEach(a=>{p_(Mn(C(s)),a,e,i),m_(Mn(C(o)),a,e,i)}):(p_(Mn(C(s)),t,e,i),m_(Mn(C(o)),t,e,i))},{immediate:!0})};function vhe(){const t=Sr({width:void 0,height:void 0}),e=()=>{t.width=window==null?void 0:window.innerWidth,t.height=window==null?void 0:window.innerHeight},n=A(Jw);return De(n,r=>{r&&e()},{immediate:!0}),bn("resize",e,!0),{windowSizes:t}}const Zl=()=>Yk(()=>document),ghe=t=>{var e;const n=(e=uhe(t,"$vaConfig"))==null?void 0:e.globalConfig;if(!n)return qt("createBreakpointConfigPlugin: globalConfig is not defined!"),{};const r=A(()=>{const f=n.value.breakpoint;return f||qt("createBreakpointConfigPlugin: breakpointConfig is not defined!"),f??{}});if(!r.value.enabled)return{};if(!r.value.thresholds||!Object.values(r.value.thresholds).length)return qt("createBreakpointConfigPlugin: there are no defined thresholds!"),{};const{windowSizes:i}=vhe(),s=A(Jw),o=A(()=>{if(!(!s.value||!i.width))return Object.entries(r.value.thresholds).reduce((f,[h,p])=>(i.width>=p&&(f=h),f),"xs")}),a=A(()=>Object.keys(r.value.thresholds).reduce((f,h)=>(f[h]=`va-screen-${h}`,f),{})),l=()=>{let f="";return Object.values(r.value.thresholds).forEach((h,p)=>{f+=`@media screen and (min-width: ${h}px) {`,f+=`:root { --va-media-ratio: ${(p+1)*.2} }`,f+=`}
`}),f},c=A(Qw);eS(`va-helpers-media-${c.value}`,l);const u=Zl();De(o,f=>{!f||!r.value.bodyClass||!u.value||(u.value.body.classList.forEach(h=>{Object.values(a.value).includes(h)&&u.value.body.classList.remove(h)}),u.value.body.classList.add(a.value[f]))},{immediate:!0});const d=A(()=>{const f=o.value==="xs",h=o.value==="sm",p=o.value==="md",g=o.value==="lg",m=o.value==="xl";return{xs:f,sm:h,md:p,lg:g,xl:m,smUp:h||p||g||m,mdUp:p||g||m,lgUp:g||m,smDown:f||h,mdDown:f||h||p,lgDown:f||h||p||g}});return Fk(()=>({width:i.width,height:i.height,current:o.value,thresholds:r.value.thresholds,...d.value}))},yhe=vo(()=>({install(t){const e=ghe(t);t.provide(pY,e),pa(t,"$vaBreakpoint",e)}})),bhe=()=>{let t;return{start:(...r)=>(t=window.setTimeout(...r),t),clear:()=>t&&window.clearTimeout(t)}},wA=(t,e)=>(e&&Object.keys(e).forEach(n=>{t=t.replace(`{${n}}`,String(e[n]))}),t),rn=()=>{const{globalConfig:t}=po(),e=A(()=>t.value.i18n);return{tp:(n,r)=>n?(n.startsWith("$t:")&&(n=e.value[n.slice(3)]||n),wA(n,r)||n):"",t(n,r){const i=e.value[n];return i?wA(i,r)||n:(qt(`${n} not found in VuesticUI i18n config`),n)}}},Hn=(t,e=!1)=>{const{props:n}=on(),{getColor:r,getTextColor:i}=ct();return{textColorComputed:A(()=>{if(n.textColor)return r(n.textColor);const o=t?C(t):n.color;if(!o)return"currentColor";const a=r(o);return Xfe(a)?"currentColor":C(e)?a:r(i(a))})}},_he=["role","aria-live"],xhe={class:"va-toast__group"},whe=["textContent"],She={class:"va-toast__content"},Ehe=["innerHTML"],Mhe=["textContent"],Che={key:1,class:"va-toast__content"},Ahe=Me({name:"VaToast",__name:"VaToast",props:{...rt,title:{type:String,default:""},offsetY:{type:Number,default:16},offsetX:{type:Number,default:16},message:{type:[String,Function],default:""},dangerouslyUseHtmlString:{type:Boolean,default:!1},icon:{type:String,default:"close"},customClass:{type:String,default:""},duration:{type:Number,default:5e3},color:{type:String,default:""},closeable:{type:Boolean,default:!0},onClose:{type:Function},onClick:{type:Function},multiLine:{type:Boolean,default:!1},position:{type:String,default:"top-right",validator:t=>["top-right","top-left","bottom-right","bottom-left"].includes(t)},render:{type:Function},ariaCloseLabel:{type:String,default:"$t:close"},role:{type:String,default:void 0},inline:{type:Boolean,default:!1}},emits:["on-click","on-close"],setup(t,{emit:e}){const n=Me({name:"VaToastRenderer",props:{render:{type:Function,required:!0}},setup:_=>()=>_.render()}),{tp:r}=rn(),i=t,s=e,o=st(),{getColor:a}=ct(),{textColorComputed:l}=Hn(A(()=>a(i.color))),c=le(!1),u=A(()=>i.position.includes("right")?"right":"left"),d=A(()=>i.position.includes("top")?"top":"bottom"),f=A(()=>[i.customClass,i.multiLine?"va-toast--multiline":"",i.inline?"va-toast--inline":""]),h=A(()=>({[d.value]:`${i.offsetY}px`,[u.value]:`${i.offsetX}px`,backgroundColor:a(i.color),color:l.value})),p=A(()=>i.role==="status"?"polite":"assertive"),g=A(()=>typeof i.message=="function"?i.message():i.message),m=()=>{var _,w;(_=o.value)==null||_.removeEventListener("transitionend",m),(w=o.value)==null||w.remove()},v=()=>{typeof i.onClick=="function"?i.onClick():s("on-click")},b=()=>{var _;c.value=!1,(_=o.value)==null||_.addEventListener("transitionend",m),typeof i.onClose=="function"?i.onClose():s("on-close")},y=bhe(),E=y.clear,T=()=>{i.duration>0&&y.start(()=>c.value&&b(),i.duration)};return kt(()=>{c.value=!0,T()}),(_,w)=>(V(),Te(Mu,{name:"va-toast-fade"},{default:we(()=>[Fi(me("div",{ref_key:"rootElement",ref:o,role:_.$props.role??_.$props.closeable?"alertdialog":"alert","aria-live":p.value,"aria-atomic":"true",class:Qe(["va-toast",f.value]),style:Be(h.value),onMouseenter:w[0]||(w[0]=(...M)=>C(E)&&C(E)(...M)),onMouseleave:T,onClick:v},[me("div",xhe,[_.$props.title?(V(),ee("h2",{key:0,class:"va-toast__title",textContent:Ze(_.$props.title)},null,8,whe)):ve("",!0),Fi(me("div",She,[_.$props.dangerouslyUseHtmlString?(V(),ee("div",{key:0,innerHTML:g.value},null,8,Ehe)):(V(),ee("p",{key:1,textContent:Ze(g.value)},null,8,Mhe))],512),[[_l,_.$props.message]]),_.$props.render?(V(),ee("div",Che,[ke(C(n),{render:_.$props.render},null,8,["render"])])):ve("",!0),_.$props.closeable?(V(),Te(Hk,{key:2,class:"va-toast__close-icon",role:"button","aria-label":C(r)(_.$props.ariaCloseLabel),tabindex:"0",size:"1rem",name:_.$props.icon,onClick:He(b,["stop"]),onKeydown:We(He(b,["stop"]),["enter"])},null,8,["aria-label","name","onKeydown"])):ve("",!0)])],46,_he),[[_l,c.value]])]),_:1}))}}),Zk=mo(Ahe),Jk=5;let Lf=1;Xi().vaToastInstances=[];const The=(t,e)=>{if(t.el){const n=e.includes("bottom")?-1:1;return(t.el.offsetHeight+Jk)*n}return 0},Phe=(t,e,n)=>{const r=n.includes("bottom")?-1:1;return parseInt(t,10)-(e+Jk)*r},mu=t=>{var e;return((e=t.component)==null?void 0:e.props)||{}},Rhe=(t,e)=>{var n;if(!t)return;if(!Xi().vaToastInstances.length){Lf=1;return}const r=Xi().vaToastInstances.findIndex(c=>c===t);if(r<0)return;const i=mu(t),{offsetX:s,offsetY:o,position:a}=i,l=(n=t.el)==null?void 0:n.offsetHeight;e(),Xi().vaToastInstances=Xi().vaToastInstances.reduce((c,u,d)=>{if(u===t)return c;if(u.component){const{offsetX:f,offsetY:h,position:p}=mu(u);if(d>r&&s===f&&o===h&&a===p&&u.el&&l){const[m,v]=u.el.style.transform.match(/[\d-]+(?=px)/g),b=Phe(v,l,p);u.el.style.transform=`translate(0, ${b}px)`}}return[...c,u]},[]),Xi().vaToastInstances.length||(Lf=1)},Lhe=(t,e)=>{t&&(tu(null,t),t.remove()),t=null},Ihe=(t,{props:e,children:n,element:r,appContext:i}={})=>{let s=r,o;return o=ke(t,{...e,onClose:()=>{Rhe(o,()=>Lhe(s)),e!=null&&e.onClose&&e.onClose()}},n),i&&(o.appContext=i),s?tu(o,s):typeof document<"u"&&tu(o,s=document.createElement("div")),{vNode:o,el:s}},Ohe=t=>{if(!Xi().vaToastInstances.length){Lf=1;return}Xi().vaToastInstances.forEach(e=>{t&&e.appContext!==t||mu(e).onClose()})},khe=t=>{const e=Xi().vaToastInstances.find(n=>{var r;return((r=n.el)==null?void 0:r.id)===t});e&&mu(e).onClose()},Dhe=t=>typeof t=="string"?{message:t}:t,Nhe=(t,e)=>{const{vNode:n,el:r}=Ihe(Zk,{appContext:e,props:Dhe(t)}),i=mu(n);if(r&&n.el&&i){document.body.appendChild(r.childNodes[0]);const{offsetX:s,offsetY:o,position:a}=i;n.el.style.display="flex",n.el.id="notification_"+Lf;let l=0;return Xi().vaToastInstances.filter(c=>{const{offsetX:u,offsetY:d,position:f}=mu(c);return u===s&&d===o&&a===f}).forEach(c=>{l+=The(c,a)}),n.el.style.transform=`translate(0, ${l}px)`,Lf+=1,Xi().vaToastInstances.push(n),n.el.id}return null},Fhe=t=>({init(e){return Nhe(e,t==null?void 0:t._context)},close(e){khe(e)},closeAll(e=!1){Ohe(e||t==null?void 0:t._context)}}),Bhe=vo(()=>({install(t){pa(t,"$vaToast",Fhe(t))}})),SA={closeDropdown(){let t=this;for(;t=t.$parent;)if(t.$options.name==="VaDropdown"){t.hide();break}}},Vhe=vo(()=>({install(t){pa(t,"$closeDropdown",SA.closeDropdown),pa(t,"$vaDropdown",SA)}})),Uhe=(t,e,n)=>{const r=on();if(!r)throw new Error("`useButtonBackground` hook must be used only inside of setup function!");const i=r.props,{getColor:s,getGradientBackground:o}=ct(),a=A(()=>i.plain?"transparent":i.gradient?o(t.value):t.value),l=A(()=>!i.plain&&n.value),c=A(()=>!i.plain&&e.value),u=A(()=>c.value&&i.pressedBehavior==="opacity"?i.pressedOpacity:l.value&&i.hoverBehavior==="opacity"?Number(i.hoverOpacity):Number(i.backgroundOpacity)),d=A(()=>l.value&&i.hoverBehavior==="mask"),f=A(()=>c.value&&i.pressedBehavior==="mask"),h=A(()=>f.value?i.pressedOpacity:d.value?Number(i.hoverOpacity):0),p=A(()=>f.value?s(i.pressedMaskColor):d.value?s(i.hoverMaskColor):"transparent");return{backgroundColor:a,backgroundColorOpacity:u,backgroundMaskOpacity:h,backgroundMaskColor:p}},Jl={tag:{type:String,default:"span"},to:{type:[String,Object],default:void 0},replace:{type:Boolean,default:void 0},append:{type:Boolean,default:void 0},exact:{type:Boolean,default:void 0},activeClass:{type:String,default:void 0},exactActiveClass:{type:String,default:void 0},href:{type:String,default:void 0},target:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},Ma=t=>{const e=on(),n=A(()=>e==null?void 0:e.appContext.config.globalProperties),r=A(()=>{var d;return(d=n.value)==null?void 0:d.$router}),i=A(()=>{var d;return(d=n.value)==null?void 0:d.$route}),{getGlobalConfig:s}=po(),o=A(()=>{if(t.disabled)return t.tag;if(t.href&&!t.to)return"a";const d=s();return d.routerComponent&&t.to?d.routerComponent:t.to?"router-link":t.tag||"div"}),a=A(()=>t.disabled?!1:!!(t.href||t.to)),l=A(()=>a.value?o.value==="a"?{target:t.target,href:u.value}:{target:t.target,to:t.to,replace:t.replace,append:t.append,activeClass:t.activeClass,exact:t.exact,exactActiveClass:t.exactActiveClass}:{}),c=A(()=>{if(!r.value||!t.to)return!1;const d=r.value.resolve(t.to).href,f=r.value.currentRoute.value.path;return d.replace("#","")===f.replace("#","")}),u=A(()=>{var d;return t.href||(t.to?(d=r.value)==null?void 0:d.resolve(t.to,i.value).href:void 0)});return{isLinkTag:a,tagComputed:o,hrefComputed:u,isActiveRouterLink:c,linkAttributesComputed:l}},$he=t=>{const{linkAttributesComputed:e,isLinkTag:n}=Ma(t),r=A(()=>n.value?void 0:t.type),i=A(()=>{const s={"aria-disabled":!!t.disabled,disabled:!!t.disabled};return n.value?s:{type:r.value,tabindex:t.loading||t.disabled?-1:0,...s}});return A(()=>({...e.value,...i.value}))},zhe=t=>{var e,n,r;if(Yl())return t;if(t>0){const i=(e=window==null?void 0:window.navigator)==null?void 0:e.userAgent,s=i&&/^((?!chrome|android).)*safari/i.test((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent),o=i&&/(version.)15|16/i.test((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent);if(s&&!o)return t<1?1-t:t}return t},Hhe=(t,e,n,r)=>{const i=on();if(!i)throw new Error("`useButtonTextColor` hook must be used only inside of setup function!");const s=i.props,{getColor:o,colorToRgba:a,getStateMaskGradientBackground:l}=ct(),c=A(()=>({background:"transparent",color:t.value,"-webkit-background-clip":"text","background-clip":"text",opacity:h.value})),u=(p,g,m)=>{const v=o(p);let b;return m==="opacity"?b={color:a(t.value,g)}:b={background:l(e.value,v,g),color:g<1?a(t.value,zhe(g)):v},{...c.value,...b}},d=A(()=>u(s.hoverMaskColor,Number(s.hoverOpacity),s.hoverBehavior)),f=A(()=>u(s.pressedMaskColor,s.pressedOpacity,s.pressedBehavior)),h=A(()=>{if(!s.disabled)return s.textOpacity===1||r.value&&!n.value?1:n.value?.9:s.textOpacity});return A(()=>{const p={color:t.value,background:"transparent"};return s.plain&&Object.assign(p,c.value,{background:t.value}),s.plain?n.value?f.value:r.value?d.value:p:p})},Ghe={class:"va-progress-circle__wrapper",viewBox:"0 0 40 40"},Whe=["r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],jhe=Me({name:"VaProgressCircle",__name:"VaProgressCircle",props:{...Kl,...rt,modelValue:{type:[Number,String],default:0},indeterminate:{type:Boolean,default:!1},thickness:{type:[Number,String],default:.06},color:{type:String,default:"primary"},ariaLabel:{type:String,default:"$t:progressState"}},setup(t){const e=t,{getColor:n}=ct(),{sizeComputed:r}=ql(e),i=A(()=>Il(Number(e.thickness),0,1)/2*100),s=A(()=>20-20*i.value/100),o=A(()=>2*Math.PI*s.value),a=A(()=>o.value*(1-Il(Number(e.modelValue),0,100)/100)),l=A(()=>n(e.color,void 0,!0)),{tp:c}=rn(),u=A(()=>({color:l.value})),d=A(()=>({width:r.value,height:r.value})),f=A(()=>({"va-progress-circle--indeterminate":e.indeterminate})),h=A(()=>({role:"progressbar","aria-label":c(e.ariaLabel),"aria-valuenow":e.indeterminate?void 0:e.modelValue}));return(p,g)=>(V(),ee("div",Re({class:["va-progress-circle",f.value],style:d.value},h.value),[(V(),ee("svg",Ghe,[me("circle",{class:"va-progress-circle__overlay",cx:"50%",cy:"50%",r:s.value,fill:"none",stroke:l.value,"stroke-width":i.value+"%","stroke-dasharray":o.value,"stroke-dashoffset":a.value},null,8,Whe)])),p.$slots.default?(V(),ee("div",{key:0,style:Be(u.value),class:"va-progress-circle__info"},[se(p.$slots,"default")],4)):ve("",!0)],16))}}),dh=ze(jhe),Xhe={hoverBehavior:{type:String,default:"mask",validator:t=>["opacity","mask"].includes(t)},hoverOpacity:{type:[Number,String],default:.15},hoverMaskColor:{type:String,default:"textInverted"}},Khe={pressedBehavior:{type:String,default:"mask",validator:t=>["opacity","mask"].includes(t)},pressedOpacity:{type:Number,default:.13},pressedMaskColor:{type:String,default:"textPrimary"}},fh={loading:{type:Boolean,default:!1}},Qk=t=>t instanceof HTMLElement,gs=t=>{!t||!Qk(t)||(t.focus(),t.dispatchEvent(new FocusEvent("focus",{bubbles:!0})))},Cg=t=>{!t||!Qk(t)||(t.blur(),t.dispatchEvent(new Event("blur",{bubbles:!0})))},v_=t=>{if(t.tabIndex!==-1){gs(t);return}const e=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&gs(e)},g_=(t,e,n={})=>{kt(()=>window.addEventListener(t,e,{capture:!0,...n})),Sn(()=>window.removeEventListener(t,e,{capture:!0,...n}))},eD=()=>{const t=st(),e=()=>{t.value=document.activeElement};return kt(e),g_("focus",e),g_("blur",e),t},Ag=["focus","blur"];function bo(t,e){const n=eD(),r=A({get:()=>Ji(n.value)||Ji(t==null?void 0:t.value)?!1:n.value===(t==null?void 0:t.value),set:l=>{l?o():a()}}),i=l=>{e==null||e("focus",l)},s=l=>{e==null||e("blur",l)},o=()=>{t!=null&&t.value&&gs(Mn(t==null?void 0:t.value))},a=()=>{t!=null&&t.value&&Cg(Mn(t==null?void 0:t.value))};return bn("focus",i,t),bn("blur",s,t),{isFocused:r,onFocus:i,onBlur:s,focus:o,blur:a}}const ju=t=>{if(Xt(t))return A({get(){return Mn(t.value)},set(n){t.value=n}});if(t){const n=h_(t);return A({get(){return Mn(n.value)},set(r){n.value=r}})}const e=st();return A({set(n){e.value=Mn(n)},get(){return e.value}})};function hh(t,e){const n=le(!1),r=()=>{n.value=!0},i=()=>{n.value=!1};e&&De(e,o=>{o&&(n.value=!1)});const s=ju(t);return bn("mouseenter",r,s),bn("mouseleave",i,s),{isHovered:n,onMouseEnter:r,onMouseLeave:i}}function qhe(t){const e=le(!1),n=()=>{e.value=!0},r=()=>{e.value=!1},i=ju(t);return bn(["mousedown","touchstart","dragstart"],n,i),bn(["mouseup","mouseleave","touchend","touchcancel","drop","dragend"],r,!0),{isPressed:e,onMouseDown:n,onMouseUp:r}}const tD=(t,e=!0)=>{var n;if(yl(t))return!0;if(!t||e&&(!hu(t)||!((n=t())!=null&&n.length)))return!1;const r=e?t():t;return Array.isArray(r)?r.some(i=>Array.isArray(i.children)?tD(i.children,!1):i.children||i.props):!!r.children},Yhe=(t="default")=>{const{slots:e}=on();return A(()=>tD(e[t]))},jt=(t,e)=>{Gu&&!t&&console.warn('You must pass the @param "prefix" to the useBem hook!');const n=A(()=>hu(e)?e():C(e)),r=A(()=>Object.entries(C(n)).reduce((o,[a,l])=>(l&&(o[`${t}--${Pf(a)}`]=!0),o),{})),i=A(()=>Object.keys(r.value)),s=A(()=>i.value.join(" "));return new Proxy({},{ownKeys(){return Reflect.ownKeys(r.value)},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(r.value,a)},get(o,a,l){switch(a){case"asArray":return i;case"asString":return s;case"asObject":return r;default:return Reflect.get(r.value,a,l)}}})},Zhe=Me({name:"VaButton",__name:"VaButton",props:{...rt,...Kl,...Xhe,...Khe,...fh,...Jl,tag:{type:String,default:"button"},type:{type:String,default:"button"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:String,default:"primary"},textColor:{type:String,default:""},textOpacity:{type:Number,default:1},backgroundOpacity:{type:Number,default:1},borderColor:{type:String,default:""},gradient:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},icon:{type:String,default:""},iconRight:{type:String,default:""},iconColor:{type:String,default:""}},setup(t,{expose:e}){const n=t,{getColor:r}=ct(),i=A(()=>r(n.color)),{sizeComputed:s}=ql(n),o=A(()=>{const P=/([0-9]*)(px)/.exec(s.value);return P?`${+P[1]/2}${P[2]}`:s.value}),{tagComputed:a}=Ma(n),l=$he(n),{disabled:c}=kr(n),u=st(),{focus:d,blur:f}=bo(u),{isHovered:h}=hh(u,c),{isPressed:p}=qhe(u),g=A(()=>n.iconColor?r(n.iconColor):w.value),m=A(()=>({color:g.value,size:n.size})),v=A(()=>({"va-button__content--loading":n.loading})),b=Yhe(),y=A(()=>!!(n.iconRight&&!n.icon||!n.iconRight&&n.icon)),E=A(()=>!b.value&&y.value),T=jt("va-button",()=>({...wn(n,["disabled","block","loading","round","plain"]),small:n.size==="small",normal:!n.size||n.size==="medium",large:n.size==="large",opacity:n.textOpacity<1,bordered:!!n.borderColor,iconOnly:E.value,leftIcon:!E.value&&!!n.icon&&!n.iconRight,rightIcon:!E.value&&!n.icon&&!!n.iconRight})),_=A(()=>n.plain||n.backgroundOpacity<.5),{textColorComputed:w}=Hn(i,_),{backgroundColor:M,backgroundColorOpacity:x,backgroundMaskOpacity:S,backgroundMaskColor:R}=Uhe(i,p,h),I=Hhe(w,i,p,h),z=A(()=>({borderColor:n.borderColor?r(n.borderColor):"transparent",...I.value}));return e({focus:d,blur:f}),(P,B)=>(V(),Te(mr(C(a)),Re({ref_key:"button",ref:u,class:["va-button",C(T)],style:[z.value,`--va-background-color: ${String(C(M))};--va-background-color-opacity: ${String(C(x))};--va-background-mask-color: ${String(C(R))};--va-background-mask-opacity: ${String(C(S))}`]},C(l)),{default:we(()=>[me("span",{class:Qe(["va-button__content",v.value])},[se(P.$slots,"prepend",Ue(je({icon:t.icon,iconAttributes:m.value})),()=>[t.icon?(V(),Te(C(St),Re({key:0,class:"va-button__left-icon",name:t.icon},m.value),null,16,["name"])):ve("",!0)]),se(P.$slots,"default"),se(P.$slots,"append",Ue(je({icon:t.iconRight,iconAttributes:m.value})),()=>[t.iconRight?(V(),Te(C(St),Re({key:0,class:"va-button__right-icon",name:t.iconRight},m.value),null,16,["name"])):ve("",!0)])],2),P.loading?se(P.$slots,"loading",Ue(Re({key:0},{size:o.value,color:C(w)})),()=>[ke(C(dh),{class:"va-button__loader",size:o.value,color:C(w),thickness:.15,indeterminate:""},null,8,["size","color"])]):ve("",!0)]),_:3},16,["class","style"]))}}),Pt=ze(Zhe),nD=()=>{const t=on();return t.appContext.app?`${t.appContext.app._uid}_${t.uid}`:String(t.uid)},Cd=[],Jhe=(t,e)=>{const n=nD(),r=Zl(),i=()=>{var o;Cd.includes(n)||(Cd.push(n),(o=r.value)==null||o.body.classList.add("va-modal-overlay-background--blurred"))},s=()=>{var o;const a=Cd.indexOf(n);a!==-1&&(Cd.splice(a,1),Cd.length===0&&((o=r.value)==null||o.body.classList.remove("va-modal-overlay-background--blurred")))};Yn(()=>{t.value&&(e.value?i():s())}),Sn(s)},Qhe=()=>Qw(),Lc=ga([]),rD=t=>{const e=Qhe(),n=()=>{Lc.includes(e)||Lc.push(e)},r=()=>{const a=Lc.findIndex(l=>l===e);a!==-1&&Lc.splice(a,1)},i=A(()=>{const a=Lc.findIndex(l=>l===e);return a===-1?-1:a+1}),s=A(()=>i.value===Lc.length-1),o=A(()=>i.value===0);return kt(()=>{t.value&&n()}),Sn(()=>{r()}),De(t,a=>{a?n():r()}),{zIndex:i,isTop:s,isLowest:o,register:n,unregister:r}},Gm=Symbol("NOT_PROVIDED"),epe=(t,e)=>{const n=on();return A(()=>{if(!(n!=null&&n.vnode.props))return Gm;const r=e[t];return t in n.vnode.props?r:Gm})},Fn={stateful:{type:Boolean,default:!1},modelValue:{type:void 0}},iD=(t=!1)=>({stateful:{type:Boolean,default:t}}),_r=["update:modelValue"],pn=(t,e,n="modelValue",r={})=>{const{eventName:i,defaultValue:s}=r,o=i||`update:${n.toString()}`,a=epe(n,t),l="defaultValue"in r,c=le(a.value===Gm?l?s:t[n]:a.value);let u;const d=()=>{u=De(()=>t[n],h=>{c.value=h})};De(()=>t.stateful,h=>{h?d():u==null||u()},{immediate:!0});const f=A({get:()=>t.stateful?c.value:t[n],set:h=>{t.stateful&&(c.value=h),e(o,h)}});return Object.defineProperty(f,"stateful",{get:()=>t.stateful}),Object.defineProperty(f,"userProvided",{get:()=>a.value!==Gm}),{valueComputed:f}},tpe=":where(a, button, input, textarea, select):not([disabled]), *[tabindex]",sD=()=>{const t=Zl(),e=Mg(),n=Gk("trapInEl",null);let r=[],i=null,s=null;const o=h=>{var p;return((p=n.value)==null?void 0:p.contains(h.target))||!1},a=()=>{i==null||i.focus()},l=()=>{s==null||s.focus()},c=h=>{var p,g;const m=h.code==="Tab",v=h.shiftKey;if(m){if(!o(h)){h.preventDefault(),v?l():a();return}if(((p=t.value)==null?void 0:p.activeElement)===s&&!v){h.preventDefault(),a();return}((g=t.value)==null?void 0:g.activeElement)===i&&v&&(h.preventDefault(),l())}},u=h=>{n.value=h,f(),d()},d=()=>{var h;n.value&&(r=Array.from(n.value.querySelectorAll(tpe)),i=r[0],s=r[r.length-1],(h=e.value)==null||h.addEventListener("keydown",c))},f=()=>{var h;r=[],i=null,s=null,(h=e.value)==null||h.removeEventListener("keydown",c)};return{trapFocus:d,freeFocus:f,trapFocusIn:u}},Ad=ga([]),npe=()=>{const t=Ps(),e=A(()=>Ad.findIndex(({id:a})=>a===String(t))),n=()=>{e.value===-1&&Ad.push({id:String(t)})},r=()=>{e.value!==-1&&Ad.splice(e.value,1)},i=A(()=>e.value!==-1&&e.value===Ad.length-1),s=A(()=>e.value===0),o=A(()=>Ad.length>1);return{modalId:t,modalLevel:e,registerModal:n,unregisterModal:r,isTopLevelModal:i,isLowestLevelModal:s,isMoreThenOneModalOpen:o}},oD="data-va-teleported-from",aD="data-va-teleported",tS=t=>{if(!t)return null;const e=t.getAttribute(aD);return e===null?tS(t.parentElement):document.querySelector(`[${oD}="${e}"]`)},lD=()=>{var t;const e=nD(),n=(t=on())==null?void 0:t.vnode.scopeId;return{teleportFromAttrs:{[oD]:e},teleportedAttrs:{[aD]:e,[`data-v-${n}`]:""},findTeleportedFrom:tS}},h0=(t,e)=>e?e.parentElement===t?!0:t.contains(e):!1,rpe=t=>Array.isArray(t)?t:[t],Tg=(t,e)=>{g_("mousedown",n=>{const r=n.target;if(n.target.shadowRoot)return;const i=tS(r);rpe(t).some(o=>{const a=Mn(C(o));return a?i?h0(a,r)||h0(a,i):h0(a,r):!1})||e(r)})},ipe=["aria-labelledby"],spe={key:2,class:"va-modal__inner"},ope={class:"va-modal__header"},ape={key:0,class:"va-modal__message"},lpe={key:1,class:"va-modal__message"},cpe={key:2,class:"va-modal__footer"},upe={key:3,class:"va-modal__footer"},dpe=Me({name:"ModalElement",inheritAttrs:!1,props:{...rt,isTransition:{type:Boolean,default:!0}},setup:(t,{slots:e,attrs:n})=>()=>{var r;return t.isTransition?Nt(Mu,{...n},e):(r=e.default)==null?void 0:r.call(e,n)}}),fpe=Me({name:"VaModal",inheritAttrs:!1,__name:"VaModal",props:{...xk({cancelButton:Pt,okButton:Pt,closeButton:St}),...Fn,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},allowBodyScroll:{type:Boolean,default:!1},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"$t:ok"},cancelText:{type:String,default:"$t:cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},closeButton:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium"},sizesConfig:{type:Object,default:()=>({defaultSize:"medium",sizes:{small:576,medium:768,large:992,auto:"max-content"}})},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},showNestedOverlay:{type:Boolean,default:!1},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:void 0},backgroundColor:{type:String,default:"background-secondary"},noPadding:{type:Boolean,default:!1},beforeClose:{type:Function},beforeOk:{type:Function},beforeCancel:{type:Function},ariaCloseLabel:{type:String,default:"$t:close"}},emits:[..._r,"cancel","ok","before-open","open","before-close","close","click-outside"],setup(t,{expose:e,emit:n}){const r=t;wk(r);const i=n,s=st(),o=st(),{trapFocusIn:a,freeFocus:l}=sD(),{registerModal:c,unregisterModal:u,isTopLevelModal:d,isLowestLevelModal:f}=npe(),{getColor:h}=ct(),{textColorComputed:p}=Hn(or(r,"backgroundColor")),{valueComputed:g}=pn(r,i),m=A(()=>({"va-modal--fullscreen":r.fullscreen,"va-modal--mobile-fullscreen":r.mobileFullscreen,"va-modal--fixed-layout":r.fixedLayout,"va-modal--no-padding":r.noPadding})),{zIndex:v}=rD(g),b=A(()=>r.zIndex?Number(r.zIndex):v.value),y=ffe(r),E=A(()=>({maxWidth:r.maxWidth||y.value,maxHeight:r.maxHeight,color:p.value,background:h(r.backgroundColor)})),T=A(()=>({"va-modal__overlay--lowest":f.value,"va-modal__overlay--top":d.value})),_=()=>r.showNestedOverlay&&!f.value?"var(--va-modal-overlay-nested-opacity)":"var(--va-modal-overlay-opacity)",w=A(()=>{if(r.overlay)return d.value||r.showNestedOverlay?{"background-color":"var(--va-modal-overlay-color)",opacity:_()}:""}),M=()=>{g.value=!0},x=X=>{const L=()=>{g.value=!1,X==null||X()};r.beforeClose?r.beforeClose(L):L()},S=()=>{g.value=!g.value},R=()=>{const X=()=>{x(()=>i("cancel"))};r.beforeCancel?r.beforeCancel(X):X()},I=()=>{const X=()=>{x(()=>i("ok"))};r.beforeOk?r.beforeOk(X):X()},z=()=>{cn(()=>{o.value&&a(o.value)})},P=X=>i("before-open",X),B=X=>i("open",X),U=X=>i("before-close",X),j=X=>i("close",X),Z=X=>{setTimeout(()=>{X.code==="Escape"&&!r.noEscDismiss&&!r.noDismiss&&d.value&&R()})};Tg([o],()=>{!g.value||r.noOutsideDismiss||r.noDismiss||!d.value||(i("click-outside"),R())});const ne=Mg();Yn(()=>{var X,L;g.value?(X=ne.value)==null||X.addEventListener("keyup",Z):(L=ne.value)==null||L.removeEventListener("keyup",Z)}),Jhe(or(r,"blur"),g);const K=Zl(),fe=X=>{!K.value||r.allowBodyScroll||(X==="hidden"?K.value.body.classList.add("va-modal-open"):K.value.body.classList.remove("va-modal-open"))},Se=()=>{c(),fe("hidden")},de=()=>{f.value&&(l(),fe("")),u()};De(g,X=>{X?Se():de()}),kt(()=>{g.value&&Se(),d.value&&z()}),Sn(()=>{de()}),De(d,X=>{X&&z()},{immediate:!0}),e({show:M,hide:x,toggle:S,cancel:R,ok:I,onBeforeEnterTransition:P,onAfterEnterTransition:B,onBeforeLeaveTransition:U,onAfterLeaveTransition:j,listenKeyUp:Z});const{tp:ae}=rn(),{teleportFromAttrs:ge,teleportedAttrs:ue}=lD(),J={show:M,hide:x,toggle:S,cancel:R,ok:I};return(X,L)=>(V(),ee("div",{ref_key:"rootElement",ref:s,class:Qe(["va-modal-entry",X.$props.anchorClass])},[X.$slots.anchor?(V(),ee("div",Re({key:0,class:"va-modal__anchor"},C(ge)),[se(X.$slots,"anchor",Ue(je(J)))],16)):ve("",!0),(V(),Te(rf,{to:t.attachElement,disabled:X.$props.disableAttachment},[ke(C(dpe),Re({name:"va-modal",isTransition:!X.$props.withoutTransitions,duration:300,style:{zIndex:b.value},appear:""},{...X.$attrs,...C(ue)},{onBeforeEnter:P,onAfterEnter:B,onBeforeLeave:U,onAfterLeave:j}),{default:we(()=>[C(g)?(V(),ee("div",{key:0,"aria-labelledby":t.title,class:Qe([m.value,"va-modal"]),role:"dialog","aria-modal":"true"},[X.$props.overlay?(V(),ee("div",{key:0,class:Qe(["va-modal__overlay",T.value]),style:Be(w.value)},null,6)):ve("",!0),me("div",{ref_key:"modalDialog",ref:o,class:"va-modal__dialog",style:Be([E.value])},[X.$props.fullscreen||X.$props.closeButton?(V(),Te(C(St),{key:0,"va-child":"closeButton",class:Qe([{"va-modal__close--fullscreen":X.$props.fullscreen},"va-modal__close"]),"aria-label":C(ae)(X.$props.ariaCloseLabel),role:"button",tabindex:"0",name:"va-close",onClick:R,onKeydown:[We(R,["space"]),We(R,["enter"])]},null,8,["class","aria-label"])):ve("",!0),X.$slots.content?se(X.$slots,"content",Ue(Re({key:1},J))):(V(),ee("div",spe,[me("div",ope,[se(X.$slots,"header",Ue(je(J)),()=>[t.title?(V(),ee("div",{key:0,class:"va-modal__title",style:Be({color:C(h)("primary")})},Ze(X.$props.title),5)):ve("",!0)])]),X.$props.message?(V(),ee("div",ape,Ze(X.$props.message),1)):ve("",!0),X.$slots.default?(V(),ee("div",lpe,[se(X.$slots,"default",Ue(je(J)))])):ve("",!0),(X.$props.cancelText||X.$props.okText)&&!X.$props.hideDefaultActions?(V(),ee("div",cpe,[X.$props.cancelText?(V(),Te(C(Pt),{key:0,"va-child":"cancelButton",preset:"secondary",color:"secondary",class:"va-modal__default-cancel-button",onClick:R},{default:we(()=>[gt(Ze(C(ae)(X.$props.cancelText)),1)]),_:1})):ve("",!0),ke(C(Pt),{"va-child":"okButton",onClick:I},{default:we(()=>[gt(Ze(C(ae)(X.$props.okText)),1)]),_:1})])):ve("",!0),X.$slots.footer?(V(),ee("div",upe,[se(X.$slots,"footer",Ue(je(J)))])):ve("",!0)]))],4)],10,ipe)):ve("",!0)]),_:3},16,["isTransition","style"])],8,["to","disabled"]))],2))}}),nS=ze(fpe),hpe=t=>{var e;return((e=t.component)==null?void 0:e.props)||{}},EA=(t,e)=>{t&&(tu(null,t),t.remove()),t=null},ppe=(t,{props:e,appContext:n}={})=>{const r=document==null?void 0:document.createElement("div");let i;const s=a=>{var l;(l=e==null?void 0:e.onClose)==null||l.call(e,a),EA(r)},o=a=>{var l;(l=e==null?void 0:e["onUpdate:modelValue"])==null||l.call(e,a),e!=null&&e.withoutTransitions&&!a&&cn(()=>{EA(r)})};return i=Nt(t,{...e,stateful:(e==null?void 0:e.stateful)??!0,modelValue:!0,onClose:s,"onUpdate:modelValue":o}),n&&(i.appContext=n),r&&tu(i,r),{vNode:i,el:r}},mpe=t=>typeof t=="string"?{message:t}:t,p0=(t,e)=>{const{vNode:n,el:r}=ppe(nS,{appContext:e,props:mpe(t)});return r&&n.el&&hpe(n)&&document.body.appendChild(r.childNodes[0]),n},vpe=t=>({init(e){return p0(e,t==null?void 0:t._context)},confirm(e){return typeof e=="string"?new Promise(n=>{p0({message:e,onOk(){n(!0)},onCancel(){n(!1)}},t==null?void 0:t._context)}):new Promise(n=>{p0({...e,onOk(){var r;(r=e==null?void 0:e.onOk)==null||r.call(e),n(!0)},onCancel(){var r;(r=e==null?void 0:e.onCancel)==null||r.call(e),n(!1)}},t==null?void 0:t._context)})}}),gpe=vo(()=>({install(t){pa(t,"$vaModal",vpe(t))}})),cD=(t,e)=>{const n=Object.entries(e);return t.reduce((r,i)=>r.concat(n.map(([s,o])=>({...i,postfix:i.postfix??s,value:i.value??o}))),[])},uD=t=>t.reduce((e,n)=>{const r=[n.property].flat().map(i=>`${i}: ${n.value};`).join("");return e+=`.va-${n.prefix}--${n.postfix} { ${r} }`,e},""),MA=(t,e)=>{const n=cD(t,e);eS("va-color-helpers",()=>uD(n))},ype=()=>{if(Yl())return;const{globalConfig:t}=po();return De(()=>t.value.colorsClasses,e=>{e.length&&MA(e,t.value.colors.variables)},{immediate:!0,deep:!0}),De(()=>t.value.colors.variables,e=>{e&&MA(t.value.colorsClasses,e)},{immediate:!0,deep:!0}),{renderColorHelpers:()=>{const e=cD(t.value.colorsClasses,t.value.colors.variables);return uD(e)}}},bpe=vo(()=>({install(t){pa(t,"$vaColorsClasses",ype())}})),dD=Symbol("AccordionService"),_pe=(t,e)=>{const n=le([]),r=()=>{const c=Math.max(n.value.length,e.value.length);return Array.from({length:c},(u,d)=>e.value[d]??!1)},i=c=>e.value[n.value.indexOf(c)]??!1,s=()=>{e.value=r()};return Mr(dD,{registerItem:c=>{n.value.push(c),s()},unregisterItem:c=>{n.value=n.value.filter(u=>u!==c),cn(s)},getItemValue:i,setItemValue:(c,u)=>{const d=n.value.indexOf(c);if(d===-1){qt("Accordion item is not registered yet");return}t.multiple?e.value[d]=u:e.value=r().map((f,h)=>h===d?u:!1)},props:A(()=>t)}),{items:n}},xpe=()=>{const t=Zn(dD,void 0);if(!t)return{accordionProps:le({})};const e={};return t.registerItem(e),Sn(()=>t.unregisterItem(e)),{accordionItemValue:A({get:()=>t.getItemValue(e),set:r=>t.setItemValue(e,r)}),accordionProps:t.props}},wpe={class:"va-accordion"},Spe=Me({name:"VaAccordion",__name:"VaAccordion",props:{...Fn,...rt,modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},inset:{type:Boolean,default:!1},stateful:{type:Boolean,default:!0},popout:{type:Boolean,default:!1}},emits:[..._r],setup(t,{expose:e,emit:n}){const r=t,i=n,{valueComputed:s}=pn(r,i,"modelValue"),{items:o}=_pe(r,s);return e({collapses:o,value:s}),(c,u)=>(V(),ee("div",wpe,[se(c.$slots,"default")]))}}),Epe=ze(Spe);function fD(){return document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight}function CA({coordinates:t,offsetTop:e,offsetBottom:n,target:r}){let i=!1,s=!1;const o=fD();if(e!=null&&o)if(r===window)i=t.top<=e;else{const{top:a}=r.getBoundingClientRect();i=t.top-a<=e}if(n!=null&&o)if(r===window)s=t.bottom>=o-n;else{const{bottom:a}=r.getBoundingClientRect();s=a-t.bottom<=n}return{isTopAffixed:i,isBottomAffixed:s}}function Mpe(t,e){return t.isTopAffixed!==e.isTopAffixed||t.isBottomAffixed!==e.isBottomAffixed}function AA(t,e){const{target:n,element:r,offsetTop:i,offsetBottom:s,setState:o,getState:a,initialPosition:l}=e;if(!r)return;const c=!t,u=r.getBoundingClientRect(),d={offsetBottom:s,offsetTop:i,target:n},f=CA(c&&l?{coordinates:l,...d}:{coordinates:u,...d}),h=a();Mpe(h,f)?o({...f,width:u.width}):h.width!==u.width&&o({...h,width:u.width})}function Cpe(t){return t==="scroll"}function Ape(t,{handler:e,useCapture:n=Cpe,wait:r=50}){const i=t.map(s=>{const o=_k(a=>e(s,a),r);return window.addEventListener(s,o,n(s)),()=>window.removeEventListener(s,o,n(s))});return()=>i.forEach(s=>s())}const Tpe=Me({name:"VaAffix",__name:"VaAffix",props:{...rt,offsetTop:{type:Number,default:void 0},offsetBottom:{type:Number,default:void 0},target:{type:[Object,Function],default:qk}},emits:["change"],setup(t,{emit:e}){const n=t,r=e,i=st(),s=()=>typeof n.target=="function"?n.target():n.target,o=A(()=>a.value.isTopAffixed||a.value.isBottomAffixed),a=le({isTopAffixed:!1,isBottomAffixed:!1}),l=()=>a.value,c=b=>{a.value=b,r("change",o)},u=()=>{const b=s();if(!b)return 0;if(n.offsetTop!==void 0){if(!(b instanceof Window)){const{top:y}=b.getBoundingClientRect();return y+n.offsetTop}return n.offsetTop}},d=()=>{const b=s();if(!b)return 0;if(n.offsetBottom!==void 0){if(!(b instanceof Window)){const{bottom:y}=b.getBoundingClientRect(),{borderTopWidth:E,borderBottomWidth:T}=getComputedStyle(b),{offsetHeight:_,clientHeight:w}=b,M=_-w-parseInt(E)-parseInt(T);return fD()-(y-n.offsetBottom)+M}return n.offsetBottom}},f=b=>{const y=b();return y===void 0?void 0:`${y}px`},h=A(()=>[{"va-affix--affixed":o}]),p=A(()=>({top:a.value.isTopAffixed?f(u):void 0,bottom:a.value.isBottomAffixed?f(d):void 0,width:`${a.value.width}px`})),g=le(),m=(b,y)=>{const E={...n,initialPosition:g.value,element:i.value,target:s(),setState:c,getState:l};if(!b||b==="resize")AA(b,E);else if(y&&y.target){const T=s();T===y.target||T instanceof Window?AA(b,E):c({isBottomAffixed:!1,isTopAffixed:!1})}};let v=dde;return kt(()=>{var b;g.value=(b=i.value)==null?void 0:b.getBoundingClientRect(),v=Ape(["scroll","resize"],{handler:m}),cn(()=>{m(null)})}),Sn(v),(b,y)=>(V(),ee("div",{ref_key:"element",ref:i,class:"va-affix"},[me("div",{style:Be({visibility:o.value?"hidden":"inherit"})},[se(b.$slots,"default")],4),o.value?(V(),ee("div",{key:0,class:Qe(h.value),style:Be(p.value)},[se(b.$slots,"default")],6)):ve("",!0)],512))}}),Ppe=ze(Tpe),hD=t=>{const{textColorComputed:e}=Hn(t);return e},pD=t=>{let e;return t.startsWith("rgba")?e=t.substring(5,t.length-1).split(","):e=t.substring(4,t.length-1).split(","),e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e[3]===void 0?e[3]=1:e[3]=Number(e[3]),e},TA=t=>"#"+(t[0]|256).toString(16).slice(1)+(t[1]|256).toString(16).slice(1)+(t[2]|256).toString(16).slice(1)+(t[3]*255|256).toString(16).slice(1),Rpe=t=>{const e=[];let n=t;for(;n;){if(!(n instanceof HTMLElement)||!n)return e;const{backgroundColor:r,willChange:i}=window.getComputedStyle(n),s=i.includes("background"),o=pD(r);if(o[3]===1&&!s)return e.push(n),e;(o[3]!==0||s)&&e.push(n),n=n.parentElement}return e},PA="va-background-watcher",Lpe=(t,e)=>(t.className=PA+" "+t.className,t.addEventListener("transitionend",n=>{n.target===t&&e()}),()=>{t.className=t.className.replace(PA,""),t.removeEventListener("transitionend",e)}),Ipe=(t,e)=>{const n=t.map(r=>Lpe(r,e));return()=>{n.forEach(r=>r())}},Ope=(t,e)=>{const n=e[3];if(n===1)return e;if(n===0)return t;const r=Math.round(t[0]*(1-n)+e[0]*n),i=Math.round(t[1]*(1-n)+e[1]*n),s=Math.round(t[2]*(1-n)+e[2]*n);return[r,i,s,1]},RA=t=>{let e=[0,0,0,0];for(let n=t.length-1;n>=0;n--)e=Ope(e,pD(window.getComputedStyle(t[n]).backgroundColor));return e},mD=t=>{const e=le("#000000");let n=()=>{};return Yn(()=>{if(n(),t.value){const r=Rpe(t.value);n=Ipe(r,()=>{e.value=TA(RA(r))}),e.value=TA(RA(r))}}),e},rS=t=>{if(t)return t;const e=on(),n=st();return kt(()=>{n.value=e.proxy.$el??void 0}),cv(()=>{n.value=e.proxy.$el??void 0}),Sn(()=>{n.value=e.proxy.$el??void 0}),n},kpe=t=>{const{getColor:e}=ct(),n=A(()=>!!(t.outline||t.border)),{textColorComputed:r}=Hn(or(t,"color"),n),i=A(()=>e(t.color)),s=A(()=>{let u=i.value,d="none";return t.outline&&(u="transparent"),t.border&&(u="var(--va-background-primary)",d="var(--va-alert-box-shadow)"),{border:t.outline?`1px solid ${i.value}`:"",padding:t.dense?"var(--va-alert-padding-y-dense) var(--va-alert-padding-x)":"",backgroundColor:u,boxShadow:d}}),o=hD(mD(rS())),a=A(()=>({alignItems:t.center?"center":"",color:t.border||t.outline?o.value:r.value})),l=A(()=>({color:r.value})),c=A(()=>({backgroundColor:t.borderColor?e(t.borderColor):i.value}));return{alertStyle:s,contentStyle:a,titleStyle:l,borderStyle:c}},Dpe={key:1,class:"va-alert__close"},Npe=["aria-label"],Fpe=Me({name:"VaAlert",__name:"VaAlert",props:{...Fn,...rt,modelValue:{type:Boolean,default:!0},stateful:{type:Boolean,default:!0},color:{type:String,default:"primary"},textColor:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},icon:{type:String,default:""},closeText:{type:String,default:""},closeIcon:{type:String,default:"close"},closeable:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},center:{type:Boolean,default:!1},borderColor:{type:String,default:""},border:{type:String,default:"",validator:t=>["top","right","bottom","left",""].includes(t)}},emits:[..._r],setup(t,{expose:e,emit:n}){const r=t,i=n,{contentStyle:s,titleStyle:o,alertStyle:a,borderStyle:l}=kpe(r),{valueComputed:c}=pn(r,i),u=()=>{c.value=!1},d=()=>{c.value=!0},f=Cr(),h=A(()=>r.icon||f.icon),p=A(()=>r.title||f.title),g=A(()=>`va-alert__border--${r.border}`),{tp:m,t:v}=rn();return e({hide:u,show:d}),(b,y)=>(V(),Te(Mu,{name:"fade"},{default:we(()=>[C(c)?(V(),ee("div",{key:0,class:"va-alert",style:Be(C(a)),role:"alert"},[me("div",{style:Be(C(l)),class:Qe([g.value,"va-alert__border"])},null,6),h.value?(V(),ee("div",{key:0,style:Be(C(s)),class:"va-alert__icon","aria-hidden":"true"},[se(b.$slots,"icon",{},()=>[ke(C(St),{name:t.icon},null,8,["name"])])],4)):ve("",!0),me("div",{style:Be(C(s)),class:"va-alert__content"},[p.value?(V(),ee("div",{key:0,style:Be(C(o)),class:"va-alert__title"},[se(b.$slots,"title",{},()=>[gt(Ze(t.title),1)])],4)):ve("",!0),me("span",null,[se(b.$slots,"default",{},()=>[gt(Ze(b.$props.description),1)])])],4),t.closeable?(V(),ee("div",Dpe,[me("div",{role:"button",class:"va-alert__close--closeable",tabindex:"0","aria-label":t.closeText||C(v)("closeAlert"),style:Be(C(s)),onClick:u,onKeydown:[We(u,["space"]),We(u,["enter"])]},[se(b.$slots,"close",{},()=>[t.closeText?ve("",!0):(V(),Te(C(St),{key:0,name:t.closeIcon},null,8,["name"])),gt(" "+Ze(t.closeText),1)])],44,Npe)])):ve("",!0)],4)):ve("",!0)]),_:3}))}}),Bpe=ze(Fpe),vD={hideOnScroll:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1}};function gD(t,e){const n=A(()=>e.value?!!t.hideOnScroll:!1),r=A(()=>{if(!(!t.bottom&&!n.value))return t.bottom&&n.value?"translateY(100%)":t.bottom?t.fixed?"translateY(-100%)":"translateY(0)":"translateY(-100%)"}),i=A(()=>t.fixed?"fixed":n.value?"absolute":void 0);return{fixedBarStyleComputed:A(()=>{const o={top:t.bottom&&(n.value||t.fixed)?"100%":void 0,transform:t.hideOnScroll||t.fixed?r.value:void 0};return i.value&&Object.assign(o,{position:i.value}),o})}}function Vpe(t){if(!t)throw new Error("No target was provided for `useScroll` hook!");return typeof t=="string"?document.querySelector(t):t}function yD(t,e){const n=st();let r;const i=le(!1),s=le(0),o=a=>{const l=a.target,c=a.target instanceof Window?l.scrollY:l.scrollTop;i.value=s.value<c,s.value=c};return kt(()=>{r=t?window:Vpe(e||n.value),r==null||r.addEventListener("scroll",o,t)}),Sn(()=>{r==null||r.removeEventListener("scroll",o)}),{scrollRoot:n,isScrolledDown:i}}const Upe=Me({name:"VaAppBar",__name:"VaAppBar",props:{...vD,...rt,gradient:{type:Boolean,default:!1},target:{type:[Object,String],default:""},shadowOnScroll:{type:Boolean,default:!1},shadowColor:{type:String,default:""},color:{type:String,default:"primary"}},setup(t){const e=t,{scrollRoot:n,isScrolledDown:r}=yD(e.fixed,e.target),{fixedBarStyleComputed:i}=gD(e,r),{getColor:s,getGradientBackground:o,getBoxShadowColor:a}=ct(),l=A(()=>s(e.color)),{textColorComputed:c}=Hn(or(e,"color")),u=A(()=>r.value?!!e.shadowOnScroll:!1),d=A(()=>s(e.shadowColor,l.value)),f=A(()=>{const p=a(e.shadowColor?d.value:l.value);return u.value?`var(--va-app-bar-shadow) ${p}`:""}),h=A(()=>({...i.value,background:e.gradient?o(l.value):l.value,boxShadow:f.value,color:c.value}));return(p,g)=>(V(),ee("header",{ref_key:"scrollRoot",ref:n,role:"toolbar",class:"va-app-bar",style:Be(h.value)},[se(p.$slots,"default")],4))}}),$pe=ze(Upe),zpe=Me({name:"VaAspectRatio",__name:"VaAspectRatio",props:{...rt,ratio:{type:[Number,String],default:"auto"},contentHeight:{type:Number,default:1},contentWidth:{type:Number,default:1},maxWidth:{type:[Number,String],default:0,validator:t=>Number(t)>=0}},setup(t){const e=t,n=A(()=>e.ratio==="auto"&&e.contentHeight===1&&e.contentWidth===1?0:isNaN(+e.ratio)?e.contentWidth/e.contentHeight:e.ratio),r=A(()=>{if(n.value)return{paddingBottom:`${1/n.value*100}%`}}),i=A(()=>e.maxWidth?`${e.maxWidth}px`:void 0);return(s,o)=>(V(),ee("div",{class:"va-aspect-ratio",style:Be(`--va-max-width-computed: ${String(i.value)}`)},[r.value?(V(),ee("div",{key:0,style:Be(r.value)},null,4)):ve("",!0),se(s.$slots,"default")],4))}}),bD=ze(zpe),Hpe=Me({name:"VaFallback",props:{fallbackSrc:{type:String},fallbackText:{type:String},fallbackIcon:{type:String},fallbackRender:{type:Function}},components:{VaIcon:St},emits:["fallback"],setup(t,{emit:e}){return kt(()=>{e("fallback")}),t.fallbackIcon?()=>Nt(St,{name:t.fallbackIcon}):t.fallbackSrc?()=>Nt("img",{src:t.fallbackSrc}):t.fallbackRender?()=>{var n;return Nt((n=t.fallbackRender)==null?void 0:n.call(t))}:()=>Nt("span",t.fallbackText)}}),vu=ze(Hpe);function _D(t){switch(!0){case Array.isArray(t):return t.reduce((e,n)=>({...e,[n]:null}),{});case(typeof t=="object"&&t!==null):return t;default:return{}}}function Wm(t,e,n="props"){const{mixins:r,extends:i}=e;i&&Wm(t,i,n),r&&r.forEach(o=>Wm(t,o,n));const s=_D(e[n]);for(const o in s)t[o]=s[o]}function Gpe(t){return t.options?t.options:t.__vccOpts||t.__b?{...t.__vccOpts,...t.__b}:t}function Wpe(t,e="props"){const n=t.mixins??[],r=t.extends??[],i={};Wm(i,r,e);for(let s=0;s<n.length;s++)Wm(i,n[s],e);return Object.assign(i,_D(t[e])),i}const jpe=t=>Wpe(Gpe(t));function It(t,e){const n=jpe(t);return e?Object.keys(n).reduce((r,i)=>(e.includes(i)||n[i]===void 0||(r[i]=typeof n[i]=="string"?{}:n[i]),r),{}):n}function al(t){return[...new Set(t.emits)]}const tn=t=>{const{props:e}=on();return A(()=>Object.keys(t).reduce((n,r)=>(n[r]=e[r],n),{}))},Xpe=["src","alt"],LA=It(vu),Kpe=Me({name:"VaAvatar",__name:"VaAvatar",props:{...fh,...Kl,...rt,...LA,color:{type:String,default:"primary"},textColor:{type:String},square:{type:Boolean,default:!1},fontSize:{type:String,default:""},src:{type:String,default:null},icon:{type:String,default:""},alt:{type:String,default:""}},emits:["error","fallback"],setup(t,{expose:e,emit:n}){const r=t,i=n,{getColor:s}=ct(),o=A(()=>s(r.color)),a=A(()=>{if(!(r.loading||r.src&&!h.value))return o.value}),{sizeComputed:l,fontSizeComputed:c}=ql(r,"VaAvatar"),{textColorComputed:u}=Hn(a),d=A(()=>({fontSize:r.fontSize||c.value})),f=jt("va-avatar",()=>({...wn(r,["square"])})),h=le(!1),p=v=>{h.value=!0,i("error",v)};De(()=>r.src,()=>{h.value=!1});const g=A(()=>({hasError:h.value,onError:p})),m=tn(LA);return e({hasLoadError:h}),(v,b)=>(V(),ee("div",{class:Qe(["va-avatar",C(f)]),style:Be([d.value,`--va-background-color-computed: ${String(a.value)};--va-text-color-computed: ${String(C(u))};--va-size-computed: ${String(C(l))}`])},[v.$props.loading?(V(),Te(C(dh),{key:0,size:C(l),color:o.value,indeterminate:""},null,8,["size","color"])):se(v.$slots,"default",Ue(Re({key:1},g.value)),()=>[v.$props.src&&!h.value?(V(),ee("img",{key:0,src:v.$props.src,alt:v.$props.alt,onError:p},null,40,Xpe)):h.value&&v.$props.src?se(v.$slots,"fallback",{key:1},()=>[ke(C(vu),Re(C(m),{onFallback:b[0]||(b[0]=y=>v.$emit("fallback"))}),null,16)]):v.$props.icon?(V(),Te(C(St),{key:2,name:v.$props.icon},null,8,["name"])):se(v.$slots,"fallback",{key:3},()=>[ke(C(vu),Re(C(m),{onFallback:b[1]||(b[1]=y=>v.$emit("fallback"))}),null,16)])])],6))}}),jm=ze(Kpe),IA=It(jm),qpe=Me({name:"VaAvatarGroup",__name:"VaAvatarGroup",props:{...Kl,...rt,...IA,max:{type:Number,default:0},vertical:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},restColor:{type:String,default:"secondary"}},setup(t){const e=t,n=jt("va-avatar-group",()=>({...wn(e,["vertical"])})),r=A(()=>e.max&&e.max<=e.options.length?e.options.slice(0,e.max):e.options),i=A(()=>{const c=e.options.length>0,u=r.value.length<e.options.length,d=e.options.length-(e.max||0);return c&&u?d:0}),{sizeComputed:s,fontSizeComputed:o}=ql(e,"VaAvatarGroup"),a=tn(IA),l=A(()=>({...a.value,fontSize:o.value,size:s.value}));return(c,u)=>(V(),ee("div",{class:Qe(["va-avatar-group",C(n)]),role:"list"},[(V(!0),ee(qe,null,vt(r.value,(d,f)=>(V(),Te(C(jm),Re({key:f},{...l.value,...d},{role:"listitem"}),null,16))),128)),i.value>0?se(c.$slots,"rest",Ue(Re({key:0},l.value)),()=>[ke(C(jm),Re(l.value,{color:t.restColor,class:"va-avatar-group__rest",role:"listitem"}),{default:we(()=>[gt(" +"+Ze(i.value),1)]),_:1},16,["color"])]):ve("",!0)],2))}}),Ype=ze(qpe),Zpe=["aria-label","onKeydown"],Jpe=Me({name:"VaBacktop",__name:"VaBacktop",props:{...rt,target:{type:[Object,String],default:void 0},visibilityHeight:{type:Number,default:300},speed:{type:Number,default:50},verticalOffset:{type:String,default:"1rem"},horizontalOffset:{type:String,default:"1rem"},color:{type:String,default:""},horizontalPosition:{type:String,default:"right",validator:t=>["right","left"].includes(t)},verticalPosition:{type:String,default:"bottom",validator:t=>["bottom","top"].includes(t)},ariaLabel:{type:String,default:"$t:backToTop"}},setup(t){const e=t,n=le(0),r=A(()=>({[e.verticalPosition]:e.verticalOffset,[e.horizontalPosition]:e.horizontalOffset}));let i;const s=()=>{if(!e.target)return window;if(typeof e.target=="string"){const p=document.querySelector(e.target);return p||(qt(`Target element [${e.target}] is not found, falling back to window.`),window)}return e.target},o=le(!1),a=le(0),l=()=>{if(!o.value){if(o.value=!0,i instanceof Window){window.scrollTo({top:0,behavior:"smooth"});return}a.value=window.setInterval(()=>{if(i instanceof Element)if(i.scrollTop===0)clearInterval(a.value),o.value=!1;else{const p=Math.floor(i.scrollTop-e.speed);i.scrollTo(0,p)}},15)}},c=()=>{n.value=i instanceof Window?i.scrollY:i.scrollTop},u=Yl(),d=A(()=>u?!1:n.value>e.visibilityHeight);u||(kt(()=>{i=s(),i.addEventListener("scroll",c,!0)}),Sn(()=>i==null?void 0:i.removeEventListener("scroll",c)));const{tp:f,t:h}=rn();return(p,g)=>d.value?(V(),ee("div",{key:0,class:"va-backtop",role:"button","aria-label":C(f)(p.$props.ariaLabel),tabindex:"1",style:Be(r.value),onClick:l,onKeydown:We(He(l,["stop"]),["enter"])},[se(p.$slots,"default",{},()=>[ke(C(Pt),{"aria-hidden":"true",icon:"va-arrow-up",color:t.color},null,8,["color"])])],44,Zpe)):ve("",!0)}}),Qpe=ze(Jpe),xD=["top","bottom"],wD=["left","right"],eme=[...xD,...wD],tme=["start","end","center"],nme=eme.reduce((t,e)=>(t.push(e),tme.forEach(n=>t.push(`${e}-${n}`)),t),["auto"]),rme=xD.reduce((t,e)=>(wD.forEach(n=>{t.push(`${e}-${n}`),t.push(`${n}-${e}`)}),t),[]),SD=[...nme,...rme],ime={"top-left":"top-start","left-top":"top-start","top-right":"top-end","right-top":"top-end","bottom-left":"bottom-start","left-bottom":"bottom-start","bottom-right":"bottom-end","right-bottom":"bottom-end"},ED={placement:{type:String,default:"auto",validator:t=>SD.includes(t)}},MD=t=>{const e=A(()=>(ime[t.placement]||t.placement).split("-")),n=A(()=>{const i=e.value[0];return i==="auto"?"bottom":i}),r=A(()=>e.value[1]||"center");return{position:n,align:r}},CD=()=>{const t=r=>typeof r=="string"?!isNaN(+r)||r.endsWith("px")||r.endsWith("rem"):!1;return{isParsableMeasure:t,isParsablePositiveMeasure:r=>typeof r=="number"?r>=0:t(r)&&parseInt(r)>=0,parseSizeValue:(r,i=16)=>{const s=C(r);if(typeof s=="string"){const o=parseInt(s);return isNaN(o)?0:s.endsWith("rem")?o*C(i):o}return s}}},{isParsableMeasure:OA,parseSizeValue:kA}=CD(),sme={overlap:{type:Boolean,default:!1},placement:{type:String,default:"top-end",validator:t=>SD.includes(t)},offset:{type:[Number,String,Array],default:0,validator:t=>Array.isArray(t)?t.every(OA):typeof t=="string"?OA(t):!isNaN(t)}},ome=(t,e)=>{if(!e.value)return{};const{position:n,align:r}=MD(t),i=A(()=>({start:t.overlap?"-50%":"-100%",center:"-50%",end:t.overlap?"-50%":"0%"})[r.value]),s=A(()=>{if(!t.offset)return{};const l=["left","right"].includes(n.value)?"top":"left",c=l==="top"?"left":"top";if(Array.isArray(t.offset)){const[d,f]=t.offset.map(kA);return{[`margin-${l}`]:`${d}px`,[`margin-${c}`]:`${f}px`}}const u=kA(t.offset);return{[`margin-${c}`]:`${u}px`}}),o=A(()=>{const l=["left","right"].includes(n.value)?"top":"left",c=l==="top"?"left":"top";let u="0%";return c==="top"&&n.value==="bottom"&&(u="100%"),c==="left"&&n.value==="right"&&(u="100%"),{start:{[l]:"0%",[c]:u},center:{[l]:"50%",[c]:u},end:{[l]:"100%",[c]:u}}[r.value]}),a=A(()=>{const l={top:{x:i.value,y:t.overlap?"-50%":"-100%"},bottom:{x:i.value,y:t.overlap?"-50%":"0%"},left:{x:t.overlap?"-50%":"-100%",y:i.value},right:{x:t.overlap?"-50%":"0%",y:i.value}},{x:c,y:u}=l[n.value];return{transform:`translate(${c}, ${u})`}});return A(()=>({...o.value,...a.value,...s.value}))},ame={props:"prop",attrs:"prop",slots:"slot"},lme=(t,e=["props","attrs"])=>{if(!Gu)return;const n=on();if(!n)throw new Error("`useDeprecated` hook must be used only inside of setup function!");const r=n.type.name,i=C(t);e.every(s=>{var o;const a=ame[s],l=c=>console.warn(`The '${c}' ${a} (${r} component) is deprecated! Please, check the documentation.`);if(s==="props"){const c=((o=n.propsOptions)==null?void 0:o[0])||{},u=n.props||{};return i.forEach(d=>{c[d]&&u[d]!==c[d].default&&l(d)}),!0}return Object.keys({...n[s]}).forEach(c=>{i.includes(c)&&l(c)}),!0})},cme=["aria-labelledby"],ume={class:"va-badge__text"},dme=Me({name:"VaBadge",__name:"VaBadge",props:{...rt,...sme,color:{type:String,default:"danger"},textColor:{type:String},text:{type:[String,Number],default:""},multiLine:{type:Boolean,default:!1},visibleEmpty:{type:Boolean,default:!1},dot:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1}},setup(t){const e=t;lme(["transparent"]);const n=Cr(),r=A(()=>!(e.text||e.visibleEmpty||e.dot||n.text)),i=A(()=>!!(n.default||e.dot)),s=jt("va-badge",()=>({...wn(e,["visibleEmpty","dot","multiLine"]),empty:r.value,floating:i.value})),{getColor:o}=ct(),a=A(()=>o(e.color)),{textColorComputed:l}=Hn(a),c=ome(e,i),u=A(()=>({color:l.value,borderColor:a.value,backgroundColor:a.value,opacity:e.transparent?.5:1,...C(c)})),d=A(()=>e.text?String(e.text):void 0);return(f,h)=>(V(),ee("div",{class:Qe(["va-badge",C(s)]),role:"status","aria-labelledby":d.value},[me("span",{class:"va-badge__text-wrapper",style:Be(u.value)},[me("span",ume,[se(f.$slots,"text",{},()=>[gt(Ze(t.text),1)])])],4),se(f.$slots,"default")],10,cme))}}),AD=ze(dme),DA=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),NA=t=>t&&hu(t)?t():t,TD={align:{type:String,default:"left"},vertical:{type:Boolean,default:!1}},fme={left:"flex-start",center:"center",right:"flex-end",between:"space-between",around:"space-around"},hme={left:"flex-start",center:"center",right:"flex-end",stretch:"stretch"},pme=(t,e)=>e?"center":t?fme[t]:"flex-start",mme=(t,e)=>e?hme[t]:"center";function PD(t){return{alignComputed:A(()=>({display:"flex",flexDirection:t.vertical?"column":"row",justifyContent:pme(t.align,t.vertical),alignItems:mme(t.align,t.vertical)}))}}const vme=Me({name:"VaBreadcrumbs",props:{...TD,...rt,separator:{type:String,default:"/"},color:{type:String,default:null},disabledColor:{type:String,default:"secondary"},activeColor:{type:String,default:null},separatorColor:{type:String,default:null},ariaLabel:{type:String,default:"$t:breadcrumbs"}},setup(t,{slots:e}){const{alignComputed:n}=PD(t),{getColor:r}=ct(),i=A(()=>t.separatorColor?r(t.separatorColor):null),s=A(()=>t.color?r(t.color):null),o=A(()=>t.activeColor?r(t.activeColor):null),a=(h,p)=>{const g=p&&p.type===qe&&p.children?p.children:[p];return[...h,...g.filter(m=>{var v,b;return!!((b=(v=m==null?void 0:m.type)==null?void 0:v.name)!=null&&b.match(/VaBreadcrumbsItem$/))})]},l=()=>{const h=NA(e.separator)||[t.separator];return Nt("span",{"aria-hidden":!0,class:["va-breadcrumbs__separator"],style:[{color:i.value}]},h)},c=h=>{const p=h==null?void 0:h.props;return!p||!DA(p,"disabled")?!1:p.disabled===""?!0:!!p.disabled},u=le(!0),d=()=>{const h=NA(e.default);if(!h)return;const p=h.reduce(a,[])||[],g=p.length,m=E=>E===g-1,v=E=>{const T=E==null?void 0:E.props;return!T||!DA(T,"to")?!1:!!(T.to&&!T.disabled)},b=(E,T)=>Nt("span",{class:["va-breadcrumbs__item",{"va-breadcrumbs__item--disabled":c(E)}],"aria-current":m(T)&&v(E)?"location":!1,style:{color:c(E)?r(t.disabledColor):m(T)?o.value:s.value}},[E]),y=[];return g&&p.forEach((E,T)=>{u.value&&!v(E)&&(u.value=!1),y.push(b(E,T)),m(T)||y.push(l())}),y},{tp:f}=rn();return()=>Nt("div",{class:"va-breadcrumbs",style:n.value,role:u.value?"navigation":void 0,"aria-label":u.value?f(t.ariaLabel):void 0},d())}}),gme=Me({name:"VaBreadcrumbsItem",__name:"VaBreadcrumbsItem",props:{...Jl,disabled:{type:Boolean,default:!1},label:{type:String,default:""}},setup(t){const e=t,{tagComputed:n,hrefComputed:r,isLinkTag:i}=Ma(e),s=A(()=>({"va-breadcrumb-item--link":i.value}));return(o,a)=>(V(),Te(mr(C(n)),{class:Qe(["va-breadcrumb-item",s.value]),"active-class":o.$props.activeClass,href:C(r),to:o.$props.to,target:o.$props.target,replace:o.$props.replace,append:o.$props.append,exact:o.$props.exact,"exact-active-class":o.$props.exactActiveClass},{default:we(()=>[se(o.$slots,"default",{},()=>[gt(Ze(t.label),1)])]),_:3},8,["class","active-class","href","to","target","replace","append","exact","exact-active-class"]))}}),yme=ze(gme),bme=ze(vme),FA=ho(It(Pt),["block","gradient"]),_me=Me({name:"VaButtonGroup",__name:"VaButtonGroup",props:{...FA,...rt,grow:{type:Boolean,default:!1},gradient:{type:Boolean,default:!1}},setup(t){const e=t,{getColor:n,getGradientBackground:r}=ct(),i=A(()=>n(e.color)),{textColorComputed:s}=Hn(i),o=tn(FA),a=A(()=>({VaButton:{...o.value,...e.gradient&&{color:"#00000000",textColor:s.value}}})),l=jt("va-button-group",()=>({square:!e.round,grow:e.grow,small:e.size==="small",large:e.size==="large"})),c=A(()=>e.gradient?r(i.value):"transparent");return(u,d)=>(V(),ee("div",{class:Qe(["va-button-group",C(l)]),style:Be(`--va-background-color: ${String(c.value)}`)},[ke(C(uh),{components:a.value},{default:we(()=>[se(u.$slots,"default")]),_:3},8,["components"])],6))}}),Pg=ze(_me),BA=t=>{let e=null;const n=()=>Hw(()=>{e==null||e(),e=null},C(t));let r=n();return Xt(t)&&De(t,()=>{r=n()}),{debounced:i=>{e=i,r()},cancel:()=>r.cancel()}},VA=t=>{const e=t.target;return!(!(e.tagName==="INPUT"||e.tagName==="TEXTAREA")||e.attributes.getNamedItem("readonly"))},xme=t=>Array.isArray(t),wme=(t,e,n,r)=>{const i=d=>(d=d.replace(/-/g,"").toLowerCase(),d==="space"?" ":d==="rightclick"?"contextmenu":d),s=A(()=>xme(r.trigger)?r.trigger.map(d=>i(d)):[i(r.trigger)]);bn("keydown",d=>{r.disabled||(d.key==="Escape"&&t.value&&(t.value=!1,d.preventDefault()),!VA(d)&&s.value.includes(i(d.key))&&(t.value=!t.value,d.preventDefault()))},e),bn("keydown",d=>{r.disabled||d.key==="Escape"&&t.value&&(t.value=!1,d.preventDefault())},n),bn(["click","contextmenu","dblclick"],d=>{r.disabled||VA(d)||s.value.includes(i(d.type))&&(d.preventDefault(),t.value&&r.closeOnAnchorClick?(t.value=!1,r.cursor&&setTimeout(()=>{t.value=!0},16)):t.value=!0)},e),bn(["click","contextmenu","dblclick"],d=>{r.closeOnContentClick&&(t.value=!1)},n);const{debounced:o,cancel:a}=BA(or(r,"hoverOverTimeout")),{debounced:l,cancel:c}=BA(or(r,"hoverOutTimeout")),u=d=>{if(!r.disabled&&s.value.includes("hover"))if(d.type==="mouseleave"){if(a(),!r.isContentHoverable){t.value=!1;return}l(()=>{t.value=!1})}else c(),o(()=>{t.value=!0})};bn(["mouseleave","mouseenter"],u,e),bn(["mouseleave","mouseenter"],u,n)},Sme=t=>{const e=le(),n=Zl(),r=Eg();return{anchorRef:A({set(s){e.value=Mn(s)},get(){var s,o,a;return r.value,typeof t.anchor=="string"?((s=n.value)==null?void 0:s.querySelector(t.anchor))??e.value:typeof t.anchor=="object"?t.anchor:t.anchorSelector?((o=n.value)==null?void 0:o.querySelector(t.anchorSelector))??e.value:t.innerAnchorSelector&&e.value?((a=e.value)==null?void 0:a.querySelector(t.innerAnchorSelector))??e.value:e.value}})}},Eme=(t,e)=>{const n=Sr({x:0,y:0});return bn(["mousemove","mousedown","mouseup"],r=>{var i;if(!e.value)return;const{x:s,y:o}=((i=t.value)==null?void 0:i.getBoundingClientRect())??{x:0,y:0};n.x=r.clientX-s,n.y=r.clientY-o},t),A(()=>({getBoundingClientRect(){var r;const{x:i,y:s}=((r=t.value)==null?void 0:r.getBoundingClientRect())??{x:0,y:0},o=n.x+i,a=n.y+s;return{width:0,height:0,x:o,y:a,top:a,right:o,bottom:a,left:o}},contextElement:t.value}))},gu=Math.min,fi=Math.max,Xm=Math.round,Fp=Math.floor,ma=t=>({x:t,y:t}),Mme={left:"right",right:"left",bottom:"top",top:"bottom"},Cme={start:"end",end:"start"};function UA(t,e,n){return fi(t,gu(e,n))}function ph(t,e){return typeof t=="function"?t(e):t}function va(t){return t.split("-")[0]}function mh(t){return t.split("-")[1]}function RD(t){return t==="x"?"y":"x"}function LD(t){return t==="y"?"height":"width"}function vh(t){return["top","bottom"].includes(va(t))?"y":"x"}function ID(t){return RD(vh(t))}function Ame(t,e,n){n===void 0&&(n=!1);const r=mh(t),i=ID(t),s=LD(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Km(o)),[o,Km(o)]}function Tme(t){const e=Km(t);return[y_(t),e,y_(e)]}function y_(t){return t.replace(/start|end/g,e=>Cme[e])}function Pme(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Rme(t,e,n,r){const i=mh(t);let s=Pme(va(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(y_)))),s}function Km(t){return t.replace(/left|right|bottom|top/g,e=>Mme[e])}function Lme(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ime(t){return typeof t!="number"?Lme(t):{top:t,right:t,bottom:t,left:t}}function qm(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function $A(t,e,n){let{reference:r,floating:i}=t;const s=vh(e),o=ID(e),a=LD(o),l=va(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(mh(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Ome=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=$A(c,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:v}=a[g],{x:b,y,data:E,reset:T}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,d=y??d,h={...h,[m]:{...h[m],...E}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:u,y:d}=$A(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function iS(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ph(e,t),p=Ime(h),m=a[f?d==="floating"?"reference":"floating":d],v=qm(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},T=qm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:l}):b);return{top:(v.top-T.top+p.top)/E.y,bottom:(T.bottom-v.bottom+p.bottom)/E.y,left:(v.left-T.left+p.left)/E.x,right:(T.right-v.right+p.right)/E.x}}const kme=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=ph(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=va(i),b=va(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(b||!g?[Km(a)]:Tme(a));!f&&p!=="none"&&E.push(...Rme(a,g,p,y));const T=[a,...E],_=await iS(e,m),w=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&w.push(_[v]),d){const I=Ame(i,o,y);w.push(_[I[0]],_[I[1]])}if(M=[...M,{placement:i,overflows:w}],!w.every(I=>I<=0)){var x,S;const I=(((x=s.flip)==null?void 0:x.index)||0)+1,z=T[I];if(z)return{data:{index:I,overflows:M},reset:{placement:z}};let P=(S=M.filter(B=>B.overflows[0]<=0).sort((B,U)=>B.overflows[1]-U.overflows[1])[0])==null?void 0:S.placement;if(!P)switch(h){case"bestFit":{var R;const B=(R=M.map(U=>[U.placement,U.overflows.filter(j=>j>0).reduce((j,Z)=>j+Z,0)]).sort((U,j)=>U[1]-j[1])[0])==null?void 0:R[0];B&&(P=B);break}case"initialPlacement":P=a;break}if(i!==P)return{reset:{placement:P}}}return{}}}};async function Dme(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=va(n),a=mh(n),l=vh(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=ph(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Nme=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Dme(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Fme=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:v,y:b}=m;return{x:v,y:b}}},...l}=ph(t,e),c={x:n,y:r},u=await iS(e,l),d=vh(va(i)),f=RD(d);let h=c[f],p=c[d];if(s){const m=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=h+u[m],y=h-u[v];h=UA(b,h,y)}if(o){const m=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=p+u[m],y=p-u[v];p=UA(b,p,y)}const g=a.fn({...e,[f]:h,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},Bme=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=ph(t,e),l=await iS(e,a),c=va(n),u=mh(n),d=vh(n)==="y",{width:f,height:h}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,p=u==="end"?"top":"bottom");const m=h-l[p],v=f-l[g],b=!e.middlewareData.shift;let y=m,E=v;if(d){const _=f-l.left-l.right;E=u||b?gu(v,_):_}else{const _=h-l.top-l.bottom;y=u||b?gu(m,_):_}if(b&&!u){const _=fi(l.left,0),w=fi(l.right,0),M=fi(l.top,0),x=fi(l.bottom,0);d?E=f-2*(_!==0||w!==0?_+w:fi(l.left,l.right)):y=h-2*(M!==0||x!==0?M+x:fi(l.top,l.bottom))}await o({...e,availableWidth:E,availableHeight:y});const T=await i.getDimensions(s.floating);return f!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function ao(t){return sS(t)?(t.nodeName||"").toLowerCase():"#document"}function yi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _o(t){var e;return(e=(sS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sS(t){return t instanceof Node||t instanceof yi(t).Node}function lo(t){return t instanceof Element||t instanceof yi(t).Element}function Ss(t){return t instanceof HTMLElement||t instanceof yi(t).HTMLElement}function zA(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yi(t).ShadowRoot}function gh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Vi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Vme(t){return["table","td","th"].includes(ao(t))}function oS(t){const e=aS(),n=Vi(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ume(t){let e=yu(t);for(;Ss(e)&&!Rg(e);){if(oS(e))return e;e=yu(e)}return null}function aS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rg(t){return["html","body","#document"].includes(ao(t))}function Vi(t){return yi(t).getComputedStyle(t)}function Lg(t){return lo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function yu(t){if(ao(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zA(t)&&t.host||_o(t);return zA(e)?e.host:e}function OD(t){const e=yu(t);return Rg(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ss(e)&&gh(e)?e:OD(e)}function If(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=OD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=yi(i);return s?e.concat(o,o.visualViewport||[],gh(i)?i:[],o.frameElement&&n?If(o.frameElement):[]):e.concat(i,If(i,[],n))}function kD(t){const e=Vi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ss(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Xm(n)!==s||Xm(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lS(t){return lo(t)?t:t.contextElement}function qc(t){const e=lS(t);if(!Ss(e))return ma(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=kD(e);let o=(s?Xm(n.width):n.width)/r,a=(s?Xm(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $me=ma(0);function DD(t){const e=yi(t);return!aS()||!e.visualViewport?$me:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zme(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yi(t)?!1:e}function Dl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=lS(t);let o=ma(1);e&&(r?lo(r)&&(o=qc(r)):o=qc(t));const a=zme(s,n,r)?DD(s):ma(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=yi(s),h=r&&lo(r)?yi(r):r;let p=f,g=p.frameElement;for(;g&&r&&h!==p;){const m=qc(g),v=g.getBoundingClientRect(),b=Vi(g),y=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*m.x,E=v.top+(g.clientTop+parseFloat(b.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=y,c+=E,p=yi(g),g=p.frameElement}}return qm({width:u,height:d,x:l,y:c})}const Hme=[":popover-open",":modal"];function ND(t){return Hme.some(e=>{try{return t.matches(e)}catch{return!1}})}function Gme(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=_o(r),a=e?ND(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ma(1);const u=ma(0),d=Ss(r);if((d||!d&&!s)&&((ao(r)!=="body"||gh(o))&&(l=Lg(r)),Ss(r))){const f=Dl(r);c=qc(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function Wme(t){return Array.from(t.getClientRects())}function FD(t){return Dl(_o(t)).left+Lg(t).scrollLeft}function jme(t){const e=_o(t),n=Lg(t),r=t.ownerDocument.body,i=fi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+FD(t);const a=-n.scrollTop;return Vi(r).direction==="rtl"&&(o+=fi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Xme(t,e){const n=yi(t),r=_o(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=aS();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Kme(t,e){const n=Dl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ss(t)?qc(t):ma(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function HA(t,e,n){let r;if(e==="viewport")r=Xme(t,n);else if(e==="document")r=jme(_o(t));else if(lo(e))r=Kme(e,n);else{const i=DD(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return qm(r)}function BD(t,e){const n=yu(t);return n===e||!lo(n)||Rg(n)?!1:Vi(n).position==="fixed"||BD(n,e)}function qme(t,e){const n=e.get(t);if(n)return n;let r=If(t,[],!1).filter(a=>lo(a)&&ao(a)!=="body"),i=null;const s=Vi(t).position==="fixed";let o=s?yu(t):t;for(;lo(o)&&!Rg(o);){const a=Vi(o),l=oS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gh(o)&&!l&&BD(t,o))?r=r.filter(u=>u!==o):i=a,o=yu(o)}return e.set(t,r),r}function Yme(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?qme(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=HA(e,u,i);return c.top=fi(d.top,c.top),c.right=gu(d.right,c.right),c.bottom=gu(d.bottom,c.bottom),c.left=fi(d.left,c.left),c},HA(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zme(t){const{width:e,height:n}=kD(t);return{width:e,height:n}}function Jme(t,e,n){const r=Ss(e),i=_o(e),s=n==="fixed",o=Dl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ma(0);if(r||!r&&!s)if((ao(e)!=="body"||gh(i))&&(a=Lg(e)),r){const d=Dl(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=FD(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function GA(t,e){return!Ss(t)||Vi(t).position==="fixed"?null:e?e(t):t.offsetParent}function VD(t,e){const n=yi(t);if(!Ss(t)||ND(t))return n;let r=GA(t,e);for(;r&&Vme(r)&&Vi(r).position==="static";)r=GA(r,e);return r&&(ao(r)==="html"||ao(r)==="body"&&Vi(r).position==="static"&&!oS(r))?n:r||Ume(t)||n}const Qme=async function(t){const e=this.getOffsetParent||VD,n=this.getDimensions;return{reference:Jme(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function eve(t){return Vi(t).direction==="rtl"}const tve={convertOffsetParentRelativeRectToViewportRelativeRect:Gme,getDocumentElement:_o,getClippingRect:Yme,getOffsetParent:VD,getElementRects:Qme,getClientRects:Wme,getDimensions:Zme,getScale:qc,isElement:lo,isRTL:eve};function nve(t,e){let n=null,r;const i=_o(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=Fp(u),p=Fp(i.clientWidth-(c+d)),g=Fp(i.clientHeight-(u+f)),m=Fp(c),b={rootMargin:-h+"px "+-p+"px "+-g+"px "+-m+"px",threshold:fi(0,gu(1,l))||1};let y=!0;function E(T){const _=T[0].intersectionRatio;if(_!==l){if(!y)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(t)}return o(!0),s}function rve(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=lS(t),u=i||s?[...c?If(c):[],...If(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?nve(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=h)==null||y.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,g=l?Dl(t):null;l&&m();function m(){const v=Dl(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(m)}return n(),()=>{var v;u.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const ive=Fme,sve=kme,ove=Bme,ave=(t,e,n)=>{const r=new Map,i={platform:tve,...n},s={...i.platform,_c:r};return Ome(t,e,{...i,platform:s})};function lve(t){return t!=null&&typeof t=="object"&&"$el"in t}function WA(t){if(lve(t)){const e=t.$el;return sS(e)&&ao(e)==="#comment"?null:e}return t}function UD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jA(t,e){const n=UD(t);return Math.round(e*n)/n}function cve(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,i=A(()=>{var w;return(w=C(n.open))!=null?w:!0}),s=A(()=>C(n.middleware)),o=A(()=>{var w;return(w=C(n.placement))!=null?w:"bottom"}),a=A(()=>{var w;return(w=C(n.strategy))!=null?w:"absolute"}),l=A(()=>{var w;return(w=C(n.transform))!=null?w:!0}),c=A(()=>WA(t.value)),u=A(()=>WA(e.value)),d=le(0),f=le(0),h=le(a.value),p=le(o.value),g=st({}),m=le(!1),v=A(()=>{const w={position:h.value,left:"0",top:"0"};if(!u.value)return w;const M=jA(u.value,d.value),x=jA(u.value,f.value);return l.value?{...w,transform:"translate("+M+"px, "+x+"px)",...UD(u.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:M+"px",top:x+"px"}});let b;function y(){c.value==null||u.value==null||ave(c.value,u.value,{middleware:s.value,placement:o.value,strategy:a.value}).then(w=>{d.value=w.x,f.value=w.y,h.value=w.strategy,p.value=w.placement,g.value=w.middlewareData,m.value=!0})}function E(){typeof b=="function"&&(b(),b=void 0)}function T(){if(E(),r===void 0){y();return}if(c.value!=null&&u.value!=null){b=r(c.value,u.value,y);return}}function _(){i.value||(m.value=!1)}return De([s,o,a],y,{flush:"sync"}),De([c,u],T,{flush:"sync"}),De(i,_,{flush:"sync"}),Nf()&&Qm(E),{x:Xa(d),y:Xa(f),strategy:Xa(h),placement:Xa(p),middlewareData:Xa(g),isPositioned:Xa(m),floatingStyles:v,update:y}}const uve=(t,e,n,r)=>{const i=A(()=>{const{position:c,align:u}=MD({placement:r.value.placement});return`${c.value}-${u.value}`}),s=A(()=>{const c=r.value.offset,u={mainAxis:0,crossAxis:0};return Array.isArray(c)&&(u.mainAxis=c[0],u.crossAxis=c[1]),typeof c=="number"&&(u.mainAxis=c),u}),o=A(()=>{const{autoPlacement:c,stickToEdges:u,keepAnchorWidth:d,verticalScrollOnOverflow:f}=r.value,h=[Nme(s.value)];return c&&h.push(sve({boundary:n.value})),u&&h.push(ive()),(d||f)&&h.push(ove({apply({elements:p,availableHeight:g}){if(d){const v=p.reference.getBoundingClientRect().width;Object.assign(p.floating.style,{maxWidth:`${v}px`,minWidth:`${v}px`})}f&&Object.assign(p.floating.style,{maxHeight:`${g}px`})}})),h}),{floatingStyles:a,isPositioned:l}=typeof document>"u"?{floatingStyles:{},isPositioned:le(!1)}:cve(t,e,{placement:i,whileElementsMounted:rve,middleware:o,transform:!0});return{floatingStyles:A(()=>l.value?a.value:{position:"fixed"}),isPositioned:l}},dve=(t,e)=>!e||e instanceof Window?!1:e.parentElement===t?!0:t.contains(e),fve=t=>Array.isArray(t)?t:[t],hve=(t,e,n={})=>{let r=!1;n.onlyKeyboard&&bn("mousedown",i=>{r=!0,setTimeout(()=>{r=!1},200)},!0),bn("focus",i=>{if(n.onlyKeyboard&&r)return;const s=i.target;if(i.target.shadowRoot)return;fve(t).some(a=>{const l=Mn(C(a));return l&&dve(l,s)})||e(s)},!0)},m0=t=>A(()=>typeof(t==null?void 0:t.value)=="string"?document.querySelector(t.value):Mn(t==null?void 0:t.value)),pve=Me({name:"VaDropdown",props:{...ED,...iD(!0),modelValue:{type:Boolean,default:!1},anchor:{type:[String,Object],default:void 0},anchorSelector:{type:String,default:""},innerAnchorSelector:{type:String,default:""},trigger:{type:[String,Array],default:()=>["click","space","enter","arrow-down","arrow-up"]},disabled:{type:Boolean},readonly:{type:Boolean},closeOnClickOutside:{type:Boolean,default:!0},closeOnFocusOutside:{type:Boolean,default:!0},closeOnAnchorClick:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},hoverOverTimeout:{type:Number,default:30},hoverOutTimeout:{type:Number,default:200},isContentHoverable:{type:Boolean,default:!0},offset:{type:[Array,Number],default:0},keepAnchorWidth:{type:Boolean,default:!1},verticalScrollOnOverflow:{type:Boolean,default:!0},cursor:{type:[Boolean,Object],default:!1},autoPlacement:{type:Boolean,default:!0},stickToEdges:{type:Boolean,default:!1},target:{type:[String,Object],default:void 0},teleport:{type:[String,Object],default:void 0},keyboardNavigation:{type:Boolean,default:!0},ariaLabel:{type:String,default:"$t:toggleDropdown"},role:{type:String,default:"button"}},emits:[..._r,"anchor-click","anchor-right-click","content-click","click-outside","focus-outside","close","open","anchor-dblclick"],setup(t,{emit:e}){const{valueComputed:n}=pn(t,e,"modelValue");De(n,y=>{e(y?"open":"close")});const r=Eg(),{anchorRef:i}=Sme(t),s=Eme(i,A(()=>!!t.cursor)),o=ju("floating"),a=m0(le("body")),l=m0(A(()=>t.target)),c=m0(A(()=>t.teleport)),u=jt("va-dropdown",()=>wn(t,["disabled"])),d=A(()=>{if(c.value)return c.value;if(l.value)return l.value;if(i.value){const y=i.value.getRootNode();if(y instanceof ShadowRoot){const E=[...y.children].find(T=>T.tagName!=="STYLE");if(E)return E}}return a.value}),f=A(()=>r.value&&n.value);wme(n,i,o,t);const h=(y,E,T)=>{e(y,T),E&&(n.value=!1)};Tg([i,o],()=>{t.closeOnClickOutside&&n.value&&h("click-outside",t.closeOnClickOutside)}),hve([o],()=>{t.closeOnFocusOutside&&n.value&&h("focus-outside",t.closeOnFocusOutside)},{onlyKeyboard:!0});const p=A(()=>typeof t.cursor=="object"?t.cursor:t.cursor?s.value:i.value),{floatingStyles:g}=uve(p,o,l,A(()=>({placement:t.placement,offset:t.offset,autoPlacement:t.autoPlacement,stickToEdges:t.stickToEdges,keepAnchorWidth:t.keepAnchorWidth,verticalScrollOnOverflow:t.verticalScrollOnOverflow}))),m=()=>{n.value=!1},v=()=>{n.value=!0},{zIndex:b}=rD(n);return De(n,y=>{if(t.keyboardNavigation)if(y)cn(()=>{const E=Mn(o.value);E&&v_(E)});else{if(!i.value)return;v_(i.value)}}),{...rn(),...lD(),anchorRef:i,anchorClass:u,floating:o,floatingStyles:g,showFloating:f,teleportTarget:d,isMounted:r,valueComputed:n,hide:m,show:v,zIndex:b}},render(){const t={isOpened:this.valueComputed,hide:this.hide,show:this.show,toggle:()=>this.valueComputed?this.hide():this.show(),getAnchorWidth:()=>{var r;return((r=this.anchorRef)==null?void 0:r.offsetWidth)+"px"},getAnchorHeight:()=>{var r;return((r=this.anchorRef)==null?void 0:r.offsetHeight)+"px"}},e=this.showFloating&&_A(this.$slots.default,t,{ref:"floating",class:"va-dropdown__content-wrapper",style:[this.floatingStyles,{zIndex:this.zIndex}],...this.teleportedAttrs}),n=_A(this.$slots.anchor,t,{ref:"anchorRef",role:this.$props.role,class:["va-dropdown",...this.anchorClass.asArray.value],style:{position:"relative"},"aria-label":this.tp(this.$props.ariaLabel),"aria-disabled":this.$props.disabled,"aria-expanded":this.$props.role&&this.$props.role!=="none"?!!this.showFloating:void 0,...this.teleportFromAttrs,...this.$attrs});if(typeof this.$props.cursor=="object"&&e)return Nt(rf,{to:this.teleportTarget,disabled:this.$props.disabled},[e]);if(!this.$props.anchorSelector&&!n){qt("VaDropdown: #anchor slot is missing");return}if(this.showFloating&&!e){qt("VaDropdown: default slot is missing");return}return Nt(qe,{},[n,e&&Nt(rf,{to:this.teleportTarget,disabled:this.$props.disabled},[e])])}}),bi=ze(pve),mve=Me({name:"VaDropdownContent",__name:"VaDropdownContent",props:{noPadding:{type:Boolean,default:!1},background:{type:String,default:"background-secondary"},textColor:{type:String}},setup(t){const e=t,{getColor:n}=ct(),{textColorComputed:r}=Hn(or(e,"background")),i=A(()=>({background:n(e.background,void 0,!0),color:r.value,padding:e.noPadding?0:void 0}));return(s,o)=>(V(),ee("div",{class:"va-dropdown__content",style:Be(i.value),role:"listbox"},[se(s.$slots,"default")],4))}}),Nl=ze(mve),XA=t=>typeof t=="object"?t.listen:t,v0=t=>typeof t=="object"?t.emit:t,Ql=t=>{const e=()=>t.map(v0),n=s=>`on${s.charAt(0).toUpperCase()+s.slice(1)}`;return{createListeners:s=>t.reduce((o,a)=>({...o,[n(XA(a))]:(...l)=>s(v0(a),...l)}),{}),createVOnListeners:s=>t.reduce((o,a)=>({...o,[XA(a)]:(...l)=>s(v0(a),...l)}),{}),createEmits:e}},{createEmits:vve,createVOnListeners:gve}=Ql(["click"]),{createEmits:yve,createVOnListeners:bve}=Ql([{listen:"click",emit:"main-button-click"}]),KA=ho(It(Pt),["iconRight","block"]),qA=It(bi),_ve=Me({name:"VaButtonDropdown",__name:"VaButtonDropdown",props:{...rt,...KA,...qA,...Fn,...ED,modelValue:{type:Boolean,default:!1},stateful:{type:Boolean,default:!0},icon:{type:String,default:"va-arrow-down"},openedIcon:{type:String,default:"va-arrow-up"},hideIcon:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},iconColor:{type:String,default:""},disabled:{type:Boolean,default:!1},disableButton:{type:Boolean,default:!1},disableDropdown:{type:Boolean,default:!1},offset:{type:[Number,Array],default:2},keepAnchorWidth:{type:Boolean,default:!1},closeOnContentClick:{type:Boolean,default:!0},split:{type:Boolean},splitTo:{type:String,default:""},splitHref:{type:String,default:""},loading:{type:Boolean,default:!1},label:{type:String},ariaLabel:{type:String,default:"$t:toggleDropdown"}},emits:["update:modelValue",...vve(),...yve()],setup(t,{expose:e,emit:n}){const r=t,i=n,{valueComputed:s}=pn(r,i),o=A(()=>s.value?r.openedIcon:r.icon),a=jt("va-button-dropdown",()=>({split:r.split})),l=Cr(),c=A(()=>r.hideIcon?{}:{[(r.label||l.label)&&!r.leftIcon?"icon-right":"icon"]:o.value}),u=A(()=>{let y=["to","href","loading","icon"];const E=["plain","textOpacity","backgroundOpacity","hoverOpacity","hoverBehavior","hoverOpacity","pressedOpacity","pressedBehavior","pressedOpacity"];r.preset&&(y=[...y,...E]);const T=ho(KA,y);return Object.keys(T)}),d=A(()=>Object.entries(r).filter(([y,E])=>u.value.includes(y)).reduce((y,[E,T])=>(Object.assign(y,{[E]:T}),y),{})),f=A(()=>({to:r.splitTo,href:r.splitHref,loading:r.loading})),h=()=>{s.value=!1},p=tn(qA),g=gve(i),m=bve(i),{t:v,tp:b}=rn();return e({hideDropdown:h}),(y,E)=>(V(),ee("div",{class:Qe(["va-button-dropdown",C(a)])},[y.$props.split?(V(),Te(C(Pg),Ue(Re({key:1},d.value)),{default:we(()=>[y.$props.leftIcon?ve("",!0):(V(),Te(C(Pt),Re({key:0,disabled:y.$props.disabled||y.$props.disableButton},f.value,mi(C(m))),{default:we(()=>[se(y.$slots,"label",{},()=>[gt(Ze(t.label),1)])]),_:3},16,["disabled"])),ke(C(bi),Re(C(p),{modelValue:C(s),"onUpdate:modelValue":E[1]||(E[1]=T=>Xt(s)?s.value=T:null),disabled:y.$props.disabled||y.$props.disableDropdown,teleport:y.$el}),{anchor:we(()=>[ke(C(Pt),Re({"aria-label":y.$props.ariaLabel||C(v)("toggleDropdown"),disabled:y.$props.disabled||y.$props.disableDropdown,icon:o.value,"icon-color":y.$props.iconColor},mi(C(g)),{onKeydown:We(He(h,["prevent"]),["esc"])}),null,16,["aria-label","disabled","icon","icon-color","onKeydown"])]),default:we(()=>[ke(C(Nl),null,{default:we(()=>[se(y.$slots,"default")]),_:3})]),_:3},16,["modelValue","disabled","teleport"]),y.$props.leftIcon?(V(),Te(C(Pt),Re({key:1,disabled:y.$props.disabled||y.$props.disableButton},f.value,mi(C(m))),{default:we(()=>[se(y.$slots,"label",{},()=>[gt(Ze(t.label),1)])]),_:3},16,["disabled"])):ve("",!0)]),_:3},16)):(V(),Te(C(bi),Re({key:0},C(p),{modelValue:C(s),"onUpdate:modelValue":E[0]||(E[0]=T=>Xt(s)?s.value=T:null),disabled:y.$props.disabled||y.$props.disableDropdown}),{anchor:we(()=>[ke(C(Pt),Re({"aria-label":C(b)(y.$props.ariaLabel)},{...c.value,...d.value},mi(C(g))),{default:we(()=>[se(y.$slots,"label",{},()=>[gt(Ze(t.label),1)])]),_:3},16,["aria-label"])]),default:we(()=>[se(y.$slots,"content",{},()=>[ke(C(Nl),null,{default:we(()=>[se(y.$slots,"default")]),_:3})])]),_:3},16,["modelValue","disabled"]))],2))}}),xve=ze(_ve),Of=t=>[null,void 0,""].includes(t),$D=(t,e)=>{if(e.length===0)return t;const n=t[e[0]];return yZ(n)?$D(n,e.slice(1)):e.length===1?n:void 0},cS=(t,e)=>e in t?t[e]:(e=e.replace(/^\./,""),$D(t,e.split("."))),zD=(t,e)=>{if(!(Of(t)||typeof t!="object"||Array.isArray(t)))return e?typeof e=="string"?cS(t,e):typeof e=="function"?e(t):t:t},qd=t=>t!==null&&typeof t=="object",Xu={options:{type:Array,default:()=>[]},textBy:{type:[String,Function],default:"text"},valueBy:{type:[String,Function],default:""},trackBy:{type:[String,Function],default:""},disabledBy:{type:[String,Function],default:"disabled"},groupBy:{type:[String,Function],default:"group"}};function Ku(t){const e=l=>{const c=t.options;for(let u=0;u<c.length;u++)if(a(c[u])===l)return c[u];return l},n=(l,c)=>qd(l)?zD(l,c):l,r=l=>t.trackBy?n(l,t.trackBy):a(l),i=l=>qd(l)?n(l,t.disabledBy):!1,s=l=>{const c=n(l,t.textBy);return["number","boolean"].includes(typeof c)?String(c):c},o=l=>{if(qd(l))return n(l,t.groupBy)},a=l=>n(l,t.valueBy);return{tryResolveByValue:e,getValue:a,getText:s,getDisabled:i,getTrackBy:r,getGroupBy:o}}const YA=It(Pg),wve=Me({name:"VaButtonToggle",__name:"VaButtonToggle",props:{...YA,...rt,...Xu,modelValue:{type:[String,Number,Boolean],default:""},options:{type:Array,required:!0},activeButtonTextColor:{type:String},toggleColor:{type:String,default:""},textBy:{type:[String,Function],default:"label"},valueBy:{type:[String,Function],default:"value"}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{getText:i,getTrackBy:s}=Ku(n),{getColor:o,shiftHSLAColor:a}=ct(),l=A(()=>o(n.color)),c=m=>s(m)===n.modelValue,u=A(()=>n.toggleColor?o(n.toggleColor):a(l.value,{l:n.plain?-16:-6})),d=A(()=>!n.preset||n.preset==="default"?{}:{backgroundOpacity:n.pressedOpacity}),f=A(()=>({color:u.value,textColor:n.activeButtonTextColor,...d.value})),h=(m={})=>{const v={icon:m.icon,iconRight:m.iconRight};return c(m)?{...c(m)&&f.value,...v}:v},p=tn(YA),g=m=>r("update:modelValue",s(m));return(m,v)=>(V(),Te(C(Pg),Re({class:"va-button-toggle"},C(p)),{default:we(()=>[(V(!0),ee(qe,null,vt(t.options,b=>(V(),Te(C(Pt),Re({key:C(s)(b),"aria-pressed":c(b)},h(b),{onClick:y=>g(b)}),{default:we(()=>[gt(Ze(C(i)(b)),1)]),_:2},1040,["aria-pressed","onClick"]))),128))]),_:1},16))}}),Sve=ze(wve),Eve=Me({name:"VaCard",__name:"VaCard",props:{...Jl,...rt,tag:{type:String,default:"div"},square:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},bordered:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:""},stripe:{type:Boolean,default:!1},stripeColor:{type:String,default:""},gradient:{type:Boolean,default:!1},textColor:{type:String},color:{type:String,default:"background-secondary"}},setup(t){const e=t,{getColor:n}=ct(),{isLinkTag:r,tagComputed:i,hrefComputed:s}=Ma(e),{textColorComputed:o}=Hn(A(()=>n(e.color))),a=A(()=>n(e.stripeColor)),l=jt("va-card",()=>({...wn(e,["square","outlined","disabled","stripe"]),noBorder:!e.bordered,link:r.value})),c=A(()=>({background:e.gradient&&e.color?Yw(n(e.color)):n(e.color),color:o.value}));return(u,d)=>(V(),Te(mr(C(i)),{class:Qe(["va-card",C(l)]),style:Be([c.value,`--va-stripe-color-computed: ${String(a.value)}`]),href:C(s),target:t.target,to:u.to,replace:u.replace,exact:u.exact,"active-class":u.activeClass,"exact-active-class":u.exactActiveClass},{default:we(()=>[se(u.$slots,"default")]),_:3},8,["class","style","href","target","to","replace","exact","active-class","exact-active-class"]))}}),Mve={class:"va-card__content"},Cve=Me({name:"VaCardContent",__name:"VaCardContent",setup(t){return(e,n)=>(V(),ee("div",Mve,[se(e.$slots,"default")]))}}),Ave=Me({name:"VaCardTitle",__name:"VaCardTitle",props:{...rt,textColor:{type:String}},setup(t){const e=t,{getColor:n}=ct(),r=A(()=>({color:e.textColor?n(e.textColor):""}));return(i,s)=>(V(),ee("div",{class:"va-card-title va-card__title",style:Be(r.value)},[se(i.$slots,"default",{},void 0,!0)],4))}}),ec=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Tve=ec(Ave,[["__scopeId","data-v-5cd66b25"]]),Pve=Me({name:"VaCardActions",__name:"VaCardActions",props:{...TD,...rt},setup(t){const e=t,{alignComputed:n}=PD(e),r=jt("va-card__actions",()=>({...wn(e,["vertical"])}));return(i,s)=>(V(),ee("div",{class:Qe(["va-card__actions",C(r)]),style:Be(C(n))},[se(i.$slots,"default")],6))}}),Rve=Me({name:"VaCardBlock",__name:"VaCardBlock",props:{horizontal:{type:Boolean,default:!1}},setup(t){const e=t,n=A(()=>({"va-card-block--horizontal":e.horizontal}));return(r,i)=>(V(),ee("div",{class:Qe(["va-card-block",n.value])},[se(r.$slots,"default")],2))}}),Lve=ze(Cve),Ive=ze(Tve),Ove=ze(Pve),kve=ze(Rve),Dve=ze(Eve),Nve=(t,e)=>{const n=l=>{e.value=l},r=()=>{if(t.infinite&&e.value<=0){e.value=t.items.length-1;return}e.value-=1},i=()=>{if(t.infinite&&e.value>=t.items.length-1){e.value=0;return}e.value+=1},s=A(()=>t.items.length>1),o=A(()=>e.value>0||t.infinite),a=A(()=>e.value<t.items.length-1||t.infinite);return{doShowPrevButton:o,doShowNextButton:a,doShowDirectionButtons:s,goTo:n,prev:r,next:i}},Fve=(t,e)=>{let n=-1;const r=()=>{t.autoscroll&&(clearInterval(n),n=setInterval(()=>{e.value+=1,e.value>=t.items.length&&(e.value=0)},t.autoscrollInterval))};let i;const s=()=>{t.autoscroll&&(clearInterval(n),i=setTimeout(()=>{r(),clearTimeout(i)},t.autoscrollPauseDuration))},o=()=>{clearInterval(n),clearTimeout(i)};kt(()=>r()),Sn(()=>o());const a=h=>(...p)=>{s(),h(...p)},l=le({transition:void 0}),c=le(0),u=A(()=>t.effect==="fade"?{...l.value,transition:"none"}:t.vertical?{...l.value,transform:`translateY(${c.value*-100}%)`}:{...l.value,transform:`translateX(${c.value*-100}%)`}),d={isAnimating:!1,speed:.3,order:[],move(h,p){const g=t.items.length-1,m=t.items.length;p===0&&h===g?(this.order.push({to:m}),this.order.push({to:0,animate:!1})):p===g&&h===0?(this.order.push({to:m,animate:!1}),this.order.push({to:p})):this.order.push({to:p}),this.isAnimating||this.runAnimation()},runAnimation(){this.isAnimating=!0;const h=this.order.shift();if(!h){this.isAnimating=!1;return}c.value=h==null?void 0:h.to,h.animate||h.animate===void 0?(l.value.transition=`all ${this.speed}s linear`,setTimeout(()=>{this.runAnimation()},this.speed*1e3)):(l.value.transition="none",setTimeout(()=>{this.runAnimation()},16))}};De(e,(h,p)=>{d.move(p,h)});const f=A(()=>t.effect==="fade"?[t.items[e.value]]:t.infinite||t.autoscroll?[...t.items,t.items[0]]:t.items);return{start:r,pause:s,stop:o,withPause:a,computedSlidesStyle:u,slides:f}},Bve=()=>{const{setHSLAColor:t,getColor:e}=ct();return{computedColor:A(()=>t(e("background-element"),{a:.7})),computedHoverColor:A(()=>t(e("primary"),{a:.7})),computedActiveColor:A(()=>e("primary"))}},Vve={src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""},sizes:{type:String,default:""},srcset:{type:String,default:""},draggable:{type:Boolean,default:!0},loading:{type:String},crossorigin:{type:String},decoding:{type:String},fetchpriority:{type:String,default:"auto"},referrerpolicy:{type:String}},Uve=t=>A(()=>wn(t,["src","alt","title","sizes","srcset","loading","referrerpolicy","fetchpriority","decoding","crossorigin","draggable"])),HD=(t,e=le({}),n=le([]),r=!0)=>{const i=le(),s=()=>{var u;(u=i.value)==null||u.disconnect()},o=u=>{var d;const f=Mn(C(u));f&&((d=i.value)==null||d.observe(f))},a=u=>{u.forEach(o)},l=()=>{i.value=new IntersectionObserver(t,e.value)},c=A(()=>!r||!(typeof window<"u"&&"IntersectionObserver"in window));return De([n,e],([u])=>{c.value||(s(),u&&(l(),Array.isArray(u)?a(u):o(u)))},{immediate:!0}),Sn(s),{isIntersectionDisabled:c}},$ve=["aria-busy"],zve={key:0,class:"va-image__overlay"},Hve={key:1,class:"va-image__error"},Gve={key:2,class:"va-image__loader"},Wve={key:3,class:"va-image__placeholder"},jve=["src"],ZA=It(vu),Xve=Me({name:"VaImage",__name:"VaImage",props:{...rt,...Vve,...ZA,ratio:{type:[Number,String],default:"auto",validator:t=>typeof t=="number"?t>0:t==="auto"},fit:{type:String,default:"cover"},maxWidth:{type:Number,default:0,validator:t=>t>=0},lazy:{type:Boolean,default:!1},placeholderSrc:{type:String,default:""}},emits:["loaded","error","fallback"],setup(t,{emit:e}){const n=t,r=e,i=le(),s=le(),o=le(),a=A(()=>o.value||n.src),l=le(1),c=le(1),u=le(!1),d=le(!1),f=()=>{var K;u.value=!0,v.value&&(u.value=!1,o.value=(K=s.value)==null?void 0:K.currentSrc,_(),r("loaded",a.value))},h=K=>{d.value=!0,u.value=!1,r("error",K||a.value)},p=le(!1),g=(K,fe)=>{K.forEach(Se=>{Se.isIntersecting&&(p.value=!0,E(),fe.disconnect())})},{isIntersectionDisabled:m}=HD(g,void 0,i,n.lazy),v=A(()=>m.value||p.value),b=Eg(),y=A(()=>!n.lazy||n.lazy&&b.value&&v.value),E=()=>{!n.src||u.value&&m.value||!v.value||(u.value=!0,d.value=!1,cn(()=>{var K;if((K=s.value)!=null&&K.complete){if(!s.value.naturalWidth){h();return}f()}}))};let T;const _=()=>{clearTimeout(T),u.value&&(T=window.setTimeout(_,100));const{naturalHeight:K,naturalWidth:fe}=s.value||{};K&&fe&&(l.value=K,c.value=fe)};H_(E),Sn(()=>clearTimeout(T)),De(()=>n.src,E);const w=Cr(),M=A(()=>{var K;return((K=w==null?void 0:w.placeholder)==null?void 0:K.call(w))||n.placeholderSrc}),x=A(()=>{var K;return u.value&&!((K=w==null?void 0:w.loader)!=null&&K.call(w))}),S=A(()=>{var K;return d.value&&!((K=w==null?void 0:w.error)!=null&&K.call(w))&&!Z.value}),R=A(()=>(x.value||S.value)&&M.value),I=A(()=>!(u.value||d.value)),z=Uve(n),P=A(()=>({...wn(n,["ratio","maxWidth"]),contentWidth:l.value,contentHeight:c.value})),B=tn(ZA),U=K=>!!Object.values(K||{}).filter(fe=>fe).length,j=A(()=>{var K,fe,Se,de;return U((de=(Se=(fe=(K=po())==null?void 0:K.globalConfig)==null?void 0:fe.value)==null?void 0:Se.components)==null?void 0:de.VaFallback)}),Z=A(()=>U(B.value)||j.value),ne=A(()=>n.fit);return(K,fe)=>(V(),Te(C(bD),Re({ref_key:"root",ref:i,class:"va-image"},P.value,{style:`--va-fit-computed: ${String(ne.value)}`}),{default:we(()=>[Fi(me("picture",{class:"va-image__content","aria-busy":u.value},[K.$slots.sources?se(K.$slots,"sources",{key:0}):ve("",!0),y.value?(V(),ee("img",Re({key:1,ref_key:"image",ref:s},C(z),{onError:h,onLoad:f}),null,16)):ve("",!0)],8,$ve),[[_l,I.value]]),K.$slots.default&&I.value?(V(),ee("div",zve,[se(K.$slots,"default")])):ve("",!0),d.value&&(K.$slots.error||Z.value)?(V(),ee("div",Hve,[se(K.$slots,"error",{},()=>[ke(C(vu),Re(C(B),{onFallback:fe[0]||(fe[0]=Se=>K.$emit("fallback"))}),null,16)])])):ve("",!0),u.value&&K.$slots.loader?(V(),ee("div",Gve,[se(K.$slots,"loader")])):ve("",!0),R.value?(V(),ee("div",Wve,[se(K.$slots,"placeholder",{},()=>[K.$props.placeholderSrc?(V(),ee("img",{key:0,src:K.$props.placeholderSrc,alt:""},null,8,jve)):ve("",!0)])])):ve("",!0)]),_:3},16,["style"]))}}),uS=ze(Xve),Kve=Me({name:"VaHover",__name:"VaHover",props:{...iD(!0),...rt,disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:[..._r],setup(t,{emit:e}){const n=t,r=e,{valueComputed:i}=pn(n,r),s=()=>{n.disabled||(i.value=!0)},o=()=>{n.disabled||(i.value=!1)};return(a,l)=>(V(),ee("div",{class:"va-hover",onMouseenter:s,onMouseleave:o},[se(a.$slots,"default",Ue(je({hover:C(i)})))],32))}}),um=ze(Kve),qve=["mousedown","mousemove"],Yve=["touchstart","touchmove"],dS={vertical:["","all","vertical"],horizontal:["","all","horizontal"]},Zve=[...dS.vertical,"up","down"],Jve=[...dS.horizontal,"left","right"],Qve={swipable:{type:Boolean,default:!1},swipeDistance:{type:Number,default:75},swipeDirection:{type:String,default:"all"}},ege=(t,e,n)=>{const r=le(!1),i=Sr({start:{x:0,y:0},end:{x:0,y:0}}),s=Sr({start:0,end:0}),o=(p,g)=>{let m;if(qve.includes(p.type)&&(m=p),Yve.includes(p.type)){const v=p;m=v.changedTouches[v.changedTouches.length-1]}m&&(i[g].x=m.pageX,i[g].y=m.pageY,s[g]=new Date().getTime())},a=p=>{!t.swipable||r.value||(r.value=!0,o(p,"start"))},l=p=>{r.value&&o(p,"end")},c=()=>{["start","end"].forEach(p=>{i[p].x=0,i[p].y=0,s[p]=0}),r.value=!1},u=Sr({vertical:!1,horizontal:!1});Yn(()=>{u.horizontal=Jve.includes(t.swipeDirection),u.vertical=Zve.includes(t.swipeDirection)});const d=p=>u[p==="x"?"horizontal":"vertical"]&&i.start[p]&&i.end[p]?Math.trunc(i.start[p]-i.end[p]):0,f=(p,g)=>g===t.swipeDirection||dS[p].includes(t.swipeDirection)?g:"",h=Sr({direction:"",duration:0});return De(i,()=>{const p=d("x"),g=d("y");if((p||g)&&[p,g].some(m=>Math.abs(m)>=t.swipeDistance)){if(Math.abs(p)>=Math.abs(g)&&u.horizontal){const m=p>0?"left":"right";h.direction=f("horizontal",m)}else if(Math.abs(p)<Math.abs(g)&&u.vertical){const m=g>0?"down":"up";h.direction=f("vertical",m)}h.duration=s.end-s.start,c()}},{deep:!0}),De(h,()=>n(h),{deep:!0}),t.swipable&&(bn(["touchstart","mousedown"],a,e),bn(["touchmove","mousemove"],l,e),bn(["touchcancel","mouseup","touchend","mouseleave"],c,e)),{swipeState:h}},tge=["aria-label"],nge={key:1,class:"va-carousel__indicators"},rge={class:"va-carousel__content"},ige=["aria-hidden","aria-current","aria-label"],JA=It(uS,["src","alt"]),sge=Me({name:"VaCarousel",__name:"VaCarousel",props:{...Qve,...Fn,...rt,...JA,stateful:{type:Boolean,default:!0},modelValue:{type:Number,default:0},items:{type:Array,required:!0},autoscroll:{type:Boolean,default:!1},autoscrollInterval:{type:Number,default:5e3},autoscrollPauseDuration:{type:Number,default:2e3},infinite:{type:Boolean,default:!0},fadeKeyframe:{type:String,default:"va-carousel-fade-appear 1s"},arrows:{type:Boolean,default:!0},indicators:{type:Boolean,default:!0},indicatorTrigger:{type:String,default:"click",validator:t=>["click","hover","none"].includes(t)},vertical:{type:Boolean,default:!1},height:{type:String,default:"300px"},effect:{type:String,default:"transition",validator:t=>["fade","transition"].includes(t)},color:{type:String,default:"primary"},ratio:{type:Number},ariaLabel:{type:String,default:"$t:carousel"},ariaPreviousLabel:{type:String,default:"$t:goPreviousSlide"},ariaNextLabel:{type:String,default:"$t:goNextSlide"},ariaGoToSlideLabel:{type:String,default:"$t:goSlide"},ariaSlideOfLabel:{type:String,default:"$t:slideOf"}},emits:[..._r],setup(t,{expose:e,emit:n}){const r=t,i=n,{valueComputed:s}=pn(r,i,"modelValue"),{goTo:o,next:a,prev:l,doShowNextButton:c,doShowPrevButton:u,doShowDirectionButtons:d}=Nve(r,s),{withPause:f,computedSlidesStyle:h,slides:p}=Fve(r,s),g=A(()=>r.items.length&&r.items.every(P=>!!P&&typeof P=="object"&&!!(P!=null&&P.src))),m=P=>P===s.value,v=A(()=>({animation:r.effect==="fade"?"fadeKeyframe":void 0})),b=st();ege(r,b,P=>{switch(P.direction){case"right":case"up":u.value&&l();break;case"left":case"down":c.value&&a()}});const E=P=>r.indicatorTrigger==="hover"?{onmouseover:()=>o(P)}:r.indicatorTrigger==="click"?{onclick:()=>o(P)}:{},{tp:T,t:_}=rn(),{computedActiveColor:w,computedColor:M,computedHoverColor:x}=Bve(),S=tn(JA),R=f(o),I=f(l),z=f(a);return e({currentSlide:s,goTo:o,next:a,prev:l,goToWithPause:R,prevWithPause:I,nextWithPause:z}),(P,B)=>(V(),ee("div",{class:Qe(["va-carousel",{"va-carousel--vertical":P.$props.vertical,[`va-carousel--${P.$props.effect}`]:!0}]),style:Be({height:t.ratio?"auto":t.height}),role:"region","aria-label":C(T)(P.$props.ariaLabel)},[P.$props.arrows&&C(d)?(V(),ee(qe,{key:0},[C(u)?(V(),ee("div",{key:0,class:"va-carousel__arrow va-carousel__arrow--left",onClick:B[0]||(B[0]=(...U)=>C(I)&&C(I)(...U)),onKeydown:B[1]||(B[1]=We(He((...U)=>C(I)&&C(I)(...U),["stop"]),["enter"]))},[se(P.$slots,"prev-arrow",{},()=>[ke(C(um),{stateful:""},{default:we(({hover:U})=>[ke(C(Pt),{color:C(U?x:M),icon:t.vertical?"va-arrow-up":"va-arrow-left","aria-label":C(T)(P.$props.ariaPreviousLabel)},null,8,["color","icon","aria-label"])]),_:1})])],32)):ve("",!0),C(c)?(V(),ee("div",{key:1,class:"va-carousel__arrow va-carousel__arrow--right",onClick:B[2]||(B[2]=(...U)=>C(z)&&C(z)(...U)),onKeydown:B[3]||(B[3]=We(He((...U)=>C(z)&&C(z)(...U),["stop"]),["enter"]))},[se(P.$slots,"next-arrow",{},()=>[ke(C(um),{stateful:""},{default:we(({hover:U})=>[ke(C(Pt),{color:C(U?x:M),icon:t.vertical?"va-arrow-down":"va-arrow-right","aria-label":C(T)(P.$props.ariaNextLabel)},null,8,["color","icon","aria-label"])]),_:1})])],32)):ve("",!0)],64)):ve("",!0),P.$props.indicators?(V(),ee("div",nge,[(V(!0),ee(qe,null,vt(P.$props.items,(U,j)=>(V(),ee("div",Re({class:["va-carousel__indicator",{"va-carousel__indicator--active":m(j)}],key:j},E(j)),[se(P.$slots,"indicator",Ue(je({item:U,index:j,goTo:C(R),isActive:m(j)})),()=>[ke(C(um),{stateful:""},{default:we(({hover:Z})=>[ke(C(Pt),{"aria-label":C(T)(P.$props.ariaGoToSlideLabel,{index:j+1}),round:"",color:m(j)?C(w):C(Z?x:M)},{default:we(()=>[gt(Ze(j+1),1)]),_:2},1032,["aria-label","color"])]),_:2},1024)])],16))),128))])):ve("",!0),me("div",rge,[me("div",{ref_key:"slidesContainer",ref:b,class:"va-carousel__slides",style:Be(C(h)),role:"list"},[(V(!0),ee(qe,null,vt(C(p),(U,j)=>(V(),ee("div",{key:U,role:"listitem",class:"va-carousel__slide",style:Be(v.value),"aria-hidden":!m(j),"aria-current":m(j),"aria-label":C(T)(P.$props.ariaSlideOfLabel,{index:j+1,length:C(p).length})},[se(P.$slots,"default",Ue(je({item:U,index:j,goTo:C(R),isActive:m(j)})),()=>[ke(C(uS),Re(C(S),{src:g.value?U.src:U,alt:g.value?U.alt:"",draggable:!1}),null,16,["src","alt"])])],12,ige))),128))],4)])],14,tge))}}),oge=ze(sge),fS={...Fn,...fh,...go,arrayValue:{type:[String,Boolean,Object,Number],default:null},label:{type:String,default:""},leftLabel:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},indeterminate:{type:Boolean,default:!1},indeterminateValue:{type:null,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},Ig=[...Ea,"update:modelValue","focus","blur"],age=t=>{const e=[t.falseValue,t.trueValue];if(t.indeterminate&&e.push(t.indeterminateValue),new Set(e).size!==e.length)throw new Error("falseValue, trueValue, indeterminateValue props should have strictly different values, which is not the case.")},hS=(t,e,{input:n,label:r,container:i})=>{age(t);const s=()=>f(()=>{e("update:modelValue",!1),h()}),o=()=>{var _;(_=Mn(n.value))==null||_.focus()},{valueComputed:a}=pn(t,e),{computedError:l,computedErrorMessages:c,validate:u,validationAriaAttributes:d,withoutValidation:f,resetValidation:h}=yo(t,e,{reset:s,focus:o,value:a}),{isFocused:p}=bo(),g=_=>!!_&&[Mn(r.value),Mn(i.value)].includes(_),m=_=>{n.value===_.target&&!g(_.relatedTarget)&&(p.value=!1,u(),e("blur",_))},v=_=>{p.value=!0,e("focus",_)},b=A(()=>t.indeterminate&&a.value===t.indeterminateValue),y=A(()=>t.arrayValue!==void 0&&t.arrayValue!==null),E=A(()=>{var _;return y.value?(_=t.modelValue)==null?void 0:_.includes(t.arrayValue):a.value===t.trueValue});return{isChecked:E,isIndeterminate:b,onBlur:m,onFocus:v,toggleSelection:()=>{if(!(t.readonly||t.disabled||t.loading)){if(y.value){t.modelValue?Array.isArray(t.modelValue)?t.modelValue.includes(t.arrayValue)?e("update:modelValue",t.modelValue.filter(_=>_!==t.arrayValue)):e("update:modelValue",t.modelValue.concat(t.arrayValue)):e("update:modelValue",t.modelValue===t.arrayValue?[]:[t.modelValue,t.arrayValue]):e("update:modelValue",[t.arrayValue]);return}if(t.indeterminate){b.value?a.value=t.trueValue:E.value?a.value=t.falseValue:a.value=t.indeterminateValue;return}E.value?a.value=t.falseValue:a.value=t.trueValue}},reset:s,focus:o,computedError:l,computedErrorMessages:c,validationAriaAttributes:d}};var QA;function qu(){const t=le(!1);let e=!1;return{hasKeyboardFocus:t,keyboardFocusListeners:{mousedown:()=>{e=!0},focus:()=>{e||(t.value=!0),e=!1},blur:()=>{t.value=!1,e=!1}}}}let b_=!1;(QA=qk())==null||QA.addEventListener("mousedown",()=>{b_=!0,setTimeout(()=>{b_=!1},300)});function lge(){const t=le(!1);return{hasKeyboardFocus:t,keyboardFocusListeners:{focus:()=>{b_||(t.value=!0)},blur:()=>{t.value=!1}}}}const cge=["id","indeterminate","value","checked"],uge=["for"],eT=[Boolean,Array,String,Object],dge=Me({name:"VaCheckbox",__name:"VaCheckbox",props:{...fS,...rt,modelValue:{type:eT,default:!1},color:{type:String,default:"primary"},checkedIcon:{type:String,default:"va-check"},indeterminate:{type:Boolean,default:!1},indeterminateValue:{type:eT,default:null},indeterminateIcon:{type:String,default:"remove"},id:{type:String,default:""},name:{type:String,default:""},ariaLabel:{type:String,default:void 0},vertical:{type:Boolean,default:!1}},emits:Ig,setup(t,{expose:e,emit:n}){const r=t,i=n,s={container:st(),input:st(),label:st()},{isChecked:o,computedError:a,isIndeterminate:l,computedErrorMessages:c,validationAriaAttributes:u,toggleSelection:d,onBlur:f,onFocus:h}=hS(r,i,s),{getColor:p}=ct(),{hasKeyboardFocus:g,keyboardFocusListeners:m}=qu(),{textColorComputed:v}=Hn(A(()=>p(r.color))),b=A(()=>o.value||l.value),y=A(()=>({"va-checkbox--selected":o.value,"va-checkbox--readonly":r.readonly,"va-checkbox--disabled":r.disabled,"va-checkbox--indeterminate":r.indeterminate,"va-checkbox--error":a.value,"va-checkbox--left-label":r.leftLabel,"va-checkbox--on-keyboard-focus":g.value})),E=()=>{switch(!0){case!r.label:return"";case r.vertical:return"var(--va-checkbox-vertical-padding)";case!!r.arrayValue:return"var(--va-checkbox-horizontal-padding)";case r.leftLabel:return"var(--va-checkbox-right-padding)";default:return"var(--va-checkbox-left-padding)"}},T=A(()=>({color:a.value?p("danger"):r.success?p("success"):"",padding:E()})),_=A(()=>{const z={background:b.value?p(r.color):"",borderColor:b.value?p(r.color):""};return a.value&&(z.borderColor=p("danger")),r.success&&(z.borderColor=p("success")),z}),w=A(()=>r.indeterminate&&l.value?r.indeterminateIcon:r.checkedIcon),M=Ps(),x=A(()=>r.id||String(M)),S=A(()=>r.name||String(M)),R=A(()=>({name:S.value,disabled:r.disabled,readonly:r.readonly,tabindex:r.disabled?-1:0,"aria-label":r.ariaLabel,"aria-disabled":r.disabled,"aria-readOnly":r.readonly,"aria-checked":b.value,...u.value})),I=A(()=>r.vertical?"--va-checkbox-display-flex":"var(--va-checkbox-display)");return e({toggleSelection:d}),(z,P)=>(V(),Te(C(Sg),{class:Qe(["va-checkbox",y.value]),disabled:z.disabled,success:z.success,messages:z.messages,error:C(a),"error-messages":C(c),"error-count":z.errorCount,style:Be(`--va-display-val: ${String(I.value)}`)},{default:we(()=>[me("div",{ref:"container",class:"va-checkbox__input-container",onClick:P[6]||(P[6]=(...B)=>C(d)&&C(d)(...B)),onBlur:P[7]||(P[7]=(...B)=>C(f)&&C(f)(...B))},[me("div",{class:"va-checkbox__square",style:Be(_.value),onSelectstart:P[4]||(P[4]=He(()=>{},["prevent"]))},[me("input",Re({ref:"input",type:"checkbox",class:"va-checkbox__input",id:x.value,indeterminate:t.indeterminate,value:z.label,checked:b.value},R.value,mi(C(m),!0),{onFocus:P[0]||(P[0]=(...B)=>C(h)&&C(h)(...B)),onBlur:P[1]||(P[1]=(...B)=>C(f)&&C(f)(...B)),onClick:P[2]||(P[2]=He(()=>{},["stop","prevent"])),onKeypress:P[3]||(P[3]=He((...B)=>C(d)&&C(d)(...B),["prevent"]))}),null,16,cge),Fi(ke(C(St),{class:"va-checkbox__icon",name:w.value,color:C(v)},null,8,["name","color"]),[[_l,b.value]])],36),z.label||z.$slots.label?(V(),ee("label",{key:0,ref:"label",class:"va-checkbox__label",for:x.value,style:Be(T.value),onBlur:P[5]||(P[5]=(...B)=>C(f)&&C(f)(...B))},[se(z.$slots,"label",{},()=>[gt(Ze(z.label),1)])],44,uge)):ve("",!0)],544)]),_:3},8,["class","disabled","success","messages","error","error-messages","error-count","style"]))}}),yh=ze(dge),fge={class:"va-chip__content"},hge=Me({name:"VaChip",__name:"VaChip",props:{...Jl,...Zw,...Fn,...rt,modelValue:{type:Boolean,default:!0},closeable:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},square:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},icon:{type:String,default:""},tag:{type:String,default:"span"},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},ariaCloseLabel:{type:String,default:"$t:close"}},emits:[..._r,"focus"],setup(t,{expose:e,emit:n}){const r=t,i=n,{getColor:s}=ct(),o=A(()=>s(r.color)),a=A(()=>r.outline?o.value:""),l=A(()=>!!(r.outline||r.flat)),{textColorComputed:c}=Hn(o,l),{hasKeyboardFocus:u,keyboardFocusListeners:d}=qu(),f=A(()=>{if(!(!r.shadow||r.flat||r.outline||r.disabled||u.value))return`0 0.125rem 0.19rem 0 ${Uk(o.value)}`}),{valueComputed:h}=pn(r,i),{tagComputed:p,hrefComputed:g}=Ma(r),{isHovered:m,onMouseEnter:v,onMouseLeave:b}=hh(),y=()=>{r.disabled||(h.value=!1)},E=A(()=>r.size),T=A(()=>r.disabled?-1:0),_=jt("va-chip",()=>({...wn(r,["disabled","readonly","square"]),small:r.size==="small",large:r.size==="large"})),w=A(()=>{const x={color:c.value,borderColor:a.value,background:"",boxShadow:f.value};return r.outline||r.flat?u.value?x.background=zk(o.value):!r.readonly&&m.value&&(x.background=$k(o.value)):x.background=o.value,x}),{tp:M}=rn();return e({close:y}),(x,S)=>C(h)?(V(),Te(mr(C(p)),{key:0,class:Qe(["va-chip",C(_)]),href:C(g),target:x.target,to:x.to,replace:x.replace,exact:x.exact,"active-class":x.activeClass,"exact-active-class":x.exactActiveClass,style:Be(w.value)},{default:we(()=>[me("span",Re({class:"va-chip__inner",onFocus:S[0]||(S[0]=R=>x.$emit("focus")),onMouseenter:S[1]||(S[1]=(...R)=>C(v)&&C(v)(...R)),onMouseleave:S[2]||(S[2]=(...R)=>C(b)&&C(b)(...R))},mi(C(d),!0)),[t.icon?(V(),Te(C(St),{key:0,class:"va-chip__icon",name:t.icon,size:E.value},null,8,["name","size"])):ve("",!0),me("span",fge,[se(x.$slots,"default")]),t.closeable?(V(),Te(C(St),{key:1,role:"button",name:"va-close",class:"va-chip__close-icon","aria-label":C(M)(x.$props.ariaCloseLabel),tabindex:T.value,size:E.value,onClick:He(y,["stop"]),onKeydown:[We(He(y,["stop"]),["enter"]),We(He(y,["stop"]),["space"])]},null,8,["aria-label","tabindex","size","onKeydown"])):ve("",!0)],16)]),_:3},8,["href","target","to","replace","exact","active-class","exact-active-class","class","style"])):ve("",!0)}}),pge=ze(hge),bu=(t,e)=>{let n;const r=i=>{i.forEach(s=>{const o=C(s);o&&(n==null||n.observe(o))})};return De(t,i=>{n==null||n.disconnect(),r(Array.isArray(i)?i:[i])}),kt(()=>{n=new ResizeObserver(e),r(Array.isArray(t)?t:[t])}),Sn(()=>n==null?void 0:n.disconnect()),n},mge={class:"va-collapse__header__text"},vge=["id","aria-labelledby"],gge={class:"va-collapse__content"},yge=Me({name:"VaCollapse",__name:"VaCollapse",props:{...rt,...Fn,modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},header:{type:String,default:""},icon:{type:String,default:""},color:{type:String,default:void 0},bodyColor:{type:String,default:void 0},textColor:{type:String,default:""},bodyTextColor:{type:String,default:""},iconColor:{type:String,default:"secondary"},colorAll:{type:Boolean,default:!1},stateful:{type:Boolean,default:!0}},emits:["update:modelValue",...Ig],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),{valueComputed:o}=pn(r,i,"modelValue"),{getColor:a,getTextColor:l,setHSLAColor:c}=ct(),{accordionProps:u,accordionItemValue:d}=xpe(),f=A({get(){return o.userProvided||Ji(d)?o.value:d.value},set(B){Ji(d)||(d.value=B),o.value=B}});o.userProvided&&!Ji(d)&&(d.value=o.value);const h=le();bu([s],([B])=>{h.value=B.contentRect.height??0});const p=A(()=>f.value?h.value:0),g=()=>{const B=p.value/1e3*.2;return`${B>.2?B:.2}s`},m=A(()=>r.bodyColor?a(r.bodyColor):r.color&&r.colorAll?c(a(r.color),{a:.07}):void 0),v=A(()=>r.color?a(r.color):void 0),b=Ps(),y=A(()=>`header-${b}`),E=A(()=>`panel-${b}`),T=A(()=>r.disabled?-1:0),_=A(()=>({id:y.value,tabindex:T.value,"aria-controls":E.value,"aria-expanded":f.value,"aria-disabled":r.disabled,role:"button"})),w=le(!1);De(p,(B,U)=>{U!==void 0&&w.value!==!0&&(w.value=!0)});const M=B=>{B.propertyName==="height"&&B.target===B.currentTarget&&(w.value=!1)},x=jt("va-collapse",()=>({...wn(r,["disabled"]),expanded:f.value,active:f.value,popout:!!(u.value.popout&&f.value),inset:!!(u.value.inset&&f.value),"height-changing":w.value,"colored-body":!!m.value,"colored-header":!!v.value})),S=()=>{r.disabled||(f.value=!f.value)},{textColorComputed:R}=Hn(v),I=A(()=>({color:R.value,backgroundColor:v.value})),z=A(()=>!!(f.value||w.value)),P=A(()=>({height:`${p.value}px`,transitionDuration:g(),background:f.value?m.value:"",color:r.bodyTextColor?a(r.bodyTextColor):m.value?a(l(m.value)):"currentColor"}));return e({toggle:S}),(B,U)=>(V(),ee("div",{class:Qe(["va-collapse",C(x)])},[me("div",{class:"va-collapse__header-wrapper",onClick:S,onKeydown:[We(S,["enter"]),We(S,["space"])]},[se(B.$slots,"header",Ue(je({value:f.value,bind:_.value,attributes:_.value,attrs:_.value,iconAttrs:{class:["va-collapse__expand-icon",f.value?"a-collapse__expand-icon--expanded":"a-collapse__expand-icon--collapsed"]},text:t.header})),()=>[me("div",Re(_.value,{class:"va-collapse__header",style:I.value}),[t.icon?(V(),Te(C(St),{key:0,class:"va-collapse__header__icon",name:t.icon},null,8,["name"])):ve("",!0),se(B.$slots,"header-content",Ue(je({header:t.header})),()=>[me("div",mge,Ze(t.header),1)]),se(B.$slots,"expand-icon",{},()=>[ke(C(St),{class:Qe(["va-collapse__expand-icon",f.value?"va-collapse__expand-icon--expanded":"va-collapse__expand-icon--collapsed"]),name:"va-arrow-down"},null,8,["class"])])],16)])],32),me("div",{class:Qe(["va-collapse__body-wrapper",{"va-collapse__body-wrapper--bordered":!B.$slots.body&&!B.$slots.header}]),style:Be(P.value),onTransitionend:M},[z.value?(V(),ee("div",{key:0,class:"va-collapse__body",ref_key:"body",ref:s,role:"region",id:E.value,"aria-labelledby":y.value},[se(B.$slots,"body",{},()=>[me("div",gge,[se(B.$slots,"default",{},()=>[se(B.$slots,"content")])])])],8,vge)):ve("",!0)],38)],2))}}),bge=ze(yge),_ge=Me({name:"VaColorIndicator",__name:"VaColorIndicator",props:{...Fn,...rt,modelValue:{type:Boolean,default:null},color:{type:String,default:""},square:{type:Boolean,default:!1},size:{type:String,default:"1rem"}},emits:[..._r],setup(t,{emit:e}){const n=t,r=e,{valueComputed:i}=pn(n,r),{getColor:s}=ct(),{hasKeyboardFocus:o,keyboardFocusListeners:a}=qu(),l=A(()=>s(n.color)),c=A(()=>n.square?"0px":"50%"),u=A(()=>({backgroundColor:l.value,height:n.size,width:n.size})),d=A(()=>({"va-color-indicator--selected":i.value,"va-color-indicator--on-keyboard-focus":o.value})),f=()=>{i.value=!i.value};return(h,p)=>(V(),ee("div",Re({class:["va-color-indicator",d.value],style:[u.value,`--va-border-radius-computed: ${String(c.value)}`],onClick:f,onKeydown:[We(f,["enter"]),We(f,["space"])]},mi(C(a),!0)),[me("div",{class:"va-color-indicator__core",style:Be(u.value)},null,4)],16))}}),pS=ze(_ge);var Yc=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ll=function(t,e,n,r,i,s,o,a,l,c){var u=this;u.numeralDecimalMark=t||".",u.numeralIntegerScale=e>0?e:0,u.numeralDecimalScale=n>=0?n:2,u.numeralThousandsGroupStyle=r||ll.groupStyle.thousand,u.numeralPositiveOnly=!!i,u.stripLeadingZeroes=s!==!1,u.prefix=o||o===""?o:"",u.signBeforePrefix=!!a,u.tailPrefix=!!l,u.delimiter=c||c===""?c:",",u.delimiterRE=c?new RegExp("\\"+c,"g"):""};ll.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"};ll.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var e=this,n,r,i,s,o="";switch(t=t.replace(/[A-Za-z]/g,"").replace(e.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",e.numeralPositiveOnly?"":"-").replace("M",e.numeralDecimalMark),e.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),r=t.slice(0,1)==="-"?"-":"",typeof e.prefix<"u"?e.signBeforePrefix?i=r+e.prefix:i=e.prefix+r:i=r,s=t,t.indexOf(e.numeralDecimalMark)>=0&&(n=t.split(e.numeralDecimalMark),s=n[0],o=e.numeralDecimalMark+n[1].slice(0,e.numeralDecimalScale)),r==="-"&&(s=s.slice(1)),e.numeralIntegerScale>0&&(s=s.slice(0,e.numeralIntegerScale)),e.numeralThousandsGroupStyle){case ll.groupStyle.lakh:s=s.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+e.delimiter);break;case ll.groupStyle.wan:s=s.replace(/(\d)(?=(\d{4})+$)/g,"$1"+e.delimiter);break;case ll.groupStyle.thousand:s=s.replace(/(\d)(?=(\d{3})+$)/g,"$1"+e.delimiter);break}return e.tailPrefix?r+s.toString()+(e.numeralDecimalScale>0?o.toString():"")+e.prefix:i+s.toString()+(e.numeralDecimalScale>0?o.toString():"")}};var xge=ll,GD=function(t,e,n){var r=this;r.date=[],r.blocks=[],r.datePattern=t,r.dateMin=e.split("-").reverse().map(function(i){return parseInt(i,10)}),r.dateMin.length===2&&r.dateMin.unshift(0),r.dateMax=n.split("-").reverse().map(function(i){return parseInt(i,10)}),r.dateMax.length===2&&r.dateMax.unshift(0),r.initBlocks()};GD.prototype={initBlocks:function(){var t=this;t.datePattern.forEach(function(e){e==="Y"?t.blocks.push(4):t.blocks.push(2)})},getISOFormatDate:function(){var t=this,e=t.date;return e[2]?e[2]+"-"+t.addLeadingZero(e[1])+"-"+t.addLeadingZero(e[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(t){var e=this,n="";return t=t.replace(/[^\d]/g,""),e.blocks.forEach(function(r,i){if(t.length>0){var s=t.slice(0,r),o=s.slice(0,1),a=t.slice(r);switch(e.datePattern[i]){case"d":s==="00"?s="01":parseInt(o,10)>3?s="0"+o:parseInt(s,10)>31&&(s="31");break;case"m":s==="00"?s="01":parseInt(o,10)>1?s="0"+o:parseInt(s,10)>12&&(s="12");break}n+=s,t=a}}),this.getFixedDateString(n)},getFixedDateString:function(t){var e=this,n=e.datePattern,r=[],i=0,s=0,o=0,a=0,l=0,c=0,u,d,f,h=!1;t.length===4&&n[0].toLowerCase()!=="y"&&n[1].toLowerCase()!=="y"&&(a=n[0]==="d"?0:2,l=2-a,u=parseInt(t.slice(a,a+2),10),d=parseInt(t.slice(l,l+2),10),r=this.getFixedDate(u,d,0)),t.length===8&&(n.forEach(function(g,m){switch(g){case"d":i=m;break;case"m":s=m;break;default:o=m;break}}),c=o*2,a=i<=o?i*2:i*2+2,l=s<=o?s*2:s*2+2,u=parseInt(t.slice(a,a+2),10),d=parseInt(t.slice(l,l+2),10),f=parseInt(t.slice(c,c+4),10),h=t.slice(c,c+4).length===4,r=this.getFixedDate(u,d,f)),t.length===4&&(n[0]==="y"||n[1]==="y")&&(l=n[0]==="m"?0:2,c=2-l,d=parseInt(t.slice(l,l+2),10),f=parseInt(t.slice(c,c+2),10),h=t.slice(c,c+2).length===2,r=[0,d,f]),t.length===6&&(n[0]==="Y"||n[1]==="Y")&&(l=n[0]==="m"?0:4,c=2-.5*l,d=parseInt(t.slice(l,l+2),10),f=parseInt(t.slice(c,c+4),10),h=t.slice(c,c+4).length===4,r=[0,d,f]),r=e.getRangeFixedDate(r),e.date=r;var p=r.length===0?t:n.reduce(function(g,m){switch(m){case"d":return g+(r[0]===0?"":e.addLeadingZero(r[0]));case"m":return g+(r[1]===0?"":e.addLeadingZero(r[1]));case"y":return g+(h?e.addLeadingZeroForYear(r[2],!1):"");case"Y":return g+(h?e.addLeadingZeroForYear(r[2],!0):"")}},"");return p},getRangeFixedDate:function(t){var e=this,n=e.datePattern,r=e.dateMin||[],i=e.dateMax||[];return!t.length||r.length<3&&i.length<3||n.find(function(s){return s.toLowerCase()==="y"})&&t[2]===0?t:i.length&&(i[2]<t[2]||i[2]===t[2]&&(i[1]<t[1]||i[1]===t[1]&&i[0]<t[0]))?i:r.length&&(r[2]>t[2]||r[2]===t[2]&&(r[1]>t[1]||r[1]===t[1]&&r[0]>t[0]))?r:t},getFixedDate:function(t,e,n){return t=Math.min(t,31),e=Math.min(e,12),n=parseInt(n||0,10),(e<7&&e%2===0||e>8&&e%2===1)&&(t=Math.min(t,e===2?this.isLeapYear(n)?29:28:30)),[t,e,n]},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,e){return e?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};var wge=GD,WD=function(t,e){var n=this;n.time=[],n.blocks=[],n.timePattern=t,n.timeFormat=e,n.initBlocks()};WD.prototype={initBlocks:function(){var t=this;t.timePattern.forEach(function(){t.blocks.push(2)})},getISOFormatTime:function(){var t=this,e=t.time;return e[2]?t.addLeadingZero(e[0])+":"+t.addLeadingZero(e[1])+":"+t.addLeadingZero(e[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){var t=this;return String(t.timeFormat)==="12"?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(t){var e=this,n="";t=t.replace(/[^\d]/g,"");var r=e.getTimeFormatOptions();return e.blocks.forEach(function(i,s){if(t.length>0){var o=t.slice(0,i),a=o.slice(0,1),l=t.slice(i);switch(e.timePattern[s]){case"h":parseInt(a,10)>r.maxHourFirstDigit?o="0"+a:parseInt(o,10)>r.maxHours&&(o=r.maxHours+"");break;case"m":case"s":parseInt(a,10)>r.maxMinutesFirstDigit?o="0"+a:parseInt(o,10)>r.maxMinutes&&(o=r.maxMinutes+"");break}n+=o,t=l}}),this.getFixedTimeString(n)},getFixedTimeString:function(t){var e=this,n=e.timePattern,r=[],i=0,s=0,o=0,a=0,l=0,c=0,u,d,f;return t.length===6&&(n.forEach(function(h,p){switch(h){case"s":i=p*2;break;case"m":s=p*2;break;case"h":o=p*2;break}}),c=o,l=s,a=i,u=parseInt(t.slice(a,a+2),10),d=parseInt(t.slice(l,l+2),10),f=parseInt(t.slice(c,c+2),10),r=this.getFixedTime(f,d,u)),t.length===4&&e.timePattern.indexOf("s")<0&&(n.forEach(function(h,p){switch(h){case"m":s=p*2;break;case"h":o=p*2;break}}),c=o,l=s,u=0,d=parseInt(t.slice(l,l+2),10),f=parseInt(t.slice(c,c+2),10),r=this.getFixedTime(f,d,u)),e.time=r,r.length===0?t:n.reduce(function(h,p){switch(p){case"s":return h+e.addLeadingZero(r[2]);case"m":return h+e.addLeadingZero(r[1]);case"h":return h+e.addLeadingZero(r[0])}},"")},getFixedTime:function(t,e,n){return n=Math.min(parseInt(n||0,10),60),e=Math.min(e,60),t=Math.min(t,60),[t,e,n]},addLeadingZero:function(t){return(t<10?"0":"")+t}};var Sge=WD,jD=function(t,e){var n=this;n.delimiter=e||e===""?e:" ",n.delimiterRE=e?new RegExp("\\"+e,"g"):"",n.formatter=t};jD.prototype={setFormatter:function(t){this.formatter=t},format:function(t){var e=this;e.formatter.clear(),t=t.replace(/[^\d+]/g,""),t=t.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+"),t=t.replace(e.delimiterRE,"");for(var n="",r,i=!1,s=0,o=t.length;s<o;s++)r=e.formatter.inputDigit(t.charAt(s)),/[\s()-]/g.test(r)?(n=r,i=!0):i||(n=r);return n=n.replace(/[()]/g,""),n=n.replace(/[\s-]/g,e.delimiter),n}};var Ege=jD,__={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(t){var e=t.reduce(function(n,r){return n+r},0);return t.concat(19-e)},getInfo:function(t,e){var n=__.blocks,r=__.re;e=!!e;for(var i in r)if(r[i].test(t)){var s=n[i];return{type:i,blocks:e?this.getStrictBlocks(s):s}}return{type:"unknown",blocks:e?this.getStrictBlocks(n.general):n.general}}},Mge=__,Cge={noop:function(){},strip:function(t,e){return t.replace(e,"")},getPostDelimiter:function(t,e,n){if(n.length===0)return t.slice(-e.length)===e?e:"";var r="";return n.forEach(function(i){t.slice(-i.length)===i&&(r=i)}),r},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,e,n,r,i){return e.length===t?n.length:t+this.getPositionOffset(t,e,n,r,i)},getPositionOffset:function(t,e,n,r,i){var s,o,a;return s=this.stripDelimiters(e.slice(0,t),r,i),o=this.stripDelimiters(n.slice(0,t),r,i),a=s.length-o.length,a!==0?a/Math.abs(a):0},stripDelimiters:function(t,e,n){var r=this;if(n.length===0){var i=e?r.getDelimiterREByDelimiter(e):"";return t.replace(i,"")}return n.forEach(function(s){s.split("").forEach(function(o){t=t.replace(r.getDelimiterREByDelimiter(o),"")})}),t},headStr:function(t,e){return t.slice(0,e)},getMaxLength:function(t){return t.reduce(function(e,n){return e+n},0)},getPrefixStrippedValue:function(t,e,n,r,i,s,o,a,l){if(n===0)return t;if(t===e&&t!=="")return"";if(l&&t.slice(0,1)=="-"){var c=r.slice(0,1)=="-"?r.slice(1):r;return"-"+this.getPrefixStrippedValue(t.slice(1),e,n,c,i,s,o,a,l)}if(r.slice(0,n)!==e&&!a)return o&&!r&&t?t:"";if(r.slice(-n)!==e&&a)return o&&!r&&t?t:"";var u=this.stripDelimiters(r,i,s);return t.slice(0,n)!==e&&!a?u.slice(n):t.slice(-n)!==e&&a?u.slice(0,-n-1):a?t.slice(0,-n):t.slice(n)},getFirstDiffIndex:function(t,e){for(var n=0;t.charAt(n)===e.charAt(n);)if(t.charAt(n++)==="")return-1;return n},getFormattedValue:function(t,e,n,r,i,s){var o="",a=i.length>0,l="";return n===0?t:(e.forEach(function(c,u){if(t.length>0){var d=t.slice(0,c),f=t.slice(c);a?l=i[s?u-1:u]||l:l=r,s?(u>0&&(o+=l),o+=d):(o+=d,d.length===c&&u<n-1&&(o+=l)),t=f}}),o)},fixPrefixCursor:function(t,e,n,r){if(t){var i=t.value,s=n||r[0]||" ";if(!(!t.setSelectionRange||!e||e.length+s.length<=i.length)){var o=i.length*2;setTimeout(function(){t.setSelectionRange(o,o)},1)}}},checkFullSelection:function(t){try{var e=window.getSelection()||document.getSelection()||{};return e.toString().length===t.length}catch{}return!1},setSelection:function(t,e,n){if(t===this.getActiveElement(n)&&!(t&&t.value.length<=e))if(t.createTextRange){var r=t.createTextRange();r.move("character",e),r.select()}else try{t.setSelectionRange(e,e)}catch{console.warn("The input element type does not support selection")}},getActiveElement:function(t){var e=t.activeElement;return e&&e.shadowRoot?this.getActiveElement(e.shadowRoot):e},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,e){return!this.isAndroid()||!t||!e?!1:e===t.slice(0,-1)}},Age=Cge,Tge={assign:function(t,e){return t=t||{},e=e||{},t.creditCard=!!e.creditCard,t.creditCardStrictMode=!!e.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=e.onCreditCardTypeChanged||function(){},t.phone=!!e.phone,t.phoneRegionCode=e.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!e.time,t.timePattern=e.timePattern||["h","m","s"],t.timeFormat=e.timeFormat||"24",t.timeFormatter={},t.date=!!e.date,t.datePattern=e.datePattern||["d","m","Y"],t.dateMin=e.dateMin||"",t.dateMax=e.dateMax||"",t.dateFormatter={},t.numeral=!!e.numeral,t.numeralIntegerScale=e.numeralIntegerScale>0?e.numeralIntegerScale:0,t.numeralDecimalScale=e.numeralDecimalScale>=0?e.numeralDecimalScale:2,t.numeralDecimalMark=e.numeralDecimalMark||".",t.numeralThousandsGroupStyle=e.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!e.numeralPositiveOnly,t.stripLeadingZeroes=e.stripLeadingZeroes!==!1,t.signBeforePrefix=!!e.signBeforePrefix,t.tailPrefix=!!e.tailPrefix,t.swapHiddenInput=!!e.swapHiddenInput,t.numericOnly=t.creditCard||t.date||!!e.numericOnly,t.uppercase=!!e.uppercase,t.lowercase=!!e.lowercase,t.prefix=t.creditCard||t.date?"":e.prefix||"",t.noImmediatePrefix=!!e.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!e.rawValueTrimPrefix,t.copyDelimiter=!!e.copyDelimiter,t.initValue=e.initValue!==void 0&&e.initValue!==null?e.initValue.toString():"",t.delimiter=e.delimiter||e.delimiter===""?e.delimiter:e.date?"/":e.time?":":e.numeral?",":(e.phone," "),t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!e.delimiterLazyShow,t.delimiters=e.delimiters||[],t.blocks=e.blocks||[],t.blocksLength=t.blocks.length,t.root=typeof Yc=="object"&&Yc?Yc:window,t.document=e.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=e.onValueChanged||function(){},t}},Pge=Tge,vn=function(t,e){var n=this,r=!1;if(typeof t=="string"?(n.element=document.querySelector(t),r=document.querySelectorAll(t).length>1):typeof t.length<"u"&&t.length>0?(n.element=t[0],r=t.length>1):n.element=t,!n.element)throw new Error("[cleave.js] Please check the element");if(r)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch{}e.initValue=n.element.value,n.properties=vn.DefaultProperties.assign({},e),n.init()};vn.prototype={init:function(){var t=this,e=t.properties;if(!e.numeral&&!e.phone&&!e.creditCard&&!e.time&&!e.date&&e.blocksLength===0&&!e.prefix){t.onInput(e.initValue);return}e.maxLength=vn.Util.getMaxLength(e.blocks),t.isAndroid=vn.Util.isAndroid(),t.lastInputValue="",t.isBackward="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.initSwapHiddenInput(),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&t.onInput(e.initValue)},initSwapHiddenInput:function(){var t=this,e=t.properties;if(e.swapHiddenInput){var n=t.element.cloneNode(!0);t.element.parentNode.insertBefore(n,t.element),t.elementSwapHidden=t.element,t.elementSwapHidden.type="hidden",t.element=n,t.element.id=""}},initNumeralFormatter:function(){var t=this,e=t.properties;e.numeral&&(e.numeralFormatter=new vn.NumeralFormatter(e.numeralDecimalMark,e.numeralIntegerScale,e.numeralDecimalScale,e.numeralThousandsGroupStyle,e.numeralPositiveOnly,e.stripLeadingZeroes,e.prefix,e.signBeforePrefix,e.tailPrefix,e.delimiter))},initTimeFormatter:function(){var t=this,e=t.properties;e.time&&(e.timeFormatter=new vn.TimeFormatter(e.timePattern,e.timeFormat),e.blocks=e.timeFormatter.getBlocks(),e.blocksLength=e.blocks.length,e.maxLength=vn.Util.getMaxLength(e.blocks))},initDateFormatter:function(){var t=this,e=t.properties;e.date&&(e.dateFormatter=new vn.DateFormatter(e.datePattern,e.dateMin,e.dateMax),e.blocks=e.dateFormatter.getBlocks(),e.blocksLength=e.blocks.length,e.maxLength=vn.Util.getMaxLength(e.blocks))},initPhoneFormatter:function(){var t=this,e=t.properties;if(e.phone)try{e.phoneFormatter=new vn.PhoneFormatter(new e.root.Cleave.AsYouTypeFormatter(e.phoneRegionCode),e.delimiter)}catch{throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var e=this,n=t.which||t.keyCode;e.lastInputValue=e.element.value,e.isBackward=n===8},onChange:function(t){var e=this,n=e.properties,r=vn.Util;e.isBackward=e.isBackward||t.inputType==="deleteContentBackward";var i=r.getPostDelimiter(e.lastInputValue,n.delimiter,n.delimiters);e.isBackward&&i?n.postDelimiterBackspace=i:n.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var t=this,e=t.properties;t.lastInputValue=t.element.value,e.prefix&&e.noImmediatePrefix&&!t.element.value&&this.onInput(e.prefix),vn.Util.fixPrefixCursor(t.element,e.prefix,e.delimiter,e.delimiters)},onCut:function(t){vn.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){vn.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var e=this,n=e.properties,r=vn.Util,i=e.element.value,s="";n.copyDelimiter?s=i:s=r.stripDelimiters(i,n.delimiter,n.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",s):window.clipboardData.setData("Text",s),t.preventDefault()}catch{}},onInput:function(t){var e=this,n=e.properties,r=vn.Util,i=r.getPostDelimiter(t,n.delimiter,n.delimiters);if(!n.numeral&&n.postDelimiterBackspace&&!i&&(t=r.headStr(t,t.length-n.postDelimiterBackspace.length)),n.phone){n.prefix&&(!n.noImmediatePrefix||t.length)?n.result=n.prefix+n.phoneFormatter.format(t).slice(n.prefix.length):n.result=n.phoneFormatter.format(t),e.updateValueState();return}if(n.numeral){n.prefix&&n.noImmediatePrefix&&t.length===0?n.result="":n.result=n.numeralFormatter.format(t),e.updateValueState();return}if(n.date&&(t=n.dateFormatter.getValidatedDate(t)),n.time&&(t=n.timeFormatter.getValidatedTime(t)),t=r.stripDelimiters(t,n.delimiter,n.delimiters),t=r.getPrefixStrippedValue(t,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix,n.tailPrefix,n.signBeforePrefix),t=n.numericOnly?r.strip(t,/[^\d]/g):t,t=n.uppercase?t.toUpperCase():t,t=n.lowercase?t.toLowerCase():t,n.prefix&&(n.tailPrefix?t=t+n.prefix:t=n.prefix+t,n.blocksLength===0)){n.result=t,e.updateValueState();return}n.creditCard&&e.updateCreditCardPropsByValue(t),t=r.headStr(t,n.maxLength),n.result=r.getFormattedValue(t,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow),e.updateValueState()},updateCreditCardPropsByValue:function(t){var e=this,n=e.properties,r=vn.Util,i;r.headStr(n.result,4)!==r.headStr(t,4)&&(i=vn.CreditCardDetector.getInfo(t,n.creditCardStrictMode),n.blocks=i.blocks,n.blocksLength=n.blocks.length,n.maxLength=r.getMaxLength(n.blocks),n.creditCardType!==i.type&&(n.creditCardType=i.type,n.onCreditCardTypeChanged.call(e,n.creditCardType)))},updateValueState:function(){var t=this,e=vn.Util,n=t.properties;if(t.element){var r=t.element.selectionEnd,i=t.element.value,s=n.result;if(r=e.getNextCursorPosition(r,i,s,n.delimiter,n.delimiters),t.isAndroid){window.setTimeout(function(){t.element.value=s,e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged()},1);return}t.element.value=s,n.swapHiddenInput&&(t.elementSwapHidden.value=t.getRawValue()),e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged()}},callOnValueChanged:function(){var t=this,e=t.properties;e.onValueChanged.call(t,{target:{name:t.element.name,value:e.result,rawValue:t.getRawValue()}})},setPhoneRegionCode:function(t){var e=this,n=e.properties;n.phoneRegionCode=t,e.initPhoneFormatter(),e.onChange()},setRawValue:function(t){var e=this,n=e.properties;t=t!=null?t.toString():"",n.numeral&&(t=t.replace(".",n.numeralDecimalMark)),n.postDelimiterBackspace=!1,e.element.value=t,e.onInput(t)},getRawValue:function(){var t=this,e=t.properties,n=vn.Util,r=t.element.value;return e.rawValueTrimPrefix&&(r=n.getPrefixStrippedValue(r,e.prefix,e.prefixLength,e.result,e.delimiter,e.delimiters,e.noImmediatePrefix,e.tailPrefix,e.signBeforePrefix)),e.numeral?r=e.numeralFormatter.getRawValue(r):r=n.stripDelimiters(r,e.delimiter,e.delimiters),r},getISOFormatDate:function(){var t=this,e=t.properties;return e.date?e.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this,e=t.properties;return e.time?e.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}};vn.NumeralFormatter=xge;vn.DateFormatter=wge;vn.TimeFormatter=Sge;vn.PhoneFormatter=Ege;vn.CreditCardDetector=Mge;vn.Util=Age;vn.DefaultProperties=Pge;(typeof Yc=="object"&&Yc?Yc:window).Cleave=vn;var Rge=vn;const tT={creditCard:{creditCard:!0},date:{date:!0,datePattern:["d","m","Y"]},time:{time:!0,timePattern:["h","m"],timeFormat:"24"},numeral:{numeral:!0,numeralThousandsGroupStyle:"thousand"}},Lge={mask:{type:[String,Object],default:""},returnRaw:{type:Boolean,default:!0}},Ige=(t,e,n)=>{const r=le(),i=u=>typeof u=="string"?tT[u]?{...tT[u]}:null:{...u},s=()=>{r.value&&r.value.destroy()},o=A(()=>i(e.mask)),a=A(()=>o.value&&Object.keys(o.value).length);Yn(()=>{s(),t.value&&(!a.value||!o.value||(r.value=new Rge(t.value,o.value),r.value.properties.onValueChanged=({target:{rawValue:u,value:d}})=>{e.returnRaw?n.value=u:n.value=d}))}),Sn(()=>{s()});const l=A(()=>r.value&&e.returnRaw&&n.value===r.value.getRawValue()?r.value.getFormattedValue():n.value);return{cleave:r,cleaveEnabled:a,computedValue:l,onInput:u=>{const d=u.target.value;a.value||(n.value=d)}}},Oge={key:0,class:"va-input-label__required-mark"},XD=Me({name:"VaInputLabel",__name:"VaInputLabel",props:{label:{type:String,default:""},requiredMark:{type:Boolean,default:!1},color:{type:String,default:"primary"}},setup(t){const{getColor:e}=ct();return(n,r)=>(V(),ee("label",{"aria-hidden":"true",class:"va-input-label",style:Be({color:C(e)(n.$props.color,void 0,!0)})},[se(n.$slots,"default",Ue(je({label:t.label,requiredMark:t.requiredMark,color:C(e)(n.$props.color)})),()=>[gt(Ze(t.label)+" ",1),t.requiredMark?(V(),ee("span",Oge," * ")):ve("",!0)])],4))}}),kge={label:{type:String,default:""},inputAriaLabel:{type:String,default:"$t:inputField"},inputAriaLabelledby:{type:String},inputAriaDescribedby:{type:String}},Dge=t=>{const e=Ps(),n=`input-label-${e}`,r=`input-character-count-${e}`,i=A(()=>({"aria-label":t.label!==""?t.label:t.inputAriaLabel,"aria-labelledby":t.inputAriaLabelledby?t.inputAriaLabelledby:n,"aria-describedby":t.inputAriaDescribedby?t.inputAriaDescribedby:r}));return{labelId:n,characterCountId:r,ariaAttributes:i}},Nge=t=>Me({name:"ProxySlots",props:{inheritSlots:{type:Array,required:!0}},render(){var e;const n=((e=this.$parent)==null?void 0:e.$slots)||{},i=(this.$props.inheritSlots||Object.keys(n)).reduce((s,o)=>(n[o]&&(s[o]=n[o]),s),{});return Nt(t,this.$attrs,{...i,...this.$slots})}}),Ca={disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},KD=(t,e)=>({computedClasses:jt(t,A(()=>wn(e,["disabled","readonly"])))}),mS=t=>{const e=eD(),n=rS(t?ju(t):void 0);let r=null;const i=A({get(){var s;if(!e.value)return!1;if(e.value===n.value)return!0;const o=(s=n.value)==null?void 0:s.contains(e.value);return o&&(r=e.value),o},set(s){var o;let a=r??n.value;(o=n.value)!=null&&o.contains(a)||(a=n.value),s?a==null||a.focus():a==null||a.blur()}});return Object.assign(i,{focusIfNothingIfFocused:()=>{e.value===document.body&&(i.value=!0)},focusPreviousElement:()=>{r?r.focus():document.body.focus()}})},nT=It(XD),Fge=Me({name:"VaInputWrapper",components:{VaMessageList:Nge(wg),VaIcon:St,VaInputLabel:XD},props:{...rt,...kge,...Ca,...go,...nT,modelValue:{type:null,default:""},counter:{type:Boolean},maxLength:{type:Number,default:void 0},label:{type:String,default:""},placeholder:{type:String,default:""},color:{type:String,default:"primary"},background:{type:String},success:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1},innerLabel:{type:Boolean,default:!1}},emits:["click","click-prepend","click-append","click-prepend-inner","click-append-inner","click-field","update:modelValue"],setup(t,{emit:e,slots:n}){const{getColor:r}=ct(),[i]=kl("modelValue",t,e,""),s=le(),o=mS(),a=A(()=>t.counter&&typeof i.value=="string"?i.value.length:void 0),l=jt("va-input-wrapper",()=>({...wn(t,["success","error","disabled","readonly"]),focused:!!o.value,labeled:!!(t.label||n.label),labeledInner:!!(t.label||n.label)&&t.innerLabel})),c=A(()=>r(t.color)),u=A(()=>t.background?r(t.background):"#ffffff00"),d=A(()=>t.error?t.errorMessages:t.messages),{textColorComputed:f}=Hn(u),h=A(()=>t.error?"danger":t.success?"success":""),p=A(()=>t.error?Number(t.errorCount):99),g=A(()=>a.value!==void 0),m=A(()=>t.maxLength!==void 0?`${a.value}/${t.maxLength}`:a.value),{labelId:v,characterCountId:b,ariaAttributes:y}=Dge(t),E=tn(nT);return{inputRef:s,focus:()=>{o.value=!0},blur:()=>{o.value=!1},labelId:v,characterCountId:b,ariaAttributes:y,vModel:i,counterValue:a,vaInputLabelProps:E,wrapperClass:l,textColorComputed:f,isCounterVisible:g,counterComputed:m,colorComputed:c,backgroundComputed:u,messagesColor:h,messagesComputed:d,errorLimit:p}}}),Bge={class:"va-input-wrapper__fieldset va-input-wrapper__size-keeper"},Vge={class:"va-input-wrapper__container"},Uge={class:"va-input-wrapper__text"},$ge=["placeholder","readonly","disabled"],zge=["id"],Hge={class:"va-input-wrapper__counter"};function Gge(t,e,n,r,i,s){const o=Ur("VaInputLabel"),a=Ur("va-icon"),l=Ur("va-message-list");return V(),ee("div",{class:Qe(["va-input-wrapper",t.wrapperClass]),onClick:e[6]||(e[6]=c=>t.$emit("click",c)),style:Be(`--va-background-computed: ${String(t.backgroundComputed)};--va-color-computed: ${String(t.colorComputed)};--va-text-color-computed: ${String(t.textColorComputed)}`)},[me("fieldset",Bge,[ke(l,{color:t.messagesColor,"model-value":t.messagesComputed,limit:t.errorLimit,"inherit-slots":["message","messages"]},{default:we(({ariaAttributes:c})=>[(t.$props.label||t.$slots.label)&&!t.$props.innerLabel?(V(),Te(o,Re({key:0,class:"va-input-wrapper__label va-input-wrapper__label--outer"},t.vaInputLabelProps,{id:t.labelId}),{default:we(u=>[se(t.$slots,"label",Ue(je(u)))]),_:3},16,["id"])):ve("",!0),me("div",Vge,[t.$slots.prepend?(V(),ee("div",{key:0,class:"va-input-wrapper__prepend-inner",onClick:e[0]||(e[0]=u=>t.$emit("click-prepend"))},[se(t.$slots,"prepend")])):ve("",!0),me("div",{onClick:e[4]||(e[4]=u=>t.$emit("click-field",u)),class:"va-input-wrapper__field"},[t.$slots.prependInner?(V(),ee("div",{key:0,class:"va-input-wrapper__prepend-inner",ref:"container",onClick:e[1]||(e[1]=u=>t.$emit("click-prepend-inner",u))},[se(t.$slots,"prependInner")],512)):ve("",!0),me("div",Uge,[(t.$props.label||t.$slots.label)&&t.$props.innerLabel?(V(),Te(o,Re({key:0,class:"va-input-wrapper__label va-input-wrapper__label--inner"},t.vaInputLabelProps,{id:t.labelId}),{default:we(u=>[se(t.$slots,"label",Ue(je(u)))]),_:3},16,["id"])):ve("",!0),se(t.$slots,"default",Ue(je({ariaAttributes:{...c,...t.ariaAttributes},value:t.vModel})),()=>[Fi(me("input",Re({...c,...t.ariaAttributes},{"onUpdate:modelValue":e[2]||(e[2]=u=>t.vModel=u),ref:"inputRef",placeholder:t.$props.placeholder,readonly:t.$props.readonly,disabled:t.$props.disabled}),null,16,$ge),[[q_,t.vModel]])])]),t.success?(V(),Te(a,{key:1,color:"success",name:"va-check-circle",class:"va-input-wrapper__icon va-input-wrapper__icon--success"})):ve("",!0),t.error?(V(),Te(a,{key:2,color:"danger",name:"va-warning",class:"va-input-wrapper__icon va-input-wrapper__icon--error"})):ve("",!0),t.$props.loading?(V(),Te(a,{key:3,color:t.$props.color,name:"va-loading",spin:"counter-clockwise",class:"va-input-wrapper__icon va-input-wrapper__icon--loading"},null,8,["color"])):ve("",!0),se(t.$slots,"icon"),t.$slots.appendInner?(V(),ee("div",{key:4,class:"va-input-wrapper__append-inner",onClick:e[3]||(e[3]=u=>t.$emit("click-append-inner",u))},[se(t.$slots,"appendInner")])):ve("",!0)]),t.$slots.append?(V(),ee("div",{key:1,class:"va-input-wrapper__append-inner",onClick:e[5]||(e[5]=u=>t.$emit("click-append"))},[se(t.$slots,"append")])):ve("",!0)]),t.isCounterVisible?(V(),ee("div",{key:1,class:"va-input-wrapper__counter-wrapper",id:t.characterCountId},[se(t.$slots,"counter",Ue(je({valueLength:t.counterValue,maxLength:t.$props.maxLength})),()=>[me("div",Hge,Ze(t.counterComputed),1)])],8,zge)):ve("",!0)]),_:3},8,["color","model-value","limit"])])],6)}const Wge=ec(Fge,[["render",Gge]]),oi=ze(Wge),rT=(...t)=>(...e)=>t.forEach(n=>n(...e)),jge={autofocus:{type:Boolean,default:!1}},Xge=(t,e)=>{const n=()=>{gs(Mn(t.value))},r=()=>{Cg(Mn(t.value))};return kt(()=>{e.autofocus&&n()}),{focus:n,blur:r}},bh={clearable:{type:Boolean,default:!1},clearableIcon:{type:String,default:"va-clear"},clearValue:{type:String,default:""}},Og=["clear"],kg=(t,e,n,r)=>{const{isFocused:i,onFocus:s,onBlur:o}=bo(n),a=[null,void 0,t.clearValue],l=A(()=>t.clearable&&!t.disabled&&!t.readonly&&!a.includes(e.value)),c=A(()=>i!=null&&i.value?t.color||"primary":r!=null&&r.value?"danger":t.success?"success":"secondary"),u=A(()=>({name:t.clearableIcon,color:c.value,size:"medium",tabindex:l.value?0:-1}));return{canBeCleared:l,clearIconColor:c,clearIconProps:u,onFocus:s,onBlur:o}},Kge=t=>{if(!Gu)return;const e=on();if(!e)throw new Error("`useDeprecated` hook must be used only inside of setup function!");t.forEach(n=>{const r=n();typeof r=="string"&&qt(`(${e.type.name} component) ${r}`)})},qge=["value"],iT=It(oi),{createEmits:Yge,createListeners:Zge}=Ql(["change","keyup","keypress","keydown","focus","blur","input"]),{createEmits:Jge,createListeners:Qge}=Ql(["click","click-prepend","click-append","click-prepend-inner","click-append-inner"]),eye=Me({name:"VaInput",inheritAttrs:!1,__name:"VaInput",props:{...iT,...Ca,...jge,...go,...bh,...Lge,...rt,...Fn,placeholder:{type:String,default:""},tabindex:{type:[String,Number],default:0},modelValue:{type:[Number,String],default:""},type:{type:String,default:"text"},inputClass:{type:String,default:""},pattern:{type:String},inputmode:{type:String,default:"text"},counter:{type:Boolean,default:!1},ariaResetLabel:{type:String,default:"$t:reset"},strictBindInputValue:{type:Boolean,default:!1}},emits:["update:modelValue",...Ea,...Og,...Yge(),...Jge(),..._r],setup(t,{expose:e,emit:n}){const r=t,i=n;Kge([()=>r.type!=="textarea"||'Use VaTextarea component instead of VaInput with type="textarea"']);const s=st(),{valueComputed:o}=pn(r,i,"modelValue"),a=()=>T(()=>{o.value=r.clearValue,i("clear"),_()}),{focus:l,blur:c}=Xge(s,r),u=Cr(),d=A(()=>{const de=["icon"];return Object.keys(u).filter(ae=>!de.includes(ae))}),{tp:f}=rn(),{isValid:h,isTouched:p,isDirty:g,computedError:m,computedErrorMessages:v,listeners:{onBlur:b},validationAriaAttributes:y,isLoading:E,withoutValidation:T,resetValidation:_}=yo(r,i,{reset:a,focus:l,value:o}),{modelValue:w}=kr(r),{canBeCleared:M,clearIconProps:x}=kg(r,w,s,m),{computedValue:S,onInput:R}=Ige(s,r,o),I=Zge(i),z={...I,onBlur:rT(b,I.onBlur),onInput:rT(R,I.onInput)},P=de=>{if(!r.strictBindInputValue)return;const ae=s.value;if(!ae)return;const ge=ae.selectionStart||0,ue=ae.selectionEnd||0;ae.value!==de&&(ae.value=String(de)),ae.setSelectionRange(ge,ue)};De(S,de=>{P(String(de))},{immediate:!0}),bn("input",()=>{P(String(o.value))},s);const B=A(()=>r.disabled?-1:r.tabindex),U=ba(),j=A(()=>({"aria-label":r.inputAriaLabel||r.label,"aria-labelledby":r.inputAriaLabelledby,"aria-required":r.requiredMark,tabindex:B.value,class:r.inputClass,"aria-disabled":r.disabled,"aria-readonly":r.readonly,...y.value,...ho(U,["class","style"])})),Z=A(()=>({...j.value,...wn(r,["type","disabled","readonly","placeholder","pattern","inputmode","minlength","maxlength"])})),ne=A(()=>r.counter&&typeof S.value=="string"?S.value.length:void 0),K=de=>{!de.target||!("tagName"in de.target)||de.target.tagName==="INPUT"||de.target.tagName==="TEXTAREA"||l()},fe=tn(iT),Se=Qge(i);return e({isValid:h,isDirty:g,isTouched:p,isLoading:E,computedError:m,computedErrorMessages:v,reset:a,focus:l,blur:c,value:o,withoutValidation:T,resetValidation:_}),(de,ae)=>(V(),Te(C(oi),Re({...C(Se),...C(fe)},{class:["va-input",de.$attrs.class],style:de.$attrs.style,loading:de.$props.loading||C(E),error:C(m),"error-messages":C(v),"error-count":de.errorCount,"counter-value":ne.value,onClick:K}),Er({icon:we(ge=>[C(M)?(V(),Te(C(St),Re({key:0,role:"button","aria-label":C(f)(de.$props.ariaResetLabel)},C(x),{onClick:He(a,["stop"]),onKeydown:[We(He(a,["stop"]),["enter"]),We(He(a,["stop"]),["space"])]}),null,16,["aria-label","onKeydown"])):ve("",!0),se(de.$slots,"icon",Ue(je(ge)))]),default:we(()=>[de.$slots.content?ve("",!0):(V(),ee("input",Re({key:0,ref_key:"input",ref:s,class:"va-input__content__input"},{...Z.value,...z},{value:C(S)}),null,16,qge))]),_:2},[vt(d.value,ge=>({name:ge,fn:we(ue=>[se(de.$slots,ge,Ue(je(ue)))])}))]),1040,["class","style","loading","error","error-messages","error-count","counter-value"]))}}),vS=ze(eye),tye={class:"va-color-input"},sT=It(vS),nye=Me({name:"VaColorInput",__name:"VaColorInput",props:{...sT,...Fn,...rt,modelValue:{type:String,default:null},disabled:{type:Boolean,default:!1},indicator:{type:String,default:"dot",validator:t=>["dot","square"].includes(t)},ariaOpenColorPickerLabel:{type:String,default:"$t:openColorPicker"}},emits:[..._r],setup(t,{emit:e}){const n=t,r=e,i=st(),{valueComputed:s}=pn(n,r),o=()=>{var d;return!n.disabled&&((d=i.value)==null?void 0:d.click())},a=A(()=>n.disabled?-1:0),l=A({get:()=>n.modelValue,set:_k(d=>r("update:modelValue",d),500)}),c=tn(sT),{tp:u}=rn();return(d,f)=>(V(),ee("div",tye,[ke(C(vS),Re(C(c),{modelValue:C(s),"onUpdate:modelValue":f[0]||(f[0]=h=>Xt(s)?s.value=h:null),class:"va-color-input__input",tabindex:a.value}),{appendInner:we(()=>[ke(C(pS),{class:"va-color-input__dot",role:"button","aria-label":C(u)(d.$props.ariaOpenColorPickerLabel),"aria-disabled":d.$props.disabled,tabindex:a.value,color:C(s),indicator:d.$props.indicator,size:"16px",onClick:o,onKeydown:[We(o,["space"]),We(o,["enter"])]},null,8,["aria-label","aria-disabled","tabindex","color","indicator"])]),_:1},16,["modelValue","tabindex"]),Fi(me("input",{ref_key:"colorPicker",ref:i,type:"color",class:"va-color-input__hidden-input","aria-hidden":"true",tabindex:"-1","onUpdate:modelValue":f[1]||(f[1]=h=>l.value=h)},null,512),[[wm,l.value]])]))}}),rye=ze(nye),iye=["aria-label"],sye=Me({name:"VaColorPalette",__name:"VaColorPalette",props:{...Fn,...rt,modelValue:{type:String,default:null},palette:{type:Array,default:()=>[]},indicator:{type:String,default:"dot",validator:t=>["dot","square"].includes(t)},ariaLabel:{type:String,default:"$t:colorSelection"},ariaIndicatorLabel:{type:String,default:"$t:color"}},emits:[..._r],setup(t,{emit:e}){const n=t,r=e,{valueComputed:i}=pn(n,r),s=a=>i.value===a,{tp:o}=rn();return(a,l)=>(V(),ee("ul",{class:"va-color-palette",role:"listbox","aria-label":C(o)(a.$props.ariaLabel)},[(V(!0),ee(qe,null,vt(t.palette,(c,u)=>(V(),Te(C(pS),{key:u,role:"option","aria-label":C(o)(a.$props.ariaIndicatorLabel,{color:c}),"aria-selected":s(c),tabindex:"0",modelValue:s(c),color:c,square:t.indicator==="square","onUpdate:modelValue":d=>i.value=c},null,8,["aria-label","aria-selected","modelValue","color","square","onUpdate:modelValue"]))),128))],8,iye))}}),oye=ze(sye),aye={name:"VaContent"},lye={class:"va-typography-block"};function cye(t,e,n,r,i,s){return V(),ee("div",lye,[se(t.$slots,"default")])}const uye=ec(aye,[["render",cye]]),dye=ze(uye),x_=t=>typeof t=="number"?`${t}px`:t;function fye(t){De([()=>t.step,()=>t.min,()=>t.max],()=>{const n=Number(t.modelValue),r=Number(t.max),i=Number(t.min),s=Number(t.step);if(Number.isNaN(n)){qt("The value is not a number or cannot be reduced to a number.");return}i&&r&&i>r&&qt(`The maximum value (${r}) can not be less than the minimum value (${i}).`),i&&n<i&&qt(`The value of the counter (${n}) can not be less than the minimum value (${i}).`),r&&n>r&&qt(`The value of the counter (${n}) can not be greater than the maximum value (${r}).`),i&&r&&s>r-i&&qt(`The value of the step (${s}) can not be greater than the difference (${r-i}) between maximum value (${r}) and minimum value (${i}).`)},{immediate:!0})}function oT(t,e){let n=-1,r=-1;const i=()=>{var a;(a=e.onStart)==null||a.call(e),clearTimeout(n),n=setTimeout(()=>{r=setInterval(()=>{var l;return(l=e.onUpdate)==null?void 0:l.call(e)},e.interval||100)},C(e.delay)||500)},s=()=>{var a;clearTimeout(n),clearInterval(r),(a=e.onEnd)==null||a.call(e)},o=ju(t);bn(["mousedown","touchstart","dragstart"],i,o),bn(["mouseup","mouseleave","touchend","touchcancel","drop","dragend","blur"],s,!0)}const hye=["value","aria-live"],{createEmits:pye,createListeners:mye}=Ql(["change"]),{createEmits:vye,createListeners:gye}=Ql([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]),aT=It(oi),yye=Me({name:"VaCounter",inheritAttrs:!1,__name:"VaCounter",props:{...Ca,...Fn,...rt,...bh,...aT,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},min:{type:[Number,String]},max:{type:[Number,String]},step:{type:[Number,String],default:1},color:{type:String,default:"primary"},increaseIcon:{type:String,default:"va-plus"},decreaseIcon:{type:String,default:"va-minus"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},longPressDelay:{type:Number,default:500},ariaLabel:{type:String,default:"$t:counterValue"},ariaDecreaseLabel:{type:String,default:"$t:decreaseCounter"},ariaIncreaseLabel:{type:String,default:"$t:increaseCounter"}},emits:["update:modelValue",...Ea,...pye(),...vye(),...Ag],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),{min:o=le(void 0),max:a=le(void 0),step:l}=kr(r),{isFocused:c,focus:u,blur:d}=bo(s,i),{valueComputed:f}=pn(r,i);function h(k){return parseFloat(Number(k).toFixed(10))}const p=A({get(){return f.value},set(k){f.value=h(k)}}),g=()=>b(()=>{i("update:modelValue",r.clearValue),i("clear"),y()}),{computedError:m,computedErrorMessages:v,withoutValidation:b,resetValidation:y}=yo(r,i,{reset:g,focus:u,value:p}),E=({target:k})=>{p.value=Number(k==null?void 0:k.value)},T=({target:k})=>{w(Number(k==null?void 0:k.value))},_=k=>typeof o.value>"u"||!Number(l.value)?k:Number(o.value)+Number(l.value)*Math.floor((k-Number(o.value))/Number(l.value)),w=k=>{if(typeof o.value<"u"&&k<Number(o.value)){p.value=Number(o.value);return}if(Number(a.value)&&k>Number(a.value)){p.value=_(Number(a.value));return}p.value=_(k)},M=A(()=>Ji(o.value)?!1:Number(p.value)<=Number(o.value)),x=A(()=>Ji(a.value)?!1:l.value?Number(p.value)>Number(a.value)-Number(l.value):Number(p.value)>=Number(a.value)),S=A(()=>r.disabled?-1:0),R=A(()=>M.value||r.disabled),I=A(()=>x.value||r.disabled),z=()=>{R.value||w(Number(p.value)-Number(l.value))},P=()=>{I.value||w(Number(p.value)+Number(l.value))};oT(h_("decreaseButtonRef"),{onUpdate:z,delay:or(r,"longPressDelay")}),oT(h_("increaseButtonRef"),{onUpdate:P,delay:or(r,"longPressDelay")});const{getColor:B}=ct(),U=A(()=>B(r.color)),j=A(()=>({class:{"va-counter__icon--inactive":R.value},color:U.value,icon:r.decreaseIcon,plain:!0,disabled:R.value,readonly:r.readonly,tabindex:-1,"aria-label":ae(r.ariaDecreaseLabel),...!R.value&&{onClick:z}})),Z=A(()=>({class:{"va-counter__icon--inactive":I.value},color:U.value,icon:r.increaseIcon,plain:!0,disabled:I.value,readonly:r.readonly,tabindex:-1,"aria-label":ae(r.ariaIncreaseLabel),...!I.value&&{onClick:P}})),ne=A(()=>(typeof r.margins=="string"?parseFloat(r.margins):r.margins)===0),K=()=>c.value?r.color:"background-border",fe=A(()=>({...wn(r,["color","textColor"]),round:r.rounded,preset:r.flat?"secondary":"",borderColor:r.flat?K():""})),Se=A(()=>({...fe.value,icon:r.decreaseIcon,disabled:R.value,"aria-label":ae(r.ariaDecreaseLabel),...!R.value&&{onClick:z}})),de=A(()=>({...fe.value,icon:r.increaseIcon,disabled:I.value,"aria-label":ae(r.ariaIncreaseLabel),...!I.value&&{onClick:P}})),{tp:ae}=rn(),ge=ba(),ue=Cr(),J=A(()=>({tabindex:S.value,"aria-label":ae(r.ariaLabel),"aria-valuemin":Number(o.value),"aria-valuemax":Number(a.value),...ho(ge,["class","style"]),...wn(r,["disabled","min","max","step"]),readonly:r.readonly||!r.manualInput})),X=A(()=>[ge.class,{"va-counter--input-square":ne.value},{"va-counter--content-slot":ue.content&&r.buttons}].filter(Boolean)),L=A(()=>({...ge.style||{}})),N=A(()=>x_(r.margins));fye(r);const G=gye(i),$=mye(i),O=tn(aT);return e({focus:u,blur:d,decreaseCount:z,increaseCount:P,reset:g}),(k,H)=>(V(),Te(C(oi),Re({class:"va-counter"},{...C(G),...C(O)},{class:X.value,style:L.value,focused:C(c),error:C(m),"error-messages":C(v),onKeydown:[We(He(P,["prevent"]),["up"]),We(He(P,["prevent"]),["right"]),We(He(z,["prevent"]),["down"]),We(He(z,["prevent"]),["left"])]}),Er({default:we(()=>[k.$slots.content?ve("",!0):(V(),ee("input",Re({key:0,ref_key:"input",ref:s,class:"va-input__content__input",type:"number",inputmode:"decimal"},{...J.value,...C($)},{value:p.value,"aria-live":k.$props.disabled?"off":"polite",onInput:E,onChange:T}),null,16,hye))]),_:2},[k.$props.buttons?{name:"prepend",fn:we(Y=>[me("div",{class:"va-counter__prepend-wrapper",style:Be({marginRight:N.value}),onMousedown:H[0]||(H[0]=He((...te)=>C(u)&&C(u)(...te),["prevent"]))},[se(k.$slots,"decreaseAction",Ue(je({...Y,decreaseCount:z})),()=>[ke(C(Pt),Re({class:"va-counter__button-decrease"},Se.value,{ref:"decreaseButtonRef"}),null,16)])],36)]),key:"0"}:{name:"prependInner",fn:we(Y=>[me("div",{class:"va-counter__prepend-inner",onMousedown:H[1]||(H[1]=He((...te)=>C(u)&&C(u)(...te),["prevent"]))},[se(k.$slots,"decreaseAction",Ue(je({...Y,decreaseCount:z})),()=>[ke(C(Pt),Re(j.value,{ref:"decreaseButtonRef"}),null,16)])],32)]),key:"1"},k.$props.buttons?{name:"append",fn:we(Y=>[me("div",{class:"va-counter__append-wrapper",style:Be({marginLeft:N.value}),onMousedown:H[2]||(H[2]=He((...te)=>C(u)&&C(u)(...te),["prevent"]))},[se(k.$slots,"increaseAction",Ue(je({...Y,increaseCount:P})),()=>[ke(C(Pt),Re({class:"va-counter__button-increase"},de.value,{ref:"increaseButtonRef"}),null,16)])],36)]),key:"2"}:{name:"appendInner",fn:we(Y=>[me("div",{class:"va-counter__append-inner",onMousedown:H[3]||(H[3]=He((...te)=>C(u)&&C(u)(...te),["prevent"]))},[se(k.$slots,"increaseAction",Ue(je({...Y,increaseCount:P})),()=>[ke(C(Pt),Re(Z.value,{ref:"increaseButtonRef"}),null,16)])],32)]),key:"3"},k.$slots.content?{name:"default",fn:we(Y=>[me("div",{ref_key:"input",ref:s,tabindex:"0",class:"va-counter__content-wrapper"},[se(k.$slots,"content",Ue(je({...Y,value:Number(p.value)})))],512)]),key:"4"}:void 0]),1040,["class","style","focused","error","error-messages","onKeydown"]))}}),bye=ze(yye),qD={currentPage:{type:Number}},YD=()=>({items:{type:Array,default:()=>[]}}),ZD={selectable:{type:Boolean,default:!1}},JD={itemsTrackBy:{type:[String,Function],default:""}},QD=t=>{const e=t.length===2||t.length===3,n=t.every(i=>["asc","desc",null].includes(i)),r=t.length===new Set(t).size;return e&&n&&r},_ye={...YD(),columns:{type:Array,default:()=>[]},sortingOptions:{type:Array,default:()=>["asc","desc",null],validator:QD}},eN=(t,e,n)=>{const r=typeof t=="string"?{key:t}:t,i=r.sortingOptions?QD(r.sortingOptions):!0;return i||qt(`The "sortingOptions" array in the column with "${r.key}" key is invalid. For this column, the "sortingOptions" value is taken as for the table: ${JSON.stringify(n.sortingOptions)}.`),{source:t,initialIndex:e,key:r.key,name:r.name||r.key,label:r.label||oA(r.key),thTitle:r.thTitle||r.headerTitle||r.label||oA(r.key),sortable:r.sortable||!1,sortingFn:r.sortingFn,displayFormatFn:r.displayFormatFn,sortingOptions:i&&r.sortingOptions||n.sortingOptions,thAlign:r.thAlign||r.alignHead||"left",thVerticalAlign:r.thVerticalAlign||r.verticalAlignHead||"middle",tdAlign:r.tdAlign||r.align||"left",tdVerticalAlign:r.tdVerticalAlign||r.verticalAlign||"middle",width:r.width,tdClass:r.tdClass||r.classes,thClass:r.thClass||r.headerClasses,tdStyle:r.tdStyle||r.style,thStyle:r.thStyle||r.headerStyle}},xye=t=>Object.keys(o_({},...t.items)).map((e,n)=>eN(e,n,t)),wye=t=>t.columns.map((e,n)=>eN(e,n,t)),Sye=t=>({columnsComputed:A(()=>t.columns.length===0?xye(t):wye(t))}),Yu={delay:{type:Number,default:0,validator:t=>t>=0}};function Eye(t,e){const n=or(e,"delay")??0,r=le(!0);let i;return function(...s){const o=()=>t.apply(this,s);return C(n)?(r.value&&(r.value=!1,setTimeout(()=>r.value=!0,C(n)),i=o()),i):o()}}function gS(t,e){const n=or(e,"delay")??0;if(!C(n))return t;const r=le(!0),i=le(),s=le(),o=le();return De(t,()=>{i.value=t.value;const a=setTimeout(()=>{o.value=i.value},C(n));r.value?(r.value=!1,o.value=t.value,s.value=t.value,clearTimeout(a),setTimeout(()=>r.value=!0,C(n))):o.value=s.value},{immediate:!0}),o}const Mye={...Yu,...qD,perPage:{type:Number}},Cye=(t,e)=>{const n=A(()=>{if(!e.perPage||e.perPage<0)return t.value;if(!e.currentPage||e.currentPage<0)return t.value.slice(0,e.perPage);const i=e.perPage*(e.currentPage-1);return t.value.slice(i,i+e.perPage)});return{paginatedRows:gS(n,e)}},tN=(t,e)=>typeof e=="function"?e(t):cS(t,e)||t,Aye=()=>({...YD(),...JD}),Tye=(t,e,n,r)=>{var i;const s=cS(n,r.key);return{rowIndex:t,rowKey:e,rowData:n,column:r,source:s,value:((i=s==null?void 0:s.toString)==null?void 0:i.call(s))||""}},Pye=(t,e,n,r)=>{const i=tN(t,n);return{initialIndex:e,itemKey:i,source:t,cells:r.map(s=>Tye(e,i,t,s)),rowData:t}},Rye=(t,e)=>{const n=le({});return{rowsComputed:A(()=>e.items.map((i,s)=>({...Pye(i,s,e.itemsTrackBy,t.value),toggleRowDetails:o=>{typeof o=="boolean"?n.value[s]=o:n.value[s]=!n.value[s]},isExpandableRowVisible:!!n.value[s]})))}},Lye={...ZD,...JD,modelValue:{type:Array},selectMode:{type:String,default:"multiple"}},Iye=(t,e,n)=>{const r=le([]),i=A({get(){return e.modelValue===void 0?r.value:e.modelValue},set(w){e.modelValue===void 0&&(r.value=w),n("update:modelValue",w)}}),s=le(-1);De(()=>e.selectMode,(w,M)=>{w==="single"&&M==="multiple"&&(i.value=[],m(-1))}),De(t,()=>{m(-1)}),De(i,(w,M=[])=>{n("selectionChange",{currentSelectedItems:w,previousSelectedItems:M})},{immediate:!0});const o=w=>tN(w,e.itemsTrackBy),a=A(()=>!t.value.some(({source:w})=>i.value.includes(o(w)))),l=A(()=>t.value.length===0?!1:t.value.every(({source:w})=>i.value.includes(o(w)))),c=A(()=>!a.value&&!l.value);function u(w){return i.value.includes(o(w.source))}function d(){i.value=[...new Set([...i.value,...t.value.map(w=>o(w.source))])]}function f(){const w=t.value.map(M=>o(M.source));i.value=i.value.filter(M=>!w.includes(M))}function h(w){i.value=[...i.value,o(w.source)]}function p(w){i.value=[o(w.source)]}function g(w){const M=i.value.findIndex(x=>x===o(w.source));i.value=[...i.value.slice(0,M),...i.value.slice(M+1)]}function m(w){if(w===-1)s.value=-1;else{const M=t.value.find(x=>x.initialIndex===w);M?s.value=t.value.indexOf(M):s.value=-1}}function v(w){let M,x;return u(t.value[s.value])?(M=Math.min(s.value,w),x=Math.max(s.value,w)):(M=Math.min(s.value+1,w),x=Math.max(s.value-1,w)),t.value.slice(M,x+1)}function b(w){const M=w.map(S=>o(S.source));if(a.value){i.value=M;return}if(M.every(S=>i.value.includes(S))){i.value=i.value.filter(S=>!M.includes(S));return}i.value=[...new Set([...i.value,...M])]}function y(w){e.selectable&&(u(w)?(g(w),e.selectMode==="single"?m(-1):m(w.initialIndex)):(e.selectMode==="single"?p(w):h(w),m(w.initialIndex)))}function E(w){e.selectable&&y(w)}function T(w){if(!e.selectable)return;if(e.selectMode==="single"||s.value===-1)return y(w);const M=t.value.indexOf(w);b(v(M)),m(-1)}function _(){l.value?f():d(),m(-1)}return{ctrlSelectRow:E,shiftSelectRows:T,toggleRowSelection:y,toggleBulkSelection:_,isRowSelected:u,noRowsSelected:a,severalRowsSelected:c,allRowsSelected:l}},Us="--va-data-table",nN=t=>typeof t=="function",rN={...ZD,selectedColor:{type:String,default:"primary"},allowFooterSorting:{type:Boolean,default:!1},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},height:{type:[String,Number]}},Oye=t=>nN(t)?t():t,kye=t=>nN(t)?t():t,iN=t=>{const{getColor:e,getFocusColor:n,getHoverColor:r}=ct(),i=A(()=>e(t.selectedColor));return{CSSVariables:A(()=>({hoverColor:r(i.value),selectedColor:t.selectable?n(i.value):void 0,tableHeight:t.height?x_(t.height):"var(--va-data-table-height)",theadBg:t.stickyHeader?"var(--va-data-table-thead-background, var(--va-data-table-header-background))":"var(--va-data-table-thead-background)",tfootBg:t.stickyFooter?"var(--va-data-table-tfoot-background, var(--va-data-table-header-background))":"var(--va-data-table-tfoot-background)"})),getHeaderCSSVariables:c=>({[`${Us}-width`]:c.width&&x_(c.width),[`${Us}-align`]:c.thAlign,[`${Us}-vertical-align`]:c.thVerticalAlign,[`${Us}-cursor`]:c.sortable?"pointer":"default"}),getCellCSSVariables:c=>({[`${Us}-align`]:c.column.tdAlign,[`${Us}-vertical-align`]:c.column.tdVerticalAlign}),getFooterCSSVariables:c=>({[`${Us}-align`]:c.thAlign,[`${Us}-vertical-align`]:c.thVerticalAlign,[`${Us}-cursor`]:t.allowFooterSorting&&c.sortable?"pointer":"default"}),getClass:Oye,getStyle:kye}},lT=t=>typeof t=="function",cT=t=>t!==null&&typeof t=="object",Dye={rowBind:{type:null},cellBind:{type:null}},Nye=t=>({getRowBind:r=>lT(t.rowBind)?t.rowBind(r.source,r.initialIndex):cT(t.rowBind)?t.rowBind:{},getCellBind:(r,i)=>lT(t.cellBind)?t.cellBind(r.source,i.source,r.column,i.initialIndex):cT(t.cellBind)?t.cellBind:{}}),Fye={...qD,animated:{type:Boolean,default:!0}},Bye=(t,e)=>{const n=le("shuffle"),r=A(()=>t.animated?`table-transition-${n.value}`:""),i=le(e.value.length),s=A(()=>e.value.length!==i.value);return De(e,(o,a)=>{const l=!!(o.length&&a.length);n.value=o.length>50||s.value&&l?"fade":"shuffle",i.value=o.length}),De(()=>t.currentPage,()=>{s.value||(n.value="shuffle")}),r},Vye={...Yu,filter:{type:String,default:""},filterMethod:{type:Function}},Uye=(t,e,n)=>{const r=A(()=>!t.value.length||e.filter===""&&!e.filterMethod?t.value:t.value.filter(s=>s.cells.some(o=>typeof e.filterMethod=="function"?e.filterMethod(o.source,o):new RegExp(e.filter,"i").test(o.value)))),i=gS(r,e);return De(i,()=>{n("filtered",{items:i.value.map(s=>s.source),itemsIndexes:i.value.map(s=>s.initialIndex)})}),r.value.length!==t.value.length&&n("filtered",{items:r.value.map(s=>s.source),itemsIndexes:r.value.map(s=>s.initialIndex)}),{filteredRows:i}},$ye={...Yu,sortBy:{type:String},columnSorted:{type:Object},sortingOrder:{type:[String,null]},disableClientSideSorting:{type:Boolean,default:!1}},zye=(t,e,n,r)=>{const i=le(""),s=A({get(){return n.sortBy===void 0?i.value:n.sortBy},set(p){n.sortBy===void 0&&(i.value=p),r("update:sortBy",p)}}),o=le(null),a=A({get(){return n.sortingOrder===void 0?o.value:n.sortingOrder},set(p){n.sortingOrder===void 0&&(o.value=p),r("update:sortingOrder",p)}}),l=(p,g)=>{if(typeof p=="string"&&typeof g=="string")return p.localeCompare(g);if(typeof p=="number"&&typeof g=="number")return p-g;const m=parseFloat(p),v=parseFloat(g);return!isNaN(m)&&!isNaN(v)?m-v:isNaN(m)?isNaN(v)?0:1:-1},c=A(()=>{if(n.disableClientSideSorting||e.value.length<=1)return e.value;const p=t.value.findIndex(({name:v,sortable:b})=>s.value===v&&b),g=t.value[p];if(!g)return e.value;const m=a.value==="desc"?-1:1;return[...e.value].sort((v,b)=>{if(a.value===null)return v.initialIndex-b.initialIndex;{const y=v.cells[p].source,E=b.cells[p].source;return m*(typeof g.sortingFn=="function"?g.sortingFn(y,E):l(y,E))}})});De(c,()=>{r("sorted",{sortBy:s.value,sortingOrder:a.value,items:c.value.map(p=>p.source),itemsIndexes:c.value.map(p=>p.initialIndex)})});const u=(p,g)=>{const m=g.findIndex(v=>v===p);return m!==-1?g[(m+1)%g.length]:g[0]};function d(p){let g;p.name===s.value?g=u(a.value,p.sortingOptions):(s.value=p.name,g=p.sortingOptions[0]),a.value=g,r("columnSorted",{columnName:p.name,value:g,column:p})}const f=Eye(d,n),h=A(()=>a.value==="asc"?"va-arrow-up":a.value==="desc"?"va-arrow-down":"unfold_more");return{sortBySync:s,sortingOrderSync:a,toggleSorting:f,sortedRows:c,sortingOrderIconName:h}},Hye=t=>{const e=C(t);return Mn(e)},dm=()=>{const t=st();return A({get(){return Hye(t)},set(e){t.value=e}})},Gye={scrollTopMargin:{type:Number,default:0},scrollBottomMargin:{type:Number,default:0}},Wye=["scroll:top","scroll:bottom"],jye=(t,e)=>{var n;const r=(n=on())==null?void 0:n.vnode.props,i=(r==null?void 0:r["onScroll:top"])!==void 0,s=(r==null?void 0:r["onScroll:bottom"])!==void 0,o=dm(),a=dm(),l=dm(),c=A(()=>!!o.value),u=h=>{h.forEach(p=>{p.isIntersecting&&(p.target===a.value?e("scroll:top"):e("scroll:bottom"))})},d=A(()=>{const h=[];return c.value&&(a.value&&h.push(a.value),l.value&&h.push(l.value)),h}),f=A(()=>({root:o.value,rootMargin:`${t.scrollTopMargin??0}px 0px ${t.scrollBottomMargin??0}px 0px`}));return HD(u,f,d),{scrollContainer:o,topTrigger:a,bottomTrigger:l,doRenderTopTrigger:i,doRenderBottomTrigger:s}},Xye={class:"va-data-table__table-tr"},Kye={key:0,scope:"col",class:"va-data-table__table-th va-data-table__table-cell-select"},qye=["title","onClick","onKeydown"],Yye={class:"va-data-table__table-th-wrapper"},Zye={key:0},Jye=Me({name:"VaDataTableThRow",__name:"VaDataTableThRow",props:{...rN,selectMode:{type:String,default:"multiple"},allRowsSelected:{type:Boolean,default:!1},severalRowsSelected:{type:Boolean,default:!1},columns:{type:Array,required:!0},isFooter:{type:Boolean,default:!1},sortBySync:{type:String,required:!0},sortingOrderIconName:{type:String,required:!0},sortingOrderSync:{type:String,default:null},ariaSelectAllRowsLabel:{type:String,default:"$t:selectAllRows"},ariaSortColumnByLabel:{type:String,default:"$t:sortColumnBy"}},emits:["toggleBulkSelection","toggleSorting"],setup(t,{emit:e}){const n=t,r=e,{t:i,tp:s}=rn(),{getFooterCSSVariables:o,getHeaderCSSVariables:a,getClass:l,getStyle:c}=iN(n),u=m=>{const v=n.sortingOrderSync&&n.sortBySync===m.name?n.sortingOrderSync==="asc"?"ascending":"descending":"none",b=m.sortable?s(n.ariaSortColumnByLabel,{name:m.label}):void 0;return{"aria-sort":v,"aria-label":b}},d=m=>{n.isFooter&&!n.allowFooterSorting||!m.sortable||r("toggleSorting",m)},f=()=>r("toggleBulkSelection"),h=m=>[m.width?{minWidth:m.width,maxWidth:m.width}:{},n.isFooter?o(m):a(m),c(m.thStyle)],p=A(()=>n.isFooter?"footer":"header"),g=A(()=>n.selectMode==="multiple");return(m,v)=>(V(),ee("tr",Xye,[m.$props.selectable?(V(),ee("th",Kye,[g.value?(V(),Te(C(yh),{key:0,class:"va-data-table__table-cell-checkbox","model-value":m.$props.severalRowsSelected?"idl":m.$props.allRowsSelected,"aria-label":C(s)(m.$props.ariaSelectAllRowsLabel),"true-value":!0,"false-value":!1,color:m.$props.selectedColor,"indeterminate-value":"idl",indeterminate:"","onUpdate:modelValue":f},null,8,["model-value","aria-label","color"])):ve("",!0)])):ve("",!0),(V(!0),ee(qe,null,vt(t.columns,b=>(V(),ee("th",Re({key:b.name,scope:"col",class:["va-data-table__table-th",C(l)(b.thClass)],title:b.thTitle,style:h(b)},u(b),{onClick:He(y=>d(b),["exact"]),onKeydown:We(He(y=>d(b),["stop"]),["enter"])}),[me("div",Yye,[`${p.value}(${b.name})`in m.$slots?(V(),ee("span",Zye,[se(m.$slots,`${p.value}(${b.name})`,Ue(je({label:b.label,key:b.key})))])):se(m.$slots,p.value,Ue(Re({key:1},{label:b.label,key:b.key})),()=>[me("span",null,Ze(b.label),1)]),b.sortable?(V(),Te(C(St),{key:2,class:Qe(["va-data-table__table-th-sorting-icon",{active:t.sortBySync===b.name&&t.sortingOrderSync!==null}]),size:"small",role:b.sortable?"button":void 0,tabindex:b.sortable?0:-1,name:t.sortingOrderIconName,onSelectstart:He(()=>{},["prevent"])},null,8,["class","role","tabindex","name"])):ve("",!0)])],16,qye))),128))]))}}),w_=ze(Jye),{isParsablePositiveMeasure:Qye,parseSizeValue:uT}=CD(),dT=(t,e)=>{const n=Qye(t);return!n&&qt(`[va-virtual-scroller] ${e} should be number or parsable int greater or equal to 0. Provided: ${t}.`),n},e0e={horizontal:{type:Boolean,default:!1},itemSize:{type:[Number,String],default:0,validator:t=>dT(t,"itemSize")},wrapperSize:{type:[Number,String],default:100,validator:t=>t==="auto"||dT(t,"wrapperSize")}},t0e=(t,e)=>{const n=st(),r=st(),i=A(()=>t.horizontal?"clientWidth":"clientHeight"),s=A(()=>{var h;return t.wrapperSize==="auto"?((h=r.value)==null?void 0:h[i.value])||0:uT(t.wrapperSize,o)}),o=le(16);bn("resize",()=>{o.value=parseFloat(getComputedStyle(document.documentElement).fontSize),c()},!0);const l=le(0),c=()=>{if(!n.value)return;const h=[],g=n.value.children.length;for(let m=0;m<g;m++){const v=n.value.children.item(m);v&&h.push(v[i.value])}l.value=g?Math.trunc(h.reduce((m,v)=>m+v,0)/(g-1)):0},u=on();kt(()=>{var h,p;n.value||(n.value=(p=(h=u==null?void 0:u.parent)==null?void 0:h.refs)==null?void 0:p.list),c()}),De(e,c),De(s,c);let d=0;const f=A(()=>{const h=uT(t.itemSize,o),p=Math.max(h,l.value,1);return Math.abs(d/p*100-100)>5||d===0?(d=p,p):d});return{list:n,wrapper:r,itemSize:f,wrapperSize:s}},n0e={trackBy:{type:[String,Number,Function],default:""}},r0e=t=>({getKey:(n,r,i)=>{if(t.trackBy&&n&&typeof n=="object"&&!hu(t.trackBy)){const s=Array.isArray(n);let o;if(s&&!isNaN(+t.trackBy)&&(o=n[+t.trackBy]),s||(o=n[t.trackBy]),o||o===0)return o;qt(`${s?"Index":"Key"} '${t.trackBy}' wasn't found in provided ${s?"array":"object"}: `,n)}return hu(t.trackBy)?t.trackBy(n):i}}),i0e=Me({name:"VaVirtualScroller",__name:"VaVirtualScroller",props:{...n0e,...e0e,items:{type:Array,default:()=>[]},bench:{type:Number,default:10,validator:t=>t>=0},disabled:{type:Boolean,default:!1},table:{type:Boolean,default:!1}},emits:["scroll:bottom"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=le(0),o=A(()=>r.horizontal?"scrollLeft":"scrollTop"),a=()=>{c.value&&(s.value=c.value[o.value])};r.disabled||bn("scroll",a,!0);const{list:l,wrapper:c,itemSize:u,wrapperSize:d}=t0e(r,s),{getKey:f}=r0e(r),h=(I,z,P)=>f(I,z,P);De(s,I=>{I+d.value===_.value&&i("scroll:bottom")});const p=A(()=>Math.max(0,Math.floor(s.value/u.value)-r.bench)),g=A(()=>{var I;return(I=r.items)!=null&&I.length?r.disabled?r.items.length:Math.min(r.items.length-p.value,Math.ceil(d.value/u.value)+r.bench*2):0}),m=A(()=>p.value+g.value),v=A(()=>{var I;return(I=r.items)!=null&&I.length?r.items.slice(p.value,m.value):[]}),b=A(()=>r.horizontal?"width":"height"),y=A(()=>r.table&&r.disabled),E=A(()=>({[b.value]:y.value||!d.value?void 0:`${d.value}px`})),T=jt("va-virtual-scroller",()=>({...wn(r,["horizontal"])})),_=A(()=>{var I;return(((I=r.items)==null?void 0:I.length)??0)*u.value}),w=A(()=>({[b.value]:y.value?void 0:`${_.value}px`})),M=A(()=>p.value*u.value),x=A(()=>({transform:`translate${r.horizontal?"X":"Y"}(${M.value}px)`})),S=A(()=>r.horizontal?"left":"top");return e({scrollToAttribute:S,virtualScrollTo:I=>{var z;!I&&I!==0||(z=c.value)==null||z.scrollTo({[S.value]:I*u.value})}}),(I,z)=>(V(),ee("div",{ref_key:"wrapper",ref:c,class:Qe(["va-virtual-scroller",C(T)]),style:Be(E.value)},[se(I.$slots,"content",Ue(je({containerStyleComputed:w.value,listStyleComputed:x.value,renderBuffer:v.value,uniqueKey:h,currentListOffset:M.value})),()=>[me("div",{class:"va-virtual-scroller__container",style:Be(w.value)},[me("div",{ref_key:"list",ref:l,role:"list",class:"va-virtual-scroller__list",style:Be(x.value)},[(V(!0),ee(qe,null,vt(v.value,(P,B)=>se(I.$slots,"default",Ue(Re({key:h(P,B)},{item:P,index:p.value+B})))),128))],4)],4)])],6))}}),Dg=ze(i0e),s0e={key:0,class:"va-inner-loading__overlay","aria-hidden":"true"},o0e=Me({name:"VaInnerLoading",__name:"VaInnerLoading",props:{...fh,...rt,color:{type:String},icon:{type:String,default:"va-loading"},size:{type:Number,default:30}},setup(t){const e=t,{getColor:n}=ct(),r=A(()=>n(e.color)),i=A(()=>({"va-inner-loading--active":e.loading})),s=A(()=>({"aria-busy":e.loading}));return(o,a)=>(V(),ee("div",Re({class:["va-inner-loading",i.value],"aria-live":"polite"},s.value),[se(o.$slots,"default"),o.$props.loading?(V(),ee("div",s0e,[se(o.$slots,"loading",{},()=>[ke(C(St),{class:"va-inner-loading__spinner",spin:"counter-clockwise",color:r.value,size:o.$props.size,name:o.$props.icon},null,8,["color","size","name"])])])):ve("",!0)],16))}}),sN=ze(o0e),a0e={key:0},l0e={ref:"list",class:"va-data-table__table-tbody"},c0e={key:"showNoDataHtml",class:"va-data-table__table-tr"},u0e=["innerHTML"],d0e={key:"showNoDataFilteredHtml",class:"va-data-table__table-tr"},f0e=["innerHTML"],h0e=["onClick","onDblclick","onContextmenu"],p0e={key:0,class:"va-data-table__grid-column-header"},fT=It(Dg,["items","trackBy","horizontal","disabled","table"]),hT=It(w_),m0e=Me({name:"VaDataTable",inheritAttrs:!1,__name:"VaDataTable",props:{...rt,...fT,...Fye,...Dye,...Gye,...$ye,...rN,..._ye,...Vye,...Mye,...Aye(),...Lye,...Yu,...wn(hT,["ariaSelectAllRowsLabel","ariaSortColumnByLabel"]),hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingColor:{type:String,default:"primary"},noDataHtml:{type:String,default:"No items"},noDataFilteredHtml:{type:String,default:"No items match the provided filtering condition"},hideDefaultHeader:{type:Boolean,default:!1},footerClone:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},virtualScroller:{type:Boolean,default:!1},virtualTrackBy:{type:[String,Number],default:"initialIndex"},grid:{type:Boolean,default:!1},gridColumns:{type:[Number,String],default:0},wrapperSize:{type:[Number,String],default:"auto"},ariaSelectRowLabel:{type:String,default:"$t:selectRowByIndex"}},emits:["update:modelValue","update:sortBy","update:sortingOrder","filtered","sorted","selectionChange","row:click","row:dblclick","row:contextmenu","columnSorted",...Wye],setup(t,{emit:e}){const{tp:n}=rn(),r=t,i=e,{columnsComputed:s}=Sye(r),{rowsComputed:o}=Rye(s,r),{filteredRows:a}=Uye(o,r,i),{sortBySync:l,sortingOrderSync:c,toggleSorting:u,sortedRows:d,sortingOrderIconName:f}=zye(s,a,r,i),{paginatedRows:h}=Cye(d,r),{ctrlSelectRow:p,shiftSelectRows:g,toggleBulkSelection:m,isRowSelected:v,severalRowsSelected:b,allRowsSelected:y,toggleRowSelection:E}=Iye(h,r,i),{CSSVariables:T,getCellCSSVariables:_,getClass:w,getStyle:M}=iN(r),{getRowBind:x,getCellBind:S}=Nye(r),R=Bye(r,h),I=A(()=>r.items.length===0),z=A(()=>h.value.length===0),P=(N,G,$)=>{i(N,{event:G,item:$.source,itemIndex:$.initialIndex,row:$}),r.selectable&&r.grid&&E($)},B=A(()=>({...ho(Z,["class","style"]),class:wn(r,["striped","selectable","hoverable","clickable"])})),U=tn(fT),j=A(()=>({...U.value,items:h.value,trackBy:r.virtualTrackBy,disabled:!r.virtualScroller,table:!0})),Z=ba(),ne=A(()=>({class:[{"va-data-table--sticky":r.stickyHeader||r.stickyFooter},{"va-data-table--scroll":!!r.height},{"va-data-table--virtual-scroller":J.value},{"va-data-table--grid":r.grid},Z.class],style:[Z.style],...j.value})),K=tn(hT),fe=A(()=>({...K.value,columns:s.value,sortingOrderIconName:f.value,severalRowsSelected:b.value,sortingOrderSync:c.value,allRowsSelected:y.value,sortBySync:l.value})),{scrollContainer:Se,topTrigger:de,bottomTrigger:ae,doRenderTopTrigger:ge,doRenderBottomTrigger:ue}=jye(r,i),J=A(()=>r.virtualScroller&&!r.grid),X=A(()=>r.gridColumns||"var(--va-data-table-grid-tbody-columns)"),L=(N,G)=>G.displayFormatFn?G.displayFormatFn(N.value):N.value;return(N,G)=>(V(),Te(C(Dg),Re({class:"va-data-table"},ne.value,{ref_key:"scrollContainer",ref:Se,style:`--va-css-variables-selected-color: ${String(C(T).selectedColor)};--va-css-variables-hover-color: ${String(C(T).hoverColor)};--va-css-variables-table-height: ${String(C(T).tableHeight)};--va-css-variables-thead-bg: ${String(C(T).theadBg)};--va-css-variables-tfoot-bg: ${String(C(T).tfootBg)};--va-grid-columns-count: ${String(X.value)}`}),{content:we(({uniqueKey:$,renderBuffer:O,currentListOffset:k,listStyleComputed:H,containerStyleComputed:Y})=>[ke(C(sN),{"aria-live":"polite",style:Be(Y),loading:t.loading,color:t.loadingColor},{default:we(()=>[C(ge)?(V(),ee("div",{key:0,ref_key:"topTrigger",ref:de,class:"va-data-table__scroll-trigger"},null,512)):ve("",!0),me("table",Re({class:"va-data-table__table",style:H},B.value),["colgroup"in N.$slots?(V(),ee("colgroup",a0e,[se(N.$slots,"colgroup",Ue(je(C(s))))])):ve("",!0),me("thead",{class:Qe(["va-data-table__table-thead",{"va-data-table__table-thead--sticky":N.$props.stickyHeader}]),style:Be({top:J.value&&N.$props.stickyHeader?`-${k}px`:void 0})},[se(N.$slots,"headerPrepend"),se(N.$slots,"header",{},()=>[t.hideDefaultHeader?ve("",!0):(V(),Te(C(w_),Re({key:0},fe.value,{onToggleBulkSelection:C(m),onToggleSorting:C(u)}),Er({_:2},[vt(N.$slots,(te,he)=>({name:he,fn:we(F=>[se(N.$slots,he,Ue(je(F)))])}))]),1040,["onToggleBulkSelection","onToggleSorting"]))]),se(N.$slots,"headerAppend")],6),me("tbody",l0e,[se(N.$slots,"bodyPrepend"),ke(e3,{name:J.value?"":C(R),css:!N.$props.virtualScroller,appear:!N.$props.virtualScroller},{default:we(()=>[I.value?(V(),ee("tr",c0e,[me("td",{class:"va-data-table__table-td no-data",colspan:"99999",innerHTML:t.noDataHtml},null,8,u0e)])):z.value?(V(),ee("tr",d0e,[me("td",{class:"va-data-table__table-td no-data",colspan:"99999",innerHTML:t.noDataFilteredHtml},null,8,f0e)])):ve("",!0),(V(!0),ee(qe,null,vt(O,(te,he)=>(V(),ee(qe,{key:`table-row_${$(te,he)}`},[me("tr",Re({class:["va-data-table__table-tr",[{selected:C(v)(te),"va-data-table__table-tr--expanded":te.isExpandableRowVisible}]]},C(x)(te),{onClick:F=>P("row:click",F,te),onDblclick:F=>P("row:dblclick",F,te),onContextmenu:F=>P("row:contextmenu",F,te)}),[N.selectable&&!N.$props.grid?(V(),ee("td",{class:"va-data-table__table-td va-data-table__table-cell-select",key:`selectable_${$(te,he)}`,onSelectstart:G[0]||(G[0]=He(()=>{},["prevent"]))},[ke(C(yh),{class:"va-data-table__table-cell-checkbox","model-value":C(v)(te),color:N.selectedColor,"aria-label":C(n)(N.$props.ariaSelectRowLabel,{index:te.initialIndex}),onClick:[He(F=>C(g)(te),["shift","exact","stop"]),He(F=>C(p)(te),["ctrl","exact","stop"]),He(F=>C(p)(te),["exact","stop"])]},null,8,["model-value","color","aria-label","onClick"])],32)):ve("",!0),(V(!0),ee(qe,null,vt(te.cells,(F,D)=>(V(),ee("td",Re({key:`table-cell_${F.column.name+F.rowIndex}`,class:["va-data-table__table-td",C(w)(F.column.tdClass)],style:[F.column.width?{minWidth:F.column.width,maxWidth:F.column.width}:{},C(_)(F),C(M)(F.column.tdStyle)]},C(S)(F,te)),[`cell(${F.column.name})`in N.$slots?se(N.$slots,`cell(${F.column.name})`,Ue(Re({key:0},{...F,row:te,isExpanded:te.isExpandableRowVisible}))):se(N.$slots,"cell",Ue(Re({key:1},{cell:F,row:te})),()=>[N.$props.grid?(V(),ee("span",p0e,Ze(C(s)[D].label),1)):ve("",!0),gt(" "+Ze(L(F,C(s)[D])),1)])],16))),128))],16,h0e),te.isExpandableRowVisible?(V(),ee("td",{class:"va-data-table__table-expanded-content",colspan:"99999",key:$(te,he)},[se(N.$slots,"expandableRow",Ue(je(te)))])):ve("",!0)],64))),128))]),_:2},1032,["name","css","appear"]),se(N.$slots,"bodyAppend")],512),N.$slots.footer||t.footerClone&&!N.$props.grid?(V(),ee("tfoot",{key:1,class:Qe(["va-data-table__table-tfoot",{"va-data-table__table-tfoot--sticky":N.$props.stickyFooter}]),style:Be({bottom:J.value&&N.$props.stickyFooter?`${k}px`:void 0})},[se(N.$slots,"footerPrepend"),se(N.$slots,"footer",{},()=>[t.hideDefaultHeader?ve("",!0):(V(),Te(C(w_),Re({key:0},fe.value,{"is-footer":"",onToggleBulkSelection:C(m),onToggleSorting:C(u)}),Er({_:2},[vt(N.$slots,(te,he)=>({name:he,fn:we(F=>[se(N.$slots,he,Ue(je(F)))])}))]),1040,["onToggleBulkSelection","onToggleSorting"]))]),se(N.$slots,"footerAppend")],6)):ve("",!0)],16),C(ue)?(V(),ee("div",{key:1,ref_key:"bottomTrigger",ref:ae,class:"va-data-table__scroll-trigger"},null,512)):ve("",!0)]),_:2},1032,["style","loading","color"])]),_:3},16,["style"]))}}),v0e=ze(m0e),pT=t=>t===null?!1:typeof t=="object"&&("start"in t||"end"in t),g0e=(t,e)=>{const n=le(t.value),r=A({get:()=>n.value,set:s=>{if(e.value&&(t.value=s),!s){t.value=s;return}pT(s)?s.end!==null&&(t.value=s):t.value=s,n.value=s}});return De(t,s=>{n.value=s}),{valueComputed:r,reset:()=>{n.value&&pT(n.value)&&(n.value=t.value)}}},mT=t=>new Date(Date.parse(t)),vT=t=>Xd(t)&&!isNaN(t.getTime()),y0e=t=>{const e=o=>{const a=o.split(t.delimiter);return a.length<2?!1:a.every(l=>{const c=(t.parseDate||mT)(l);return vT(c)})},n=o=>o.includes(t.rangeDelimiter),r=le(!0),i=o=>{const a=o.split("."),l=(a==null?void 0:a.length)===3?a.reverse().join("-"):o,c=(t.parseDate||mT)(l);return r.value=vT(c),c};return{parseDateInputValue:o=>{if(r.value=!0,t.parse)return t.parse(o,r);if(e(o))return o.split(t.delimiter).map(i);if(n(o)){const[a,l]=o.split(t.rangeDelimiter).map(i);return{start:a,end:l}}return i(o)},isValid:r}},b0e=t=>{const e=Date.parse(t);return!isNaN(e)&&!t.includes(" ")},_0e=t=>t.endsWith("GMT"),x0e=t=>{const e=new Date(t);return!isNaN(e.getTime())},w0e=(t,e)=>_0e(e)?t.toUTCString():b0e(e)?t.toISOString():x0e(e)?t.toString():null,g0=t=>t===null?!1:typeof t=="object"&&("start"in t||"end"in t),y0=t=>t===null?!1:Array.isArray(t),gT=t=>t===null?!1:typeof t=="string"||typeof t=="number"||t instanceof Date,S0e=(t,e,n,r,i)=>{const s=(u,d)=>{if(i)return i(d);if(typeof u=="string"){const f=w0e(d,u);return f||r(d)}return typeof u=="number"?d.getTime():d},o=u=>u instanceof Date?u:new Date(u),a=A(()=>t.value===null||t.value===void 0?null:typeof t.value=="string"?n(t.value):typeof t.value=="number"?new Date(t.value):t.value),l=A({get:()=>{if(a.value===null||a.value===void 0)return null;if(y0(a.value))return a.value.map(o);if(g0(a.value)){const{start:u,end:d}=a.value;return{start:u?o(u):null,end:d?o(d):null}}return o(a.value)},set(u){var d,f;if(u==null){t.value=u;return}if(y0(u)&&(y0(t.value)||Ji(t.value))){const h=t.value;t.value=u.map((p,g)=>s((h==null?void 0:h[g])||(h==null?void 0:h[0]),p));return}if(g0(u)&&(g0(t.value)||Ji(t.value))){const{start:h,end:p}=u;t.value={start:h?s((d=t.value)==null?void 0:d.start,h):null,end:p?s((f=t.value)==null?void 0:f.start,p):null};return}if(gT(u)&&(gT(t.value)||Ji(t.value))){t.value=s(t.value,u);return}throw console.log({inputDate:u,modelValue:t.value}),new Error("Input date is not the same as date from props")}});return{text:A({get:()=>l.value===null||l.value===void 0?"":r(l.value),set:u=>{t.value=n(u)}}),normalized:l}},E0e=(t,e)=>(t==null?void 0:t.toDateString())===(e==null?void 0:e.toDateString()),oN=(t,e)=>(t==null?void 0:t.getFullYear())===(e==null?void 0:e.getFullYear()),M0e=(t,e)=>oN(t,e)&&(t==null?void 0:t.getMonth())===(e==null?void 0:e.getMonth()),C0e=t=>{const e=new Date;return e.setFullYear(t),e},_u=t=>t===null?!1:typeof t=="object"&&("start"in t||"end"in t),Ng=t=>Xd(t),Fg=t=>Array.isArray(t),aN=0,lN=11,A0e=t=>t.month===lN?{...t,year:t.year+1,month:aN}:{...t,month:t.month+1},T0e=t=>t.month===aN?{...t,year:t.year-1,month:lN}:{...t,month:t.month-1},P0e=t=>Xd(t)?t:Xd(t==null?void 0:t.start)?t.start:Array.isArray(t)&&Xd(t[0])?t[0]:new Date,cN=(t,e,n)=>{const r=P0e(t.modelValue),i={type:"day",year:r.getFullYear(),month:r.getMonth(),...n},s=le(i),o=A({get(){return{...s.value,...t.view}},set(c){s.value=c,e("update:view",c)}});return{syncView:o,next:()=>{o.value.type==="day"?o.value=A0e(o.value):o.value.type==="month"&&(o.value={...o.value,year:o.value.year+1})},prev:()=>{o.value.type==="day"?o.value=T0e(o.value):o.value.type==="month"&&(o.value={...o.value,year:o.value.year-1})}}},R0e=["onKeypress"],yS=Me({name:"VaDatePickerCell",__name:"VaDatePickerCell",props:{otherMonth:{type:Boolean,default:!1},today:{type:Boolean,default:!1},inRange:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},weekend:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},highlightWeekend:{type:Boolean,default:!1},highlightToday:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},color:{type:String,default:"primary"}},emits:["click"],setup(t,{emit:e}){const n=t,r=e,i=()=>{n.disabled||r("click")},{getColor:s}=ct(),o=A(()=>s(n.color)),{textColorComputed:a}=Hn(o);return(l,c)=>t.hidden?(V(),ee("div",{key:0,class:"va-date-picker-cell va-date-picker-cell_clear",style:Be(`--va-bg: ${String(o.value)};--va-text-color-computed: ${String(C(a))}`)},null,4)):(V(),ee("div",{key:1,class:Qe(["va-date-picker-cell",{"va-date-picker-cell_other-month":t.otherMonth,"va-date-picker-cell_today":t.highlightToday&&t.today,"va-date-picker-cell_in-range":t.inRange,"va-date-picker-cell_disabled":t.disabled,"va-date-picker-cell_highlighted-weekend":t.highlightWeekend&&t.weekend,"va-date-picker-cell_selected":t.selected,"va-date-picker-cell_focused":t.focused,"va-date-picker-cell_readonly":t.readonly}]),onClick:i,onKeypress:We(He(i,["prevent","stop"]),["space","enter"]),style:Be(`--va-bg: ${String(o.value)};--va-text-color-computed: ${String(C(a))}`)},[se(l.$slots,"default")],46,R0e))}});function yT(t){return t===void 0}const bS=({rowSize:t,start:e,end:n,onSelected:r,onFocusIndex:i})=>{const s=le(-1);let o=!1;return{focusedCellIndex:s,containerAttributes:{onFocus:()=>{if(o)return;o=!1;const f=i===void 0?C(e)||0:C(i);s.value=f},onKeydown:f=>{if(["ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Space"].includes(f.key)&&(f.preventDefault(),f.stopPropagation()),f.key==="Enter"||f.key==="Space"){if(r===void 0)return;r(s.value);return}f.key==="ArrowRight"&&(s.value+=1),f.key==="ArrowLeft"&&(s.value-=1),f.key==="ArrowDown"&&(s.value+=t),f.key==="ArrowUp"&&(s.value-=t),!yT(e)&&s.value<C(e)&&(s.value=C(e)),!yT(n)&&s.value>C(n)-1&&(s.value=C(n)-1)},onBlur:()=>{o=!1,s.value=-1},onMousedown:()=>{o=!0},tabindex:0}}},L0e=(t,e)=>{if(e==="single")return t;if(e==="range")return{start:t,end:null};if(e==="multiple")return[t];if(e==="auto")return t;throw new Error("Unknown mode")},fm=(t,e)=>{throw Error(`Incorrect modelValue for mode ${e}. Got ${JSON.stringify(t)}`)},I0e=t=>Ng(t)?"single":_u(t)?"range":Fg(t)?"multiple":fm(t,"auto"),bT=t=>t.start&&t.end&&t.start>t.end?{start:t.end,end:t.start}:t,O0e=(t,e,n)=>({updateModelValue:i=>{if(!t.modelValue){e("update:modelValue",L0e(i,t.mode));return}const s=t.mode==="auto"?I0e(t.modelValue):t.mode;if(s==="single"){if(!Ng(t.modelValue))return fm(t.modelValue,s);e("update:modelValue",i)}else if(s==="range"){if(!_u(t.modelValue))return fm(t.modelValue,s);if(t.modelValue.end&&n(t.modelValue.end,i))return e("update:modelValue",{start:t.modelValue.start,end:null});if(t.modelValue.start&&n(t.modelValue.start,i))return e("update:modelValue",{start:null,end:t.modelValue.end});if(t.modelValue.end===null)return e("update:modelValue",bT({start:t.modelValue.start,end:i}));if(t.modelValue.start===null)return e("update:modelValue",bT({end:t.modelValue.end,start:i}));e("update:modelValue",{start:i,end:null})}else if(s==="multiple"){if(!Fg(t.modelValue))return fm(t.modelValue,s);!!t.modelValue.find(a=>n(a,i))?e("update:modelValue",t.modelValue.filter(a=>!n(a,i))):e("update:modelValue",[...t.modelValue,i].sort((a,l)=>a.getTime()-l.getTime()))}}}),k0e=t=>({month:M0e,day:E0e,year:oN})[t],_S=(t,e,n,r)=>{const i=k0e(t),s=n.allowedDays||n.allowedMonths||n.allowedYears,o=p=>s===void 0?!1:!s(p),a=le(-1),l=A(()=>e.value[a.value]),{updateModelValue:c}=O0e(n,r,i),u=p=>{n.readonly||o(p)||(c(p),r(`click:${t}`,p))},d=p=>i(new Date,p),f=p=>n.modelValue?Ng(n.modelValue)?i(n.modelValue,p):Fg(n.modelValue)?!!n.modelValue.find(g=>i(g,p)):_u(n.modelValue)?i(n.modelValue.start,p)||i(n.modelValue.end,p):!1:!1,h=p=>{if(!n.modelValue||!_u(n.modelValue))return!1;if(n.modelValue.start&&n.modelValue.end)return n.modelValue.start<p&&n.modelValue.end>p;const g=n.modelValue.start||n.modelValue.end;return g&&l.value?g<p?l.value>=p:l.value<=p:!1};return De(l,p=>{r(`hover:${t}`,p)}),{hoveredIndex:a,hoveredValue:l,onClick:u,isToday:d,isSelected:f,isInRange:h}},b0=(t,e)=>new Date(t,e+1,0).getDate(),D0e=(t,e)=>new Date(t,e,1).getDay(),_0=t=>Array.from(Array(t).keys()).map(e=>e+1),N0e=(t,e)=>{const r=u=>{var d;return!e||!((d=e.firstWeekday)!=null&&d.value)?u:e.firstWeekday.value.toLowerCase()==="monday"?u===0?6:u-1:u},i=A(()=>r(D0e(t.value.year,t.value.month))),s=()=>{if(i.value===0)return[];const u=b0(t.value.year,t.value.month-1);return _0(u).slice(-i.value).map(f=>new Date(t.value.year,t.value.month-1,f))},o=()=>_0(b0(t.value.year,t.value.month)).map(d=>new Date(t.value.year,t.value.month,d)),a=A(()=>[...s(),...o()]),l=A(()=>a.value.length);return{calendarDates:A(()=>{const u=a.value,d=7*6-u.length,f=b0(t.value.year,t.value.month+1),h=_0(f);return[...u,...h.slice(0,d).map(p=>new Date(t.value.year,t.value.month+1,p))]}),currentMonthStartIndex:i,currentMonthEndIndex:l}},F0e=["onMouseenter"],B0e={class:"va-date-picker-cell__day"},Bp=Me({name:"VaDayPicker",__name:"VaDayPicker",props:{monthNames:{type:Array,required:!0},weekdayNames:{type:Array,required:!0},firstWeekday:{type:String,default:"Sunday"},hideWeekDays:{type:Boolean,default:!1},view:{type:Object,default:()=>({type:"day"})},modelValue:{type:[Date,Array,Object]},mode:{type:String,default:"auto"},showOtherMonths:{type:Boolean,default:!1},allowedDays:{type:Function},weekends:{type:Function},highlightWeekend:{type:Boolean,default:!1},highlightToday:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},color:{type:String,default:"primary"}},emits:["update:modelValue","hover:day","click:day"],setup(t,{emit:e}){const n=t,r=e,{firstWeekday:i,weekdayNames:s,view:o}=kr(n),{calendarDates:a,currentMonthStartIndex:l,currentMonthEndIndex:c}=N0e(o,{firstWeekday:i}),u=A(()=>i.value.toLowerCase()==="sunday"?s.value:[...s.value.slice(1),s.value[0]]),{hoveredIndex:d,onClick:f,isToday:h,isSelected:p,isInRange:g}=_S("day",a,n,r),m=A(()=>n.showOtherMonths?0:l.value),v=A(()=>n.showOtherMonths?a.value.length:c.value),{focusedCellIndex:b,containerAttributes:y}=bS({rowSize:7,start:m,end:v,onSelected:w=>f(a.value[w])});De(b,w=>{d.value=w}),De(d,w=>{b.value=w});const E=w=>n.view.month!==w.getMonth(),T=w=>n.allowedDays===void 0?!1:!n.allowedDays(w),_=w=>n.weekends===void 0?w.getDay()===6||w.getDay()===0:n.weekends(w);return(w,M)=>(V(),ee("div",Re({class:"va-day-picker"},C(y)),[t.hideWeekDays?ve("",!0):(V(!0),ee(qe,{key:0},vt(u.value,x=>(V(),ee("div",{key:x,class:"va-day-picker__weekday"},[se(w.$slots,"weekday",{},()=>[gt(Ze(x),1)])]))),128)),(V(!0),ee(qe,null,vt(C(a),(x,S)=>(V(),ee("div",{class:"va-day-picker__calendar__day-wrapper",key:S,onMouseenter:R=>d.value=S,onMouseleave:M[0]||(M[0]=R=>d.value=-1)},[ke(yS,{hidden:E(x)&&!t.showOtherMonths,today:C(h)(x),selected:C(p)(x),"in-range":C(g)(x),"other-month":E(x),weekend:_(x),disabled:T(x),focused:C(d)===S,"highlight-today":t.highlightToday,"highlight-weekend":t.highlightWeekend,readonly:w.$props.readonly,color:t.color,onClick:R=>{C(f)(x),b.value=S}},{default:we(()=>[me("span",B0e,[se(w.$slots,"day",Ue(je({date:x})),()=>[gt(Ze(x.getDate()),1)])])]),_:2},1032,["hidden","today","selected","in-range","other-month","weekend","disabled","focused","highlight-today","highlight-weekend","readonly","color","onClick"])],40,F0e))),128))],16))}}),V0e={key:0,class:"va-date-picker-header va-date-picker__header"},U0e={class:"va-date-picker__header__text"},$0e={class:"va-date-picker__header__month"},Vp=Me({name:"VaDatePickerHeader",__name:"VaDatePickerHeader",props:{monthNames:{type:Array,required:!0},view:{type:Object},color:{type:String},disabled:{type:Boolean,default:!1},ariaNextPeriodLabel:{type:String,default:"$t:nextPeriod"},ariaPreviousPeriodLabel:{type:String,default:"$t:previousPeriod"},ariaSwitchViewLabel:{type:String,default:"$t:switchView"}},emits:["update:view"],setup(t,{emit:e}){const n=t,r=e,{syncView:i,prev:s,next:o}=cN(n,r),a=()=>{i.value.type==="day"?i.value={...i.value,type:"month"}:i.value.type==="month"&&(i.value={...i.value,type:"year"})},l=d=>{i.value=d},c=hD(mD(rS())),{tp:u}=rn();return(d,f)=>C(i).type!=="year"?(V(),ee("div",V0e,[se(d.$slots,"buttonPrev",Ue(je({onClick:C(s)})),()=>[ke(C(Pt),{"va-child":"prevButton",disabled:d.$props.disabled,icon:"va-arrow-left",preset:"plain",size:"small",color:t.color,textColor:C(c),"aria-label":C(u)(d.$props.ariaPreviousPeriodLabel),round:"",onClick:C(s)},null,8,["disabled","color","textColor","aria-label","onClick"])]),me("div",U0e,[se(d.$slots,"header",Ue(je({year:C(i).year,month:C(i).month,monthNames:t.monthNames,view:C(i),changeView:l,switchView:a})),()=>[ke(C(Pt),{"va-child":"middleButton",disabled:d.$props.disabled,preset:"plain",size:"small",color:t.color,textColor:C(c),"aria-label":C(u)(d.$props.ariaSwitchViewLabel),onClick:a},{default:we(()=>[se(d.$slots,"year",Ue(je({year:C(i).year})),()=>[gt(Ze(C(i).year),1)]),C(i).type==="day"?se(d.$slots,"month",Ue(Re({key:0},{month:C(i).month})),()=>[me("span",$0e,Ze(t.monthNames[C(i).month]),1)]):ve("",!0)]),_:3},8,["disabled","color","textColor","aria-label"])])]),se(d.$slots,"buttonNext",Ue(je({onClick:C(o)})),()=>[ke(C(Pt),{"va-child":"nextButton",disabled:d.$props.disabled,icon:"va-arrow-right",preset:"plain",size:"small",color:t.color,textColor:C(c),"aria-label":C(u)(d.$props.ariaNextPeriodLabel),onClick:C(o),round:""},null,8,["disabled","color","textColor","aria-label","onClick"])])])):ve("",!0)}}),z0e=["onMouseenter"],Up=Me({name:"VaMonthPicker",__name:"VaMonthPicker",props:{modelValue:{type:[Date,Array,Object]},monthNames:{type:Array,required:!0},view:{type:Object,default:()=>({type:"month"})},allowedMonths:{type:Function,default:void 0},highlightToday:{type:Boolean,default:!0},mode:{type:String,default:"auto"},readonly:{type:Boolean,default:!1},color:{type:String,default:"primary"}},emits:["update:modelValue","hover:month","click:month"],setup(t,{emit:e}){const n=t,r=e,{view:i}=kr(n),s=A(()=>Array.from(Array(12).keys()).map(p=>new Date(i.value.year,p))),{hoveredIndex:o,onClick:a,isToday:l,isSelected:c,isInRange:u}=_S("month",s,n,r),d=p=>n.allowedMonths===void 0?!1:!n.allowedMonths(p),{focusedCellIndex:f,containerAttributes:h}=bS({rowSize:3,start:0,end:s.value.length,onSelected:p=>a(s.value[p])});return De(f,p=>{o.value=p}),De(o,p=>{f.value=p}),(p,g)=>(V(),ee("div",Re({class:"va-month-picker"},C(h)),[(V(!0),ee(qe,null,vt(s.value,(m,v)=>(V(),ee("div",{key:v,class:"va-month-picker__month-wrapper",onMouseenter:b=>o.value=v,onMouseleave:g[0]||(g[0]=b=>o.value=-1)},[ke(yS,{"in-range":!!C(u)(m),selected:!!C(c)(m),disabled:!!d(m),today:!!C(l)(m),focused:C(o)===v,"highlight-today":t.highlightToday,readonly:p.$props.readonly,color:t.color,onClick:b=>{C(a)(m),f.value=v}},{default:we(()=>[se(p.$slots,"month",Ue(je({monthIndex:v,month:t.monthNames[v]})),()=>[gt(Ze(t.monthNames[v]),1)])]),_:2},1032,["in-range","selected","disabled","today","focused","highlight-today","readonly","color","onClick"])],40,z0e))),128))],16))}}),$p=Me({name:"VaYearPicker",__name:"VaYearPicker",props:{modelValue:{type:[Date,Array,Object]},allowedYears:{type:Function,default:void 0},highlightToday:{type:Boolean,default:!0},startYear:{type:Number,default:1970},mode:{type:String,default:"auto"},view:{type:Object,default:()=>({type:"year"})},endYear:{type:Number,default:()=>new Date().getFullYear()+50},readonly:{type:Boolean,default:!1},color:{type:String,default:"primary"}},emits:["update:modelValue","hover:year","click:year"],setup(t,{emit:e}){const n=t,r=e,i=st(),{view:s}=kr(n),o=(b,y)=>{const E=y-b+1;return Array.from(Array(E).keys()).map(T=>C0e(b+T))},a=A(()=>o(n.startYear,n.endYear)),l=b=>{if(!i.value)return;const y=i.value.scrollHeight,E=i.value.offsetHeight,T=y/a.value.length*b,_=y/a.value.length,w=T-i.value.scrollTop;w<0?i.value.scrollTo({top:T}):w>E&&i.value.scrollTo({top:T-E+_})},c=b=>{if(!i.value)return;const y=i.value.scrollHeight,E=i.value.offsetHeight,T=y/a.value.length*b;i.value.scrollTo({top:T-E/2})};kt(()=>{const b=a.value.findIndex(y=>y.getFullYear()===s.value.year);c(b)});const{hoveredIndex:u,onClick:d,isToday:f,isSelected:h,isInRange:p}=_S("year",a,n,r),g=b=>n.allowedYears===void 0?!1:!n.allowedYears(b),{focusedCellIndex:m,containerAttributes:v}=bS({rowSize:1,start:0,end:a.value.length,onFocusIndex:A(()=>a.value.findIndex(b=>b.getFullYear()===s.value.year)),onSelected:b=>d(a.value[b])});return De(m,b=>b!==-1&&l(b)),De(m,b=>{u.value=b}),De(u,b=>{m.value=b}),(b,y)=>(V(),ee("div",Re({ref_key:"rootNode",ref:i,class:"va-year-picker"},C(v),{onKeydown:y[1]||(y[1]=We(He(()=>{},["prevent"]),["space"]))}),[(V(!0),ee(qe,null,vt(a.value,(E,T)=>(V(),Te(yS,{key:E.toString(),"in-range":C(p)(E),selected:C(h)(E),disabled:g(E),today:C(f)(E),focused:C(m)===T,"highlight-today":t.highlightToday,readonly:b.$props.readonly,color:t.color,onClick:_=>{C(d)(E),m.value=T},onMouseenter:_=>u.value=T,onMouseleave:y[0]||(y[0]=_=>u.value=-1)},{default:we(()=>[gt(Ze(E.getFullYear()),1)]),_:2},1032,["in-range","selected","disabled","today","focused","highlight-today","readonly","color","onClick","onMouseenter"]))),128))],16))}}),H0e={class:"va-date-picker__picker-wrapper"},G0e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],W0e=["SU","MO","TU","WE","TH","FR","SA"],Ym=Me({name:"VaDatePicker",__name:"VaDatePicker",props:{...xk({prevButton:Pt,nextButton:Pt,middleButton:Pt}),...Fn,...rt,...It(Vp),...It(Bp),...It(Up),...It($p),modelValue:{type:[Date,Array,Object]},monthNames:{type:Array,default:G0e},weekdayNames:{type:Array,default:W0e},view:{type:Object},type:{type:String,default:"day"},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:String,default:void 0},weekendsColor:{type:String,default:void 0}},emits:[..._r,...al(Vp),...al($p),...al(Bp),...al(Up)],setup(t,{expose:e,emit:n}){const r=t;wk(r);const i=n,s=le(),{valueComputed:o}=pn(r,i),{syncView:a}=cN(r,i,{type:r.type}),l=A(()=>({"va-date-picker_without-week-days":r.hideWeekDays,"va-date-picker_disabled":r.disabled})),c=_=>{r.readonly||r.type==="day"&&(o.value=_)},u=_=>{i("click:month",_);const w=_.getFullYear(),M=_.getMonth();r.type!=="month"&&(a.value={type:"day",year:w,month:M})},d=_=>{r.type==="month"&&(o.value=_)},f=_=>{i("click:year",_);const w=_.getFullYear();r.type!=="year"&&(a.value={type:"month",year:w,month:a.value.month})},h=_=>{r.type==="year"&&(o.value=_)},{colorsToCSSVariable:p}=ct(),g=A(()=>({...p({color:r.color,"weekends-color":r.weekendsColor},"va-date-picker")})),m=()=>{var _;return(_=s.value)==null?void 0:_.$el.focus()};De(a,(_,w)=>{_.type!==w.type&&cn(m)});const v=_=>r.readonly&&r.type===_,b=tn(It(Bp)),y=tn(It(Vp)),E=tn(It(Up)),T=tn(It($p));return e({focus:m,focusCurrentPicker:m}),(_,w)=>(V(),ee("div",{class:Qe(["va-date-picker",l.value]),style:Be(g.value)},[ke(Vp,Re(C(y),{view:C(a),"onUpdate:view":w[0]||(w[0]=M=>Xt(a)?a.value=M:null)}),Er({_:2},[vt(_.$slots,(M,x)=>({name:x,fn:we(S=>[se(_.$slots,x,Ue(je(S)))])}))]),1040,["view"]),me("div",H0e,[C(a).type==="day"?(V(),Te(Bp,Re({key:0,ref_key:"currentPicker",ref:s},C(b),{"model-value":C(o),view:C(a),readonly:_.$props.disabled||v("day"),"onUpdate:modelValue":c,"onHover:day":w[1]||(w[1]=M=>_.$emit("hover:day",M)),"onClick:day":w[2]||(w[2]=M=>_.$emit("click:day",M))}),Er({_:2},[vt(_.$slots,(M,x)=>({name:x,fn:we(S=>[se(_.$slots,x,Ue(je(S)))])}))]),1040,["model-value","view","readonly"])):ve("",!0),C(a).type==="month"?(V(),Te(Up,Re({key:1,ref_key:"currentPicker",ref:s},C(E),{view:C(a),"model-value":C(o),readonly:_.$props.disabled||v("month"),"onUpdate:modelValue":d,"onHover:month":w[3]||(w[3]=M=>_.$emit("hover:month",M)),"onClick:month":u}),Er({_:2},[vt(_.$slots,(M,x)=>({name:x,fn:we(S=>[se(_.$slots,x,Ue(je(S)))])}))]),1040,["view","model-value","readonly"])):ve("",!0),C(a).type==="year"?(V(),Te($p,Re({key:2,ref_key:"currentPicker",ref:s},C(T),{view:C(a),"model-value":C(o),readonly:_.$props.disabled||v("year"),"onHover:year":w[4]||(w[4]=M=>_.$emit("hover:year",M)),"onUpdate:modelValue":h,"onClick:year":f}),Er({_:2},[vt(_.$slots,(M,x)=>({name:x,fn:we(S=>[se(_.$slots,x,Ue(je(S)))])}))]),1040,["view","model-value","readonly"])):ve("",!0)])],6))}}),uN=It(bi,["innerAnchorSelector","stateful","keyboardNavigation","modelValue"]),ji={...uN,modelValue:{},closeOnChange:{type:Boolean,default:null},isOpen:{type:Boolean,default:void 0}},xS=["update:isOpen"],wS=function(t,e,n={}){const[r]=kl("isOpen",t,e,!1),i=A(()=>t.closeOnChange!==null?t.closeOnChange:C(n.defaultCloseOnValueUpdate||!1));return De(()=>t.modelValue,()=>{i.value&&(r.value=!1)}),{dropdownProps:tn(uN),isOpenSync:r}},_T=It(oi,["focused","maxLength","counterValue"]),xT=It(Ym),j0e=Me({name:"VaDateInput",inheritAttrs:!1,__name:"VaDateInput",props:{...ji,...bh,..._T,...xT,...go,...rt,clearValue:{type:Date,default:void 0},modelValue:{type:[Date,Array,Object,String,Number]},resetOnClose:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!1},offset:{...ji.offset,default:()=>[2,0]},format:{type:Function},formatDate:{type:Function,default:t=>t.toLocaleDateString()},formatValue:{type:Function},parse:{type:Function},parseDate:{type:Function},delimiter:{type:String,default:", "},rangeDelimiter:{type:String,default:" ~ "},manualInput:{type:Boolean,default:!1},color:{type:String,default:"primary"},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"va-calendar"},ariaToggleDropdownLabel:{type:String,default:"$t:toggleDropdown"},ariaResetLabel:{type:String,default:"$t:resetDate"},ariaSelectedDateLabel:{type:String,default:"$t:selectedDate"}},emits:[...Ag,...al(Ym),...Og,...Ea,..._r,...xS,"update:text"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),o=le(),{resetOnClose:a}=kr(r),{trapFocusIn:l,freeFocus:c}=sD(),u=()=>{const Ee=Mn(o.value);if(!Ee){c();return}l(Ee)};De([o],()=>{u()});const{valueComputed:d}=pn(r,i),{isOpenSync:f,dropdownProps:h}=wS(r,i,{defaultCloseOnValueUpdate:A(()=>!(Array.isArray(g.value)||_u(g.value)&&g.value.end===null))}),p=A(()=>!a.value),{valueComputed:g,reset:m}=g0e(d,p);De(f,Ee=>{!Ee&&!p.value&&m()});const{isFocused:v,focus:b,blur:y,onFocus:E,onBlur:T}=bo(s),_=mS(o),w=Ee=>Ee?r.formatDate(Ee):"...",{parseDateInputValue:M,isValid:x}=y0e(r);De(g,()=>{x.value=!0});const S=Ee=>{if(r.format)return r.format(g.value);if(Fg(Ee))return Ee.map(be=>r.formatDate(be)).join(r.delimiter);if(Ng(Ee))return r.formatDate(Ee);if(_u(Ee))return w(Ee.start)+r.rangeDelimiter+w(Ee.end);if(Ee==null)return"";throw new Error("VaDatePicker: Invalid model value. Value should be Date, Date[] or { start: Date, end: Date | null }, got "+typeof Ee)},{text:R,normalized:I}=S0e(d,or(r,"mode"),M,S,r.formatValue),z=A(()=>x.value?g.value?R.value:r.clearValue?S(r.clearValue):"":""),P=({target:Ee})=>{if(r.disabled)return;const be=M(Ee.value);x.value&&(g.value=be)},B=()=>J(()=>{d.value=r.clearValue,i("clear"),X()}),U=()=>{f.value=!1,b()},j=()=>{cn(()=>{var Ee;return(Ee=o.value)==null?void 0:Ee.focusCurrentPicker()})},Z=()=>{f.value?j():b()},ne=Ee=>f.value?!1:r.disabled||r.readonly?!0:Ee===void 0?!1:r.manualInput&&(Ee==null?void 0:Ee.code)!=="Space",K=Ee=>{ne(Ee instanceof KeyboardEvent?Ee:void 0)||(f.value=!f.value,cn(Z))},fe=()=>{r.disabled||r.readonly||(f.value=!0,cn(j))},{computedError:Se,computedErrorMessages:de,listeners:ae,validationAriaAttributes:ge,validate:ue,withoutValidation:J,resetValidation:X}=yo(r,i,{reset:B,focus:b,value:g}),L=A(()=>!x.value&&g.value!==r.clearValue||Se.value),N=Cr(),G=A(()=>{const Ee=[r.leftIcon&&"prependInner",(!r.leftIcon||r.clearable)&&"icon"];return Object.keys(N).filter(be=>!Ee.includes(be))}),{canBeCleared:$,clearIconProps:O,onFocus:k,onBlur:H}=kg(r,g),Y=A(()=>r.disabled?{}:r.manualInput?{cursor:"text"}:{cursor:"pointer"}),te=A(()=>r.manualInput?r.disabled||r.readonly?-1:0:-1),he=A(()=>({role:te.value===0?"button":"none",ariaHidden:te.value===-1,name:r.icon,color:"secondary",tabindex:te.value})),F=tn(_T),D=A(()=>({...F.value,focused:v.value||_.value,error:L.value,errorMessages:de.value,readonly:r.readonly||!r.manualInput})),Q=A(()=>({focus:()=>{r.disabled||(E(),!r.readonly&&k())},blur:()=>{r.disabled||(T(),!r.readonly&&(H(),ae.onBlur()))}})),{tp:ie}=rn(),pe=ba(),ye=A(()=>({readonly:r.readonly||!r.manualInput,disabled:r.disabled,tabindex:r.disabled?-1:0,placeholder:r.placeholder,value:z.value,ariaLabel:r.label||ie(r.ariaSelectedDateLabel),ariaRequired:r.requiredMark,ariaDisabled:r.disabled,ariaReadOnly:r.readonly,...ge.value,...ho(pe,["class","style"])})),Oe=A(()=>({...h.value,stateful:!1,innerAnchorSelector:".va-input-wrapper__field",trigger:["click","right-click","enter","space"]})),re=D,xe=Q,Ne=tn(xT);return e({valueText:z,valueWithoutText:I,valueDate:I,focus:b,blur:y,reset:B,validate:ue,showDropdown:fe,hideAndFocus:U,toggleDropdown:K,focusDatePicker:j}),(Ee,be)=>(V(),Te(C(bi),Re({modelValue:C(f),"onUpdate:modelValue":be[9]||(be[9]=Ye=>Xt(f)?f.value=Ye:null),class:["va-date-input",Ee.$attrs.class],style:Ee.$attrs.style},Oe.value,{onOpen:j,role:"none"}),{anchor:we(()=>[se(Ee.$slots,"input",Ue(je({valueText:z.value,inputAttributes:ye.value,inputWrapperProps:C(re),inputListeners:C(xe)})),()=>[ke(C(oi),Re({class:"va-date-input__anchor",style:Y.value},C(re),mi(C(xe)),{"model-value":z.value,onChange:P}),Er({icon:we(()=>[C($)?(V(),Te(C(St),Re({key:0,"aria-label":C(ie)(Ee.$props.ariaResetLabel)},{...he.value,...C(O)},{onClick:He(B,["stop"]),onKeydown:[We(He(B,["stop"]),["enter"]),We(He(B,["stop"]),["space"])]}),null,16,["aria-label","onKeydown"])):ve("",!0),!Ee.$props.leftIcon&&Ee.$props.icon?(V(),Te(C(St),Re({key:1,"aria-label":C(ie)(Ee.$props.ariaToggleDropdownLabel)},he.value),null,16,["aria-label"])):ve("",!0)]),_:2},[vt(G.value,Ye=>({name:Ye,fn:we(ut=>[se(Ee.$slots,Ye,Ue(je(ut)))])})),Ee.$slots.prependInner||Ee.$props.leftIcon?{name:"prependInner",fn:we(Ye=>[se(Ee.$slots,"prependInner",Ue(je(Ye))),Ee.$props.leftIcon?(V(),Te(C(St),Re({key:0,"aria-label":C(ie)(Ee.$props.ariaToggleDropdownLabel)},he.value),null,16,["aria-label"])):ve("",!0)]),key:"0"}:void 0]),1040,["style","model-value"])])]),default:we(()=>[ke(C(Nl),{class:"va-date-input__dropdown-content",onKeydown:be[8]||(be[8]=We(Ye=>C(b)(),["esc"])),role:"dialog"},{default:we(()=>[ke(Ym,Re({ref_key:"datePicker",ref:o},C(Ne),{modelValue:C(I),"onUpdate:modelValue":be[0]||(be[0]=Ye=>Xt(I)?I.value=Ye:null),"onClick:day":be[1]||(be[1]=Ye=>Ee.$emit("click:day",Ye)),"onClick:month":be[2]||(be[2]=Ye=>Ee.$emit("click:month",Ye)),"onClick:year":be[3]||(be[3]=Ye=>Ee.$emit("click:year",Ye)),"onHover:day":be[4]||(be[4]=Ye=>Ee.$emit("hover:day",Ye)),"onHover:month":be[5]||(be[5]=Ye=>Ee.$emit("hover:month",Ye)),"onHover:year":be[6]||(be[6]=Ye=>Ee.$emit("hover:year",Ye)),"onUpdate:view":be[7]||(be[7]=Ye=>{Ee.$nextTick(()=>u()),Ee.$emit("update:view",Ye)})}),Er({_:2},[vt(Ee.$slots,(Ye,ut)=>({name:ut,fn:we(dt=>[se(Ee.$slots,ut,Ue(je(dt)))])}))]),1040,["modelValue"])]),_:3})]),_:3},16,["modelValue","class","style"]))}}),X0e=ze(j0e),K0e=ze(Ym),q0e=["aria-orientation"],Y0e={key:0,class:"va-divider__text"},zp="va-divider",Z0e=Me({name:"VaDivider",__name:"VaDivider",props:{...rt,vertical:{type:Boolean,default:!1},dashed:{type:Boolean,default:!1},inset:{type:Boolean,default:!1},orientation:{type:String,default:"center",validator:t=>["left","right","center"].includes(t)},color:{type:String,default:"backgroundBorder"}},setup(t){const e=t,{getColor:n}=ct(),r=A(()=>n(e.color)),i=Cr(),s=A(()=>!!i.default),o=A(()=>({[`${zp}--vertical`]:e.vertical,[`${zp}--inset`]:e.inset,[`${zp}--${e.orientation}`]:e.orientation&&!e.vertical,[`${zp}--dashed`]:e.dashed}));return(a,l)=>(V(),ee("div",{role:"separator",class:Qe(["va-divider",o.value]),"aria-orientation":t.vertical?"vertical":"horizontal","aria-hidden":!0,style:Be(`--va-color-computed: ${String(r.value)}`)},[s.value&&!t.vertical?(V(),ee("div",Y0e,[se(a.$slots,"default")])):ve("",!0)],14,q0e))}}),dN=ze(Z0e),_h=Symbol("VaFileUpload"),J0e=Me({name:"VaList",__name:"VaList",props:{...rt,fit:{type:Boolean,default:!1}},setup(t){const e=t,n=A(()=>({"va-list--fit":e.fit}));return(r,i)=>(V(),ee("div",{class:Qe(["va-list",n.value]),role:"list"},[se(r.$slots,"default")],2))}}),Q0e=Me({name:"VaListItem",__name:"VaListItem",props:{...Jl,...rt,tag:{type:String,default:"div"},disabled:{type:Boolean,default:!1}},emits:["focus","click"],setup(t,{emit:e}){const n=t,r=A(()=>n.disabled?-1:0),i=jt("va-list-item",()=>({...wn(n,["disabled"])})),{tagComputed:s,hrefComputed:o}=Ma(n);return(a,l)=>(V(),Te(mr(C(s)),{class:Qe(["va-list-item",C(i)]),role:"listitem",href:C(o),target:a.target,to:a.to,replace:a.replace,exact:a.exact,"active-class":a.activeClass,"exact-active-class":a.exactActiveClass,tabindex:r.value},{default:we(()=>[me("div",{class:"va-list-item__inner",onClick:l[0]||(l[0]=c=>a.$emit("click")),onFocus:l[1]||(l[1]=c=>a.$emit("focus"))},[se(a.$slots,"default")],32)]),_:3},8,["href","target","to","replace","exact","active-class","exact-active-class","class","tabindex"]))}}),ebe=Me({name:"VaListLabel",__name:"VaListLabel",props:{...rt,color:{type:String,default:"primary"}},setup(t){const e=t,{getColor:n}=ct(),r=A(()=>({color:n(e.color)}));return(i,s)=>(V(),ee("div",{class:"va-list-label",style:Be(r.value)},[se(i.$slots,"default")],4))}}),tbe=Me({name:"VaListItemLabel",__name:"VaListItemLabel",props:{...rt,caption:{type:Boolean,default:!1},lines:{type:Number,default:1}},setup(t){const e=t,n=A(()=>({"va-list-item-label--caption":e.caption})),r=A(()=>({"-webkit-line-clamp":e.lines}));return(i,s)=>(V(),ee("div",{class:Qe(["va-list-item-label",n.value]),style:Be(r.value)},[se(i.$slots,"default")],6))}}),nbe=Me({name:"VaListItemSection",__name:"VaListItemSection",props:{...rt,icon:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1}},setup(t){const e=t,n=A(()=>({"va-list-item-section--main":!e.icon&&!e.avatar,"va-list-item-section--icon":e.icon,"va-list-item-section--avatar":e.avatar}));return(r,i)=>(V(),ee("div",{class:Qe(["va-list-item-section",n.value])},[se(r.$slots,"default")],2))}}),rbe=Me({name:"VaListSeparator",__name:"VaListSeparator",props:{...rt,fit:{type:Boolean,default:!1},spaced:{type:Boolean,default:!1}},setup(t){const e=t,n=A(()=>({"va-list-separator--offset":!e.fit,"va-list-separator--spaced":e.spaced}));return(r,i)=>(V(),ee("div",{"aria-hidden":"true",class:Qe(["va-list-separator",n.value])},null,2))}}),Bg=ze(Q0e),ibe=ze(ebe),sbe=ze(tbe),xu=ze(nbe),obe=ze(rbe),fN=ze(J0e),abe={key:0,class:"va-progress-bar__info"},lbe=Me({name:"VaProgressBar",__name:"VaProgressBar",props:{...rt,modelValue:{type:[Number,String],default:0},indeterminate:{type:Boolean,default:!1},color:{type:String,default:"primary"},size:{type:[Number,String],default:"medium"},buffer:{type:[Number,String],default:100},rounded:{type:Boolean,default:!0},reverse:{type:Boolean,default:!1},contentInside:{type:Boolean,default:!1},showPercent:{type:Boolean,default:!1},max:{type:[Number,String],default:100},ariaLabel:{type:String,default:"$t:progressState"}},setup(t){const e=t,{getColor:n,getHoverColor:r}=ct(),i=A(()=>n(e.color)),{textColorComputed:s}=Hn(i),o=A(()=>typeof e.size=="string"&&["small","medium","large"].includes(e.size)),a=()=>{if(typeof e.size=="number")return`${e.size}px`;if(!o.value)return e.size},{tp:l}=rn(),c=A(()=>100/Number(e.max)*Number(e.modelValue)),u=A(()=>({"va-progress-bar--square":!e.rounded,[`va-progress-bar--${e.size}`]:o.value})),d=A(()=>({"--va-progress-bar-color":i.value,"--va-progress-bar-background-color":r(i.value)})),f=A(()=>({height:a()})),h=A(()=>({width:`${e.indeterminate?100:Il(Number(e.buffer),0,100)}%`,color:s.value,[e.reverse?"right":"left"]:0})),p=A(()=>({marginLeft:e.reverse?"auto":void 0,width:`${Il(c.value,0,100)}%`})),g=A(()=>({animationDirection:e.reverse?"reverse":"normal"})),m=A(()=>({role:"progressbar","aria-label":l(e.ariaLabel),"aria-valuenow":e.indeterminate?void 0:e.modelValue}));return(v,b)=>(V(),ee("div",Re({class:["va-progress-bar",u.value],style:d.value},m.value),[v.$props.contentInside?ve("",!0):(V(),ee("div",abe,[se(v.$slots,"default",Ue(je({value:v.$props.modelValue})),()=>[v.$props.showPercent?(V(),ee(qe,{key:0},[gt(Ze(v.$props.modelValue)+"% ",1)],64)):ve("",!0)])])),me("div",{class:"va-progress-bar__wrapper",style:Be(f.value)},[me("div",{class:"va-progress-bar__buffer",style:Be(h.value)},[v.$props.contentInside?se(v.$slots,"default",Ue(Re({key:0},{value:v.$props.modelValue})),()=>[v.$props.showPercent?(V(),ee(qe,{key:0},[gt(Ze(v.$props.modelValue)+"% ",1)],64)):ve("",!0)]):ve("",!0)],4),t.indeterminate?(V(),ee(qe,{key:0},[me("div",{class:"va-progress-bar__progress--indeterminate-start",style:Be(g.value)},null,4),me("div",{class:"va-progress-bar__progress--indeterminate-end",style:Be(g.value)},null,4)],64)):(V(),ee("div",{key:1,class:"va-progress-bar__progress",style:Be(p.value)},null,4))],4)],16))}}),hN=ze(lbe),xh=(t,e)=>{const n=Zn(t);if(!n)throw new Error(e);return n},cbe={class:"va-file-upload-undo__text"},ube="The VaFileUploadUndo component should be used in the context of VaFileUpload component",dbe=Me({name:"VaFileUploadUndo",__name:"VaFileUploadUndo",props:{vertical:{type:Boolean,default:!1}},emits:["recover"],setup(t,{emit:e}){const n=t,r=le(100),{undoDuration:i,undoButtonText:s,deletedFileMessage:o}=xh(_h,ube),a=jt("va-file-upload-undo",()=>({vertical:n.vertical})),l=A(()=>`${i.value??0}ms`);return kt(()=>{const c=setTimeout(()=>{r.value=0,clearTimeout(c)},0)}),(c,u)=>(V(),ee(qe,null,[ke(C(hN),{"model-value":r.value,rounded:!1,class:"va-file-upload-undo-progress-bar",style:Be(`--va-undo-duration-style: ${String(l.value)}`)},null,8,["model-value","style"]),me("div",{class:Qe(["va-file-upload-undo",C(a)]),style:Be(`--va-undo-duration-style: ${String(l.value)}`)},[me("span",cbe,Ze(C(o)),1),ke(C(Pt),{class:"va-file-upload-undo__button","aria-label":C(s),size:"small",outline:"",onClick:u[0]||(u[0]=d=>c.$emit("recover"))},{default:we(()=>[gt(Ze(C(s)),1)]),_:1},8,["aria-label"])],6)],64))}}),pN=ze(dbe),fbe={class:"va-file-upload-list-item__content"},hbe={key:0,class:"va-file-upload-list-item__name"},pbe={class:"va-file-upload-list-item__size"},mbe="The VaFileUploadListItem component should be used in the context of VaFileUpload component",vbe=Me({name:"VaFileUploadListItem",__name:"VaFileUploadListItem",props:{file:{type:Object,default:null},color:{type:String,default:"success"},ariaRemoveFileLabel:{type:String,default:"$t:removeFile"}},emits:["remove"],setup(t,{emit:e}){const{tp:n}=rn(),r=e,{undo:i,disabled:s,undoDuration:o}=xh(_h,mbe),{onFocus:a,onBlur:l}=bo(),c=le(!1),u=()=>{i.value?(c.value=!0,setTimeout(()=>{c.value&&(r("remove"),c.value=!1)},o.value??0)):(r("remove"),c.value=!1)},d=()=>{c.value=!1},f=jt("va-file-upload-list-item",()=>({undo:c.value}));return(h,p)=>(V(),Te(C(Bg),{class:Qe(["va-file-upload-list-item",C(f)]),tabindex:"-1",disabled:C(s),"aria-disabled":C(s)},{default:we(()=>[c.value&&C(i)?(V(),Te(C(xu),{key:0},{default:we(()=>[ke(C(pN),{onRecover:d})]),_:1})):(V(),Te(C(xu),{key:1},{default:we(()=>[me("div",fbe,[t.file&&t.file.name?(V(),ee("div",hbe,Ze(t.file&&t.file.name),1)):ve("",!0),me("div",pbe,Ze(t.file&&t.file.size),1),C(s)?ve("",!0):(V(),Te(C(Pt),{key:1,flat:"",color:"danger",icon:"clear",class:"va-file-upload-list-item__delete","aria-label":C(n)(h.$props.ariaRemoveFileLabel),onClick:He(u,["stop"]),onKeydown:[We(He(u,["stop"]),["enter"]),We(He(u,["stop"]),["space"])],onFocus:C(a),onBlur:C(l)},null,8,["aria-label","onKeydown","onFocus","onBlur"]))])]),_:1}))]),_:1},8,["class","disabled","aria-disabled"]))}}),mN=ze(vbe),gbe=["src","alt"],ybe={class:"va-file-upload-gallery-item__overlay"},bbe=["title"],_be="The VaFileUploadGalleryItem component should be used in the context of VaFileUpload component",xbe=Me({name:"VaFileUploadGalleryItem",__name:"VaFileUploadGalleryItem",props:{file:{type:Object,default:null},color:{type:String,default:"success"},ariaRemoveFileLabel:{type:String,default:"$t:removeFile"}},emits:["remove"],setup(t,{emit:e}){const n=t,r=e,{undo:i,disabled:s,undoDuration:o}=xh(_h,_be),{isFocused:a,onFocus:l,onBlur:c}=bo(),u=le(""),d=le(!1),f=A(()=>({backgroundColor:qw(n.color,.7)})),h=jt("va-file-upload-gallery-item",()=>({notImage:!u.value,focused:a.value,undo:d.value})),p=()=>{i.value?(d.value=!0,setTimeout(()=>{d.value&&(r("remove"),d.value=!1)},o.value??0)):(r("remove"),d.value=!1)},g=()=>{d.value=!1},m=()=>{if(!(!n.file.name||!n.file.image)){if(n.file.image.url)u.value=n.file.image.url;else if(n.file.image instanceof File){const E=new FileReader;E.readAsDataURL(n.file.image),E.onload=T=>{var _,w;((_=T.target)==null?void 0:_.result).includes("image")&&(u.value=(w=T.target)==null?void 0:w.result)}}}};kt(m),De(()=>n.file,m);const{t:v,tp:b}=rn(),{textColorComputed:y}=Hn(or(n,"color"));return(E,T)=>(V(),Te(C(Bg),{class:Qe(["va-file-upload-gallery-item",C(h)]),tabindex:"-1",disabled:C(s),"aria-disabled":C(s),onFocus:C(l),onBlur:C(c)},{default:we(()=>[d.value&&C(i)?(V(),Te(C(xu),{key:0},{default:we(()=>[ke(C(pN),{vertical:"",onRecover:g})]),_:1})):(V(),Te(C(xu),{key:1},{default:we(()=>[u.value?(V(),ee("img",{key:0,src:u.value,alt:t.file.name||"",class:"va-file-upload-gallery-item__image"},null,8,gbe)):ve("",!0),me("div",ybe,[me("div",{class:"va-file-upload-gallery-item__overlay-background",style:Be(f.value)},null,4),t.file&&t.file.name?(V(),ee("div",{key:0,class:"va-file-upload-gallery-item__name",title:t.file.name,style:Be({color:C(y)})},Ze(t.file.name),13,bbe)):ve("",!0),C(s)?ve("",!0):(V(),Te(C(Pt),{key:1,flat:"",color:"danger",icon:"va-delete",class:"va-file-upload-gallery-item__delete","aria-label":C(b)(E.$props.ariaRemoveFileLabel),onClick:p,onFocus:C(l),onBlur:C(c)},null,8,["aria-label","onFocus","onBlur"]))])]),_:1}))]),_:1},8,["class","disabled","aria-disabled","onFocus","onBlur"]))}}),vN=ze(xbe),wbe={class:"va-file-upload-single-item__name"},Sbe="The VaFileUploadSingleItem component should be used in the context of VaFileUpload component",Ebe=Me({name:"VaFileUploadSingleItem",__name:"VaFileUploadSingleItem",props:{file:{type:Object,default:null},ariaRemoveFileLabel:{type:String,default:"$t:removeFile"}},emits:["remove"],setup(t,{emit:e}){const{t:n,tp:r}=rn(),{disabled:i}=xh(_h,Sbe);return(s,o)=>(V(),Te(C(Bg),{disabled:C(i),"aria-disabled":C(i),class:"va-file-upload-single-item",tabindex:"-1"},{default:we(()=>[ke(C(xu),{class:"va-file-upload-single-item__content"},{default:we(()=>[me("div",wbe,Ze(t.file&&t.file.name),1),C(i)?ve("",!0):(V(),Te(C(Pt),{key:0,class:"va-file-upload-single-item__button","aria-label":C(r)(s.$props.ariaRemoveFileLabel),size:"small",color:"danger",preset:"secondary",onClick:o[0]||(o[0]=a=>s.$emit("remove"))},{default:we(()=>[gt(" Delete ")]),_:1},8,["aria-label"]))]),_:1})]),_:1},8,["disabled","aria-disabled"]))}}),gN=ze(Ebe),wT=It(vN),ST=It(mN),ET=It(gN),Mbe=Me({name:"VaFileUploadList",__name:"VaFileUploadList",props:{type:{type:String,default:""},files:{type:Array,default:null},...wT,...ST,...ET},emits:["remove","removeSingle"],setup(t,{emit:e}){const n=t,r=A(()=>n.files.map(i)),i=u=>({name:u.name||u.url||"",size:s(u.size),date:o(new Date),image:u}),s=u=>{if(u===0)return"0 Bytes";if(!u)return"";const d=1024,f=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],h=Math.floor(Math.log(u)/Math.log(d));return parseFloat((u/Math.pow(d,h)).toFixed(2))+" "+f[h]},o=(u=new Date)=>u.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric",year:"numeric"}),a=tn(wT),l=tn(ST),c=tn(ET);return(u,d)=>(V(),Te(C(fN),{class:Qe(["va-file-upload-list",`va-file-upload-list--${t.type}`]),role:t.type!=="single"?"list":void 0},{default:we(()=>[t.type==="list"?(V(!0),ee(qe,{key:0},vt(r.value,(f,h)=>(V(),Te(C(mN),Re({key:f.name},C(l),{file:f,role:"listitem",onRemove:p=>u.$emit("remove",h)}),null,16,["file","onRemove"]))),128)):ve("",!0),t.type==="gallery"?(V(!0),ee(qe,{key:1},vt(r.value,(f,h)=>(V(),Te(C(vN),Re(C(a),{key:f.name,file:f,role:"listitem",onRemove:p=>u.$emit("remove",h)}),null,16,["file","onRemove"]))),128)):ve("",!0),t.type==="single"&&r.value.length?(V(),Te(C(gN),Re({key:2},C(c),{file:r.value[r.value.length-1],onRemove:d[0]||(d[0]=f=>u.$emit("removeSingle"))}),null,16,["file"])):ve("",!0)]),_:1},8,["role","class"]))}}),yN=ze(Mbe),Cbe={class:"va-file-upload__field"},Abe={key:0,class:"va-file-upload__field__text"},Tbe=["accept","multiple","disabled"],MT=It(yN),Pbe=Me({name:"VaFileUpload",__name:"VaFileUpload",props:{...rt,...MT,fileTypes:{type:String,default:""},dropzone:{type:Boolean,default:!1},hideFileList:{type:Boolean,default:!1},color:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3},undoButtonText:{type:String,default:"$t:undo"},dropZoneText:{type:String,default:"$t:dropzone"},uploadButtonText:{type:String,default:"$t:uploadFile"},deletedFileMessage:{type:String,default:"$t:fileDeleted"},modelValue:{type:[Object,Array],default:()=>[]},type:{type:String,default:"list",validator:t=>["list","gallery","single"].includes(t)}},emits:["update:modelValue","file-removed","file-added"],setup(t,{emit:e}){const n=t,r=e,i=st(),s=le(!1),o=le(!1),{getColor:a,shiftHSLAColor:l}=ct(),c=A(()=>a(n.color)),u=A(()=>({backgroundColor:n.dropzone?l(c.value,{a:o.value?-.82:-.92}):"transparent"})),d=jt("va-file-upload",()=>({dropzone:n.dropzone,disabled:n.disabled})),f=A({get(){return Array.isArray(n.modelValue)?n.modelValue:[n.modelValue]},set(T){n.type==="single"?r("update:modelValue",T[0]):r("update:modelValue",T)}}),h=T=>T.filter(_=>{const w=_.name||_.url;if(!w)return!1;if(_.url||["audio/*","video/*","image/*"].find(I=>n.fileTypes.includes(I)))return!0;const S=w.substring(w.lastIndexOf(".")+1).toLowerCase(),R=n.fileTypes.includes(S);return R||(s.value=!0),R}),p=T=>{var _,w;const M=((_=T.target)==null?void 0:_.files)||((w=T.dataTransfer)==null?void 0:w.files);if(!M)return;const x=n.fileTypes?h(Array.from(M)):M;f.value=n.type==="single"?x:[...f.value,...x],r("file-added",x)},g=T=>{p(T),i.value&&(i.value.value="")},m=T=>{if(T in f.value){const _=f.value[T];f.value=f.value.filter((w,M)=>M!==T),r("file-removed",_)}},v=()=>{if(f.value.length>0){const T=f.value[0];f.value=[],r("file-removed",T)}},b=()=>{i.value&&i.value.click()};kt(()=>{if(Array.isArray(f.value)){const T=h(f.value);T.length!==f.value.length&&(f.value=T)}});const{tp:y}=rn();Mr(_h,{undo:or(n,"undo"),disabled:or(n,"disabled"),undoDuration:or(n,"undoDuration"),undoButtonText:A(()=>y(n.undoButtonText)),deletedFileMessage:A(()=>y(n.deletedFileMessage))});const E=tn(MT);return(T,_)=>(V(),ee("div",{class:Qe(["va-file-upload",C(d)]),style:Be(u.value)},[se(T.$slots,"default",{},()=>[me("div",Cbe,[t.dropzone?(V(),ee("div",Abe,Ze(C(y)(t.dropZoneText)),1)):ve("",!0),ke(C(Pt),{class:"va-file-upload__field__button",disabled:t.disabled,"aria-disabled":t.disabled,color:c.value,style:Be({"pointer-events":o.value?"none":void 0}),onChange:g,onClick:b},{default:we(()=>[gt(Ze(C(y)(t.uploadButtonText)),1)]),_:1},8,["disabled","aria-disabled","color","style"])])]),me("input",{ref_key:"fileInputRef",ref:i,type:"file",class:"va-file-upload__field__input",tabindex:-1,"aria-hidden":"true",accept:t.fileTypes,multiple:t.type!=="single",disabled:t.disabled,onChange:g,onDragenter:_[0]||(_[0]=w=>o.value=!0),onDragleave:_[1]||(_[1]=w=>o.value=!1)},null,40,Tbe),f.value.length&&!T.$props.hideFileList?(V(),Te(C(yN),Re({key:0},C(E),{type:t.type,files:f.value,color:c.value,onRemove:m,onRemoveSingle:v}),null,16,["type","files","color"])):ve("",!0),ke(C(nS),{modelValue:s.value,"onUpdate:modelValue":_[2]||(_[2]=w=>s.value=w),"hide-default-actions":"",title:"File validation",message:"File type is incorrect!"},null,8,["modelValue"])],6))}}),Rbe=ze(Pbe),Lbe=t=>{const e=le(new Map);return{immediate:A(()=>t.immediate),fields:A(()=>[...e.value.values()]),forceHideErrors:A(()=>t.hideErrors),forceHideErrorMessages:A(()=>t.hideErrorMessages),forceHideLoading:A(()=>t.hideLoading),forceDirty:le(!1),registerField:(n,r)=>{e.value.set(n,r)},unregisterField:n=>{e.value.delete(n)}}},Ibe=t=>{const e=Lbe(t);Mr(Wk,e);const{fields:n,forceDirty:r}=e,i=A(()=>n.value.map(y=>C(y.name)).filter(Boolean)),s=A(()=>n.value.reduce((y,E)=>(C(E.name)&&(y[C(E.name)]=E),y),{})),o=A(()=>n.value.reduce((y,E)=>(C(E.name)&&(y[C(E.name)]=E.value),y),{})),a=A(()=>n.value.every(y=>C(y.isValid))),l=A(()=>n.value.some(y=>C(y.isLoading))),c=A(()=>n.value.map(y=>C(y.errorMessages)).flat()),u=A(()=>n.value.reduce((y,E)=>(C(E.name)&&(y[C(E.name)]=C(E.errorMessages)),y),{})),d=A({get(){return n.value.some(y=>C(y.isDirty))||r.value},set(y){r.value=y,n.value.forEach(E=>{E.isDirty=y})}}),f=A({get(){return console.log(n.value),n.value.some(y=>y.isTouched)},set(y){n.value.forEach(E=>{E.isTouched=y})}}),h=()=>(d.value=!0,n.value.reduce((y,E)=>E.validate()&&y,!0)),p=()=>(d.value=!0,Promise.all(n.value.map(y=>y.validateAsync())).then(y=>y.every(Boolean))),g=()=>{d.value=!1,n.value.forEach(y=>y.reset())},m=()=>{d.value=!1,n.value.forEach(y=>y.resetValidation())},v=()=>{var y;(y=n.value[0])==null||y.focus()},b=()=>{const y=n.value.find(E=>!E.isValid);y==null||y.focus()};return jk({name:le(void 0),isValid:a,isLoading:l,isDirty:d,isTouched:f,validate:h,validateAsync:p,reset:g,resetValidation:m,focus:v,errorMessages:c}),{immediate:A(()=>t.immediate),isDirty:d,isTouched:f,formData:o,fields:n,fieldsNamed:s,fieldNames:i,isValid:a,isLoading:l,errorMessages:c,errorMessagesNamed:u,validate:h,validateAsync:p,reset:g,resetValidation:m,focus:v,focusInvalidField:b}},ui={stateful:!0},Obe={VaInput:ui,VaSelect:ui,VaCheckbox:ui,VaRadio:ui,VaDatePicker:ui,VaTimePicker:ui,VaColorPicker:ui,VaSlider:ui,VaSwitch:ui,VaFileUpload:ui,VaRating:ui,VaDateInput:ui,VaTimeInput:ui},kbe=Me({name:"VaForm",__name:"VaForm",props:{...rt,autofocus:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1},tag:{type:String,default:"form"},trigger:{type:String,default:"blur"},modelValue:{type:Boolean,default:!0},hideErrors:{type:Boolean,default:!1},hideErrorMessages:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=Ibe(r);De(s.isValid,w=>{i("update:modelValue",w)}),De(()=>r.autofocus,w=>{w&&s.focus()}),kt(()=>{r.autofocus&&s.focus()}),De(s.fields,w=>{w.length&&r.immediate&&s.validate()},{immediate:!0}),Hde(A(()=>r.stateful?Obe:{}));const{immediate:o,isDirty:a,isTouched:l,formData:c,fields:u,fieldsNamed:d,fieldNames:f,isValid:h,isLoading:p,errorMessages:g,errorMessagesNamed:m,validate:v,validateAsync:b,reset:y,resetValidation:E,focus:T,focusInvalidField:_}=s;return e({immediate:o,isDirty:a,formData:c,fields:u,fieldsNamed:d,fieldNames:f,isValid:h,isTouched:l,isLoading:p,errorMessages:g,errorMessagesNamed:m,validate:v,validateAsync:b,reset:y,resetValidation:E,focus:T,focusInvalidField:_}),(w,M)=>(V(),Te(mr(t.tag),Re({class:"va-form",onSubmit:M[0]||(M[0]=x=>w.$attrs.action===void 0&&x.preventDefault())},w.$attrs),{default:we(()=>[se(w.$slots,"default",Ue(je({isValid:C(h),validate:C(v)})))]),_:3},16))}}),Dbe=ze(kbe),Nbe=(t=0)=>new Promise(e=>setTimeout(e,t)),Fbe=(t,e,n)=>{const r=()=>{var s;(s=e.value)==null||s.addEventListener("scroll",n.value,{passive:!0})},i=()=>{var s;(s=e.value)==null||s.removeEventListener("scroll",n.value)};return kt(()=>{e.value&&(e.value.style.overflowY="scroll",t.reverse&&(e.value.scrollTop=e.value.scrollHeight),r())}),Sn(i),{addScrollListener:r,removeScrollListener:i}},Bbe={class:"va-infinite-scroll__spinner__default"},Vbe=Me({name:"VaInfiniteScroll",__name:"VaInfiniteScroll",props:{...rt,load:{type:Function,required:!0},offset:{type:Number,default:500},reverse:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},scrollTarget:{type:[String,Object],default:null},debounce:{type:Number,default:100},tag:{type:String,default:"div"}},emits:["onload","onerror"],setup(t,{emit:e}){const n=t,r=e,i=st(),s=st(),o=le(!1),a=le(!1),l=le(!1),c=le(),u=le(0),d=le(0),f=A(()=>{var R;let I;return typeof n.scrollTarget=="string"?I=document.querySelector(n.scrollTarget):I=n.scrollTarget||((R=i.value)==null?void 0:R.parentElement),I||document.body}),{addScrollListener:h,removeScrollListener:p}=Fbe(n,f,c),{getColor:g}=ct(),m=A(()=>a.value?g("danger"):g("primary")),v=A(()=>{var R;return((R=s.value)==null?void 0:R.offsetHeight)||0}),b=A(()=>n.offset+v.value),y=()=>{n.disabled||(o.value=!1,p())},E=()=>{n.disabled||h()},T=()=>{const{scrollTop:R,scrollHeight:I,clientHeight:z}=f.value;u.value=I-R;const P=R-d.value;if(d.value=R,n.disabled||a.value||o.value)return;if(l.value){l.value=!1;return}n.reverse&&P>0||!n.reverse&&P<0||(n.reverse?R:I-R-z)>b.value||(o.value=!0,n.load().then(M).catch(S))},_=R=>{l.value=!0,f.value.scrollTop=R},w=()=>{const{scrollTop:R,scrollHeight:I,clientHeight:z}=f.value;if(n.reverse){const P=I-R<u.value,B=R>=v.value;if(P&&B)return;I-u.value>v.value?_(I-u.value):_(v.value)}n.reverse||!(I-R-z>=v.value)&&_(I-z-v.value)},M=()=>{w(),o.value=!1,r("onload")},x=()=>{w(),l.value=!1,a.value=!1,o.value=!1,r("onerror")},S=()=>{y(),a.value=!0,Nbe(1200).then(x).then(E)};return De(()=>n.debounce,R=>{c.value=Hw(T,R)},{immediate:!0}),De(()=>n.disabled,R=>{R?y():E()}),(R,I)=>(V(),Te(mr(R.$props.tag),{ref_key:"element",ref:i,role:"feed",class:Qe(["va-infinite-scroll",{"va-infinite-scroll--reversed":R.$props.reverse}]),"aria-busy":o.value},{default:we(()=>[se(R.$slots,"default"),me("div",{ref_key:"spinnerSlotContainer",ref:s,class:Qe(["va-infinite-scroll__spinner",{"va-infinite-scroll__spinner--invisible":!o.value}])},[R.$props.disabled?ve("",!0):se(R.$slots,"loading",{key:0},()=>[me("div",Bbe,[ke(C(dh),{size:"small",thickness:.15,color:m.value,indeterminate:""},null,8,["color"])])])],2)]),_:3},8,["class","aria-busy"]))}}),Ube=ze(Vbe),$be={top:[0,1,2],left:[0,3,6],right:[2,5,8],bottom:[6,7,8]},zbe=["left","right","top","bottom"],Hbe=t=>{const e=()=>[...zbe].sort((r,i)=>(t[r].order??0)-(t[i].order??0)),n=(r,i,s)=>{i.forEach(o=>{r[o]=s})};return A(()=>{const r=e(),i=[".",".",".",".",".",".",".",".","."].map(()=>"content");return r.forEach(s=>{n(i,$be[s],s)}),['"'+i.slice(0,3).join(" ")+'"','"'+i.slice(3,6).join(" ")+'"','"'+i.slice(6,9).join(" ")+'"'].join(" ")})},Gbe={top:{type:Object,default:()=>({order:2})},right:{type:Object,default:()=>({order:1})},left:{type:Object,default:()=>({order:1})},bottom:{type:Object,default:()=>({order:2})}},bN="VaLayout",Wbe=t=>{const e=le({top:null,right:null,bottom:null,left:null}),n=A(()=>{const{top:i,right:s,bottom:o,left:a}=e.value,{top:l,right:c,bottom:u,left:d}=t;return{top:i&&!l.absolute?i.sizes.height:0,right:s&&!c.absolute?s.sizes.width:0,bottom:o&&!u.absolute?o.sizes.height:0,left:a&&!d.absolute?a.sizes.width:0}}),r=A(()=>({top:t.top.order||0,right:t.right.order||0,bottom:t.bottom.order||0,left:t.left.order||0}));return Mr(bN,{items:e,paddings:n,orders:r}),{paddings:n,orders:r,items:e}},jbe=(t,e)=>{const n=Zn(bN,null);if(!n)throw new Error("VaLayoutChild must be used inside VaLayout");return Yn(()=>{e.value?n.items.value[t]={sizes:e.value}:n.items.value[t]=null}),Sn(()=>{n.items.value[t]=null}),{paddings:A(()=>Object.keys(n.paddings.value).reduce((r,i)=>(n.orders.value[i]>n.orders.value[t]&&(r[i]=n.paddings.value[i]),r),{}))}},Xbe={},Kbe={class:"va-layout__absolute-area-wrapper"};function qbe(t,e){return V(),ee("div",Kbe,[se(t.$slots,"default")])}const Ybe=ec(Xbe,[["render",qbe]]),Zbe=Me({name:"VaLayoutSizeKeeper",__name:"VaResizeObserver",emits:{resize:t=>!0},setup(t,{emit:e}){const n=e,r=le();let i=null;return De(r,s=>{i&&i.disconnect(),i=new ResizeObserver(([o])=>{n("resize",o.contentRect)}),i.observe(s)}),(s,o)=>(V(),ee("div",{class:"va-resize-observer",ref_key:"el",ref:r},[se(s.$slots,"default")],512))}}),CT=Me({name:"VaLayoutFixedWrapper",__name:"VaLayoutFixedWrapper",props:{area:{type:String,required:!0}},setup(t){const e=t,n=le(null),r=A(()=>e.area==="top"||e.area==="bottom"?"vertical":"horizontal"),i=a=>a?a+"px":"0px",s=A(()=>r.value==="vertical"?{width:`calc(100% - ${i(o.value.left)} - ${i(o.value.right)})`,[e.area]:0}:{height:`calc(100% - ${i(o.value.top)} - ${i(o.value.bottom)})`,[e.area]:0}),{paddings:o}=jbe(e.area,n);return A(()=>Object.keys(o.value).reduce((a,l)=>l===e.area?a:{...a,[l]:`${o.value[l]}px`},{})),(a,l)=>(V(),ee("div",{class:"va-layout-fixed-wrapper",style:Be([[{height:n.value&&r.value==="vertical"?n.value.height+"px":"auto",width:n.value&&r.value==="horizontal"?n.value.width+"px":"auto"}],`--va-styles-width: ${String(s.value.width)};--va-styles-height: ${String(s.value.height)}`])},[ke(Zbe,{class:Qe(["va-layout-fixed-wrapper__content",`va-layout-fixed-wrapper__content--${t.area}`]),style:Be(n.value?{}:{position:"relative"}),onResize:l[0]||(l[0]=c=>n.value=c)},{default:we(()=>[se(a.$slots,"default")]),_:3},8,["class","style"])],4))}}),Jbe=Me({name:"VaLayoutArea",__name:"VaLayoutArea",props:{area:{type:String,required:!0},config:{type:Object,required:!0}},emits:["overlay-click"],setup(t,{emit:e}){const n=t,r=A(()=>n.config.absolute||!1),i=A(()=>n.config.fixed||!1),s=A(()=>n.config.overlay||!1),o=A(()=>(n.config.order||0)+1);return(a,l)=>(V(),ee(qe,null,[r.value?(V(),Te(Ybe,{key:0,style:Be(`--va-props-area: ${String(a.$props.area)};--va-z-index: ${String(o.value)};--va-z-index-1: ${String(o.value-1)}`)},{default:we(()=>[me("div",{class:Qe(`va-layout-area va-layout__area va-layout__area--${t.area}`)},[i.value?(V(),Te(CT,{key:0,area:t.area},{default:we(()=>[se(a.$slots,"default")]),_:3},8,["area"])):se(a.$slots,"default",{key:1})],2)]),_:3},8,["style"])):(V(),ee("div",{key:1,class:Qe(`va-layout-area va-layout__area va-layout__area--${t.area}`),style:Be(`--va-props-area: ${String(a.$props.area)};--va-z-index: ${String(o.value)};--va-z-index-1: ${String(o.value-1)}`)},[i.value?(V(),Te(CT,{key:0,area:t.area},{default:we(()=>[se(a.$slots,"default")]),_:3},8,["area"])):se(a.$slots,"default",{key:1})],6)),ke(Mu,{style:Be(`--va-props-area: ${String(a.$props.area)};--va-z-index: ${String(o.value)};--va-z-index-1: ${String(o.value-1)}`)},{default:we(()=>[s.value?(V(),ee("div",{key:0,class:Qe(["va-layout-area__overlay",{"va-layout-area__overlay--fixed":i.value}]),onClick:l[0]||(l[0]=c=>a.$emit("overlay-click"))},null,2)):ve("",!0)]),_:1},8,["style"])],64))}}),Qbe={class:"va-layout__area va-layout__area--content"},AT=["top","left","right","bottom"],e_e=Me({name:"VaLayout",__name:"VaLayout",props:{...Gbe,allowBodyScrollOnOverlay:{type:Boolean,default:!1}},emits:["top-overlay-click","left-overlay-click","right-overlay-click","bottom-overlay-click"],setup(t,{emit:e}){const n=t,{paddings:r}=Wbe(n),i=A(()=>!n.allowBodyScrollOnOverlay&&AT.some(u=>{var d;return(d=n[u])==null?void 0:d.overlay})),s=Zl();Yn(()=>{var u;const d=(u=s.value)==null?void 0:u.body;d&&(i.value?d.style.overflow="hidden":d.style.overflow="")});const o=Hbe(n),a=Cr(),l=A(()=>[a.top?"min-content":"0fr","1fr",a.bottom?"min-content":"0fr"].filter(Boolean).join(" ")),c=A(()=>[a.left?"min-content":"0fr","1fr",a.right?"min-content":"0fr"].filter(Boolean).join(" "));return(u,d)=>(V(),ee("div",{class:"va-layout",style:Be(`--va-horizontal-template: ${String(c.value)};--va-vertical-template: ${String(l.value)};--va-template-area: ${String(C(o))};--va-paddings-top-px: ${C(r).top+"px"};--va-paddings-bottom-px: ${C(r).bottom+"px"};--va-paddings-left-px: ${C(r).left+"px"};--va-paddings-right-px: ${C(r).right+"px"}`)},[(V(),ee(qe,null,vt(AT,f=>ke(Jbe,{key:f,area:f,config:u.$props[f]||{},onOverlayClick:h=>u.$emit(`${f}-overlay-click`)},{default:we(()=>[se(u.$slots,f)]),_:2},1032,["area","config","onOverlayClick"])),64)),me("div",Qbe,[se(u.$slots,"default",{},()=>[se(u.$slots,"content")])])],4))}}),t_e=mo(e_e),n_e={class:"va-navbar__left"},r_e={class:"va-navbar__center"},i_e={class:"va-navbar__right"},s_e=Me({name:"VaNavbar",__name:"VaNavbar",props:{...vD,...rt,color:{type:String,default:"background-secondary"},textColor:{type:String},shape:{type:Boolean,default:!1},shadowed:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1}},setup(t){const e=t,{scrollRoot:n,isScrolledDown:r}=yD(e.fixed),{fixedBarStyleComputed:i}=gD(e,r),{getColor:s,shiftHSLAColor:o}=ct(),a=A(()=>s(e.color)),{textColorComputed:l}=Hn(a),c=A(()=>({borderTopColor:o(a.value,{h:-1,s:-11,l:10})})),u=A(()=>({...i.value,backgroundColor:a.value,color:l.value,fill:l.value})),d=jt("va-navbar",()=>({shadowed:e.shadowed,bordered:e.bordered}));return(f,h)=>(V(),ee("header",{ref_key:"scrollRoot",ref:n,class:Qe(["va-navbar",C(d)]),style:Be(u.value)},[se(f.$slots,"default",{},()=>[me("div",n_e,[se(f.$slots,"left")]),me("div",r_e,[se(f.$slots,"center")]),me("div",i_e,[se(f.$slots,"right")])]),t.shape?(V(),ee("div",{key:0,class:"va-navbar__background-shape",style:Be(c.value)},null,4)):ve("",!0)],6))}}),o_e=Me({name:"VaNavbarItem",props:{}}),a_e={class:"va-navbar__item"};function l_e(t,e,n,r,i,s){return V(),ee("div",a_e,[se(t.$slots,"default")])}const c_e=ec(o_e,[["render",l_e]]),u_e=ze(s_e),d_e=ze(c_e),f_e=["role"],h_e=["value","checked","aria-checked","onChange"],p_e=me("span",{"aria-hidden":"true",class:"va-radio__icon"},[me("span",{class:"va-radio__icon__background"}),me("span",{class:"va-radio__icon__dot"})],-1),m_e=Me({name:"VaRadio",__name:"VaRadio",props:{...fS,...rt,...Xu,modelValue:{type:[Boolean,Array,String,Object,Number],default:null},options:{type:Array,default:()=>[]},name:{type:String,default:""},label:{type:String,default:void 0},leftLabel:{type:Boolean,default:!1},color:{type:String,default:"primary"},option:{type:[Object,String,Number],default:void 0},vertical:{type:Boolean,default:!1}},emits:Ig,setup(t,{emit:e}){const n=t,r=e,{getColor:i}=ct(),s={container:st(),input:st(),label:st()},{computedError:o,computedErrorMessages:a,validationAriaAttributes:l,onBlur:c,onFocus:u}=hS(n,r,s),{getText:d,getDisabled:f,getValue:h}=Ku(n),p=P=>n.options.length>0?d(P):n.label??d(P),g=P=>f(P)||n.disabled,m=A(()=>n.options.length===0&&!n.option),v=P=>m.value?n.modelValue:n.modelValue===h(P),b=A(()=>m.value?[{}]:n.option?[n.option]:n.options),y=P=>({"va-radio--left-label":n.leftLabel,"va-radio--selected":v(P),"va-radio--readonly":n.readonly,"va-radio--disabled":n.disabled,"va-radio--indeterminate":n.indeterminate,"va-radio--error":o.value,"va-radio--single-option":m.value}),E=(P,B)=>{var U;if(m.value){r("update:modelValue",((U=B==null?void 0:B.target)==null?void 0:U.checked)||!1);return}r("update:modelValue",P)},T=A(()=>({color:o.value?i("danger"):""}));A(()=>{const P={background:i(n.color),borderColor:i(n.color)};return o.value&&(P.borderColor=i("danger")),P});const _=A(()=>({backgroundColor:i(n.color)})),w=A(()=>({borderColor:o.value?i("danger"):i(n.color),backgroundColor:i(n.color)})),M=A(()=>({borderColor:o.value?i("danger"):i(n.color)})),x=Ps(),S=A(()=>n.name||x),R=P=>{const B=g(P);return{name:S.value,disabled:B,readonly:n.readonly,tabindex:B?-1:0}},I=A(()=>n.vertical?"column":"row"),z=A(()=>{var P;return((P=n.options)==null?void 0:P.length)>0?"radiogroup":""});return(P,B)=>(V(),Te(C(Sg),{disabled:P.disabled,success:P.success,messages:P.messages,error:C(o),"error-messages":C(a),"error-count":P.errorCount,onBlur:C(c),style:Be(`--va-flex-direction: ${String(I.value)};--va-label-style-color: ${String(T.value.color)};--va-icon-computed-styles-border-color: ${String(M.value.borderColor)};--va-icon-dot-computed-styles-border-color: ${String(w.value.borderColor)};--va-icon-dot-computed-styles-background-color: ${String(w.value.backgroundColor)};--va-icon-background-computed-styles-background-color: ${String(_.value.backgroundColor)}`)},{default:we(({ariaAttributes:U})=>[me("div",Re({ref:"container",class:"va-radio",role:z.value},U),[(V(!0),ee(qe,null,vt(b.value,(j,Z)=>(V(),ee("label",{key:Z,class:Qe([y(j),"va-radio__square"])},[me("input",Re({ref_for:!0,ref:"input",class:"va-radio__input",type:"radio",role:"radio",value:v(j),checked:v(j),"aria-checked":v(j)},{...R(j),...U},{onChange:ne=>E(C(h)(j),ne),onFocus:B[0]||(B[0]=(...ne)=>C(u)&&C(u)(...ne)),onBlur:B[1]||(B[1]=(...ne)=>C(c)&&C(c)(...ne))}),null,16,h_e),se(P.$slots,"icon",Ue(je({value:v(j),text:p(j),disabled:g(j),index:Z})),()=>[p_e]),p(j)||P.$slots.default?(V(),ee("div",{key:0,ref_for:!0,ref:"label",class:"va-radio__text"},[se(P.$slots,"default",Ue(je({value:v(j),text:p(j),disabled:g(j),index:Z})),()=>[gt(Ze(p(j)),1)])],512)):ve("",!0)],2))),128))],16,f_e)]),_:3},8,["disabled","success","messages","error","error-messages","error-count","onBlur","style"]))}}),_N=ze(m_e),v_e={class:"va-switch__inner"},g_e={class:"va-switch__checker-wrapper"},y_e={class:"va-switch__checker"},b_e={class:"va-switch__checker-circle"},__e=["id"],x_e=Me({name:"VaSwitch",__name:"VaSwitch",props:{...fS,...rt,id:{type:String,default:""},name:{type:String,default:""},modelValue:{type:[Number,Boolean,Array,String,Object],default:!1},trueLabel:{type:String,default:null},falseLabel:{type:String,default:null},trueInnerLabel:{type:String,default:null},falseInnerLabel:{type:String,default:null},ariaLabel:{type:String,default:"$t:switch"},color:{type:String,default:"primary"},offColor:{type:String,default:"background-element"},size:{type:String,default:"medium",validator:t=>["medium","small","large"].includes(t)}},emits:[...Ig,"focus","blur","update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,s={container:st(),input:st(),label:st()},{getColor:o}=ct(),{hasKeyboardFocus:a,keyboardFocusListeners:l}=qu(),{isChecked:c,computedError:u,isIndeterminate:d,computedErrorMessages:f,validationAriaAttributes:h,toggleSelection:p,onBlur:g,onFocus:m,reset:v,focus:b}=hS(r,i,s),y=A(()=>o(c.value?r.color:r.offColor)),{textColorComputed:E}=Hn(y),T=A(()=>r.trueInnerLabel&&c.value?r.trueInnerLabel:r.falseInnerLabel&&!c.value?r.falseInnerLabel:""),_=A(()=>r.trueLabel&&c.value?r.trueLabel:r.falseLabel&&!c.value?r.falseLabel:r.label),w=jt("va-switch",()=>({...wn(r,["readonly","disabled","leftLabel"]),checked:c.value,indeterminate:d.value,small:r.size==="small",large:r.size==="large",error:u.value,keyboardFocus:a.value})),M=A(()=>({lineHeight:f.value.length?1:0})),x=A(()=>({small:"15px",medium:"20px",large:"25px"})[r.size]),S=A(()=>({borderColor:u.value?o("danger"):"",backgroundColor:y.value})),R=A(()=>({color:u.value?o("danger"):""})),I=A(()=>({color:E.value,"text-align":c.value?"left":"right"})),z=Cr(),P=Ps(),B=A(()=>`aria-label-id-${P}`),U=A(()=>({id:r.id||void 0,name:r.name||void 0,disabled:r.disabled,readonly:r.readonly,"aria-disabled":r.disabled,"aria-readonly":r.readonly,"aria-checked":!!r.modelValue,"aria-label":z.default?void 0:r.ariaLabel,"aria-labelledby":_.value||z.default?B.value:void 0,tabindex:r.disabled?-1:0,checked:c.value,...h.value})),j=()=>{var ne;(ne=s.input.value)==null||ne.click()},Z=s.input;return e({focus:b,reset:v}),(ne,K)=>(V(),Te(C(Sg),{class:Qe(["va-switch",C(w)]),style:Be(M.value),disabled:ne.$props.disabled,success:ne.$props.success,messages:ne.$props.messages,error:C(u),"error-messages":C(f),"error-count":ne.$props.errorCount},{default:we(()=>[me("div",{ref:"container",class:"va-switch__container",tabindex:"-1",onBlur:K[5]||(K[5]=(...fe)=>C(g)&&C(g)(...fe)),onClick:K[6]||(K[6]=(...fe)=>C(p)&&C(p)(...fe))},[me("div",v_e,[me("input",Re({ref_key:"input",ref:Z,type:"checkbox",class:"va-switch__input",role:"switch"},U.value,mi(C(l),!0),{onFocus:K[0]||(K[0]=(...fe)=>C(m)&&C(m)(...fe)),onBlur:K[1]||(K[1]=(...fe)=>C(g)&&C(g)(...fe)),onKeypress:We(j,["enter"])}),null,16),me("div",{class:"va-switch__track","aria-hidden":"true",style:Be(S.value)},[T.value||ne.$slots.innerLabel?(V(),ee("div",{key:0,class:"va-switch__track-label",style:Be(I.value)},[se(ne.$slots,"innerLabel",{},()=>[gt(Ze(T.value),1)])],4)):ve("",!0),me("div",g_e,[me("div",y_e,[se(ne.$slots,"checker",Ue(je({value:C(c)})),()=>[me("div",b_e,[ne.$props.loading?(V(),Te(C(dh),{key:0,indeterminate:"",size:x.value,color:S.value.backgroundColor},null,8,["size","color"])):ve("",!0)])])])])],4)]),_.value||ne.$slots.default?(V(),ee("div",{key:0,ref:"label",class:"va-switch__label",style:Be(R.value),id:B.value,onBlur:K[2]||(K[2]=(...fe)=>C(g)&&C(g)(...fe)),onClick:K[3]||(K[3]=(...fe)=>C(p)&&C(p)(...fe)),onKeydown:K[4]||(K[4]=We(He((...fe)=>C(p)&&C(p)(...fe),["stop"]),["enter"]))},[se(ne.$slots,"default",{},()=>[gt(Ze(_.value),1)])],44,__e)):ve("",!0)],544)]),_:3},8,["class","style","disabled","success","messages","error","error-messages","error-count"]))}}),xN=ze(x_e),Vg=()=>{const t=st([]),e=r=>{r&&t.value.push(r)},n=r=>i=>{i&&(t.value[r]=i)};return G_(()=>{t.value=[]}),{itemRefs:t,setItemRef:e,setItemRefByIndex:n}},w_e={class:"va-option-list__list"},S_e=Me({name:"VaOptionList",__name:"VaOptionList",props:{...rt,...Xu,...go,...Fn,type:{type:String,default:"checkbox",validator:t=>["radio","checkbox","switch"].includes(t)},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},defaultValue:{type:[String,Number,Boolean,Object,Array]},name:{type:String,default:""},color:{type:String,default:"primary"},leftLabel:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean,Object,Array]}},emits:[..._r,...Ea,"clear"],setup(t,{expose:e,emit:n}){const r=t,i=n,{valueComputed:s}=pn(r,i,"modelValue",{defaultValue:r.defaultValue}),{getValue:o,getText:a,getTrackBy:l,getDisabled:c}=Ku(r),{itemRefs:u,setItemRef:d}=Vg(),f=A(()=>r.type==="radio"),h=A({get(){const _=f.value?null:[];return s.value||_},set(_){r.readonly||(f.value&&!Array.isArray(_)?s.value=_&&o(_):s.value=Array.isArray(_)?_.map(o):[_&&o(_)])}}),p=_=>r.disabled||c(_),g=()=>y(()=>{s.value=null,i("clear"),E()}),m=()=>{const _=Array.isArray(u.value)&&u.value.find(w=>!w.disabled);_&&typeof _.focus=="function"&&_.focus()},{computedError:v,computedErrorMessages:b,withoutValidation:y,resetValidation:E}=yo(r,i,{reset:g,focus:m,value:s}),T=A(()=>wn(r,["name","color","readonly","leftLabel"]));return kt(()=>{Gu&&r.type!=="radio"&&!Array.isArray(r.modelValue)&&console.warn(`Prop 'modelValue = ${r.modelValue}' has not a proper type!
 For component property 'type = ${r.type}' it must be of type 'array'.`)}),e({focus:m,reset:g}),(_,w)=>(V(),Te(C(Sg),{error:C(v),"error-messages":C(b),"error-count":_.$props.errorCount},{default:we(()=>[me("ul",w_e,[(V(!0),ee(qe,null,vt(_.$props.options,M=>(V(),ee("li",{key:C(l)(M)},[se(_.$slots,"default",Ue(je({option:M,selectedValue:h.value,isDisabled:p,getText:C(a),getValue:C(o)})),()=>[_.$props.type==="radio"?(V(),Te(C(_N),Re({key:0,ref_for:!0,ref:C(d),modelValue:h.value,"onUpdate:modelValue":w[0]||(w[0]=x=>h.value=x),label:C(a)(M),disabled:p(M),option:C(o)(M)},T.value),null,16,["modelValue","label","disabled","option"])):_.$props.type==="checkbox"?(V(),Te(C(yh),Re({key:1,ref_for:!0,ref:C(d),modelValue:h.value,"onUpdate:modelValue":w[1]||(w[1]=x=>h.value=x),label:C(a)(M),disabled:p(M),"array-value":C(o)(M)},T.value),null,16,["modelValue","label","disabled","array-value"])):(V(),Te(C(xN),Re({key:2,ref_for:!0,ref:C(d),modelValue:h.value,"onUpdate:modelValue":w[2]||(w[2]=x=>h.value=x),label:C(a)(M),disabled:p(M),"array-value":C(o)(M)},T.value),null,16,["modelValue","label","disabled","array-value"]))])]))),128))])]),_:3},8,["error","error-messages","error-count"]))}}),E_e=ze(S_e),M_e=(t=1,e,n,r=!1)=>{let i=0;if(n===0&&(n=1),e>n&&(e=n),e===0)i=1,e=n>10?10:n;else{const o=e/2;t-o<=0||t>n?i=1:i=t+o>n?n-e+1:Math.ceil(t-o)}const s=[];for(let o=0;o<e;o++)s.push(i+o);return r&&e<7?n>=7&&qt("[va-pagination] To work in a proper way, the `boundaryNumbers` prop needs at least 7 visible pages to be set via the `visiblePages` prop (first, last, 2 boundaries, current, previous, next)."):r&&(i!==1&&s.splice(0,2,1,"..."),s[s.length-1]!==n&&s.splice(-2,2,"...",n)),s},C_e=["aria-label","onKeydown"],A_e=["aria-label"],T_e=Me({name:"VaPagination",__name:"VaPagination",props:{...Fn,...rt,modelValue:{type:Number,default:1},visiblePages:{type:Number,default:0},pages:{type:Number,default:0},disabled:{type:Boolean,default:!1},color:{type:String,default:"primary"},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},boundaryLinks:{type:Boolean,default:!0},boundaryNumbers:{type:Boolean,default:!1},directionLinks:{type:Boolean,default:!0},input:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},total:{type:Number,default:null},pageSize:{type:Number,default:null},boundaryIconLeft:{type:String,default:"va-arrow-first"},boundaryIconRight:{type:String,default:"va-arrow-last"},directionIconLeft:{type:String,default:"va-arrow-left"},directionIconRight:{type:String,default:"va-arrow-right"},gapped:{type:Boolean,default:!1},borderColor:{type:String,default:""},rounded:{type:Boolean,default:!1},activePageColor:{type:String,default:""},activeButtonProps:{type:Object,default:()=>({})},buttonProps:{type:Object,default:()=>({})},buttonsPreset:{type:String,default:"primary"},ariaLabel:{type:String,default:"$t:pagination"},ariaGoToTheFirstPageLabel:{type:String,default:"$t:goToTheFirstPage"},ariaGoToPreviousPageLabel:{type:String,default:"$t:goToPreviousPage"},ariaGoToSpecificPageLabel:{type:String,default:"$t:goToSpecificPage"},ariaGoToSpecificPageInputLabel:{type:String,default:"$t:goToSpecificPageInput"},ariaGoToNextPageLabel:{type:String,default:"$t:goNextPage"},ariaGoToLastPageLabel:{type:String,default:"$t:goLastPage"}},emits:[..._r],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),o=le(""),a=A(()=>!!((r.total||r.total===0)&&r.pageSize)),{valueComputed:l}=pn(r,i),c=A({get:()=>a.value?Math.ceil(l.value/r.pageSize)||1:l.value,set:K=>{l.value=K}}),u=A(()=>{const{visiblePages:K,total:fe,pageSize:Se,boundaryNumbers:de,pages:ae}=r,ge=c.value||1,ue=a.value?Math.ceil(fe/Se):ae;return M_e(ge,K,ue,de)}),d=A(()=>a.value?Math.ceil(r.total/r.pageSize)||1:+r.pages),f=A(()=>!!r.visiblePages&&d.value>r.visiblePages||r.input),h=A(()=>{const{boundaryLinks:K,boundaryNumbers:fe}=r;return f.value&&K&&!fe}),p=A(()=>f.value&&r.directionLinks),g=A(()=>d.value>1||!r.hideOnSinglePage&&d.value<=1),m=()=>{o.value=String(c.value),cn(()=>{var K;return(K=s.value)==null?void 0:K.setSelectionRange(0,s.value.value.length)})},{setItemRefByIndex:v,itemRefs:b}=Vg(),y=K=>{var fe;if(K==="..."||K===c.value)return;const Se=Il(K,1,d.value);c.value=a.value?(Se-1)*r.pageSize+1:Se,(fe=b.value[K-1])==null||fe.focus()},E=()=>{var K;o.value="",(K=s.value)==null||K.blur()},T=()=>{if(+o.value===c.value&&E(),!o.value.length)return;let K=Number.parseInt(o.value);switch(!0){case K<1:K=1;break;case K>d.value:K=d.value;break;case isNaN(K):K=c.value;break}y(K),E()},{getColor:_,colorToRgba:w}=ct(),M=A(()=>{const{color:K,buttonsPreset:fe}=kr(r);if(!K.value)return"transparent";switch(fe.value){case"default":return _(K.value);case void 0:case"primary":return w(_(K.value),.1);default:return"transparent"}}),x=A(()=>({cursor:"default",color:_(r.color),opacity:r.disabled?.4:1,borderColor:M.value}));De([a,()=>r.pages],()=>{if(Gu&&a.value&&r.pages)throw new Error("Please, use either `total` and `page-size` props, or `pages`.")});const S=A(()=>({disabled:r.disabled,placeholder:`${c.value}/${d.value}`})),R=A(()=>({size:r.size,preset:r.buttonsPreset,color:r.color,borderColor:r.borderColor,round:r.rounded,...r.buttonProps})),I=A(()=>({preset:r.buttonsPreset==="default"?"primary":"default",color:r.activePageColor||r.color,...r.activeButtonProps})),z=K=>!isNaN(+K)&&K===c.value?Object.assign({},R.value,I.value):R.value,P=A(()=>r.input&&!r.boundaryLinks&&!r.directionLinks),B=jt("va-pagination__input",()=>({sm:r.size==="small"&&P.value,md:r.size==="medium"&&P.value,lg:r.size==="large"&&P.value,auto:!P.value})),U=jt("va-pagination",()=>({...wn(r,["gapped","rounded","disabled"]),bordered:!!r.borderColor})),j=()=>y(c.value+1),Z=()=>y(c.value-1),{tp:ne}=rn();return e({goNextPage:j,goPrevPage:Z}),(K,fe)=>g.value?(V(),ee("nav",{key:0,class:Qe(["va-pagination",C(U)]),"aria-label":C(ne)(K.$props.ariaLabel),onKeydown:[We(He(Z,["stop"]),["left"]),We(He(j,["stop"]),["right"]),We(He(Z,["stop"]),["up"]),We(He(j,["stop"]),["down"])]},[h.value?se(K.$slots,"firstPageLink",Ue(Re({key:0},{onClick:()=>y(1),disabled:K.$props.disabled||c.value===1})),()=>[h.value?(V(),Te(C(Pt),Re({key:0,"aria-label":C(ne)(K.$props.ariaGoToTheFirstPageLabel),disabled:K.$props.disabled||c.value===1,icon:K.$props.boundaryIconLeft},R.value,{onClick:fe[0]||(fe[0]=Se=>y(1))}),null,16,["aria-label","disabled","icon"])):ve("",!0)]):ve("",!0),p.value?se(K.$slots,"prevPageLink",Ue(Re({key:1},{onClick:Z,disabled:K.$props.disabled||c.value===1})),()=>[p.value?(V(),Te(C(Pt),Re({key:0,"aria-label":C(ne)(K.$props.ariaGoToPreviousPageLabel),disabled:K.$props.disabled||c.value===1,icon:K.$props.directionIconLeft},R.value,{onClick:Z}),null,16,["aria-label","disabled","icon"])):ve("",!0)]):ve("",!0),K.$props.input?Fi((V(),ee("input",Re({key:3,"onUpdate:modelValue":fe[1]||(fe[1]=Se=>o.value=Se),ref_key:"htmlInput",ref:s,class:["va-pagination__input va-button",C(B)],"aria-label":C(ne)(K.$props.ariaGoToSpecificPageInputLabel),style:x.value},S.value,{onKeydown:We(T,["enter"]),onFocus:m,onBlur:T}),null,16,A_e)),[[q_,o.value]]):se(K.$slots,"default",{key:2},()=>[(V(!0),ee(qe,null,vt(u.value,(Se,de)=>(V(),Te(C(Pt),Re({key:de,ref_for:!0,ref:C(v)(de),class:{"va-button--ellipsis":Se==="...","va-button--current":Se===c.value},"aria-label":C(ne)(K.$props.ariaGoToSpecificPageLabel,{page:Se}),"aria-current":Se===c.value,disabled:K.$props.disabled||Se==="..."},z(Se),{onClick:ae=>y(Se)}),{default:we(()=>[gt(Ze(Se),1)]),_:2},1040,["class","aria-label","aria-current","disabled","onClick"]))),128))]),p.value?se(K.$slots,"nextPageLink",Ue(Re({key:4},{onClick:j,disabled:K.$props.disabled||c.value===d.value})),()=>[p.value?(V(),Te(C(Pt),Re({key:0,"aria-label":C(ne)(K.$props.ariaGoToNextPageLabel),disabled:K.$props.disabled||c.value===d.value,icon:K.$props.directionIconRight},R.value,{onClick:j}),null,16,["aria-label","disabled","icon"])):ve("",!0)]):ve("",!0),h.value?se(K.$slots,"lastPageLink",Ue(Re({key:5},{onClick:()=>y(d.value),disabled:K.$props.disabled||c.value===d.value})),()=>[h.value?(V(),Te(C(Pt),Re({key:0,"aria-label":C(ne)(K.$props.ariaGoToLastPageLabel),disabled:K.$props.disabled||c.value===d.value,icon:K.$props.boundaryIconRight},R.value,{onClick:fe[2]||(fe[2]=Se=>y(d.value))}),null,16,["aria-label","disabled","icon"])):ve("",!0)]):ve("",!0)],42,C_e)):ve("",!0)}}),P_e=ze(T_e),R_e=()=>{const t=Mg(),e=new Proxy(t.value||{},{get:(r,i,s)=>{var o,a;if(i==="scrollTop")return(o=t.value)==null?void 0:o.scrollY;if(i==="scrollLeft")return(a=t.value)==null?void 0:a.scrollX;const l=Reflect.get(r,i,s);return typeof l=="function"?l.bind(r):l}}),n=r=>r?r.scrollHeight>r.clientHeight?r:n(r.parentElement):e;return{getScrollableParent:n}},L_e={class:"va-parallax__image-container"},I_e=["src","alt"],O_e={class:"va-parallax__item-container"},k_e=Me({name:"VaParallax",__name:"VaParallax",props:{...rt,target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:t=>t>=0&&t<=1}},setup(t){const e=t,n=st(),r=st(),i=le(0),s=le(0),o=le(0),a=le(0),l=le(0),c=le(0),u=le(0),d=le(!1),f=A(()=>({height:e.height+"px"})),h=A(()=>({display:"block",transform:`translate(-50%, ${s.value}px)`,opacity:d.value?1:0,top:e.reversed?0:"auto"})),{getScrollableParent:p}=R_e(),g=A(()=>{var _;if(!e.target)return p((_=n.value)==null?void 0:_.parentElement);if(e.target instanceof HTMLElement)return e.target;const w=document.querySelector(e.target);return w||(qt("VaParallax target prop got wrong selector. Target is null"),null)}),m=A(()=>{var _;return((_=r.value)==null?void 0:_.naturalHeight)||0}),v=()=>{var _,w;const M=((_=n.value)==null?void 0:_.getBoundingClientRect())||{top:0};l.value=((w=g.value)==null?void 0:w.scrollTop)||0,o.value=m.value-e.height,i.value=M.top+l.value,c.value=window.innerHeight,u.value=l.value+c.value},b=()=>{v(),a.value=(u.value-i.value)/(e.height+c.value),s.value=Math.round(o.value*a.value)*e.speed,e.reversed&&(s.value=-s.value)},y=()=>{var _,w;(_=g.value)==null||_.addEventListener("scroll",b),(w=g.value)==null||w.addEventListener("resize",b)},E=()=>{var _,w;(_=g.value)==null||_.removeEventListener("scroll",b),(w=g.value)==null||w.removeEventListener("resize",b)};return kt(()=>{var _,w;(_=r.value)!=null&&_.complete?(b(),y()):(w=r.value)==null||w.addEventListener("load",()=>{b(),y()},!1),d.value=!0}),Sn(E),(_,w)=>(V(),ee("div",{ref_key:"rootElement",ref:n,class:"va-parallax",style:Be(f.value)},[me("div",L_e,[me("img",{ref_key:"img",ref:r,class:"va-parallax__image",src:_.$props.src,alt:_.$props.alt,style:Be(h.value)},null,12,I_e)]),me("div",O_e,[se(_.$slots,"default")])],4))}}),D_e=ze(k_e),N_e={key:0,"aria-hidden":"true",class:"va-popover__icon"},F_e={key:1},B_e={key:0,class:"va-popover__title"},V_e={key:1,class:"va-popover__body"},x0=It(bi,["closeOnClickOutside"]),U_e=Me({name:"VaPopover",__name:"VaPopover",props:{...x0,...rt,trigger:{...x0.trigger,default:["hover","enter","space","arrow-down","arrow-up"]},color:{type:String,default:"#1b1a1f"},textColor:{type:String},icon:{type:String,default:""},title:{type:String,default:""},message:{type:String,default:""},autoHide:{type:Boolean,default:!0},offset:{type:[Array,Number],default:4}},setup(t){const e=t,n=tn(x0),{getColor:r,getBoxShadowColor:i}=ct(),s=Cr(),{textColorComputed:o}=Hn(A(()=>r(e.color))),a=A(()=>e.icon||s.icon),l=A(()=>e.title||s.title),c=A(()=>e.message||s.body),u=A(()=>l.value||c.value),d=A(()=>({boxShadow:`var(--va-popover-content-box-shadow) ${i(r(e.color))}`,backgroundColor:r(e.color),color:o.value}));return(f,h)=>(V(),Te(C(bi),Re(C(n),{"model-value":f.modelValue,"close-on-click-outside":t.autoHide,offset:f.$props.offset,class:"va-popover"}),{default:we(()=>[me("div",{style:Be(d.value),class:"va-popover__content",role:"tooltip"},[a.value?(V(),ee("div",N_e,[se(f.$slots,"icon",{},()=>[ke(C(St),{name:f.$props.icon,color:C(o)},null,8,["name","color"])])])):ve("",!0),u.value?(V(),ee("div",F_e,[l.value?(V(),ee("div",B_e,[se(f.$slots,"title",{},()=>[gt(Ze(f.$props.title),1)])])):ve("",!0),c.value?(V(),ee("div",V_e,[se(f.$slots,"body",{},()=>[gt(Ze(f.$props.message),1)])])):ve("",!0)])):ve("",!0)],4)]),anchor:we(()=>[se(f.$slots,"default")]),_:3},16,["model-value","close-on-click-outside","offset"]))}}),$_e=ze(U_e);var ir=(t=>(t[t.EMPTY=0]="EMPTY",t[t.HALF=.5]="HALF",t[t.FULL=1]="FULL",t))(ir||{});const z_e=()=>{const t=on();if(!t)throw new Error("useRating hooks must be used on top of setup function");return{props:t.props,emit:t.emit}},H_e={...Fn,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},G_e=t=>{const{emit:e}=z_e(),{isHovered:n,onMouseEnter:r,onMouseLeave:i}=hh(),{valueComputed:s}=pn(t,e),o=le(0),a=A(()=>!t.disabled&&!t.readonly&&t.hover&&n.value?o.value:s.value);return{visibleValue:a,modelValue:s,hoveredValue:o,isHovered:n,onMouseEnter:r,onMouseLeave:i,onItemValueUpdate:(d,f)=>{const h=d+f;if(t.clearable&&s.value===h){s.value=0;return}s.value=h},onItemHoveredValueUpdate:(d,f)=>{t.hover&&(o.value=d+f)},getItemValue:d=>{const f=a.value-d;return Il(f,ir.EMPTY,ir.FULL)}}},wN={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},SN=t=>{const{getColor:e,getFocusColor:n,getTextColor:r}=ct(),i=A(()=>e(t.color)),s=A(()=>t.unselectedColor?e(t.unselectedColor):n(e(t.color))),o=A(()=>t.modelValue===ir.HALF?`linear-gradient(90deg, ${i.value} 50%, ${s.value} 50%`:t.modelValue===ir.EMPTY?s.value:i.value),a=A(()=>t.modelValue===ir.FULL?e(r(i.value)):e(r(s.value)));return{computedColor:i,backgroundComputed:o,textColorComputed:a}},W_e=["tabindex","onKeydown"],EN=Me({name:"VaRatingItem",__name:"VaRatingItem",props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:[String,Number],default:0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},size:{type:[String,Number],default:"medium"},unselectedColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(t,{emit:e}){const n=t,r=e,i=st(),[s]=kl("modelValue",n,r,ir.EMPTY),o=le(null),a=A(()=>n.hover&&!n.disabled&&!n.readonly&&o.value||s.value),{getColor:l}=ct(),c=A(()=>l(n.unselectedColor&&a.value===ir.EMPTY?n.unselectedColor:n.color)),u=g=>{if(!i.value)return;const{offsetX:m}=g,v=i.value.clientWidth;n.halves?o.value=m/v<=ir.HALF?ir.HALF:ir.FULL:o.value=ir.FULL},d=()=>{o.value=null},f=()=>{s.value=o.value||ir.FULL,r("click",o.value||ir.FULL)};De(o,()=>r("hover",o.value||ir.EMPTY));const h=A(()=>n.halves&&a.value===ir.HALF?n.halfIcon:a.value===ir.EMPTY?n.emptyIcon:n.icon),p=A(()=>n.disabled?-1:n.tabindex);return(g,m)=>(V(),ee("div",{ref_key:"rootEl",ref:i,role:"button",class:"va-rating-item",tabindex:p.value,onKeydown:[We(f,["enter"]),We(He(f,["prevent"]),["space"])],onMousemove:u,onMouseleave:d,onClick:f},[se(g.$slots,"default",Ue(je({value:a.value,onClick:f})),()=>[ke(C(St),{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:h.value,size:g.$props.size,color:c.value},null,8,["name","size","color"])])],40,W_e))}}),MN=Me({name:"VaRatingItemNumberButton",__name:"VaRatingItemNumberButton",props:{...wN,...Kl,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup(t){const e=t,{textColorComputed:n,backgroundComputed:r}=SN(e),{sizeComputed:i,fontSizeComputed:s,fontSizeInRem:o}=ql(e,"VaRating");return(a,l)=>(V(),ee("button",{class:"va-rating__number-item",tabindex:"-1","aria-hidden":"true",style:Be({background:C(r),color:C(n),width:C(i),height:C(i),fontSize:C(s),borderRadius:`${parseInt(C(s))*.125}rem`})},Ze(t.itemNumber),5))}}),j_e=["aria-label"],TT=It(EN,["modelValue","itemNumber"]),PT=It(MN,["modelValue","itemNumber"]),X_e=Me({name:"VaRating",__name:"VaRating",props:{...PT,...H_e,...wN,...Ca,...TT,...rt,modelValue:{type:Number,default:0},numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:[Number,String],default:5},texts:{type:Array,default:()=>[]},ariaLabel:{type:String,default:"$t:currentRating"},ariaItemLabel:{type:String,default:"$t:voteRating"}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{computedClasses:r}=KD("va-rating",n),{visibleValue:i,modelValue:s,hoveredValue:o,isHovered:a,onMouseEnter:l,onMouseLeave:c,onItemValueUpdate:u,onItemHoveredValueUpdate:d,getItemValue:f}=G_e(n),h=A(()=>!n.disabled&&!n.readonly),p=w=>{const M=Number(n.max),x=n.halves?ir.HALF:ir.FULL,S=i.value+x*w,R=n.clearable?0:x;S>=R&&S<=M?u(i.value,x*w):S<R?u(R,0):u(M,w===-1?x*w:0)},{tp:g,t:m}=rn(),{computedColor:v,backgroundComputed:b,textColorComputed:y}=SN(n),E=A(()=>h.value?0:void 0),T=tn(TT),_=tn(PT);return(w,M)=>(V(),ee("div",{class:Qe(["va-rating",C(r)]),"aria-label":C(g)(w.$props.ariaLabel,{max:w.$props.max,value:w.$props.modelValue})},[me("div",{class:"va-rating__item-wrapper",onKeyup:[M[0]||(M[0]=We(x=>p(-1),["left"])),M[1]||(M[1]=We(x=>p(1),["right"]))],onMouseenter:M[2]||(M[2]=(...x)=>C(l)&&C(l)(...x)),onMouseleave:M[3]||(M[3]=(...x)=>C(c)&&C(c)(...x))},[(V(!0),ee(qe,null,vt(Number(w.$props.max),x=>(V(),Te(EN,Re({key:x,class:"va-rating__item"},C(T),{"aria-label":C(g)(w.$props.ariaItemLabel,{max:w.$props.max,value:x}),"model-value":C(f)(x-1),tabindex:E.value,disabled:w.$props.disabled,readonly:w.$props.readonly,onHover:S=>h.value&&C(d)(x-1,S),"onUpdate:modelValue":S=>h.value&&C(u)(x-1,S)}),{default:we(({value:S,onClick:R})=>[se(w.$slots,"item",Ue(je({value:S,onClick:R,index:x})),()=>[w.$props.numbers?(V(),Te(MN,Re({key:0},C(_),{"model-value":S,"item-number":x}),null,16,["model-value","item-number"])):ve("",!0)])]),_:2},1040,["aria-label","model-value","tabindex","disabled","readonly","onHover","onUpdate:modelValue"]))),128))],32),w.$props.texts&&w.$props.texts.length===w.$props.max?(V(),ee("span",{key:0,class:"va-rating__text-wrapper",style:Be({color:C(v)})},Ze(w.$props.texts[Math.round(C(i))-1]),5)):ve("",!0)],10,j_e))}}),K_e=ze(X_e),q_e=t=>t.offsetTop,Y_e=t=>t.offsetTop+t.offsetHeight,Z_e=t=>t.offsetTop+t.offsetHeight/2,J_e=(t,e,n)=>{const r=e.offsetHeight,i=e.scrollTop,s=q_e(t)-e.offsetTop,o=Z_e(t)-e.offsetTop,a=Y_e(t)-e.offsetTop;if(n==="start")return s;if(n==="end")return a-r;if(n==="center")return o-r/2;if(n==="any"){if(s-i<0)return s;if(a-i>r)return a-r}},Q_e=(t,e={scrollTarget:t.parentElement,verticalAlignment:"any",smooth:!1})=>{const n=e.scrollTarget||t.parentElement,r=J_e(t,n,e.verticalAlignment);r!==void 0&&n.scroll({top:r,behavior:e.smooth?"smooth":"auto"})},exe=["aria-selected"],txe={key:1,class:"va-select-option__highlighted"},nxe=Me({name:"VaSelectOption",__name:"VaSelectOption",props:{...Zw,disabled:{type:Boolean,default:!1},option:{type:[Number,String,Boolean,Object],default:()=>({})},getText:{type:Function,required:!0},getTrackBy:{type:Function,required:!0},currentOption:{type:[String,Number,Boolean,Object],default:null},getSelectedState:{type:Function,required:!0},search:{type:String,default:""},highlightMatchedText:{type:Boolean,default:!0},inputFocused:{type:Boolean,default:!1},minSearchChars:{type:Number,default:0}},setup(t,{expose:e}){const n=t,{getColor:r,getHoverColor:i}=ct(),s=A(()=>qd(n.option)?n.option.icon:void 0),o=A(()=>r(n.color)),a=A(()=>n.getText(n.option)),l=A(()=>{const h={start:a.value,searchedSubString:"",end:""};if(!a.value||!n.search||!n.highlightMatchedText||n.search.length<n.minSearchChars)return h;const p=a.value.toLowerCase().indexOf(n.search.toLowerCase());if(p<0)return h;const g=a.value.slice(0,p),m=a.value.slice(p,p+n.search.length),v=a.value.slice(p+n.search.length);return{start:g,searchedSubString:m,end:v}}),c=A(()=>n.getSelectedState(n.option)),u=A(()=>typeof n.option=="string"?n.option===n.currentOption:n.getTrackBy(n.currentOption)===n.getTrackBy(n.option)),d=jt("va-select-option",()=>({selected:c.value})),f=A(()=>({color:c.value?r(n.color):"inherit",backgroundColor:u.value?i(r(n.color)):"transparent",cursor:n.disabled?"default":void 0,opacity:n.disabled?"var(--va-select-option-list-option-disabled-opacity)":void 0}));return e({isFocused:u,isSelected:c}),(h,p)=>(V(),ee("div",{role:"option",class:Qe(["va-select-option",C(d)]),style:Be(f.value),"aria-selected":c.value},[se(h.$slots,"option-content",{},()=>[s.value?(V(),Te(C(St),{key:0,size:"small",class:"va-select-option__icon",name:s.value},null,8,["name"])):ve("",!0),gt(" "+Ze(l.value.start)+" ",1),l.value.searchedSubString?(V(),ee("span",txe,Ze(l.value.searchedSubString),1)):ve("",!0),gt(" "+Ze(l.value.end),1)]),Fi(ke(C(St),{class:"va-select-option__selected-icon",size:"small",name:"va-check",color:o.value},null,8,["color"]),[[_l,c.value]])],14,exe))}}),RT=ze(nxe),rxe=()=>{const t=st({}),e=n=>r=>{if(r)return t.value[n]=r,String(n)};return G_(()=>{t.value={}}),{itemRefs:t,setItemRef:e}},ixe=["tabindex","onKeydown","aria-multiselectable"],sxe={key:0,class:"va-select-option-list__group-name",role:"presentation"},oxe={key:0,class:"va-select-option-list--empty"},axe=Me({name:"VaSelectOptionList",__name:"VaSelectOptionList",props:{...Zw,...rt,...Xu,...Yu,noOptionsText:{type:String,default:"Items not found"},getSelectedState:{type:Function,required:!0},multiple:{type:Boolean,default:!1},search:{type:String,default:""},tabindex:{type:[String,Number],default:0},hoveredOption:{type:[String,Number,Boolean,Object],default:null},virtualScroller:{type:Boolean,default:!0},highlightMatchedText:{type:Boolean,default:!0},minSearchChars:{type:Number,default:0},autoSelectFirstOption:{type:Boolean,default:!1},selectedTopShown:{type:Boolean,default:!1},doShowAllOptions:{type:Boolean,default:!1}},emits:["select-option","update:hoveredOption","no-previous-option-to-hover","scroll-bottom"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),o=()=>{var ue;(ue=s.value)==null||ue.focus({preventScroll:!0})},a=A(()=>{var ue;return((ue=s.value)==null?void 0:ue.clientHeight)??200}),l=()=>i("scroll-bottom"),c=ue=>{const J=ue.target;J&&J.scrollTop+J.clientHeight===J.scrollHeight&&l()},u=le(""),d=A(()=>r.hoveredOption??null),f=(ue,J)=>{i("update:hoveredOption",ue),u.value=J},{getText:h,getGroupBy:p,getTrackBy:g,getDisabled:m}=Ku(r),v=A(()=>{var ue;const J=r.getSelectedState,X=(ue=r.options)==null?void 0:ue.find(L=>J(L));return X?h(X):""}),b=A(()=>{var ue;return v.value.toLowerCase()===((ue=r.search)==null?void 0:ue.toLowerCase())}),y=A(()=>{if(r.doShowAllOptions&&b.value||!r.search||r.search.length<r.minSearchChars)return r.options;const ue=r.search.toUpperCase().trim();return r.options.filter(J=>h(J).toUpperCase().includes(ue))}),E=A(()=>r.groupBy?y.value.reduce((ue,J)=>{const X=p(J);return X?(ue[X]||(ue[X]=[]),ue[X].push(J)):ue._noGroup.push(J),ue},{_noGroup:[]}):{_noGroup:y.value}),T=gS(E,r),_=ue=>!Of(ue),w=ue=>{ue===d.value||_(ue)&&m(ue)||f(ue??null,"mouse")},M=ue=>{f(ue??null,"keyboard")},x=()=>{const ue=B.value&&typeof B.value=="object"?{...B.value}:B.value;i("select-option"),r.selectedTopShown&&w(ue)},S=A(()=>Object.values(T.value).flat()),R=A(()=>y.value.some(ue=>p(ue))?S.value:y.value),I=A(()=>R.value.findIndex(ue=>_(d.value)&&g(ue)===g(d.value))),z=A(()=>({...wn(r,["getSelectedState","color","search","highlightMatchedText","minSearchChars"]),getText:h,getTrackBy:g})),P=(ue,J=!1)=>{const X=[...R.value||[]],L=J?X.reverse():X,N=J?ue*-1-1:ue;return L.slice(N).find(G=>!m(G))},B=A(()=>{const ue=I.value-1,J=R.value[ue];if(_(J)&&!(ue===0&&m(J)))return P(I.value-1,!0)}),U=ue=>{w(ue),i("select-option")},j=ue=>{r.selectedTopShown||w(ue)},Z=ue=>{r.selectedTopShown&&w(ue)},ne=()=>{if(!_(d.value)){M(P(0,!0));return}_(B.value)?M(B.value):i("no-previous-option-to-hover")},K=()=>{if(!_(d.value)){fe();return}const ue=I.value+1,J=R.value[ue];_(J)&&!(ue===R.value.length-1&&m(J))&&M(P(I.value+1))},fe=()=>M(P(0)),{itemRefs:Se,setItemRef:de}=rxe(),ae=st(),ge=ue=>{var J;if(!_(ue))return;const X=Mn(Se.value[g(ue)]);X&&Q_e(X);const L=(J=ae.value)==null?void 0:J[0];r.virtualScroller&&L.virtualScrollTo(I.value)};return De(()=>r.hoveredOption,ue=>{(!u.value||u.value==="keyboard")&&_(ue)&&ge(ue)}),De(y,()=>{r.autoSelectFirstOption&&fe()},{immediate:!0}),e({focusPreviousOption:ne,focusNextOption:K,focusFirstOption:fe,scrollToOption:ge,focus:o}),(ue,J)=>(V(),ee("div",{ref_key:"root",ref:s,class:"va-select-option-list",tabindex:t.tabindex,onKeydown:[We(He(ne,["stop","prevent"]),["up"]),We(He(ne,["stop","prevent"]),["left"]),We(He(K,["stop","prevent"]),["down"]),We(He(K,["stop","prevent"]),["right"]),We(He(x,["stop","prevent"]),["enter"]),We(He(x,["stop","prevent"]),["space"])],onScrollPassive:c,role:"listbox","aria-multiselectable":ue.$props.multiple},[(V(!0),ee(qe,null,vt(C(T),(X,L)=>(V(),ee(qe,{key:L},[L!=="_noGroup"?(V(),ee("span",sxe,Ze(L),1)):ve("",!0),ue.$props.virtualScroller?(V(),Te(C(Dg),{key:1,ref_for:!0,ref_key:"virtualScrollerRef",ref:ae,items:X,"track-by":C(g),"wrapper-size":a.value,"onScroll:bottom":l},{default:we(({item:N,index:G})=>[se(ue.$slots,"default",Ue(je({option:N,index:G,selectOption:($=N)=>U($)})),()=>[ke(C(RT),Re({option:N,"current-option":d.value,disabled:C(m)(N)},z.value,{onClick:He(x,["stop"]),onMouseenter:$=>Z(N),onMousemove:$=>j(N)}),null,16,["option","current-option","disabled","onMouseenter","onMousemove"])])]),_:2},1032,["items","track-by","wrapper-size"])):(V(!0),ee(qe,{key:2},vt(X,(N,G)=>se(ue.$slots,"default",Ue(Re({key:C(g)(N)},{option:N,index:G,selectOption:U})),()=>[ke(C(RT),Re({ref_for:!0,ref:C(de)(C(g)(N)),"current-option":d.value,option:N,disabled:C(m)(N)},z.value,{onClick:He(x,["stop"]),onMouseenter:$=>Z(N),onMousemove:$=>j(N)}),{"option-content":we(()=>[se(ue.$slots,"option-content",Ue(je({option:N,index:G})))]),_:2},1040,["current-option","option","disabled","onMouseenter","onMousemove"])])),128))],64))),128)),y.value.length?ve("",!0):(V(),ee("div",oxe,Ze(t.noOptionsText),1))],40,ixe))}}),lxe=ze(axe),cxe={key:0,class:"va-select-content__placeholder"},uxe=["placeholder"],dxe={key:0,class:"va-select-content__option"},fxe={key:1,class:"va-select-content__separator"},hxe=["placeholder","disabled","readonly"],pxe=Me({name:"VaSelectContent",__name:"VaSelectContent",props:{...Ca,ariaAttributes:{type:Object},value:{type:Array,required:!0},valueString:{type:String},separator:{type:String,default:", "},placeholder:{type:String,default:""},tabindex:{type:[String,Number],default:0},hiddenSelectedOptionsAmount:{type:Number,default:0},isAllOptionsShown:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},getText:{type:Function,required:!0},autocompleteInputValue:{type:String,default:""}},emits:["toggle-hidden","autocomplete-input","focus-prev","focus-next","select-option","delete-last-selected"],setup(t,{emit:e}){const n=t,r=e,i=le(),s=A(()=>n.placeholder&&!n.valueString),o=()=>r("toggle-hidden"),{value:a,focused:l}=kr(n),c=A({get:()=>n.autocompleteInputValue,set:p=>r("autocomplete-input",p)});kt(()=>{n.multiple||n.autocomplete&&(c.value=n.valueString)}),De(l,p=>{var g,m;!n.autocomplete||!p||(c.value?(g=i.value)==null||g.setSelectionRange(0,c.value.length):(m=i.value)==null||m.focus())});const u=p=>{n.multiple&&a.value.length&&p.key==="Backspace"&&!c.value&&r("delete-last-selected")},d=p=>{var g;n.autocomplete&&((g=i.value)==null||g.focus(),p.stopPropagation())},f=p=>qd(p)?p.icon:void 0,h=A(()=>n.multiple?a.value:a.value[0]);return(p,g)=>(V(),ee("div",{class:"va-select-content",onClick:d},[s.value&&!p.$props.autocomplete?(V(),ee("span",cxe,[me("input",Re(t.ariaAttributes,{placeholder:p.$props.placeholder,readonly:""}),null,16,uxe)])):n.autocomplete&&!n.multiple?ve("",!0):se(p.$slots,"content",Ue(Re({key:1},{value:h.value,valueString:p.$props.valueString,valueArray:p.$props.value,tabindex:p.$props.tabindex,ariaAttributes:t.ariaAttributes})),()=>[(V(!0),ee(qe,null,vt(p.$props.value,(m,v)=>(V(),ee(qe,{key:v},[m!==""?(V(),ee("span",dxe,[se(p.$slots,"option-content",Ue(je({option:m,index:v,selectOption:()=>{}})),()=>[f(m)?(V(),Te(C(St),{key:0,size:"small",class:"va-select-option__icon",name:f(m)},null,8,["name"])):ve("",!0),gt(" "+Ze(t.getText(m)),1)])])):ve("",!0),v<p.$props.value.length-1?(V(),ee("span",fxe,Ze(p.$props.separator),1)):ve("",!0)],64))),128))]),p.$props.autocomplete?Fi((V(),ee("input",Re({key:2},t.ariaAttributes,{"onUpdate:modelValue":g[0]||(g[0]=m=>c.value=m),class:"va-select-content__autocomplete",ref_key:"autocompleteInput",ref:i,autocomplete:"off","aria-autocomplete":"list",placeholder:p.$props.placeholder,disabled:p.$props.disabled,readonly:p.$props.readonly,onKeydown:[g[1]||(g[1]=We(He(m=>p.$emit("focus-prev"),["stop","prevent"]),["up"])),g[2]||(g[2]=We(He(m=>p.$emit("focus-next"),["stop","prevent"]),["down"])),g[3]||(g[3]=We(He(m=>p.$emit("select-option"),["stop","prevent"]),["enter"])),u]}),null,16,hxe)),[[q_,c.value]]):ve("",!0),se(p.$slots,"hiddenOptionsBadge",Ue(je({amount:p.$props.hiddenSelectedOptionsAmount,isShown:p.$props.isAllOptionsShown,toggle:o})),()=>[p.$props.hiddenSelectedOptionsAmount&&!p.$props.isAllOptionsShown?(V(),Te(C(AD),{key:0,class:"va-select-content__state-icon",color:"info",text:`+${p.$props.hiddenSelectedOptionsAmount}`,tabindex:p.$props.tabindex,onClick:He(o,["stop"])},null,8,["text","tabindex"])):ve("",!0)]),se(p.$slots,"hideOptionsButton",Ue(je({isShown:p.$props.isAllOptionsShown,toggle:o})),()=>[p.$props.isAllOptionsShown?(V(),Te(C(St),{key:0,role:"button",class:"va-select-content__state-icon",size:"small",name:"reply",tabindex:p.$props.tabindex,onClick:He(o,["stop"])},null,8,["tabindex"])):ve("",!0)])]))}}),mxe=ze(pxe),vxe={maxVisibleOptions:{type:Number||String,default:0}},gxe=(t,e)=>{const n=or(t,"modelValue"),r=le(!1),i=le([]),s=le([]),o=A(()=>s.value.length),a=A(()=>[...i.value,...s.value]),l=A(()=>!t.maxVisibleOptions||r.value?a.value:i.value);return De(n,()=>{if(!Array.isArray(n.value)){i.value=[e(n.value)],s.value=[];return}const u=n.value.filter(d=>!Of(d)).map(e);t.maxVisibleOptions?(i.value=u.slice(0,t.maxVisibleOptions),s.value=u.slice(t.maxVisibleOptions)):(i.value=[...u],s.value=[])},{immediate:!0}),{toggleHiddenOptionsState:()=>r.value=!r.value,isAllOptionsShown:r,visibleSelectedOptions:l,hiddenSelectedOptionsAmount:o,allSelectedOptions:a}},yxe={dropdownIcon:{type:[String,Object],default:()=>({open:"va-arrow-down",close:"va-arrow-up"}),validator:t=>typeof t=="string"?!0:Object.entries(t).every(([e,n])=>["open","close"].includes(e)&&typeof n=="string")}},bxe=(t,e)=>{const n=A(()=>t.dropdownIcon?typeof t.dropdownIcon=="string"?t.dropdownIcon:e.value?t.dropdownIcon.close:t.dropdownIcon.open:""),{getHoverColor:r,getColor:i}=ct(),s=A(()=>i("secondary")),o=A(()=>t.readonly?r(s.value):s.value);return{toggleIcon:n,toggleIconColor:o}},_xe={separator:{type:String,default:", "}},xxe=(t,e,n)=>A(()=>{var r;return(r=e.value)!=null&&r.length&&e.value.map(n).join(t.separator)||t.clearValue}),wxe={autocomplete:{type:Boolean,default:!1}},Sxe=(t,e,n,r,i)=>{const s=a=>a!=null&&a.length?i(a.at(-1)):"";e.autocomplete&&!e.multiple&&(t.value=s(n.value)),De(n,(a,l)=>{if(!e.autocomplete)return;const c=s(a),u=s(l);c!==u&&(t.value=e.multiple?"":c,e.multiple||(r.value=!1))}),De(t,a=>{e.autocomplete&&a&&a!==s(n.value)&&(r.value=!0)});const o=()=>{t.value=e.multiple?"":s(n.value)};return De(r,(a,l)=>{e.autocomplete&&(!a||l)&&o()}),t},Exe=()=>({popupId:`combobox-controls-${Ps()}`}),Mxe={maxSelections:{type:[Number,String],default:void 0}};function Cxe(t,e){return{exceedsMaxSelections:()=>e.value===void 0||isNaN(+e.value)?!1:t.value.length>=Number(e.value),addOption:i=>[...t.value,i]}}const LT=It(oi),Axe=Me({name:"VaSelect",__name:"VaSelect",props:{...LT,...rt,...Xu,...go,...fh,...Mxe,...bh,...Ca,...vxe,...yxe,...Yu,..._xe,...wxe,...ji,modelValue:{type:[String,Number,Array,Object,Boolean],default:void 0},placement:{...ji.placement,default:"bottom"},keepAnchorWidth:{...ji.keepAnchorWidth,default:!0},offset:{...ji.offset,default:[1,0]},closeOnContentClick:{...ji.closeOnContentClick,default:!1},trigger:{...ji.trigger,default:()=>["click","right-click","space","enter"]},allowCreate:{type:[Boolean,String],default:!1,validator:t=>[!0,!1,"unique"].includes(t)},color:{type:String,default:"primary"},multiple:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},width:{type:String,default:"100%"},maxHeight:{type:String,default:"256px"},noOptionsText:{type:String,default:"$t:noOptions"},hideSelected:{type:Boolean,default:!1},tabindex:{type:[String,Number],default:0},virtualScroller:{type:Boolean,default:!1},selectedTopShown:{type:Boolean,default:!1},highlightMatchedText:{type:Boolean,default:!0},minSearchChars:{type:Number,default:0},autoSelectFirstOption:{type:Boolean,default:!1},placeholder:{type:String,default:""},searchPlaceholderText:{type:String,default:"$t:search"},ariaLabel:{type:String,default:"$t:select"},ariaSearchLabel:{type:String,default:"$t:optionsFilter"},ariaClearLabel:{type:String,default:"$t:reset"},search:{type:String,default:void 0}},emits:["update:modelValue","update-search","create-new","scroll-bottom","update:search",...xS,...Ea,...Og],setup(t,{expose:e,emit:n}){const r=t,i=n,{tp:s,t:o}=rn(),a=st(),l=st(),c=st(),u=mS(l),{getValue:d,getText:f,getTrackBy:h,tryResolveByValue:p}=Ku(r),g=Ve=>f(p(Ve)),m=()=>i("scroll-bottom"),[v]=kl("search",r,i,""),b=A(()=>r.searchable||r.allowCreate&&!r.autocomplete);De(v,Ve=>{i("update-search",Ve),r.autocomplete||(de.value=null)});const y=Ve=>{if(Of(Ve)||typeof Ve=="object")return Ve;const Qt=r.options.find($t=>Ve===d($t));return Qt===void 0?(qt(`[VaSelect]: can not find option in options list (${JSON.stringify(r.options)}) by provided value (${JSON.stringify(Ve)})!`),Ve):Qt},{toggleHiddenOptionsState:E,isAllOptionsShown:T,visibleSelectedOptions:_,hiddenSelectedOptionsAmount:w,allSelectedOptions:M}=gxe(r,y),x=A({get(){if(r.multiple)return M.value;const Ve=y(r.modelValue);return Array.isArray(Ve)&&(qt("Model value should be a string, number, boolean or an object for a single Select."),Ve.length)?Ve.at(-1):Ve},set(Ve){Array.isArray(Ve)?i("update:modelValue",Ve.map(d)):i("update:modelValue",d(Ve))}}),S=xxe(r,_,g),{canBeCleared:R,clearIconProps:I,onFocus:z,onBlur:P}=kg(r,x),B=A(()=>R.value?r.multiple&&Array.isArray(x.value)?!!x.value.length:!0:!1),U=A(()=>r.options?r.selectedTopShown?r.options.slice().sort((Ve,Qt)=>{const $t=Z(Ve),mn=Z(Qt);return $t&&mn?0:$t&&!mn?-1:1}):r.hideSelected?r.options.filter(Ve=>!Z(Ve)):r.options:[]),j=A(()=>Array.isArray(x.value)?x.value.map(Ve=>p(Ve)):p(x.value)),Z=Ve=>Array.isArray(j.value)?!Of(j.value.find(Qt=>ne(Qt,Ve))):ne(j.value,Ve),ne=(Ve,Qt)=>{const $t=d(Ve),mn=d(Qt);return $t===mn?!0:typeof $t=="string"&&typeof mn=="string"?$t===mn:$t===null||mn===null?!1:typeof $t=="object"&&typeof mn=="object"?h($t)===h(mn):!1},K=Ve=>Array.isArray(Ve.value),fe=Ve=>{if(de.value===null){k();return}if(b.value&&(v.value=""),r.multiple&&K(x)){const{exceedsMaxSelections:Qt,addOption:$t}=Cxe(x,le(r.maxSelections));if(Z(Ve))x.value=x.value.filter(Ui=>!ne(Ve,Ui));else{if(Qt())return;x.value=$t(Ve)}}else x.value=typeof Ve!="object"?Ve:{...Ve},k();ce()},Se=()=>{var Ve;const Qt=(Ve=r.options)==null?void 0:Ve.some(mn=>[v.value,et.value].includes(f(mn)));!((r.allowCreate==="unique"||r.autocomplete)&&Qt)&&(i("create-new",v.value||et.value),v.value="",et.value="")},de=le(null),ae=()=>{if(!X.value){$();return}fe(de.value)},ge=()=>{const Ve=!!r.allowCreate&&(v.value||et.value);de.value!==null?ae():Ve&&Se()},ue=()=>{var Ve;return(Ve=a.value)==null?void 0:Ve.focusPreviousOption()},J=()=>{var Ve;return(Ve=a.value)==null?void 0:Ve.focusNextOption()},{isOpenSync:X,dropdownProps:L}=wS(r,i,{defaultCloseOnValueUpdate:A(()=>!r.multiple)}),N=A(()=>({...L.value,stateful:!1,innerAnchorSelector:".va-input-wrapper__field"})),G=A({get:()=>X.value,set:Ve=>{Ve?$():O()}}),$=()=>{r.disabled||r.readonly||(X.value=!0,Q(),te())},O=()=>{X.value=!1,r.autocomplete||(v.value=""),cn(()=>{ft(),u.focusIfNothingIfFocused()})},k=()=>{O(),u.value=!0},H=()=>{var Ve;(Ve=c.value)==null||Ve.focus()},Y=()=>{var Ve,Qt;(Ve=a.value)==null||Ve.focus(),!r.modelValue&&((Qt=a.value)==null||Qt.focusFirstOption())},te=async()=>{await cn(),b.value?H():Y()},he=()=>{G.value||(P(),u.value?u.value=!1:ft())},F=A(()=>r.disabled?-1:r.tabindex),D=A(()=>r.disabled||r.autocomplete?-1:0),Q=()=>{const Ve=x.value;if(typeof Ve!="object"&&Array.isArray(Ve)&&!Ve.length)return;const $t=Array.isArray(Ve)?Ve[Ve.length-1]:Ve;de.value=$t,cn(()=>{var mn;return(mn=a.value)==null?void 0:mn.scrollToOption($t)})};let ie="",pe;const ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"," "],Oe=Ve=>{if(ye.some(mn=>mn===Ve.key))return;const Qt=Ve.key.length===1,$t=Ve.key==="Backspace"||Ve.key==="Delete";if(clearTimeout(pe),$t?ie=ie?ie.slice(0,-1):"":Qt&&(ie+=Ve.key),b.value){v.value=ie;return}if(ie){const mn=r.options.find(Ui=>f(Ui).toLowerCase().startsWith(ie.toLowerCase()));mn&&(de.value=mn)}pe=setTimeout(()=>{ie=""},1e3)},re=A(()=>({...wn(r,["textBy","trackBy","groupBy","valueBy","disabledBy","color","virtualScroller","highlightMatchedText","minSearchChars","delay","selectedTopShown"]),autoSelectFirstOption:r.autoSelectFirstOption||r.autocomplete,search:v.value||et.value,tabindex:F.value,selectedValue:x.value,options:U.value,getSelectedState:Z,noOptionsText:s(r.noOptionsText),doShowAllOptions:Le.value})),{toggleIcon:xe,toggleIconColor:Ne}=bxe(r,X),Ee=A(()=>u.value||X.value),be=Cr(),Ye=jt("va-select-anchor",()=>({nowrap:!!(r.maxVisibleOptions&&!be.content)})),ut=tn(LT),dt=A(()=>({...ut.value,error:at.value,errorMessages:Zt.value,focused:Ee.value,"aria-label":r.ariaLabel||(r.modelValue?`${o("selectedOption")}: ${r.modelValue}`:o("noSelectedOption"))})),it=A(()=>({...wn(r,["placeholder","autocomplete","multiple","disabled","readonly"]),tabindex:F.value,value:_.value,valueString:S.value,hiddenSelectedOptionsAmount:w.value,isAllOptionsShown:T.value,focused:u.value,autocompleteInputValue:et.value,getText:g})),et=Sxe(v,r,_,X,f),oe=Ve=>et.value=Ve,Le=le(!0);De(G,()=>{Le.value=!0}),De(v,()=>{Le.value=!1});const tt=()=>{r.disabled||gs(Mn(l.value))},Ge=()=>{G.value&&(G.value=!1),cn(()=>{r.disabled||Cg(Mn(l.value))})},$e=()=>Jt(()=>{r.multiple?x.value=Array.isArray(r.clearValue)?r.clearValue:[]:x.value=r.clearValue,v.value="",i("clear"),Cn(),cn(()=>{u.value=!0})}),ce=Ve=>{r.autocomplete&&!r.disabled&&!r.readonly&&(Ve==null||Ve.stopImmediatePropagation(),u.value=!0,X.value=!0)},Je=Ve=>{if(r.disabled||r.readonly)return;const Qt=Ve.target&&"tagName"in Ve.target&&Ve.target.tagName==="INPUT";Ve.code==="Space"&&Qt||(Ve.preventDefault(),G.value=!G.value)},nt=()=>{Array.isArray(x.value)&&(x.value=x.value.slice(0,-1))},{validate:ft,computedError:at,computedErrorMessages:Zt,withoutValidation:Jt,resetValidation:Cn}=yo(r,i,{reset:$e,focus:tt,value:x}),{popupId:Dn}=Exe(),fn=v,xr=z;return e({focus:tt,blur:Ge,reset:$e}),(Ve,Qt)=>(V(),Te(C(bi),Re({ref:"dropdown",modelValue:G.value,"onUpdate:modelValue":Qt[4]||(Qt[4]=$t=>G.value=$t),class:"va-select va-select__dropdown va-select-dropdown"},N.value,{role:"combobox","inner-anchor-selector":".va-input-wrapper__field","keyboard-navigation":!1}),{anchor:we(()=>[ke(C(oi),Re(dt.value,{ref_key:"input",ref:l,class:["va-select__anchor va-select-anchor__input",C(Ye)],"aria-haspopup":"listbox","model-value":C(S),readonly:!0,"aria-label":Ve.$props.ariaLabel,"aria-controls":C(Dn),"aria-owns":C(Dn),onFocus:C(xr),onBlur:he}),Er({icon:we(()=>[B.value?(V(),Te(C(St),Re({key:0,role:"button","aria-label":C(s)(Ve.$props.ariaClearLabel)},C(I),{onClick:He($e,["stop"]),onKeydown:[We(He($e,["stop"]),["enter"]),We(He($e,["stop"]),["space"])]}),null,16,["aria-label","onKeydown"])):ve("",!0)]),appendInner:we(()=>[ke(C(St),{color:C(Ne),name:C(xe),class:"va-select__toggle-icon",role:"button",tabindex:D.value,"aria-expanded":G.value,onKeydown:We(Je,["enter"])},null,8,["color","name","tabindex","aria-expanded"])]),default:we(({ariaAttributes:$t})=>[ke(C(mxe),Re(it.value,{ariaAttributes:$t,separator:Ve.$props.separator,onToggleHidden:C(E),onAutocompleteInput:oe,onFocusPrev:ue,onFocusNext:J,onSelectOption:ge,onDeleteLastSelected:nt}),Er({_:2},[vt(Ve.$slots,(mn,Ui)=>({name:Ui,fn:we(tc=>[se(Ve.$slots,Ui,Ue(je(tc)))])}))]),1040,["ariaAttributes","separator","onToggleHidden"])]),_:2},[vt(Ve.$slots,($t,mn)=>({name:mn,fn:we(Ui=>[se(Ve.$slots,mn,Ue(je(Ui)))])}))]),1040,["class","model-value","aria-label","aria-controls","aria-owns","onFocus"])]),default:we(()=>[ke(C(Nl),{class:"va-select-dropdown__content",style:Be({width:Ve.$props.width}),onKeydown:We(k,["esc"]),role:"dialog"},{default:we(()=>[b.value?(V(),Te(C(oi),{key:0,ref_key:"searchBar",ref:c,class:"va-select-dropdown__content-search-input",modelValue:C(fn),"onUpdate:modelValue":Qt[0]||(Qt[0]=$t=>Xt(fn)?fn.value=$t:null),"aria-label":C(s)(Ve.$props.ariaSearchLabel),tabindex:F.value,placeholder:C(s)(Ve.$props.searchPlaceholderText),preset:"bordered",onKeydown:[We(He(ue,["stop","prevent"]),["up"]),We(He(ue,["stop","prevent"]),["left"]),We(He(J,["stop","prevent"]),["down"]),We(He(J,["stop","prevent"]),["right"]),We(He(ge,["prevent"]),["enter"])],onFocus:Qt[1]||(Qt[1]=$t=>de.value=null)},null,8,["modelValue","aria-label","tabindex","placeholder","onKeydown"])):ve("",!0),ke(C(lxe),Re({ref_key:"optionList",ref:a,class:"va-select-dropdown__options-wrapper",hoveredOption:de.value,"onUpdate:hoveredOption":Qt[2]||(Qt[2]=$t=>de.value=$t),style:{maxHeight:Ve.$props.maxHeight},id:C(Dn)},re.value,{onSelectOption:ae,onNoPreviousOptionToHover:H,onKeydown:[Qt[3]||(Qt[3]=We(He($t=>c.value&&c.value.focus(),["stop","prevent"]),["tab"])),Oe],onScrollBottom:m}),{default:we($t=>[se(Ve.$slots,"option",Ue(je($t)))]),"option-content":we($t=>[se(Ve.$slots,"option-content",Ue(je($t)))]),_:3},16,["hoveredOption","style","id"])]),_:3},8,["style"])]),_:3},16,["modelValue"]))}}),Txe=ze(Axe),Pxe={key:0,class:"va-skeleton__wave"},Rxe=Me({name:"VaSkeleton",__name:"VaSkeleton",props:{color:{type:String,default:"backgroundElement"},delay:{type:Number,default:100},tag:{type:String,default:"div"},animation:{type:String,default:"pulse"},lines:{type:[String,Number],default:1},height:{type:[String],default:"5em"},width:{type:[String],default:"100%"},lineGap:{type:String,default:"8px"},lastLineWidth:{type:[String],default:"75%"},variant:{type:String,default:"squared"},ariaLabel:{type:String,default:"$t:loading"}},setup(t){const e=t,n=le(!1);let r;kt(()=>{clearTimeout(r),setTimeout(()=>{n.value=!0},e.delay)}),Sn(()=>{clearTimeout(r)});const i=A(()=>e.variant==="text"?`${e.lines}em`:e.height),s=A(()=>e.variant==="circle"?i.value:e.width),{getColor:o}=ct(),a=A(()=>o(e.color));A(()=>`-${e.lineGap}`);const l=jt("va-skeleton",()=>({lines:Number(e.lines)>1,text:e.variant==="text",circle:e.variant==="circle",hidden:!n.value,pulse:e.animation==="pulse",wave:e.animation==="wave"})),c=A(()=>e.variant==="circle"?"50%":e.variant==="rounded"?`var(--va-skeleton-border-radius, calc(${i.value} / 5))`:"0px"),{tp:u}=rn(),d=ba(),f=A(()=>[...Object.keys(l),d.class]);return(h,p)=>(V(),Te(mr(t.tag),{class:Qe(["va-skeleton",f.value]),role:"status","aria-live":"polite","aria-label":C(u)(h.$props.ariaLabel),"aria-atomic":"true",style:Be(`--va-color-computed: ${String(a.value)};--va-height-computed: ${String(i.value)};--va-width-computed: ${String(s.value)};--va-border-radius: ${String(c.value)};--va-line-gap: ${String(t.lineGap)};--va-last-line-width: ${String(t.lastLineWidth)}`)},{default:we(()=>[se(h.$slots,"default"),t.animation==="wave"?(V(),ee("div",Pxe)):ve("",!0)]),_:3},8,["aria-label","class","style"]))}}),Lxe=Me({name:"VaSkeletonGroup",__name:"VaSkeletonGroup",props:{color:{type:String,default:"backgroundElement"},delay:{type:Number,default:100},animation:{type:String,default:"pulse"},lines:{type:Number,default:1},lineGap:{type:String,default:"8px"},lastLineWidth:{type:[String],default:"75%"}},setup(t){const e=t,n=le(!1);let r;kt(()=>{r=setTimeout(()=>{n.value=!0},e.delay)}),H_(()=>{clearTimeout(r)});const i=jt("va-skeleton-group",()=>({hidden:n.value===!1})),s=A(()=>({...e,delay:0}));return(o,a)=>(V(),Te(C(uh),{components:{VaSkeleton:s.value}},{default:we(()=>[me("div",Re({class:["va-skeleton-group",C(i)]},o.$attrs),[se(o.$slots,"default",{},void 0,!0)],16)]),_:3},8,["components"]))}}),Ixe=ec(Lxe,[["__scopeId","data-v-c27755d1"]]),Oxe=ze(Rxe),kxe=ze(Ixe),CN=Symbol("VaSidebar"),Dxe=t=>{Mr(CN,t)},Nxe=()=>Zn(CN,{color:"background-element"}),Fxe=t=>{const e=le(null);return bu([t],()=>{var n;e.value=((n=t.value)==null?void 0:n.clientWidth)??null}),Yn(()=>{var n;e.value=((n=t.value)==null?void 0:n.clientWidth)??null}),e},Bxe=Me({name:"VaSidebar",__name:"VaSidebar",props:{...rt,activeColor:{type:String,default:"primary"},hoverColor:{type:String,default:void 0},hoverOpacity:{type:[Number,String],default:.2,validator:t=>Number(t)>=0&&Number(t)<=1},borderColor:{type:String,default:void 0},color:{type:String,default:"background-element"},textColor:{type:String},gradient:{type:Boolean,default:!1},minimized:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},width:{type:String,default:"16rem"},minimizedWidth:{type:String,default:"4rem"},modelValue:{type:Boolean,default:!0},animated:{type:[Boolean,String],default:!0},closeOnClickOutside:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,{getColor:s}=ct();Dxe(r);const o=le(!1),a=A(()=>r.minimized||r.hoverable&&!o.value),l=le(),c=Fxe(l),u=A(()=>r.modelValue===!0||c.value===null?!0:c.value>0),d=le(),f=()=>r.modelValue?a.value?r.minimizedWidth:r.width:0,h=A(()=>a.value?r.minimizedWidth:r.width);Yn(()=>{const T=f();setTimeout(()=>{d.value=T})});const p=A(()=>s(r.color)),{textColorComputed:g}=Hn(p),m=A(()=>{const T=s(p.value);return{color:g.value,backgroundColor:T,backgroundImage:r.gradient?Yw(T):void 0,overflowX:c.value===d.value?void 0:"hidden",width:d.value,minWidth:d.value}}),v=jt("va-sidebar",()=>({minimized:a.value,animated:!!r.animated,"animated-right":r.animated==="right","animated-left":r.animated==="left"||r.animated===!0})),b=T=>{o.value=r.hoverable&&T},y=st();Tg([y],()=>{r.closeOnClickOutside&&r.modelValue&&setTimeout(()=>{i("update:modelValue",!1)},0)});const E=A(()=>({textColor:r.textColor,activeColor:r.activeColor,hoverColor:r.hoverColor,borderColor:r.borderColor,hoverOpacity:r.hoverOpacity}));return e({isMinimized:a,isHovered:o,updateHoverState:b,rootElement:y,menu:l,doShowMenu:u,menuWidth:h,sidebarWidth:d}),(T,_)=>(V(),ee("aside",{ref_key:"rootElement",ref:y,class:Qe(["va-sidebar",C(v)]),style:Be(m.value),onMouseenter:_[0]||(_[0]=w=>b(!0)),onMouseleave:_[1]||(_[1]=w=>b(!1))},[Fi(me("div",{class:"va-sidebar__menu",ref_key:"menu",ref:l,style:Be({width:h.value,minWidth:h.value})},[ke(C(uh),{components:{VaSidebarItem:E.value}},{default:we(()=>[se(T.$slots,"default")]),_:3},8,["components"])],4),[[_l,u.value]])],38))}}),Vxe=ze(Bxe),Uxe=Me({name:"VaSidebarItem",__name:"VaSidebarItem",props:{...Jl,...rt,active:{type:Boolean,default:!1},textColor:{type:String,default:void 0},activeColor:{type:String,default:"primary"},hoverColor:{type:String,default:void 0},hoverOpacity:{type:[Number,String],default:.2},borderColor:{type:String,default:void 0}},setup(t){const e=t,n=dm(),r=Nxe(),{isHovered:i}=hh(n),{getColor:s,getHoverColor:o,getFocusColor:a}=ct(),{hasKeyboardFocus:l,keyboardFocusListeners:c}=qu(),u=A(()=>e.active&&!i.value&&!l.value?s(e.activeColor):l.value?a(s(e.hoverColor||e.activeColor)):"#ffffff00"),d=A(()=>jfe(s(r==null?void 0:r.color),u.value)),{textColorComputed:f}=Hn(d),h=A(()=>{const v={color:f.value};if((i.value||e.active||l.value)&&(v.backgroundColor=u.value),e.active){const b={...r,...e};v.borderColor=s(b.borderColor||b.activeColor)}return l.value&&(v.backgroundColor=a(s(e.hoverColor||e.activeColor))),i.value&&(v.backgroundColor=o(s(e.hoverColor||e.activeColor),Number(e.hoverOpacity))),v}),{tagComputed:p,hrefComputed:g,linkAttributesComputed:m}=Ma(e);return s(r==null?void 0:r.color),(v,b)=>(V(),Te(mr(C(p)),Re({ref_key:"rootElement",ref:n,class:["va-sidebar__item va-sidebar-item",{"va-sidebar-item--active":v.$props.active}],tabindex:"0",style:h.value},C(m),mi(C(c))),{default:we(()=>[se(v.$slots,"default")]),_:3},16,["class","style"]))}}),$xe={class:"va-sidebar__item__content va-sidebar-item-content"},zxe=Me({name:"VaSidebarItemContent",__name:"VaSidebarItemContent",setup(t){return(e,n)=>(V(),ee("div",$xe,[se(e.$slots,"default")]))}}),Hxe={class:"va-sidebar__title va-sidebar-item-title"},Gxe=Me({name:"VaSidebarItemTitle",__name:"VaSidebarItemTitle",setup(t){return(e,n)=>(V(),ee("div",Hxe,[se(e.$slots,"default")]))}}),Wxe=ze(zxe),jxe=ze(Gxe),Xxe=ze(Uxe),IT=(t,e,n,r,i)=>{(Array.isArray(t)&&!i||!Array.isArray(t)&&i)&&qt(`The type "${Array.isArray(t)?"array":typeof t}" of prop "model-value" does not match prop "range = ${i}".`),r<n&&qt(`The maximum value (${r}) can not be less than the minimum value (${n}).`),(r-n)%e!==0&&qt(`Step ${e} is illegal. Slider is non-divisible (Min:Max-${n}:${r}).`);const s=o=>{o<n?qt(`The value of the slider is ${o}, the minimum value is ${n}, the value of this slider can not be less than the minimum value`):o>r&&qt(`The value of the slider is ${o}, the maximum value is ${r}, the value of this slider can not be greater than the maximum value`)};return Array.isArray(t)?t.map(s):s(t),!0},Kxe={key:0,class:"va-slider__input-wrapper","aria-hidden":"true"},qxe=["id"],Yxe={key:2,class:"va-input__label","aria-hidden":"true"},Zxe=["tabindex","onFocus"],Jxe=["tabindex"],Qxe={key:3,class:"va-input__label--inverse","aria-hidden":"true"},ewe=["id"],twe={key:5,class:"va-slider__input-wrapper"},nwe=Me({name:"VaSlider",__name:"VaSlider",props:{...Fn,...rt,range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},trackLabel:{type:[Function,String]},color:{type:String,default:"primary"},trackColor:{type:String,default:""},labelColor:{type:String,default:""},trackLabelVisible:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},label:{type:String,default:""},invertLabel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},pins:{type:Boolean,default:!1},iconPrepend:{type:String,default:""},iconAppend:{type:String,default:""},vertical:{type:Boolean,default:!1},showTrack:{type:Boolean,default:!0},ariaLabel:{type:String,default:"$t:sliderValue"}},emits:["drag-start","drag-end","change","update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{getColor:i,getHoverColor:s}=ct(),o=st(),a=st(),{setItemRefByIndex:l,itemRefs:c}=Vg(),u=le(!1),d=le(!1),f=le(0),h=le(0),p=n.range?[0,100]:0,{valueComputed:g}=pn(n,r,"modelValue",{defaultValue:p}),m=le(0),v=le(!1),b=A(()=>n.vertical?[1,0]:[0,1]),y=A(()=>n.vertical?"bottom":"left"),E=A(()=>n.vertical?"height":"width"),T=A(()=>Array.isArray(P.value)&&P.value[1]-n.step<P.value[0]),_=A(()=>Array.isArray(P.value)&&P.value[0]+n.step>P.value[1]),w=jt("va-slider",()=>({...wn(n,["disabled","readonly","vertical"]),active:u.value,horizontal:!n.vertical,grabbing:v.value})),M=jt("va-slider__handler",()=>({onFocus:!n.range&&(d.value||u.value),inactive:!u.value})),x=A(()=>({color:n.labelColor?i(n.labelColor):i(n.color)})),S=A(()=>({backgroundColor:n.trackColor?i(n.trackColor):s(i(n.color))})),R=A(()=>{if(Array.isArray(P.value)){const re=(P.value[0]-n.min)/(n.max-n.min)*100,xe=(P.value[1]-n.min)/(n.max-n.min)*100;return{[y.value]:`${re}%`,[E.value]:`${xe-re}%`,backgroundColor:i(n.color),visibility:n.showTrack?"visible":"hidden"}}else{const re=(P.value-n.min)/(n.max-n.min)*100;return{[E.value]:`${re}%`,backgroundColor:i(n.color),visibility:n.showTrack?"visible":"hidden"}}}),I=A(()=>{if(Array.isArray(P.value)){const re=(P.value[0]-n.min)/(n.max-n.min)*100,xe=(P.value[1]-n.min)/(n.max-n.min)*100;return[{[y.value]:`${re}%`,backgroundColor:Se(0)?i(n.color):"#ffffff",borderColor:i(n.color)},{[y.value]:`${xe}%`,backgroundColor:Se(1)?i(n.color):"#ffffff",borderColor:i(n.color)}]}else{const re=(P.value-n.min)/(n.max-n.min)*100;return{[y.value]:`${re}%`,backgroundColor:Se(0)?i(n.color):"#ffffff",borderColor:i(n.color)}}}),z=re=>n.range?I.value[re]:I.value,P=A({get:()=>g.value,set:re=>{d.value||r("change",re),g.value=re}}),B=re=>n.range&&re!==void 0?P.value[re]:P.value,U=A(()=>{const re=(n.max-n.min)/n.step;return h.value/re}),j=A(()=>{const re=`${n.step}`.split(".")[1];return re?Math.pow(10,re.length):1}),Z=A(()=>(n.max-n.min)/n.step-1),ne=A(()=>Array.isArray(P.value)?[(P.value[0]-n.min)/n.step*U.value,(P.value[1]-n.min)/n.step*U.value]:(P.value-n.min)/n.step*U.value),K=A(()=>[0,h.value]),fe=A(()=>[n.min,n.max]),Se=re=>!u.value&&!d.value||n.disabled||n.readonly?!1:n.range?m.value===re:m.value===0,de=(re,xe=m.value)=>{var Ne,Ee;if(re.preventDefault(),!xe){if(!n.range)xe=0;else if(Array.isArray(ne.value)){const be="touches"in re?re.touches[0]:re;xe=G(be)>(ne.value[1]-ne.value[0])/2+ne.value[0]?1:0}}Array.isArray(P.value)&&(m.value=xe),Array.isArray(P.value)?(Ne=c.value[xe])==null||Ne.focus():(Ee=a.value)==null||Ee.focus(),d.value=!0,r("drag-start")},ae=re=>{!v.value||!d.value||n.disabled||n.readonly||(re.preventDefault(),"touches"in re?Y(G(re.touches[0])):Y(G(re)))},ge=()=>{!n.disabled&&!n.readonly&&(d.value&&(r("drag-end"),r("change",P.value)),d.value=!1,v.value=!1)},ue=(re,xe,Ne)=>Math.max(Math.min(xe,Ne),re),J=re=>{var xe,Ne;if(![c.value[0],c.value[1],a.value].includes(document.activeElement)||n.disabled||n.readonly)return;const Ee=(Ye,ut)=>{if(Array.isArray(P.value)){const dt=P.value[ut]+(Ye?n.step:-n.step),it=ue(n.min,dt,n.max);P.value=[ut===0?it:P.value[0],ut===1?it:P.value[1]]}else{const dt=P.value+(Ye?n.step:-n.step),it=ue(n.min,dt,n.max);P.value=it}};["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(re.key)&&re.preventDefault();const be=Ye=>Ye===document.activeElement;if(n.range&&Array.isArray(P.value)){const Ye=Ge=>n.vertical&&be(c.value[0])&&Ge.key==="ArrowUp",ut=Ge=>n.vertical&&be(c.value[0])&&Ge.key==="ArrowDown",dt=Ge=>n.vertical&&be(c.value[1])&&Ge.key==="ArrowUp",it=Ge=>n.vertical&&be(c.value[1])&&Ge.key==="ArrowDown",et=Ge=>!n.vertical&&be(c.value[0])&&Ge.key==="ArrowLeft",oe=Ge=>!n.vertical&&be(c.value[0])&&Ge.key==="ArrowRight",Le=Ge=>!n.vertical&&be(c.value[1])&&Ge.key==="ArrowLeft",tt=Ge=>!n.vertical&&be(c.value[1])&&Ge.key==="ArrowRight";switch(!0){case((it(re)||Le(re))&&T.value&&P.value[0]!==n.min):(xe=c.value[0])==null||xe.focus(),Ee(0,0);break;case((Ye(re)||oe(re))&&_.value&&P.value[1]!==n.max):(Ne=c.value[1])==null||Ne.focus(),Ee(1,1);break;case((ut(re)||et(re))&&P.value[0]!==n.min):Ee(0,0);break;case((dt(re)||tt(re))&&P.value[1]!==n.max):Ee(1,1);break;case((it(re)||Le(re))&&P.value[1]!==n.min):Ee(0,1);break;case((Ye(re)||oe(re))&&P.value[0]!==n.max):Ee(1,0);break}}else n.vertical?(re.key==="ArrowDown"&&Ee(0,0),re.key==="ArrowUp"&&Ee(1,0)):(re.key==="ArrowLeft"&&Ee(0,0),re.key==="ArrowRight"&&Ee(1,0))},X=re=>Array.isArray(P.value)?re*n.step>P.value[0]&&re*n.step<P.value[1]:re*n.step<P.value,L=A(()=>n.step/(n.max-n.min)*100),N=re=>({backgroundColor:X(re)?i(n.color):s(i(n.color)),[y.value]:`${re*L.value}%`,transition:v.value?"none":"var(--va-slider-pin-transition)"}),G=re=>($(),n.vertical?f.value-re.clientY:re.clientX-f.value),$=()=>{o.value&&(h.value=o.value[n.vertical?"offsetHeight":"offsetWidth"],f.value=o.value.getBoundingClientRect()[y.value])},O=re=>(n.step*j.value*re+n.min*j.value)/j.value,k=(re,xe)=>n.trackLabel?typeof n.trackLabel=="function"?n.trackLabel(re,xe):n.trackLabel:re,H=re=>{const xe=m.value;Array.isArray(P.value)?te(P.value[xe],re)&&(xe===0?P.value=[re,P.value[1]]:P.value=[P.value[0],re]):re<n.min?P.value=n.min:re>n.max?P.value=n.max:te(P.value,re)&&(P.value=re)},Y=re=>{const xe=K.value,Ne=fe.value,Ee=Array.isArray(P.value)?c.value[m.value]:a.value;if(Ee==null||Ee.focus(),re>=xe[0]&&re<=xe[1]){const be=O(Math.round(re/U.value));m.value?Array.isArray(ne.value)&&Array.isArray(P.value)&&re<=ne.value[0]?(P.value=[be,P.value[0]],m.value=0):H(be):Array.isArray(ne.value)&&Array.isArray(P.value)&&re>=ne.value[1]?(P.value=[P.value[1],be],m.value=1):H(be)}else re<xe[0]?H(Ne[0]):H(Ne[1])},te=(re,xe)=>JSON.stringify(re)!==JSON.stringify(xe),he=re=>{if(n.disabled||n.readonly)return;const xe="touches"in re?G(re.touches[0]):G(re);Array.isArray(ne.value)&&(m.value=xe>(ne.value[1]-ne.value[0])/2+ne.value[0]?1:0),v.value=!0,Y(xe),de(re,m.value)},F=()=>{document.addEventListener("mousemove",ae),document.addEventListener("touchmove",ae,{passive:!1}),document.addEventListener("mouseup",ge),document.addEventListener("mouseleave",ge),document.addEventListener("touchcancel",ge),document.addEventListener("touchend",ge),document.addEventListener("keydown",J)},D=()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("touchmove",ae),document.removeEventListener("mouseup",ge),document.removeEventListener("mouseleave",ge),document.removeEventListener("touchcancel",ge),document.removeEventListener("touchend",ge),document.removeEventListener("keydown",J)},Q=Ps(),ie=A(()=>`aria-label-id-${Q}`),{tp:pe}=rn(),ye=Cr(),Oe=A(()=>({role:"slider","aria-valuemin":n.min,"aria-valuemax":n.max,"aria-label":!ye.label&&!n.label?pe(n.ariaLabel,{value:String(P.value)}):void 0,"aria-labelledby":ye.label||n.label?ie.value:void 0,"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":n.disabled,"aria-readonly":n.readonly,"aria-valuenow":Array.isArray(P.value)?void 0:P.value,"aria-valuetext":Array.isArray(P.value)?String(P.value):void 0}));return kt(()=>{IT(P.value,n.step,n.min,n.max,n.range)&&($(),F())}),Sn(D),De([P,()=>n.step,()=>n.min,()=>n.max,()=>n.range],([re,xe,Ne,Ee,be])=>{IT(re,xe,Ne,Ee,be)}),De(v,re=>{document.documentElement.style.cursor=re?"grabbing":""}),(re,xe)=>(V(),ee("div",Re({class:["va-slider",C(w)]},Oe.value),[(t.vertical?re.$slots.append:re.$slots.prepend)?(V(),ee("div",Kxe,[se(re.$slots,t.vertical?"append":"prepend")])):ve("",!0),(re.$slots.label||t.label)&&!t.invertLabel?(V(),ee("span",{key:1,class:"va-input__label",id:ie.value,style:Be(x.value)},[se(re.$slots,"label",{},()=>[gt(Ze(t.label),1)])],12,qxe)):ve("",!0),(t.vertical?t.iconAppend:t.iconPrepend)?(V(),ee("span",Yxe,[ke(C(St),{name:t.vertical?t.iconAppend:t.iconPrepend,color:C(i)(re.$props.color),size:16},null,8,["name","color"])])):ve("",!0),me("div",{ref_key:"sliderContainer",ref:o,class:"va-slider__container",onMousedown:he,onTouchstart:he},[me("div",{class:"va-slider__track","aria-hidden":"true",style:Be(S.value)},null,4),t.pins?(V(!0),ee(qe,{key:0},vt(Z.value,(Ne,Ee)=>(V(),ee("div",{key:Ee,class:Qe(["va-slider__mark",{"va-slider__mark--active":X(Ne)}]),style:Be(N(Ne))},null,6))),128)):ve("",!0),re.$props.range?(V(),ee(qe,{key:1},[me("div",{ref:"process",class:Qe(["va-slider__track va-slider__track--selected",{"va-slider__track--active":u.value}]),"aria-hidden":"true",style:Be(R.value)},null,6),(V(!0),ee(qe,null,vt(b.value,Ne=>(V(),ee("div",{key:"dot"+Ne,ref_for:!0,ref:C(l)(Ne),class:Qe(["va-slider__handler",C(M)]),style:Be(z(Ne)),tabindex:t.disabled||t.readonly?void 0:0,onFocus:Ee=>(u.value=!0,m.value=Ne),onBlur:xe[0]||(xe[0]=Ee=>u.value=!1)},[Se(Ne)?(V(),ee("div",{key:0,style:Be({backgroundColor:C(i)(re.$props.color)}),class:"va-slider__handler__dot--focus"},null,4)):ve("",!0),t.trackLabelVisible?(V(),ee("div",{key:1,style:Be(x.value),class:"va-slider__handler__dot--value"},[se(re.$slots,"trackLabel",Ue(je({value:B(Ne),order:Ne})),()=>[gt(Ze(k(B(Ne),Ne)),1)])],4)):ve("",!0)],46,Zxe))),128))],64)):(V(),ee(qe,{key:2},[me("div",{ref:"process","aria-hidden":"true",class:Qe(["va-slider__track va-slider__track--selected",{"va-slider__track--active":u.value}]),style:Be(R.value)},null,6),me("div",{ref_key:"dot",ref:a,class:Qe(["va-slider__handler",C(M)]),style:Be(I.value),tabindex:re.$props.disabled||re.$props.readonly?void 0:0,onFocus:xe[1]||(xe[1]=Ne=>u.value=!0),onBlur:xe[2]||(xe[2]=Ne=>u.value=!1)},[Se(0)?(V(),ee("div",{key:0,class:"va-slider__handler__dot--focus",style:Be({backgroundColor:C(i)(re.$props.color)})},null,4)):ve("",!0),t.trackLabelVisible?(V(),ee("div",{key:1,class:"va-slider__handler__dot--value",style:Be(x.value)},[se(re.$slots,"trackLabel",Ue(je({value:B()})),()=>[gt(Ze(k(B())),1)])],4)):ve("",!0)],46,Jxe)],64))],544),(t.vertical?t.iconPrepend:t.iconAppend)?(V(),ee("span",Qxe,[ke(C(St),{name:t.vertical?t.iconPrepend:t.iconAppend,color:C(i)(re.$props.color),size:16},null,8,["name","color"])])):ve("",!0),(re.$slots.label||t.label)&&t.invertLabel?(V(),ee("span",{key:4,class:"va-input__label va-input__label--inverse",style:Be(x.value),id:ie.value},[se(re.$slots,"label",{},()=>[gt(Ze(t.label),1)])],12,ewe)):ve("",!0),(t.vertical?re.$slots.prepend:re.$slots.append)?(V(),ee("div",twe,[se(re.$slots,t.vertical?"prepend":"append")])):ve("",!0)],16))}}),rwe=ze(nwe),iwe={vertical:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},swe=(t,e,n)=>{const r=le(!1),i=le(0),s=le(0),o=le(0),a=(d,f)=>{const h=d.type===f?d:d.changedTouches[0];return n.vertical?h.pageY:h.pageX},l=d=>{n.disabled||!t.value||(r.value=!0,i.value=a(d,"mousedown"),s.value=e.value)},c=d=>{if(!r.value)return;const h=a(d,"mousemove")-i.value;o.value=s.value+Math.floor(h/t.value*100)},u=()=>{r.value=!1};return bn(["mousemove","touchmove"],c),bn(["mouseup","touchcancel"],u),{isDragging:r,startDragging:l,currentSplitterPosition:o}},owe=["aria-label"],awe={class:"va-split__dragger"},lwe=Me({name:"VaSplit",__name:"VaSplit",props:{...rt,...iwe,...Fn,modelValue:{type:Number,default:50,validator:t=>t<=100},maximization:{type:Boolean,default:!1},maximizeStart:{type:Boolean,default:!1},limits:{type:Array,default:()=>[0,0]},snapping:{type:Array,default:void 0},snappingRange:{type:[Number,String],default:4},ariaLabel:{type:String,default:"$t:splitPanels"}},emits:[..._r],setup(t,{emit:e}){const n=t,r=e,i=st(),{valueComputed:s}=pn(n,r),o=le(),a=le(16),l=()=>{var P;const{width:B,height:U}=((P=i.value)==null?void 0:P.getBoundingClientRect())||{width:0,height:0};o.value=n.vertical?U:B,a.value=parseFloat(getComputedStyle(document.documentElement).fontSize)};kt(l),bu([i],l);const c=(P,B)=>{let U="",j="";if(cA(P))return P;switch(P.split("").filter(Z=>Z&&Z!==" ").forEach(Z=>{isNaN(+Z)?j+=Z:U+=Z}),j){case"%":return+U;case"px":return+U/o.value*100;case"rem":return+U*a.value/o.value*100;case"any":return["min","snapping"].includes(B)?0:100;case"":return 100;default:return qt("Invalid limits measure!"),0}},u=P=>{if(P==="undefined"||!o.value)return;let B=0,U=100;return(Vm(P)||cA(P))&&(B=c(P,"min")),Array.isArray(P)&&(B=c(P[0],"min"),U=c(P[1],"max")),B>U&&(qt(`Min panels size can not be larger than max one! Passed limit: ${P}.`),U=B),{min:B??0,max:U??100}},d=A(()=>u(n.limits[0])??{min:0,max:100}),f=A(()=>u(n.limits[1])??{min:0,max:100}),h=A(()=>{const P=!(d.value.min+f.value.min>100);return P||qt("The sum of different panels min sizes should be lesser or equal to 100% of the container size!"),P?f.value.min:100-d.value.min}),p=A(()=>(Math.ceil(f.value.max+d.value.max)<100&&qt("The sum of different panels max sizes should be equal to 100% of the container size!"),{start:{min:d.value.min,max:Math.min(d.value.max,100-h.value)},end:{min:h.value,max:Math.min(f.value.max,100-d.value.min)}})),g=P=>P>=p.value.start.min&&P>=p.value.end.min&&P<=p.value.start.max&&P<=p.value.end.max,m=A(()=>{if(!Array.isArray(n.snapping)||!o.value)return;let P=n.snapping.map(U=>c(U,"snapping"));if(!P.every(g)){const U=P.filter(g);qt(`Some of the snapping marks (${P}) are not in allowed range (${Object.values(p.value.start).join("-")} / ${Object.values(p.value.end).join("-")}) and will be removed (${U})!`),P=U}return P.every((U,j,Z)=>Z[j+1]?Math.abs(U-Z[j+1])>Number(n.snappingRange):!0)||qt("Distance between some snapping marks is lesser than snapping range!"),P}),v=A(()=>c(n.snappingRange,"snapping")),b=le(s.value),y=A(()=>{if(m.value){const P=m.value.find(B=>b.value+v.value>B&&b.value-v.value<B);if(P)return P}return Il(b.value,Math.max(p.value.start.min,100-p.value.end.max),Math.min(p.value.start.max,100-p.value.end.min))}),{isDragging:E,startDragging:T,currentSplitterPosition:_}=swe(o,y,n),w=()=>{!n.maximization||n.disabled||(b.value=n.maximizeStart?p.value.start.max:100-p.value.end.max)};De(s,P=>{(P<p.value.start.min||P>100-p.value.end.min)&&qt("Incorrect `modelValue`. Check current `limits` prop value."),b.value=P},{immediate:!0}),De(_,P=>{b.value=P}),De(E,P=>{P||(s.value=y.value),document.documentElement.style.cursor=P?"var(--va-split-dragging-cursor)":""});const M=A(()=>n.vertical?"height":"width"),x=P=>{let B=P==="start"?y.value:100-y.value;return B<0&&(B=0),B>100&&(B=100),{[M.value]:`${B}%`}},S=A(()=>n.disabled?{}:E.value?{cursor:"var(--va-split-dragging-cursor)"}:{cursor:n.vertical?"var(--va-split-vertical-dragger-cursor)":"var(--va-split-horizontal-dragger-cursor)"}),R=jt("va-split",()=>({horizontal:!n.vertical,vertical:n.vertical,dragging:E.value})),{t:I,tp:z}=rn();return(P,B)=>(V(),ee("section",{ref_key:"splitPanelsContainer",ref:i,class:Qe(["va-split",C(R)]),"aria-label":C(z)(P.$props.ariaLabel)},[me("div",{class:"va-split__panel",style:Be(x("start"))},[se(P.$slots,"start",Ue(je({containerSize:o.value})))],4),me("div",awe,[me("div",{class:"va-split__dragger__overlay",style:Be(S.value),onMousedown:B[0]||(B[0]=He((...U)=>C(T)&&C(T)(...U),["prevent"])),onTouchstart:B[1]||(B[1]=He((...U)=>C(T)&&C(T)(...U),["prevent"])),onDblclick:He(w,["prevent"]),onContextmenu:B[2]||(B[2]=He(()=>{},["prevent"])),onDragstart:B[3]||(B[3]=He(()=>{},["prevent"]))},[se(P.$slots,"grabber",{},()=>[ke(C(dN),{class:"va-split__dragger__default",vertical:!P.$props.vertical},null,8,["vertical"])])],36)]),me("div",{class:"va-split__panel",style:Be(x("end"))},[se(P.$slots,"end",Ue(je({containerSize:o.value})))],4)],10,owe))}}),cwe=ze(lwe),AN=Symbol("TabsView"),uwe=["aria-disabled"],dwe=me("div",{class:"va-tabs__slider"},null,-1),fwe=[dwe],hwe={class:"va-tabs__tabs-items"},pwe={class:"va-tabs__content"},Bo=t=>(t==null?void 0:t.clientWidth)||0,mwe=Me({name:"VaTabs",__name:"VaTabs",props:{...Fn,...rt,modelValue:{type:[String,Number],default:null},left:{type:Boolean,default:!0},right:{type:Boolean,default:!1},center:{type:Boolean,default:!1},grow:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hideSlider:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},color:{type:String,default:"primary"},prevIcon:{type:String,default:"va-arrow-left"},nextIcon:{type:String,default:"va-arrow-right"},ariaMoveRightLabel:{type:String,default:"$t:movePaginationLeft"},ariaMoveLeftLabel:{type:String,default:"$t:movePaginationRight"}},emits:["update:modelValue","click:next","click:prev"],setup(t,{expose:e,emit:n}){const{tp:r}=rn(),i=t,s=n,o=st(),a=st(),l=st(),c=le([]),u=le(null),d=le(null),f=le(0),h=le(0),p=le(!1),g=le(0),m=le(0),v=le(!1),{valueComputed:b}=pn(i,s),y=Sr({VaTab:{color:i.color}}),E=A(()=>{const{left:ae,right:ge,center:ue,grow:J,disabled:X}=i;return{"va-tabs__container--left":ae&&!ge&&!ue&&!J,"va-tabs__container--right":ge,"va-tabs__container--center":ue,"va-tabs__container--grow":J,"va-tabs__container--disabled":X}}),T=A(()=>({"va-tabs--vertical":i.vertical})),{getColor:_}=ct(),w=A(()=>_(i.color)),M=A(()=>i.hideSlider?{display:"none"}:{backgroundColor:w.value,height:i.vertical?`${u.value}px`:"",width:i.vertical?"":`${d.value}px`,transform:`translateY(-${h.value}px) translateX(${f.value}px)`,transition:v.value?"var(--va-tabs-slider-wrapper-transition)":""}),x=A(()=>i.vertical?{transform:"translateX(0px)"}:{transform:`translateX(${m.value-g.value}px)`,transition:v.value?"var(--va-tabs-slider-transition)":"",position:i.hidePagination?"unset":"absolute"}),S=A(()=>g.value===0),R=A(()=>{const ae=c.value[c.value.length-1],ge=C(ae.leftSidePosition),ue=C(ae.rightSidePosition),J=Bo(a.value);return ue<=g.value+J||ge<=g.value}),I=()=>{d.value=0,u.value=0},z=ae=>{const ge=Bo(a.value),ue=C(ae.leftSidePosition),J=C(ae.rightSidePosition);if(!p.value){g.value=0;return}if(!(ue-g.value>=0&&J-g.value<=ge)){if(ue-g.value<0){g.value=ue;return}if(J-g.value>ge){g.value=J-ge;return}g.value=0}},P=()=>{if(m.value=0,!p.value)return;const ae=Bo(a.value),ge=Bo(l.value);i.right?m.value=ge-ae:i.center&&(m.value=Math.floor((ge-ae)/2))},B=()=>{I(),c.value.forEach(ae=>{var ge;ae.updateSidePositions();const ue=(((ge=ae.name)==null?void 0:ge.value)||ae.id)===b.value;ae.isActive=ae.isActiveRouterLink||ue,ae.isActive&&(z(ae),ne(ae))}),P()},U=()=>{const ae=Bo(l.value),ge=Bo(o.value);requestAnimationFrame(()=>{p.value=!!(l.value&&o.value&&ae>ge)})},j=()=>{var ae,ge;const ue=Bo(a.value);let J=g.value-ue;for(let X=0;X<c.value.length-1;X++){const L=C((ae=c.value[X])==null?void 0:ae.leftSidePosition),N=C((ge=c.value[X+1])==null?void 0:ge.leftSidePosition);if(L>J&&L<g.value||N>=g.value){J=L;break}}g.value=Math.max(0,J),s("click:prev")},Z=()=>{var ae;const ge=Bo(a.value),ue=g.value+ge;let J=ue;for(let N=0;N<c.value.length-1&&!(C(c.value[N].rightSidePosition)>ue&&(J=C(c.value[N].leftSidePosition),g.value<J));N++);const L=C((ae=c.value[c.value.length-1])==null?void 0:ae.rightSidePosition)-ge;J=Math.min(L,J),g.value=Math.max(0,J),s("click:next")},ne=ae=>{var ge;const ue=C(ae.tabElement),J=(ue==null?void 0:ue.offsetTop)||0,X=(ue==null?void 0:ue.offsetLeft)||0,L=(ue==null?void 0:ue.clientHeight)||0,N=(ue==null?void 0:ue.clientWidth)||0;if(i.vertical){const $=(((ge=a.value)==null?void 0:ge.clientHeight)||0)-J-L;h.value=Math.max($,0),u.value=L,f.value=0,d.value=0}else f.value=X,d.value=N,h.value=0,u.value=0},K=()=>{v.value||requestAnimationFrame(()=>{v.value=!0})},fe=ae=>{var ge;ae&&(b.value=((ge=ae.name)==null?void 0:ge.value)||ae.id,i.stateful&&B())},Se=ae=>{var ge;const ue=c.value.push(ae)-1;ae.id=((ge=ae.name)==null?void 0:ge.value)||ue},de=ae=>{c.value=c.value.filter(ge=>ge.id!==ae.id),c.value.forEach((ge,ue)=>{var J;ge.id=((J=ge.name)==null?void 0:J.value)||ue})};return Mr(AN,{parentDisabled:i.disabled,selectTab:fe,moveToTab:z,registerTab:Se,unregisterTab:de}),De(()=>i.modelValue,B),bu([o],U),bu([a],B),kt(()=>{requestAnimationFrame(()=>{K()})}),e({selectTab:fe,moveToTab:z,movePaginationLeft:j,movePaginationRight:Z}),(ae,ge)=>(V(),ee("div",{class:Qe(["va-tabs",T.value])},[me("div",{ref_key:"wrapper",ref:o,class:"va-tabs__wrapper",role:"tablist","aria-disabled":ae.$props.disabled},[p.value&&!ae.$props.hidePagination?(V(),Te(C(Pt),{key:0,class:"va-tabs__pagination","aria-label":C(r)(ae.$props.ariaMoveLeftLabel),size:"medium",disabled:S.value,color:t.color,preset:"secondary",icon:ae.$props.prevIcon,onClick:j},null,8,["aria-label","disabled","color","icon"])):ve("",!0),me("div",{ref_key:"container",ref:a,class:Qe(["va-tabs__container",E.value])},[me("div",{ref_key:"tabs",ref:l,class:"va-tabs__tabs",style:Be(x.value)},[me("div",{class:"va-tabs__slider-wrapper","aria-hidden":"true",style:Be(M.value)},fwe,4),ke(C(uh),{components:y},{default:we(()=>[me("div",hwe,[se(ae.$slots,"tabs")])]),_:3},8,["components"])],4)],2),p.value&&!ae.$props.hidePagination?(V(),Te(C(Pt),{key:1,class:"va-tabs__pagination","aria-label":C(r)(ae.$props.ariaMoveRightLabel),size:"medium",color:t.color,disabled:R.value,preset:"secondary",icon:ae.$props.nextIcon,onClick:Z},null,8,["aria-label","color","disabled","icon"])):ve("",!0)],8,uwe),me("div",pwe,[se(ae.$slots,"default")])],2))}}),vwe=ze(mwe),gwe=["tabindex"],ywe=["textContent"],bwe=Me({name:"VaTab",__name:"VaTab",props:{...Jl,...rt,selected:{type:Boolean,default:!1},color:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean},name:{type:[String,Number]},tag:{type:String,default:"div"}},emits:["click","keydown-enter","focus"],setup(t,{emit:e}){const n=t,r=e,i=st(),s=le(!1),o=le(!1),a=le(0),l=le(0),{keyboardFocusListeners:c,hasKeyboardFocus:u}=qu(),{tagComputed:d,hrefComputed:f,isActiveRouterLink:h}=Ma(n),p=A(()=>({"va-tab--disabled":n.disabled})),{parentDisabled:g,selectTab:m,moveToTab:v,registerTab:b,unregisterTab:y}=Zn(AN,{parentDisabled:!1,tabsList:[],selectTab:P=>P,moveToTab:P=>P,registerTab:P=>P,unregisterTab:P=>P}),E=A(()=>n.disabled||g?-1:0),{getColor:T}=ct(),_=A(()=>T(n.color)),w=A(()=>({color:o.value||s.value?_.value:"inherit"})),M=P=>{o.value=P},x=()=>{var P,B;const U=((P=i.value)==null?void 0:P.offsetLeft)||0,j=((B=i.value)==null?void 0:B.offsetWidth)||0;a.value=U+j,l.value=U},S=()=>{m(z),r("click")},R=()=>{m(z),r("keydown-enter")},I=()=>{u.value&&v(z),r("focus")},z={name:A(()=>n.name),id:null,tabElement:i,isActive:s,tabIndexComputed:E,isActiveRouterLink:h,rightSidePosition:a,leftSidePosition:l,onTabClick:S,onTabKeydown:R,onFocus:I,updateSidePositions:x};return kt(()=>{b(z)}),Sn(()=>{y(z)}),(P,B)=>(V(),Te(mr(C(d)),{ref_key:"tabElement",ref:i,class:Qe(["va-tab",p.value]),role:"tab","aria-selected":s.value,"aria-disabled":P.$props.disabled||C(g),href:C(f),target:P.target,to:P.to,replace:P.replace,exact:P.exact,"active-class":P.activeClass,"exact-active-class":P.exactActiveClass,style:Be(w.value),onMouseenter:B[0]||(B[0]=U=>M(!0)),onMouseleave:B[1]||(B[1]=U=>M(!1))},{default:we(()=>[me("div",Re({class:"va-tab__content",tabindex:E.value,onFocus:I,onClick:S,onKeydown:We(R,["enter"])},mi(C(c),!0)),[se(P.$slots,"default",{},()=>[t.icon?(V(),Te(C(St),{key:0,class:"va-tab__icon",size:"small",name:t.icon},null,8,["name"])):ve("",!0),me("span",{class:"va-tab__label",textContent:Ze(t.label)},null,8,ywe)])],16,gwe)]),_:3},40,["aria-selected","aria-disabled","href","target","to","replace","exact","active-class","exact-active-class","class","style"]))}}),_we=ze(bwe),xwe={class:"va-stepper__default-controls"},wwe=Me({name:"VaStepperControls",__name:"VaStepperControls",props:{modelValue:{type:[Number,String],required:!0},steps:{type:Array,required:!0},nextDisabled:{type:Boolean,required:!0},stepControls:{type:Object,required:!0},finishButtonHidden:{type:Boolean,default:!1}},setup(t){const e=t,{t:n}=rn(),r=A(()=>{const i=e.steps.length-1;return Number(e.modelValue)>=i});return(i,s)=>(V(),ee("div",xwe,[ke(C(Pt),{preset:"primary",disabled:Number(i.$props.modelValue)<=0,onClick:s[0]||(s[0]=o=>i.$props.stepControls.prevStep())},{default:we(()=>[gt(Ze(C(n)("back")),1)]),_:1},8,["disabled"]),r.value?i.$props.finishButtonHidden?ve("",!0):(V(),Te(C(Pt),{key:1,onClick:s[2]||(s[2]=o=>i.$emit("finish"))},{default:we(()=>[gt(Ze(C(n)("finish")),1)]),_:1})):(V(),Te(C(Pt),{key:0,onClick:s[1]||(s[1]=o=>i.$props.stepControls.nextStep()),disabled:i.$props.nextDisabled},{default:we(()=>[gt(Ze(C(n)("next")),1)]),_:1},8,["disabled"]))]))}}),Swe=(t,...e)=>typeof t=="function"?t(...e):t,kc=t=>Swe(t.hasError,t)||!1,Ewe={class:"va-stepper__step-button__icon"},Mwe=Me({name:"VaStepperStepButton",__name:"VaStepperStepButton",props:{modelValue:{type:Number,required:!0},step:{type:Object,required:!0},color:{type:String,required:!0},stepIndex:{type:Number,required:!0},navigationDisabled:{type:Boolean,required:!0},nextDisabled:{type:Boolean,required:!0},focus:{type:Object,required:!0},stepControls:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=st(),i=A(()=>kc(n.step)),s=A(()=>i.value&&n.modelValue===n.stepIndex),{getColor:o}=ct(),a=A(()=>o(i.value?"danger":n.color)),l=f=>n.nextDisabled&&f>n.modelValue,{t:c}=rn(),u=jt("va-stepper__step-button",()=>({active:n.modelValue>=n.stepIndex,disabled:n.step.disabled||l(n.stepIndex),"navigation-disabled":n.navigationDisabled,error:s.value}));De(()=>n.focus,()=>{n.focus.trigger&&cn(()=>{var f;return(f=r.value)==null?void 0:f.focus()})},{deep:!0});const d=A(()=>({tabindex:n.focus.stepIndex===n.stepIndex&&!n.navigationDisabled?0:void 0,"aria-disabled":n.step.disabled||l(n.stepIndex)?!0:void 0,"aria-current":n.modelValue===n.stepIndex?c("step"):void 0}));return(f,h)=>(V(),ee("li",Re({ref_key:"stepElement",ref:r,class:["va-stepper__step-button",C(u)],onClick:h[0]||(h[0]=p=>!f.$props.navigationDisabled&&f.$props.stepControls.setStep(f.$props.stepIndex)),onKeyup:[h[1]||(h[1]=We(p=>!f.$props.navigationDisabled&&f.$props.stepControls.setStep(f.$props.stepIndex),["enter"])),h[2]||(h[2]=We(p=>!f.$props.navigationDisabled&&f.$props.stepControls.setStep(f.$props.stepIndex),["space"]))]},d.value,{style:`--va-stepper-color: ${String(a.value)}`}),[me("div",Ewe,[t.step.icon?(V(),Te(C(St),{key:0,name:t.step.icon,size:"1.3rem"},null,8,["name"])):(V(),ee(qe,{key:1},[gt(Ze(f.$props.stepIndex+1),1)],64))]),gt(" "+Ze(t.step.label),1)],16))}}),Cwe={key:0,class:"va-stepper__step-content"},Awe={class:"va-stepper__controls"},Twe=Me({name:"VaStepper",__name:"VaStepper",props:{...Fn,modelValue:{type:Number,default:0},steps:{type:Array,default:()=>[],required:!0},color:{type:String,default:"primary"},vertical:{type:Boolean,default:!1},navigationDisabled:{type:Boolean,default:!1},controlsHidden:{type:Boolean,default:!1},nextDisabled:{type:Boolean,default:!1},nextDisabledOnError:{type:Boolean,default:!1},finishButtonHidden:{type:Boolean,default:!1},ariaLabel:{type:String,default:"$t:progress"},linear:{type:Boolean,default:!1}},emits:["update:modelValue","finish","update:steps"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),{valueComputed:o}=pn(r,i,"modelValue"),a=le({trigger:!1,stepIndex:r.navigationDisabled?-1:r.modelValue}),{getColor:l}=ct(),c=z=>r.nextDisabledOnError&&kc(r.steps[z])?!0:r.nextDisabled,u=(z,P)=>{for(;z>=0&&z<r.steps.length;){z+=P;const B=r.steps[z];if(!B)return;if(!B.disabled)return B}},d=(z,P)=>{for(;z>=0&&z<r.steps.length;){z+=P;const B=r.steps[z];if(!B)return;if(kc(B)===!0)return z}},f=z=>{var P;const B=r.steps[z],U=r.steps[o.value],j=u(z,-1);if(B.disabled)return!1;if(r.linear&&z<o.value)return!0;const Z=d(o.value,1);return!(r.linear&&Z!==void 0&&Z<z||((P=U.beforeLeave)==null?void 0:P.call(U,U,B))===!1||(U.completed===void 0&&(U.completed=!0),r.linear&&j&&!j.completed)||r.linear&&kc(U))},h=z=>{f(z)&&i("update:modelValue",z)},p=z=>{r.navigationDisabled||(z==="next"?g(1):m(1))},g=z=>{const P=a.value.stepIndex+z;if(!c(P)){if(P<r.steps.length){if(r.steps[P].disabled){g(z+1);return}a.value.stepIndex=P,a.value.trigger=!0}else for(let B=0;B<r.steps.length;B++)if(!r.steps[B].disabled){a.value.stepIndex=B,a.value.trigger=!0;break}}},m=z=>{const P=a.value.stepIndex-z;if(P>=0){if(r.steps[P].disabled){m(z+1);return}a.value.stepIndex=P,a.value.trigger=!0}else for(let B=r.steps.length-1;B>=0;B--)if(!r.steps[B].disabled&&!c(B)){a.value.stepIndex=B,a.value.trigger=!0;break}},v=()=>{requestAnimationFrame(()=>{var z;(z=s.value)!=null&&z.contains(document.activeElement)||(a.value.stepIndex=r.modelValue,a.value.trigger=!1)})};De(()=>r.modelValue,()=>{a.value.stepIndex=r.modelValue,a.value.trigger=!1});const b=(z=0)=>{const P=o.value+1+z;r.steps[P]&&(r.steps[P].disabled&&b(z+1),h(P))},y=(z=0)=>{const P=o.value-1-z;r.steps[P]&&(r.steps[P].disabled&&y(z+1),h(P))},E={setStep:h,nextStep:b,prevStep:y},T=(z,P)=>({...E,focus:a,isActive:r.modelValue===P,isCompleted:r.modelValue>P,isLastStep:r.steps.length-1===P,isNextStepDisabled:c(P),isPrevStepDisabled:P===0,index:P,step:z,hasError:kc(z)}),{tp:_}=rn(),w=z=>{p(z)},M=()=>{a.value.stepIndex=r.modelValue,a.value.trigger=!0},x=A(()=>({role:"group","aria-label":_(r.ariaLabel),"aria-orientation":r.vertical?"vertical":"horizontal"}));function S(z){return kc(r.steps[z])?"danger":l(r.color)}return e({modelValue:o,focusedStep:a,getIterableSlotData:T,stepControls:E,nextStep:b,prevStep:y,setStep:h,setFocus:p,completeStep:z=>{const P={...r.steps};z===!0&&(P[r.modelValue].hasError=!1),P[r.modelValue].completed=z??!0,i("update:steps",P)},setError:z=>{const P={...r.steps};P[r.modelValue].hasError=z??!0,P[r.modelValue].completed=!z,i("update:steps",P)}}),(z,P)=>(V(),ee("div",Re({class:["va-stepper",{"va-stepper--vertical":z.$props.vertical}]},x.value),[me("ol",{class:Qe(["va-stepper__navigation",{"va-stepper__navigation--vertical":z.$props.vertical}]),ref_key:"stepperNavigation",ref:s,onClick:M,onKeyup:[We(M,["enter"]),We(M,["space"]),P[0]||(P[0]=We(B=>w("prev"),["left"])),P[1]||(P[1]=We(B=>w("next"),["right"]))],onFocusout:v},[(V(!0),ee(qe,null,vt(z.$props.steps,(B,U)=>(V(),ee(qe,{key:U+B.label},[U>0?se(z.$slots,"divider",Ue(Re({key:0},T(B,U))),()=>[me("span",{class:Qe(["va-stepper__divider",{"va-stepper__divider--vertical":z.$props.vertical}]),"aria-hidden":"true"},null,2)]):ve("",!0),se(z.$slots,`step-button-${U}`,Ue(je(T(B,U))),()=>[ke(Mwe,{stepIndex:U,color:S(U),modelValue:C(o),nextDisabled:t.nextDisabled,step:B,stepControls:E,navigationDisabled:t.navigationDisabled,focus:a.value},null,8,["stepIndex","color","modelValue","nextDisabled","step","navigationDisabled","focus"])])],64))),128))],34),me("div",{class:Qe(["va-stepper__step-content-wrapper",{"va-stepper__step-content-wrapper--vertical":z.$props.vertical}])},[(V(!0),ee(qe,null,vt(z.$props.steps,(B,U)=>(V(),ee(qe,{key:U},[z.$slots[`step-content-${U}`]&&C(o)===U?(V(),ee("div",Cwe,[se(z.$slots,`step-content-${U}`,Ue(je(T(B,U))))])):ve("",!0)],64))),128)),me("div",Awe,[se(z.$slots,"controls",Ue(je(T(t.steps[C(o)],C(o)))),()=>[t.controlsHidden?ve("",!0):(V(),Te(wwe,{key:0,modelValue:C(o),nextDisabled:c(C(o)),steps:t.steps,stepControls:E,finishButtonHidden:t.finishButtonHidden,onFinish:P[2]||(P[2]=B=>z.$emit("finish"))},null,8,["modelValue","nextDisabled","steps","finishButtonHidden"]))])])],2)],16))}}),Pwe=ze(Twe),Rwe=t=>{const e=t.match(/[0-9]{1,2}/g);return e?e.map(n=>Number(n)):[]},Lwe=t=>{const e=t.match(/pm|am/i);return e?+(e[0].toLowerCase()==="pm"):null},Iwe=t=>{const e=new Date,[n,r,i]=Rwe(t),s=Lwe(t);if(!n)return null;const o=s!==null&&n<=12,a=o&&!!s,l=o&&n===12?0:n;return e.setHours(Math.min(l||0,o?12:24)+(a?12:0)),e.setMinutes(Math.min(r||0,60)),e.setSeconds(Math.min(i||0,60)),e},Owe=t=>{const e=()=>t.parse||Iwe,n=le(!0),r=s=>{const a=e()(s);return a||(n.value=!1),a};return{parse:s=>(n.value=!0,r(s)),isValid:n}},kwe=t=>{const e=i=>i?t.ampm?i.toLocaleTimeString("en-US"):i.toLocaleTimeString("en-GB"):"",n=(i,s,o)=>i.split(":").slice(s,o).join(":"),r=i=>{if(t.view==="seconds")return e(i);const[s,o]=e(i).split(" ");return t.view==="minutes"?o?[n(s,0,2),o].join(" "):n(s,0,2):t.view==="hours"?o?[n(s,0,1),o].join(" "):n(s,0,1):""};return{format:i=>t.format?t.format(i):r(i)}},wu=t=>t.value?t.value:new Date(new Date().setHours(0,0,0,0)),SS=t=>Array.from(Array(t).keys()),OT=t=>(t===0?12:t)-+(t>12)*12,Dwe=(t,e=!1)=>(t===12?0:t)+Number(e)*12,Nwe=(t,e,n)=>{const r=A(()=>t.ampm?12:24),i=A(()=>{let o=SS(r.value);return t.hoursFilter&&(o=o.filter(a=>t.hoursFilter(t.ampm?a+12*Number(n.value):a))),o.map(a=>t.ampm?OT(a):a)}),s=A({get:()=>{if(!e.value)return-1;if(t.ampm){const a=OT(e.value.getHours()-12*Number(n.value));return i.value.findIndex(l=>l===a)}const o=e.value.getHours();return i.value.findIndex(a=>a===o)},set:o=>{if(t.readonly)return;const a=t.ampm?Dwe(i.value[o],n.value):i.value[o];e.value=new Date(wu(e).setHours(a))}});return A(()=>({items:i.value,activeItem:s}))},Fwe=(t,e)=>{const n=A(()=>{const i=SS(60);return t.minutesFilter?i.filter(t.minutesFilter):i}),r=A({get:()=>{if(!e.value)return-1;const i=e.value.getMinutes();return n.value.findIndex(s=>s===i)},set:i=>{if(t.readonly)return;const s=n.value[i];e.value=new Date(wu(e).setMinutes(s))}});return A(()=>({items:n.value,activeItem:r}))},Bwe=(t,e)=>{const n=A(()=>{const i=SS(60);return t.secondsFilter?i.filter(t.secondsFilter):i}),r=A({get:()=>{if(!e.value)return-1;const i=e.value.getSeconds();return n.value.findIndex(s=>s===i)},set:i=>{if(t.readonly)return;const s=n.value[i];e.value=new Date(wu(e).setSeconds(s))}});return A(()=>({items:n.value,activeItem:r}))},Vwe=(t,e,n)=>A(()=>({items:["AM","PM"],activeItem:A({get:()=>e.value?Number(n.value):-1,set:r=>{n.value=!!r;const i=wu(e).getHours();let s=n.value?i+12:i;n.value&&i<=12&&(s=i+12),!n.value&&i>=12&&(s=i-12);const o=!t.hoursFilter||t.hoursFilter(s);t.periodUpdatesModelValue&&o&&(e.value=new Date(wu(e).setHours(s)))}})})),Uwe=(t,e)=>{const{view:n}=kr(t),r=le(!1);De(e,()=>{r.value=wu(e).getHours()>=12},{immediate:!0});const i=Nwe(t,e,r),s=Fwe(t,e),o=Bwe(t,e),a=Vwe(t,e,r);return{columns:A(()=>{const c=[];return n.value==="hours"?c.push(i.value):n.value==="minutes"?c.push(i.value,s.value):n.value==="seconds"&&c.push(i.value,s.value,o.value),t.ampm&&!t.hidePeriodSwitch&&c.push(a.value),c}),isPM:r}},$we=Me({name:"VaTimePickerColumnCell",__name:"VaTimePickerColumnCell",setup(t){const{isHovered:e,onMouseEnter:n,onMouseLeave:r}=hh(),{getTextColor:i,getColor:s}=ct(),o=A(()=>e.value?{color:s(i(s("background-secondary"))),background:s("background-secondary")}:void 0);return(a,l)=>(V(),ee("div",{onMouseenter:l[0]||(l[0]=(...c)=>C(n)&&C(n)(...c)),onMouseleave:l[1]||(l[1]=(...c)=>C(r)&&C(r)(...c)),style:Be(o.value)},[se(a.$slots,"default")],36))}}),zwe=["onClick"],Hwe=Me({name:"VaTimePickerColumn",__name:"VaTimePickerColumn",props:{items:{type:Array,default:()=>[]},activeItemIndex:{type:Number,default:0},cellHeight:{type:Number,default:30}},emits:["item-selected","update:activeItemIndex",...Ag],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),{focus:o,blur:a}=bo(s,i),[l]=kl("activeItemIndex",r,i);De(l,m=>{c(m)}),kt(()=>c(l.value,!1));const c=(m,v=!0)=>{cn(()=>{var b,y;(y=(b=s.value)==null?void 0:b.scrollTo)==null||y.call(b,{behavior:v?"smooth":"auto",top:m*r.cellHeight})})},u=m=>{l.value=(l.value+(m||1))%r.items.length,cn(()=>c(l.value))},d=m=>{l.value=(l.value-(m||1)+r.items.length)%r.items.length,cn(()=>c(l.value))},f=m=>{l.value=m},h=m=>Number.isInteger(m)?Number(m)<10?`0${m}`:`${m}`:m,p=()=>{const m=s.value.scrollTop,v=Math.max((m-m%r.cellHeight)/r.cellHeight,m/r.cellHeight);return v>=r.items.length?r.items.length-1:v<0?0:l.value*r.cellHeight<m?Math.ceil(v):l.value*r.cellHeight>m?Math.floor(v):Math.round(v)},g=Hw(()=>{s.value&&l.value!==-1&&(l.value=p())},200);return e({focus:o,blur:a}),(m,v)=>(V(),ee("div",{ref_key:"rootElement",ref:s,tabindex:"0",class:"va-time-picker-column",onKeydown:[v[0]||(v[0]=We(He(b=>u(),["stop","prevent"]),["down"])),v[1]||(v[1]=We(He(b=>u(5),["stop","prevent"]),["space"])),v[2]||(v[2]=We(He(b=>d(),["stop","prevent"]),["up"]))]},[(V(!0),ee(qe,null,vt(t.items,(b,y)=>(V(),Te($we,{key:b,onScrollPassive:C(g),onTouchmovePassive:C(g),onMousewheelPassive:C(g)},{default:we(()=>[me("div",{class:Qe(["va-time-picker-cell",{"va-time-picker-cell--active":y===m.$props.activeItemIndex}]),onClick:E=>f(y)},[se(m.$slots,"cell",Ue(je({item:b,index:y,activeItemIndex:t.activeItemIndex,items:t.items,formattedItem:h(b)})),()=>[gt(Ze(h(b)),1)])],10,zwe)]),_:2},1032,["onScrollPassive","onTouchmovePassive","onMousewheelPassive"]))),128))],544))}}),Gwe=ze(Hwe),Wwe=(t,e)=>A(()=>Object.entries(e()).reduce((n,[r,i])=>(n[`--${t}-${Pf(r)}`]=i,n),{})),hm=Me({name:"VaTimePicker",__name:"VaTimePicker",props:{...Fn,...Ca,...rt,modelValue:{type:Date,required:!1},ampm:{type:Boolean,default:!1},hidePeriodSwitch:{type:Boolean,default:!1},periodUpdatesModelValue:{type:Boolean,default:!0},view:{type:String,default:"minutes"},hoursFilter:{type:Function},minutesFilter:{type:Function},secondsFilter:{type:Function},framed:{type:Boolean,default:!1},cellHeight:{type:Number,default:30},visibleCellsCount:{type:Number,default:7}},emits:[..._r],setup(t,{expose:e,emit:n}){const r=t,i=n,{valueComputed:s}=pn(r,i),{columns:o,isPM:a}=Uwe(r,s),{setItemRef:l,itemRefs:c}=Vg(),u=le(),d=(b=0)=>{var y;(y=c.value[b])==null||y.focus()},f=b=>{var y;b?(y=c.value[b])==null||y.blur():c.value.forEach(E=>E==null?void 0:E.blur())},{computedClasses:h}=KD("va-time-picker",r),p=()=>{const b=((u==null?void 0:u.value)||0)+1;u.value=b%o.value.length,d(u.value)},g=()=>{const b=((u==null?void 0:u.value)||0)-1+o.value.length;u.value=b%o.value.length,d(u.value)},m=A(()=>({...h,"va-time-picker--framed":r.framed})),v=Wwe("va-time-picker",()=>{const b=(r.visibleCellsCount-1)/2*r.cellHeight;return{height:`${r.cellHeight*r.visibleCellsCount}px`,"cell-height":`${r.cellHeight}px`,"column-gap-height":`${b}px`}});return e({focus:d,blur:f,focusNext:p,focusPrev:g}),(b,y)=>(V(),ee("div",{class:Qe(["va-time-picker",m.value]),style:Be(C(v))},[(V(!0),ee(qe,null,vt(C(o),(E,T)=>(V(),Te(C(Gwe),{key:T,ref_for:!0,ref:C(l),items:E.items,tabindex:b.disabled?-1:0,"cell-height":b.$props.cellHeight,activeItemIndex:E.activeItem.value,"onUpdate:activeItemIndex":_=>E.activeItem.value=_,onKeydown:[y[0]||(y[0]=We(He(_=>p(),["stop","prevent"]),["right"])),y[1]||(y[1]=We(He(_=>p(),["exact","stop","prevent"]),["tab"])),y[2]||(y[2]=We(He(_=>g(),["stop","prevent"]),["left"])),y[3]||(y[3]=We(He(_=>g(),["shift","stop","prevent"]),["tab"]))],onFocus:_=>u.value=T},null,8,["items","tabindex","cell-height","activeItemIndex","onUpdate:activeItemIndex","onFocus"]))),128))],6))}});function jwe(t,e){let n=-1,r=-1;const i=a=>{var l;(l=e.onStart)==null||l.call(e,a),clearTimeout(n),n=setTimeout(()=>{r=setInterval(()=>{var c;return(c=e.onUpdate)==null?void 0:c.call(e,a)},e.interval||100)},C(e.delay)||500)},s=a=>{var l;clearTimeout(n),clearInterval(r),(l=e.onEnd)==null||l.call(e,a)},o=ju(t);bn(["keydown"],i,o),bn(["keyup","blur"],s,!0)}const kT=It(oi,["focused","maxLength","counterValue"]),Xwe=Me({name:"VaTimeInput",inheritAttrs:!1,__name:"VaTimeInput",props:{...kT,...ji,...rt,...bh,...It(hm),...go,...Fn,closeOnContentClick:{type:Boolean,default:!1},offset:{...ji.offset,default:()=>[2,0]},placement:{...ji.placement,default:"bottom-end"},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:null},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"},ariaLabel:{type:String,default:"$t:selectedTime"},ariaResetLabel:{type:String,default:"$t:resetTime"},ariaToggleDropdownLabel:{type:String,default:"$t:toggleDropdown"}},emits:[...Ag,...Ea,...Og,..._r,...xS,"update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),o=st(),{isOpenSync:a,dropdownProps:l}=wS(r,i,{defaultCloseOnValueUpdate:A(()=>Array.isArray(r.view)&&r.view.length===1)}),{valueComputed:c}=pn(r,i),{parse:u,isValid:d}=Owe(r),{format:f}=kwe(r),h=A(()=>f(c.value||r.clearValue)),p=A({get(){return r.disabled||r.readonly?!1:a.value},set(H){a.value=H,cn(H?()=>{var Y;return(Y=o.value)==null?void 0:Y.focus()}:()=>{var Y;return(Y=s.value)==null?void 0:Y.focus()})}}),{isFocused:g,focus:m,blur:v,onFocus:b,onBlur:y}=bo(s),E=H=>{var Y;if(r.disabled)return;const te=(Y=H.target)==null?void 0:Y.value;if(!te)return T();const he=u(te);d.value&&he?c.value=he:(c.value=void 0,d.value=!0)},T=()=>S(()=>{i("update:modelValue",r.clearValue),i("clear"),R(),ge()}),{computedError:_,computedErrorMessages:w,listeners:M,validationAriaAttributes:x,withoutValidation:S,resetValidation:R,isDirty:I}=yo(r,i,{reset:T,focus:m,value:c}),{canBeCleared:z,clearIconProps:P,onFocus:B,onBlur:U}=kg(r,h),j=A(()=>z.value&&h.value!==f(r.clearValue)),Z=tn(kT),ne=A(()=>({...Z.value,focused:g.value,error:_.value,errorMessages:w.value,readonly:r.readonly||!r.manualInput,modelValue:h.value})),K={seconds:1e3,minutes:1e3*60,hours:1e3*60*60},fe=H=>{"key"in H&&(H.key==="ArrowDown"&&(c.value=new Date(Number(c.value)-K[r.view]),H.preventDefault()),H.key==="ArrowUp"&&(c.value=new Date(Number(c.value)+K[r.view]),H.preventDefault()))};jwe(s,{onStart:fe,onUpdate:fe});const Se={focus:()=>{r.disabled||(b(),!r.readonly&&B())},blur:()=>{r.disabled||(y(),!r.readonly&&(U(),M.onBlur()))}},de=Cr(),ae=A(()=>{const H=[r.leftIcon&&"prependInner",(!r.leftIcon||r.clearable)&&"icon"];return Object.keys(de).filter(Y=>!H.includes(Y))}),ge=()=>{p.value=!1},ue=(H,Y,te)=>{p.value=!0},J=H=>a.value?!1:r.disabled||r.readonly?!0:H===void 0?!1:r.manualInput&&(H==null?void 0:H.code)!=="Space",X=H=>{J(H instanceof KeyboardEvent?H:void 0)||(p.value=!p.value)},L=A(()=>r.disabled?{}:r.manualInput?{cursor:"text"}:{cursor:"pointer"}),N=A(()=>r.manualInput?r.disabled||r.readonly?-1:0:-1),G=A(()=>({role:"button","aria-hidden":!1,name:r.icon,color:"secondary",tabindex:N.value})),{tp:$}=rn();ba();const O=A(()=>({...l.value,innerAnchorSelector:".va-input-wrapper__field",trigger:["click","right-click","space","enter"]})),k=tn(It(hm));return e({isFocused:g,isValid:d,value:c,isDirty:I,focus:m,blur:v,reset:T,withoutValidation:S,resetValidation:R,toggleDropdown:X,showDropdown:ue,hideDropdown:ge}),(H,Y)=>(V(),Te(C(bi),Re({modelValue:p.value,"onUpdate:modelValue":Y[1]||(Y[1]=te=>p.value=te),class:["va-time-input",H.$attrs.class],style:H.$attrs.style},O.value),{anchor:we(()=>[ke(C(oi),Re({class:"va-time-input__anchor",ref_key:"input",ref:s,style:L.value},ne.value,mi(Se),{onChange:E}),Er({icon:we(()=>[j.value?(V(),Te(C(St),Re({key:0,class:"va-time-input__clear-button"},{...G.value,...C(P)},{"aria-label":C($)(H.$props.ariaResetLabel),onClick:He(T,["stop"]),onKeydown:[We(He(T,["stop"]),["enter"]),We(He(T,["stop"]),["space"])]}),null,16,["aria-label","onKeydown"])):ve("",!0),!H.$props.leftIcon&&H.$props.icon?(V(),Te(C(St),Re({key:1,class:"va-time-input__right-button va-time-input__side-button","aria-label":C($)(H.$props.ariaToggleDropdownLabel)},G.value),null,16,["aria-label"])):ve("",!0)]),_:2},[vt(ae.value,te=>({name:te,fn:we(he=>[se(H.$slots,te,Ue(je({...he,toggleDropdown:X,showDropdown:ue,hideDropdown:ge,isOpen:C(a),focus:C(m)})))])})),H.$slots.prependInner||H.$props.leftIcon?{name:"prependInner",fn:we(te=>[se(H.$slots,"prependInner",Ue(je({...te,toggleDropdown:X,showDropdown:ue,hideDropdown:ge,isOpen:C(a),focus:C(m)}))),H.$props.leftIcon?(V(),Te(C(St),Re({key:0,class:"va-time-input__left-button va-time-input__side-button","aria-label":C($)(H.$props.ariaToggleDropdownLabel)},G.value),null,16,["aria-label"])):ve("",!0)]),key:"0"}:void 0]),1040,["style"])]),default:we(()=>[ke(C(Nl),{"no-padding":"",onKeydown:[We(He(ge,["prevent"]),["esc"]),We(He(ge,["prevent"]),["enter"])]},{default:we(()=>[ke(hm,Re({ref_key:"timePicker",ref:o},C(k),{modelValue:C(c),"onUpdate:modelValue":Y[0]||(Y[0]=te=>Xt(c)?c.value=te:null)}),null,16,["modelValue"])]),_:1},8,["onKeydown"])]),_:3},16,["modelValue","class","style"]))}}),Kwe=ze(Xwe),DT=t=>t==null?void 0:t.props,NT=t=>{var e;return!!((e=t==null?void 0:t.props)!=null&&e.active)||!1},qwe=t=>t.type===qe,Ywe=t=>t&&t.length===0;function Zwe(t){var e;const n=(e=t.default)==null?void 0:e.call(t);return!n||Ywe(n)?[]:qwe(n[0])?n[0].children:n}const Jwe=t=>{const e=Zwe(t.slots);return e.forEach((n,r)=>{DT(n)||(n.props={});const i=DT(n);i.vertical=t.props.vertical,t.props.centered&&(i.inverted=!!(r%2)),r===0&&(i.isFirst=!0),r===e.length-1&&(i.isLast=!0);const s=i.active;if(!s)return;r===0&&(i.activePrevious=s),r===e.length-1&&(i.activeNext=s),NT(e[r-1])&&(i.activePrevious=!0),NT(e[r+1])&&(i.activeNext=!0)}),e},Hp="va-timeline",Qwe={name:Hp,props:{...rt,vertical:{type:Boolean},centered:{type:Boolean},alignTop:{type:Boolean}},setup(t,{slots:e}){return()=>Nt("div",{class:{[Hp]:!0,[`${Hp}--vertical`]:t.vertical,[`${Hp}--align-top`]:t.alignTop}},Jwe({props:t,slots:e}))}},eSe=ze(Qwe),$s="va-timeline-separator",tSe=Me({name:$s,props:{...rt,color:{type:String,default:"primary"},vertical:{type:Boolean},active:{type:Boolean},activePrevious:{type:Boolean},activeNext:{type:Boolean}},setup(t){const{getColor:e}=ct();return()=>Nt("div",{class:{[$s]:!0,[`${$s}--vertical`]:t.vertical}},[Nt("div",{class:{[`${$s}__line`]:!0,[`${$s}__line--active`]:t.activePrevious},style:{backgroundColor:e(t.activePrevious?t.color:"divider")}}),Nt("div",{class:{[`${$s}__center`]:!0,[`${$s}__center--active`]:t.active},style:{backgroundColor:e(t.active?t.color:"divider")}}),Nt("div",{class:{[`${$s}__line`]:!0,[`${$s}__line--active`]:t.activeNext},style:{backgroundColor:e(t.activeNext?t.color:"divider")}})])}}),TN=ze(tSe),ja="va-timeline-item",FT=It(TN),nSe=Me({name:ja,props:{...rt,...FT,color:{type:String,default:"primary"},isFirst:{type:Boolean},isLast:{type:Boolean},inverted:{type:Boolean}},setup(t,{slots:e}){const n=[Nt(TN,{...tn(FT).value})],r=t.inverted?e.after:e.before;r&&n.unshift(Nt("div",{class:`${ja}__before`},r()));const i=t.inverted?e.before:e.after;return i&&n.push(Nt("div",{class:`${ja}__after`},i())),()=>Nt("div",{class:[{[ja]:!0},{[`${ja}--vertical`]:t.vertical},{[`${ja}--is-first`]:t.isFirst},{[`${ja}--is-last`]:t.isLast}]},n)}}),rSe=ze(nSe),iSe=ze(hm),sSe={nodes:{type:Array,default:[]},stateful:{type:Boolean,default:!0},selectable:{type:Boolean,default:!1},selectionType:{type:String,default:"leaf",validator:t=>["leaf","independent"].includes(t)},valueBy:{type:[String,Function],default:"id"},textBy:{type:[String,Function],default:"label"},trackBy:{type:[String,Function],default:"id"},iconBy:{type:[String,Function],default:"icon"},disabledBy:{type:[String,Function],default:"disabled"},expandedBy:{type:[String,Function],default:"expanded"},checkedBy:{type:[String,Function],default:"checked"},childrenBy:{type:[String,Function],default:"children"},expandAll:{type:Boolean,default:!1},expanded:{type:Array,default:[]},expandNodeBy:{type:String,default:"leaf"},filter:{type:String,default:""},filterMethod:{type:Function,default:void 0},checked:{type:Array,default:[]},color:{type:String,default:"primary"}},oSe=["update:modelValue","update:checked","update:expanded","update:selected"],aSe=t=>{const e=f=>{const h=typeof f;return h==="string"||h==="number"},n=(f,h)=>!h||e(f)?f:zD(f,h),r=f=>n(f,t.valueBy),i=f=>t.valueBy&&t.nodes.find(h=>f===r(h))||f,s=f=>n(f,t.textBy),o=f=>n(f,t.checkedBy),a=f=>n(f,t.disabledBy),l=f=>n(f,t.expandedBy),c=f=>n(f,t.trackBy),u=f=>n(f,t.childrenBy)??[],d=(f,h)=>{f.forEach(p=>{const g=p.children||[];g.length&&d(g,h),h(p)})};return{getText:s,getValue:r,getChecked:o,getTrackBy:c,getChildren:u,getDisabled:a,getExpanded:l,iterateNodes:d,getNodeByValue:i,getNodeProperty:n}},PN=Symbol("TreeView"),lSe=(t,e)=>{const{emit:n,toggleNode:r,toggleCheckbox:i}=e,s=m=>(m==null?void 0:m.getAttribute("aria-expanded"))==="true",o=m=>{var v;return((v=m==null?void 0:m.parentElement)==null?void 0:v.closest(".va-tree-node"))||null},a=m=>m==null?void 0:m.previousElementSibling,l=m=>{if(!m)return null;let v=a(m),b=s(v)&&f(v);if(b)do if(s(b)){if(b=f(b),b)continue;break}else{v=b;break}while(!0);return v||o(m)},c=m=>m==null?void 0:m.nextElementSibling,u=m=>{if(!m)return null;let v=c(m);const b=s(m);if(!v){let y=o(m);do if(c(y)){v=c(y);break}else{if(y=o(y),y)continue;break}while(!0)}return b?d(m):v},d=m=>{var v;return((v=m==null?void 0:m.querySelector(".va-tree-node-children"))==null?void 0:v.firstElementChild)||null},f=m=>{var v;return((v=m==null?void 0:m.querySelector(".va-tree-node-children"))==null?void 0:v.lastElementChild)||null},h=(m,v,b)=>{var y,E;const T=s(m);v==="left"?T?r(b):(y=o(m))==null||y.focus():T?(E=d(m))==null||E.focus():r(b)},p=(m,v)=>{var b,y;v==="up"?(b=l(m))==null||b.focus():(y=u(m))==null||y.focus()};return{handleKeyboardNavigation:(m,v)=>{const b=m.target;switch(m.code){case"ArrowUp":p(b,"up");break;case"ArrowRight":h(b,"right",v);break;case"ArrowDown":p(b,"down");break;case"ArrowLeft":h(b,"left",v);break;case"Space":if(t.selectable){const y=typeof v.checked<"u"?!v.checked:null;i(v,y)}else n("update:selected",v);break;case"Escape":t.selectable||n("update:selected",null),b.blur();break;default:b.blur()}}}},cSe=lSe,uSe=(t,e)=>{const{getColor:n}=ct(),r=A(()=>n(t.color)),i=A(()=>t.selectionType==="leaf"),{getText:s,getValue:o,getChecked:a,getTrackBy:l,getChildren:c,getDisabled:u,getExpanded:d,iterateNodes:f,getNodeProperty:h}=aSe(t),{nodes:p,expandAll:g,filter:m,filterMethod:v,textBy:b}=kr(t),{valueComputed:y}=pn(t,e,"expanded"),{valueComputed:E}=pn(t,e,"checked"),T=le(),_=A({get:()=>T.value,set:j=>{const Z=o(j);T.value!==Z&&(T.value=Z,e("update:selected",j))}}),w=(j,Z,ne)=>{ne?j.value=j.value.concat(Z).filter((K,fe,Se)=>Se.indexOf(K)===fe):j.value=j.value.filter(K=>!Z.includes(K))},M=(j,Z)=>{let ne=Z===null?!0:Z;Z&&j.indeterminate&&(ne=!1);const K=[o(j)];if(i.value&&j.hasChildren){const fe=Se=>{Se.forEach(de=>{if(de.disabled)return;const ae=c(de);ae.length&&fe(ae),K.push(o(de))})};fe(c(j))}w(E,K,ne)},x=j=>{j.hasChildren&&w(y,[o(j)],!j.expanded)},S=({node:j,level:Z,children:ne=[],computedFilterMethod:K})=>{var fe;const Se=o(j);let de=!0;const ae=!!ne.length,ge=u(j)||!1;let ue=!1,J=E.value.includes(Se)||!1;if(i.value&&ae){const X=ne.every(L=>L.checked);J=X,ue=!X&&ne.some(L=>L.indeterminate||L.checked),ue&&(J=null)}return m.value&&(de=(ne==null?void 0:ne.some(X=>X.matchesFilter))||((fe=K.value)==null?void 0:fe.call(K,j,m.value,b.value))),{...j,level:Z,checked:J,children:ne,disabled:ge,expanded:y.value.includes(Se)||!1,hasChildren:ae,matchesFilter:de,indeterminate:ue}},R=A(()=>v!=null&&v.value?v.value:(j,Z)=>s(j).toLowerCase().includes(Z.toLowerCase())),I=(j,Z=0)=>j.map(ne=>{const K=c(ne);if(K.length){const fe=I(K,Z+1);return S({node:ne,level:Z,children:fe,computedFilterMethod:R})}return S({node:ne,level:Z,computedFilterMethod:R})}),z=j=>j.filter(Z=>(Z.children&&(Z.children=z(Z.children)),Z.children.length===0&&(Z.hasChildren=!1),Z.matchesFilter)),{handleKeyboardNavigation:P}=cSe(t,{emit:e,toggleCheckbox:M,toggleNode:x});Mr(PN,{selectedNodeComputed:_,colorComputed:r,iconBy:t.iconBy,selectable:t.selectable,expandNodeBy:t.expandNodeBy,getText:s,getValue:o,getTrackBy:l,toggleNode:x,toggleCheckbox:M,getNodeProperty:h,handleKeyboardNavigation:P});const B=A(()=>I(p.value));return(()=>{const j=[],Z=[];f(p.value,ne=>{(g.value||d(ne))&&j.push(o(ne)),a(ne)&&Z.push(o(ne))}),j.length&&w(y,j,!0),Z.length&&w(E,Z,!0)})(),{treeItems:A(()=>z(B.value)),getText:s,getTrackBy:l,toggleCheckbox:M}},dSe=uSe,fSe=["role","aria-expanded","aria-disabled","aria-checked","tabindex"],hSe={class:"va-tree-node-root"},pSe={key:2,class:"va-tree-node-content__item"},mSe=["aria-hidden"],vSe="The VaTreeNode component should be used in the context of VaTreeView component",gSe=Me({name:"VaTreeNode",__name:"VaTreeNode",props:{node:{type:Object,required:!0}},setup(t){const e=t,{iconBy:n,selectable:r,expandNodeBy:i,colorComputed:s,selectedNodeComputed:o,getText:a,getTrackBy:l,toggleNode:c,toggleCheckbox:u,getNodeProperty:d,handleKeyboardNavigation:f}=xh(PN,vSe),h=A(()=>a(e.node)||""),p=A(()=>e.node.hasChildren?!!e.node.expanded:void 0),g=A(()=>d(e.node,n)),m=A(()=>e.node.hasChildren?"group":"treeitem"),v=jt("va-tree-node",()=>({disabled:!!e.node.disabled,checked:!!e.node.checked,hasChildren:!!e.node.hasChildren,[`level-${e.node.level}`]:!0,[`expand-by-${i}`]:!0})),b=jt("va-tree-node-children",()=>({expanded:!!p.value})),y=jt("va-tree-node-content",()=>({indent:e.node.hasChildren===!1})),E=jt("va-tree-node-content",()=>({clickable:e.node.hasChildren===!0&&i==="node"})),T=A(()=>e.node.disabled?-1:0),_=w=>{i===(i==="node"&&w==="leaf"?"node":w)&&c(e.node),o.value=e.node};return(w,M)=>{const x=Ur("va-tree-node",!0);return V(),ee("div",{class:Qe(["va-tree-node",C(v)]),role:m.value,"aria-expanded":p.value,"aria-disabled":w.$props.node.disabled,"aria-checked":!!w.$props.node.checked,tabindex:T.value,onKeydown:[M[4]||(M[4]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["up"])),M[5]||(M[5]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["right"])),M[6]||(M[6]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["down"])),M[7]||(M[7]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["left"])),M[8]||(M[8]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["space"])),M[9]||(M[9]=We(He(S=>C(f)(S,w.$props.node),["stop","prevent"]),["esc"]))]},[me("div",hSe,[me("div",{class:Qe(["va-tree-node-content",C(y)]),onClick:M[3]||(M[3]=S=>_("node"))},[w.$props.node.hasChildren?(V(),ee("div",{key:0,class:"va-tree-node-content__item va-tree-node-content__item--leaf",onClick:M[0]||(M[0]=He(S=>_("leaf"),["stop"]))},[se(w.$slots,"icon-toggle",Ue(je(w.$props.node)),()=>[ke(C(St),{name:p.value?"keyboard_arrow_down":"keyboard_arrow_right",size:"20px"},null,8,["name"])])])):ve("",!0),C(r)?(V(),ee("div",{key:1,class:"va-tree-node-content__item",onClick:M[2]||(M[2]=He(()=>{},["stop"]))},[se(w.$slots,"checkbox",Ue(je(w.$props.node)),()=>[ke(C(yh),{"model-value":w.$props.node.checked,color:C(s),indeterminate:"","onUpdate:modelValue":M[1]||(M[1]=S=>C(u)(w.$props.node,S)),class:"va-tree-node__checkbox"},null,8,["model-value","color"])])])):ve("",!0),g.value?(V(),ee("div",pSe,[se(w.$slots,"icon",Ue(je(w.$props.node)),()=>[ke(C(St),{name:g.value,size:"small"},null,8,["name"])])])):ve("",!0),me("div",{class:Qe(["va-tree-node-content__body",C(E)])},[se(w.$slots,"content",Ue(je(w.$props.node)),()=>[gt(Ze(h.value),1)])],2)],2)]),Fi(me("div",{"aria-hidden":!w.$props.node.expanded,class:Qe(["va-tree-node-children",C(b)])},[(V(!0),ee(qe,null,vt(w.$props.node.children,S=>(V(),Te(x,{key:C(l)(S),node:S},Er({_:2},[vt(w.$slots,(R,I)=>({name:I,fn:we(z=>[se(w.$slots,I,Ue(je(z)))])}))]),1032,["node"]))),128))],10,mSe),[[_l,w.$props.node.hasChildren]])],42,fSe)}}}),ySe=ze(gSe),bSe={class:"va-tree-view",role:"tree"},_Se=Me({name:"VaTreeView",__name:"VaTreeView",props:{...sSe},emits:[...oSe],setup(t,{emit:e}){const n=t,r=e,{treeItems:i,getTrackBy:s}=dSe(n,r);return(o,a)=>(V(),ee("div",bSe,[o.$props.filter&&!C(i).length?se(o.$slots,"not-found",{key:0},()=>[gt("No matching nodes found")]):(V(!0),ee(qe,{key:1},vt(C(i),l=>(V(),Te(C(ySe),{key:C(s)(l),node:l},Er({_:2},[vt(o.$slots,(c,u)=>({name:u,fn:we(d=>[se(o.$slots,u,Ue(je(d)))])}))]),1032,["node"]))),128))]))}}),xSe=ze(_Se),wSe={class:"va-scroll-container__content"},SSe=Me({name:"VaScrollContainer",__name:"VaScrollContainer",props:{...Kl,vertical:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1},color:{type:String,default:"secondary"},rtl:{type:Boolean,default:!1},gradient:{type:Boolean,default:!1},sizesConfig:{type:Object,default:()=>({defaultSize:4,sizes:{small:4,medium:6,large:8}})},size:{type:String,default:"small",validator:t=>["small","medium","large"].includes(t)}},setup(t){const e=t,{getColor:n}=ct(),{sizeComputed:r}=ql(e),i=A(()=>e.horizontal?"auto":"hidden"),s=A(()=>e.vertical?"auto":"hidden"),o=A(()=>{const c=n(e.color);return e.gradient?`linear-gradient(0deg, var(--va-scroll-container-scrollbar-gradient-to) 0%, ${c} 100%)`:c}),a=A(()=>r.value),l=A(()=>e.rtl?"rtl":"ltr");return(c,u)=>(V(),ee("div",{class:"va-scroll-container",style:Be(`--va-scroll-color: ${String(o.value)};--va-scrollbar-size: ${String(a.value)};--va-overflow-x: ${String(i.value)};--va-overflow-y: ${String(s.value)};--va-scrollbar-position: ${String(l.value)}`)},[me("div",wSe,[se(c.$slots,"default")])],4))}}),ESe=ze(SSe),MSe={class:"va-viewer-content"},CSe=Me({name:"VaViewer",inheritAttrs:!1,__name:"VaViewer",setup(t,{expose:e}){const n=le(),r=le(),i=Eg(),s=le(!0),o=A(()=>i.value&&!s.value),a=()=>s.value=!1,l=()=>s.value=!0,c=Cr(),u=()=>{c.anchor||a()};Tg([n,r],l);const d=Zl(),f=A(()=>{var h;return(h=d.value)==null?void 0:h.body});return e({openViewer:a,closeViewer:l}),(h,p)=>(V(),ee(qe,null,[me("div",Re({class:"va-viewer"},h.$attrs,{onClick:u}),[se(h.$slots,"anchor",Ue(je({openViewer:a}))),h.$slots.anchor?ve("",!0):se(h.$slots,"default",{key:0})],16),o.value?(V(),Te(rf,{key:0,to:f.value},[me("div",MSe,[me("div",{ref_key:"content",ref:n,class:"va-viewer-content__main-area"},[h.$slots.image?ve("",!0):se(h.$slots,"default",{key:0}),se(h.$slots,"image")],512),me("div",{ref_key:"controls",ref:r,class:"va-viewer-content__controls-panel"},[se(h.$slots,"controls"),se(h.$slots,"close",Ue(je({close:l})),()=>[me("button",{class:"va-viewer-content__close-button",onClick:l},[ke(C(St),{name:"close",color:"backgroundPrimary"})])])],512)])],8,["to"])):ve("",!0)],64))}}),ASe=ze(CSe),TSe=Me({name:"VaValue",props:{defaultValue:{type:null,required:!1,default:!1}},setup(t,{slots:e}){const n=le(t.defaultValue),r=new Proxy(n,{get(i,s){return s==="value"?i.value:i[s]},set(i,s,o){return s==="value"&&(i.value=o),!0}});return()=>Nt(qe,[Xk(e.default,r)])}}),PSe=ze(TSe),RSe=t=>{const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="auto";const{font:n}=window.getComputedStyle(t);return e.style.font=n,e.textContent="Vuestic",e.style.zIndex="-1",e.style.pointerEvents="none",e.style.opacity="0",e.ariaHidden="true",e.innerText=t.value,e},LSe=(t,e)=>{const n=le(),r=le();return De(t,i=>{var s,o;i&&(n.value=RSe(i),(o=(s=t.value)==null?void 0:s.parentElement)==null||o.appendChild(n.value))}),bu(n,i=>{!i||!t.value||(r.value=i[0].contentRect.height)}),De(e,i=>{n.value&&(n.value.innerText=String(i),n.value.innerHTML+="&nbsp;;")}),r},ISe=["rows","loading","ariaLabel"],BT=t=>{if(t>0)return!0;throw new Error(`\`minRows|maxRows\` must be a positive integer greater than 0, but ${t} is provided`)},{createEmits:OSe,createListeners:kSe}=Ql(["input","change","click","update:modelValue"]),VT=It(oi),DSe=Me({name:"VaTextarea",__name:"VaTextarea",props:{...Ca,...VT,...Fn,...go,modelValue:{type:[String,Number],default:""},placeholder:{type:String},autosize:{type:Boolean,default:!1},minRows:{type:[Number,String],default:1,validator:BT},maxRows:{type:[Number,String],validator:BT},resize:{type:Boolean,default:!0},clearValue:{type:[String],default:""}},emits:[...OSe(),...Ea],setup(t,{expose:e,emit:n}){const r=t,i=n,s=st(),{valueComputed:o}=pn(r,i,"modelValue",{defaultValue:""}),a=()=>{gs(s.value)},l=()=>{Cg(s.value)},c=()=>v(()=>{i("update:modelValue",r.clearValue),i("clear"),m()}),{isDirty:u,computedError:d,computedErrorMessages:f,listeners:h,validationAriaAttributes:p,isLoading:g,resetValidation:m,withoutValidation:v}=yo(r,i,{value:o,focus:a,reset:c}),b=A(()=>r.resize&&!r.autosize),y=le(r.minRows),E=LSe(s,o);function T(){let S=parseFloat(String(r.minRows)),R=parseFloat(String(r.maxRows));if(S=isNaN(S)?1:S,R=isNaN(R)?1/0:R,!r.autosize){y.value=Math.max(R,Math.min(S,R??0));return}if(!E.value||!s.value)return;const I=getComputedStyle(s.value),z=E.value,P=parseFloat(I.lineHeight),B=Math.max(S*P,S+Math.round(P)),U=R*P||1/0,j=Math.max(B,Math.min(U,z??0));y.value=Math.round(j/P),s.value.style.height=`${j+1}px`}Yn(()=>{T()});const _=A(()=>({resize:b.value?void 0:"none"})),w=A(()=>({...wn(r,["disabled","readonly","placeholder","ariaLabel"])})),M=tn(VT),x=kSe(i);return e({isDirty:u,isLoading:g,computedError:d,computedErrorMessages:f,reset:c,focus:a,blur:l,value:o,withoutValidation:v,resetValidation:m}),(S,R)=>(V(),Te(C(oi),Re({class:"va-textarea"},C(M),{error:C(d),"error-messages":C(f)}),{default:we(()=>[me("div",{class:Qe(["va-textarea__resize-wrapper",{"va-textarea__resize-wrapper--resizable":b.value}])},[Fi(me("textarea",Re({"onUpdate:modelValue":R[0]||(R[0]=I=>Xt(o)?o.value=I:null)},{...w.value,...C(x),...C(p),...C(h)},{class:["va-textarea__textarea",{"va-textarea__textarea--autosize":t.autosize}],ref_key:"textarea",ref:s,rows:y.value,style:_.value,loading:C(g),ariaLabel:S.$props.label}),null,16,ISe),[[wm,C(o)]])],2)]),_:1},16,["error","error-messages"]))}}),NSe=mo(DSe),UT='[role="menuitem"]:not([aria-disabled="true"])',FSe='[role="menuitem"]:focus',BSe=t=>({role:"menuitem",tabindex:-1,"aria-disabled":!!t.disabled}),VSe=()=>({role:"menu",tabindex:0}),USe=t=>{bn("keydown",({key:e})=>{if(!t.value)return;const n=t.value.querySelectorAll(UT),r=t.value.querySelector(FSe);if(n.length){if(!r){const i=t.value.querySelector(UT);i&&gs(i);return}if(e==="ArrowDown"||e==="ArrowRight"){const i=Array.from(n).indexOf(r);gs(n[i+1])}if(e==="ArrowUp"||e==="ArrowLeft"){const i=Array.from(n).indexOf(r);gs(n[i-1])}}},t)},$Se={class:"va-menu-item__cell va-menu-item__cell--left"},zSe={class:"va-menu-item__cell va-menu-item__cell--center"},HSe={class:"va-menu-item__content"},GSe={class:"va-menu-item__cell va-menu-item__cell--right"},RN=Me({name:"VaMenuItem",__name:"VaMenuItem",props:{name:{type:String,default:""},icon:{type:String,defatult:""},rightIcon:{type:String,defatult:""},disabled:{type:Boolean,default:!1}},emits:["selected"],setup(t,{emit:e}){const{hasKeyboardFocus:n,keyboardFocusListeners:r}=lge();return(i,s)=>(V(),ee("tr",Re({class:"va-menu-item"},C(BSe)({disabled:t.disabled}),mi(C(r),!0),{class:{"va-menu-item--disabled":t.disabled,"va-menu-item--keyboard-focus":C(n)},onClick:s[0]||(s[0]=o=>i.$emit("selected")),onKeydown:s[1]||(s[1]=We(o=>i.$emit("selected"),["enter","space"]))}),[me("td",$Se,[se(i.$slots,"left-icon",{},()=>[t.icon?(V(),Te(C(St),{key:0,class:"va-menu-item__icon--left",name:t.icon},null,8,["name"])):ve("",!0)])]),me("td",zSe,[se(i.$slots,"default",{},()=>[me("a",HSe,Ze(t.name),1)])]),me("td",GSe,[se(i.$slots,"right-icon",{},()=>[t.rightIcon?(V(),Te(C(St),{key:0,class:"va-menu-item__icon--right",name:t.rightIcon},null,8,["name"])):ve("",!0)])])],16))}}),WSe={class:"va-menu-list__group-name"},jSe=Me({name:"VaMenuGroup",__name:"VaMenuGroup",props:{groupName:{type:String,required:!0},color:{type:String,default:"secondary"}},setup(t){const e=t,{getColor:n}=ct(),r=A(()=>n(e.color));return(i,s)=>(V(),ee(qe,null,[me("div",{class:"va-menu-list__group-name-wrapper",colspan:"99999",style:Be(`--va-color-computed: ${String(r.value)}`)},[me("span",WSe,Ze(t.groupName),1)],4),se(i.$slots,"default",{style:Be(`--va-color-computed: ${String(r.value)}`)},void 0,!0)],64))}}),LN=ec(jSe,[["__scopeId","data-v-4dd1ae9a"]]),XSe={colspan:"9999"},KSe=Me({name:"VaMenuList",__name:"VaMenuList",props:{...Xu,options:{type:Array,default:()=>[]}},emits:["selected"],setup(t,{emit:e}){const n=t,r=le();USe(r);const{getText:i,getValue:s,getDisabled:o,getGroupBy:a,getTrackBy:l}=Ku(n),c=A(()=>n.options.reduce((h,p)=>{const g=a(p);return g?(h[g]||(h[g]=[]),h[g].push(p)):h._noGroup.push(p),h},{_noGroup:[]})),u=h=>Array.isArray(h)&&h[0].type===qe?h[0].children:h,d=h=>typeof h.type=="object"&&"name"in h.type&&typeof h.type.name=="string"?h.type.name:"",f=h=>typeof h.type=="string"?h.type:typeof h.type=="object"&&"name"in h.type&&typeof h.type.name=="string"?h.type.name:String(h.key);return(h,p)=>(V(),ee("table",Re({class:"va-menu-list",ref_key:"container",ref:r},C(VSe)()),[me("tbody",null,[h.$slots.default?(V(!0),ee(qe,{key:0},vt(u(h.$slots.default()),g=>(V(),ee(qe,null,[d(g)==="VaMenuItem"?(V(),Te(mr(g),{key:f(g)+"menuitem"})):d(g)==="VaDropdown"?(V(),Te(mr(g),{key:f(g)+"menu-dropdown"})):(V(),ee("td",{colspan:"999",key:f(g),class:"va-menu-list__virtual-td"},[(V(),Te(mr(g)))]))],64))),256)):se(h.$slots,"default",{key:1},()=>[(V(!0),ee(qe,null,vt(c.value,(g,m)=>(V(),ee(qe,{key:m},[m!=="_noGroup"?se(h.$slots,"group",{key:0},()=>[me("tr",null,[me("td",XSe,[ke(LN,{"group-name":m},null,8,["group-name"])])])]):ve("",!0),(V(!0),ee(qe,null,vt(g,v=>(V(),Te(RN,{key:C(l)(v),name:C(i)(v),icon:v.icon,"right-icon":v.rightIcon,disabled:C(o)(v),onSelected:b=>h.$emit("selected",C(s)(v),v)},{"left-icon":we(b=>[se(h.$slots,"left-icon",Ue(je(b)))]),"right-icon":we(b=>[se(h.$slots,"right-icon",Ue(je(b)))]),_:2},1032,["name","icon","right-icon","disabled","onSelected"]))),128))],64))),128))])])],16))}}),Ug=mo(KSe),qSe=mo(RN),YSe=mo(LN),ZSe=t=>{Yn(()=>{t.value&&cn(()=>{gs(Mn(t.value))})})},$T=It(Ug),JSe=al(Ug),zT=It(bi),QSe=al(bi),e1e=Me({name:"VaMenu",__name:"VaMenu",props:{...rt,...$T,...zT,stickToEdges:{type:Boolean,default:!0}},emits:[...QSe,...JSe],setup(t,{expose:e,emit:n}){const r=le(),i=le();ZSe(r);const s=()=>{var c;(c=i.value)==null||c.hide(),cn(()=>{var u;const d=Mn((u=i.value)==null?void 0:u.anchorRef);d&&v_(d)})},o=c=>{c.key==="Escape"&&s(),(c.key==="ArrowDown"||c.key==="ArrowUp")&&c.preventDefault()},a=tn($T),l=tn(zT);return e({close:s}),(c,u)=>(V(),Te(C(bi),Re(C(l),{ref_key:"dropdown",ref:i}),{anchor:we(()=>[se(c.$slots,"anchor")]),default:we(()=>[ke(C(Nl),{onKeydown:o},{default:we(()=>[ke(C(Ug),Re({onKeydown:u[0]||(u[0]=We(He(()=>{},["prevent","stop"]),["enter","space"]))},C(a),{ref_key:"menuList",ref:r,onSelected:u[1]||(u[1]=d=>{c.$emit("selected",d),s()})}),Er({_:2},[c.$slots.default?{name:"default",fn:we(()=>[se(c.$slots,"default")]),key:"0"}:void 0]),1040)]),_:3})]),_:3},16))}}),t1e=mo(e1e),n1e={rules:()=>[],dirty:!1,errorCount:1,success:!1,messages:()=>[],immediateValidation:!1},r1e={stateful:!1},i1e=Me({__name:"VaFormField",props:tB({stateful:{type:Boolean},modelValue:{},name:{},rules:{},dirty:{type:Boolean},error:{type:Boolean},errorMessages:{},errorCount:{},success:{type:Boolean},messages:{},immediateValidation:{type:Boolean},clearValue:{}},{...r1e,...n1e}),emits:["update:error","update:errorMessages","update:dirty","update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{valueComputed:i}=pn(n,r,"modelValue"),s=()=>{i.value=n.clearValue},o=()=>{},{computedError:a,computedErrorMessages:l,validate:c,isDirty:u,isLoading:d,isValid:f,resetValidation:h,validationAriaAttributes:p,listeners:g}=yo(n,r,{reset:s,focus:o,value:i}),m=A(()=>a.value?l.value:n.messages),v=A(()=>f.value?n.success?"success":"":"danger"),b=le(i.value);Yn(()=>{b.value=i.value});const y=()=>new Proxy(b,{get(E,T){return T==="ref"?b.value:Reflect.get(E,T)},set(E,T,_){return T==="ref"?(b.value=_,i.value=_,!0):Reflect.set(i,T,_)}});return(E,T)=>(V(),Te(C(wg),{"model-value":m.value,"has-error":!C(f),color:v.value},Er({default:we(({ariaAttributes:_,attrs:w})=>[se(E.$slots,"default",Ue(je({error:C(a),errorMessages:m.value,messages:m.value,validate:C(c),isDirty:C(u),isLoading:C(d),isValid:C(f),resetValidation:C(h),validationAriaAttributes:C(p),...C(g),value:y(),modelValue:y(),ariaAttributes:_,bind:{...w,..._,...C(g)}})))]),_:2},[vt(["message","messages"],_=>({name:_,fn:we(w=>[se(E.$slots,_,Ue(je(w)))])}))]),1032,["model-value","has-error","color"]))}}),s1e=mo(i1e),o1e=Object.freeze(Object.defineProperty({__proto__:null,VaAccordion:Epe,VaAffix:Ppe,VaAlert:Bpe,VaAppBar:$pe,VaAspectRatio:bD,VaAvatar:jm,VaAvatarGroup:Ype,VaBacktop:Qpe,VaBadge:AD,VaBreadcrumbs:bme,VaBreadcrumbsItem:yme,VaButton:Pt,VaButtonDropdown:xve,VaButtonGroup:Pg,VaButtonToggle:Sve,VaCard:Dve,VaCardActions:Ove,VaCardBlock:kve,VaCardContent:Lve,VaCardTitle:Ive,VaCarousel:oge,VaCheckbox:yh,VaChip:pge,VaCollapse:bge,VaColorIndicator:pS,VaColorInput:rye,VaColorPalette:oye,VaConfig:uh,VaContent:dye,VaCounter:bye,VaDataTable:v0e,VaDateInput:X0e,VaDatePicker:K0e,VaDivider:dN,VaDropdown:bi,VaDropdownContent:Nl,VaFallback:vu,VaFileUpload:Rbe,VaForm:Dbe,VaFormField:s1e,VaHover:um,VaIcon:St,VaImage:uS,VaInfiniteScroll:Ube,VaInnerLoading:sN,VaInput:vS,VaInputWrapper:oi,VaLayout:t_e,VaList:fN,VaListItem:Bg,VaListItemLabel:sbe,VaListItemSection:xu,VaListLabel:ibe,VaListSeparator:obe,VaMenu:t1e,VaMenuGroup:YSe,VaMenuItem:qSe,VaMenuList:Ug,VaMessageList:wg,VaModal:nS,VaNavbar:u_e,VaNavbarItem:d_e,VaOptionList:E_e,VaPagination:P_e,VaParallax:D_e,VaPopover:$_e,VaProgressBar:hN,VaProgressCircle:dh,VaRadio:_N,VaRating:K_e,VaScrollContainer:ESe,VaSelect:Txe,VaSeparator:ahe,VaSidebar:Vxe,VaSidebarItem:Xxe,VaSidebarItemContent:Wxe,VaSidebarItemTitle:jxe,VaSkeleton:Oxe,VaSkeletonGroup:kxe,VaSlider:rwe,VaSpacer:che,VaSplit:cwe,VaStepper:Pwe,VaSwitch:xN,VaTab:_we,VaTabs:vwe,VaTextarea:NSe,VaTimeInput:Kwe,VaTimePicker:iSe,VaTimeline:eSe,VaTimelineItem:rSe,VaToast:Zk,VaTreeView:xSe,VaValue:PSe,VaViewer:ASe,VaVirtualScroller:Dg},Symbol.toStringTag,{value:"Module"})),a1e=t=>typeof t=="function",Vo=(t,e,...n)=>{a1e(e)?t.use(e(...n)):t.use(e)},l1e=vo((t={})=>({install(e){const{config:n}=t;uA(e),Object.entries(o1e).forEach(([r,i])=>{e.component(r,i)}),Vo(e,dhe(n)),Vo(e,Afe),Vo(e,mhe(n)),Vo(e,bpe),Vo(e,yhe),Vo(e,Vhe),Vo(e,Bhe),Vo(e,gpe),uA(null)}})),IN=p3(eO);IN.use(C6).use(hY).use(Z7()).use(l1e());IN.mount("#app");
